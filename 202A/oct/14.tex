% !TEX root = ../notes.tex

\documentclass[../notes.tex]{subfiles}

\begin{document}

\section{October 14}

We will probably still have homework next week, despite the midterm.

\subsection{Countable Subadditivity}
Continuing our story from last time, we pick up the following definition.
The above result motivates the following definition.
\begin{definition}[Countably subadditive]
	Fix a set $X$ and a collection $\mc F\subseteq\mc P(X)$. A function $\mu\colon\mc F\to[0,\infty]$ is \textit{countably subadditive} if and only if
	\[E\subseteq\bigcup_{i=1}^\infty E_i\implies\mu(E)\le\sum_{i=1}^\infty\mu(E_i)\]
	for any $E\in\mc F$ and $\{E_i\}_{i=1}^\infty\subseteq\mc F$.
\end{definition}
\begin{lemma} \label{lem:premeas-is-countable-subadd}
	Fix a prering $\mc P$ on a set $X$, and let $\mu$ be a premeasure on $\mc P$. Then $\mu$ is countably subadditive.
\end{lemma}
\begin{proof}
	We repeat the proof of \autoref{lem:finitely-additive-is-subaddtive}, essentially verbatim, replacing the bound $m$ with $\infty$. Indeed, pick up any $E\in\mc P$ and some $\{F_j\}_{j=1}^\infty\subseteq\mc P$ with $E\subseteq\bigcup_{j=1}^\infty F_j$, and we want to show that
	\[\mu(E)\le\sum_{j=1}^\infty\mu(F_j).\]
	To begin, we note $E=\bigcup_{j=1}^\infty(E\cap F_j)$, so we note that it suffices for
	\[\mu(E)\le\sum_{k=1}^\infty\mu(E\cap F_j),\]
	which will finish because $\mu(E\cap F_j)\le\mu(F_j)$ for each $j$ by \autoref{lem:fin-additive-is-monotone}. Thus, we just replace each $F_j$ with $E\cap F_j$ so that $E=\bigcup_{j=1}^mF_j$.
	
	Next, we force the $F_j$ to be disjoint, using \autoref{lem:inductive-prering-subtract} to write
	\[H_j\coloneqq F_j\setminus\bigcup_{k=1}^{j-1}F_k=\bigsqcup_{k=1}^{n_j}G_{j,k}\]
	where the $G_{j,k}\subseteq H_j$ live in $\mc P$ and are pairwise disjoint for each fixed $j$. Now, we note that each $x\in E$ will live in some $F_j$ with least $j$, so $x\in H_j$ for this $j$, so the $H_j$ cover $E$.

	We now note that all the $G_{j,k}$ are disjoint. Indeed, if $x\in G_{j,k}\cap G_{j',k'}$, we see that $G_{j,k}\subseteq H_j$ and $G_{j',k'}\subseteq H_{j'}$, so $x\in H_j\subseteq H_{j'}$. If $j\ne j'$, say that $j<j'$ without loss of generality, so $x\in H_j\subseteq F_j$ while $x\in H_{j'}$ has $H_{j'}$ disjoint from $F_j$, so we have a contradiction. So instead we see $j=j'$, so $x\in G_{j,k}\cap G_{j,k'}$, and it follows that $k=k'$ because the $G_{j,\bullet}$ are disjoint.

	In total, we see that
	\[E=\bigsqcup_{j=1}^\infty\bigsqcup_{k=1}^{n_j}G_{j,k},\]
	so the finitely additive condition tells us that
	\[\mu(E)=\sum_{j=1}^m\sum_{k=1}^{n_k}G_{j,k}.\]
	However, we note that the $G_{j,k}$ are disjoint for any fixed $j$ and have $G_{j,k}\subseteq F_j$ for each $k$, so we see that
	\[\sum_{k=1}^{n_k}\mu(G_{j,k})\le\mu(F_j)\]
	for each $j$ by \autoref{lem:almost-subadditive}, so we conclude
	\[\mu(E)=\sum_{j=1}^\infty\sum_{k=1}^{n_k}G_{j,k}\le\sum_{j=1}^m\mu(F_j),\]
	which is what we wanted.
\end{proof}

\subsection{Hereditary Rings}
We continue trying to move from premeasures to measures. Our next step is to add in lots and lots of sets to our prering, which we will later filter out to get our actual measure.
\begin{definition}[{Hereditary $\sigma$-ring}]
	Fix a set $X$ and nonempty family $\mc F\subseteq\mc P(X)$. Then the \textit{hereditary $\sigma$-ring} $\mc H(F)$ generated by $\mc F$ consists of all subsets $E\subseteq X$ such that there exists a countable subcollection $\{F_i\}_{i=1}^\infty\subseteq\mc F$ such that
	\[E\subseteq\bigcup_{i=1}^\infty E_i.\]
\end{definition}
\begin{remark}
	Because $\mc F$ is nonempty, find some $E\in\mc F$. Then $\emp\subseteq E\subseteq X$ tells us that $\emp\in\mc H(\mc F)$.
\end{remark}
Here's a quick sanity check.
\begin{lemma} \label{lem:hf-is-sigma-ring}
	Fix a set $X$ and a family $\mc F\subseteq\mc P(X)$. Then $\mc H(\mc F)$ is a $\sigma$-ring.
\end{lemma}
\begin{proof}
	Here are our checks.
	\begin{itemize}
		\item Union: suppose $\{E_i\}_{i=1}^\infty\subseteq\mc H(\mc F)$. Then, for each $i$, we can write
		\[E_i=\bigcup_{j=1}^\infty F_{ij}\]
		where $F_{ij}\in\mc F$ for each $j$. So
		\[\bigcup_{i=1}^\infty E_i=\bigcup_{i=1}^\infty\bigcup_{j=1}^\infty F_{ij}\]
		shows that $\bigcup_{i=1}^\infty E_i$ is contained in a countable union of elements $F_{ij}\in\mc F$, so $\bigcup_{i=1}^\infty E_i\in\mc H(\mc F)$.
		\item Subtraction: suppose $E,F\in\mc H(\mc F)$. Indeed, we can write $E\subseteq\bigcup_{i=1}^\infty E_i$ for some $E_i\in\mc F$, so
		\[E\setminus F\subseteq E\subseteq\bigcup_{i=1}^\infty E_i\]
		has covered $E\setminus F$ by countably many elements $E_i$ of $\mc F$, so we conclude $E\setminus F\in\mc H(\mc F)$.
		\qedhere
	\end{itemize}
\end{proof}
\begin{example}
	Take $X=\RR$ and $\mc P$ the prering from \autoref{exe:leb-premeasure}. But now we see that
	\[\RR=\bigcup_{i\in\ZZ}[i,i+1),\]
	so any subset $E\subseteq\RR\subseteq\bigcup_{i\in\ZZ}[i,i+1)$ is contained in a countable union of elements from $\mc P$. Thus, $\mc H(\mc P)=\mc P(\RR)$.
\end{example}
\begin{example}
	Fix a set $X$ and $\mc P$ the prering of finite set of $X$. Then any set in $\mc H(\mc P)$ is countable as contained in a countable union of finite sets, and conversely any countable subset $E\subseteq X$ can write
	\[E=\bigcup_{x\in E}\{x\}\]
	to show that $E$ is covered by countably many finite sets $\{x\}\in\mc P$. Thus, $\mc H(\mc P)$ contains exactly the countable subsets of $X$.
\end{example}
It might feel like taking all the subsets of $\RR$ makes us too big, but there are measures here anyway.
\begin{example}
	Fix a set $X$ and an element $x\in X$. Then we define the measure $\delta_x\colon\mc P(X)\to[0,\infty]$ by
	\[\delta_x(E)\coloneqq\begin{cases}
		1 & x\in E, \\
		0 & x\notin E.
	\end{cases}\]
	To see that this is a measure, fix disjoint $\{E_i\}_{i=1}^\infty$, and set $E\coloneqq\bigsqcup_{i=1}^\infty E_i$. We have two cases.
	\begin{itemize}
		\item If $x\notin E_i$ for each $i$, then $x\notin E$, so $\delta_x(E)=0=\sum_{i=1}^\infty\delta_x(E_i)$.
		\item If $x\in E_{i_0}$ for some $i_0$, then note $x\in E_i$ for exactly one $i$ because the $E_i$ are disjoint. Also, $x\in E$ because $E_{i_0}\subseteq E$, so $\delta_x(E)=1=\delta_x(E_{i_0})=\sum_{i=0}^\infty\mu(E_i)$.
	\end{itemize}
\end{example}
The term ``hereditary'' comes from the following definition.
\begin{definition}[Hereditary]
	Fix a set $X$ and nonempty family $\mc G\subseteq\mc P(X)$. Then $\mc G$ is \textit{hereditary} if and only if $A\in\mc G$ and $A'\subseteq A$ implies $A'\in\mc G$.
\end{definition}
\begin{ex} \label{ex:hf-is-hered}
	Indeed, given a collection $\mc F\subseteq\mc P(X)$, we can see that $\mc H(\mc F)$ is hereditary. To see this, note $E\in\mc H(\mc F)$ can be contained as $E\subseteq\bigcup_{i=1}^\infty E_i$ for some $\{E_i\}_{i=1}^\infty\subseteq\mc F$, but then any $E'\subseteq E$ has
	\[E'\subseteq E\subseteq\bigcup_{i=1}^\infty E_i,\]
	so $E'$ is covered by a countable union of elements of $\mc F$, so $E'\in\mc H(\mc F)$.
\end{ex}
\begin{remark} \label{rem:hered-intersections}
	Note that the intersection of hereditary rings is still hereditary. Indeed, fixing our set $X$ for hereditary rings $\{\mc H_\alpha\}_{\alpha\in\lambda}$ of $X$, we need to show
	\[\mc H\coloneqq\bigcap_{\alpha\in\lambda}\mc H_\alpha\]
	is still hereditary. Well, for any $E\in\mc H$ and $E'\subseteq E$, we see $E\in\mc H_\alpha$ for each $\alpha\in\lambda$, so $E'\subseteq E$ forces $E'\in\mc H_\alpha$ for each $\alpha\in\lambda$, so actually $E'\in\mc H$.
\end{remark}
\begin{remark}
	Thus, we can see that the hereditary $\sigma$-ring $\mc H(\mc F)$ generated by a family $\mc F\subseteq\mc P(X)$ is in fact the smallest hereditary $\sigma$-ring $\mc H$ containing $\mc F$, where $\mc H$ is the intersection of all the hereditary $\sigma$-rings containing $\mc F$. (Note $\mc H$ is hereditary by \autoref{rem:hered-intersections} and a $\sigma$-ring by \autoref{lem:intersect-rings}.)
	\begin{itemize}
		\item Certainly $\mc H(\mc F)$ is a $\sigma$-ring by \autoref{lem:hf-is-sigma-ring}, and $\mc H(\mc F)$ is hereditary by \autoref{ex:hf-is-hered}, so $\mc H\subseteq\mc H(\mc F)$.
		\item Conversely, any $E\in\mc H(\mc F)$ is contained in some countable union as $E\subseteq\bigcup_{i=1}^\infty E_i$ where $\{E_i\}_{i=1}^\infty\subseteq\mc F$. But then $E_i\in\mc H$ for each $i$, so $\bigcup_{i=1}^\infty E_i\in\mc H$ because $\mc H$ is a $\sigma$-ring, so $E\in\mc H$ because $\mc H$ is hereditary.
	\end{itemize}
\end{remark}

\subsection{Outer Measure}
We now have the following construction.
\begin{notation}
	Fix a set $X$ and nonempty family $\mc F\subseteq\mc P(X)$. Then give $\mu\colon\mc F\to[0,\infty]$, we will define $\mu^*\colon\mc H(\mc F)\to[0,\infty]$ by
	\[\mu^*(E)\coloneqq\inf\Bigg\{\sum_{i=1}^\infty\mu(E_i):\{E_i\}_{i=1}^\infty\subseteq\mc F\text{ and }E\subseteq\bigcup_{i=1}^\infty E_i\Bigg\}.\]
\end{notation}
\begin{remark}
	Note that $E\in\mc H(\mc F)$ tells us that the set we are taking the infimum of is in fact nonempty because $E\in\mc H(\mc F)$ is contained in some countable collection of elements from $\mc F$. And in fact, for any subcollection $\{E_i\}_{i=1}^\infty\subseteq\mc F$ covering $E\in\mc H(\mc F)$, we see that
	\[\sum_{i=1}^\infty\mu(E_i)\ge0\]
	by definition of $\mu$, so $\mu^*(E)\ge0$ for any $E\in\mc H(\mc F)$.
\end{remark}
Here are some quick facts.
\begin{lemma} \label{lem:hered-measure-facts}
	Fix a set $X$ and nonempty family $\mc F\subseteq\mc P(X)$. Further, fix some $\mu\colon\mc F\to[0,\infty]$. Then we have the following.
	\begin{listalph}
		\item $\mu^*(E)\le\mu(E)$ for any $E\in\mc F$.
		\item $\mu^*$ is monotone.
		\item $\mu^*$ is countably subadditive.
	\end{listalph}
\end{lemma}
\begin{proof}
	Here we go.
	\begin{listalph}
		\item Note that $\{E\}\subseteq\mc F$ covers $E$, so $\mu^*(E)\le\mu(E)$ follows.
		\item Suppose $E\subseteq F$ with $E,F\in\mc H(\mc F)$. We need to show $\mu^*(E)\le\mu^*(F)$; certainly, if $\mu^*(F)=\infty$, then there is nothing to say. Otherwise, pick up any $\varepsilon>0$, and we show
		\[\mu^*(E)\le\mu^*(F)+\varepsilon,\]
		which will be enough upon sending $\varepsilon\to0^+$.

		Now, the definition of $\mu^*(F)$ as an infimum promises some countable subcollection $\{F_i\}_{i=1}^\infty\subseteq\mc F$ covering $F$ such that
		\[\sum_{i=1}^\infty\mu(F_i)<\mu^*(F)+\varepsilon.\]
		But now $E\subseteq F\subseteq\bigcup_{i=1}^\infty F_i$, so the definition of $\mu^*$ lets us conclude
		\[\mu^*(E)\le\sum_{i=1}^\infty\mu(F_i)<\mu^*(F)+\varepsilon,\]
		which finishes because we may now take $\varepsilon\to0^+$.
		\item This requires some effort. Suppose that $A\in\mc H(\mc F)$ and some $\{B_i\}_{i=1}^\infty\subseteq\mc H(\mc F)$ covering $A$. We need to show that
		\[\mu^*(A)\le\sum_{i=1}^\infty\mu^*(B_i).\]
		Well, fix any $\varepsilon>0$, and we will actually show that
		\[\mu^*(A)\le\varepsilon+\sum_{i=1}^\infty\mu^*(B_i),\]
		which will be enough upon sending $\varepsilon\to0^+$. Certainly if $\mu^*(B_i)$ is infinite for any $i$, then there is nothing to say. Otherwise, each $\mu^*(B_i)$ is finite, so we may use the definition of $\mu^*$ as an infimum to find some countably subcollection $\{E_{ij}\}_{j=1}^\infty$ such that
		\[B_i\subseteq\bigcup_{j=1}^\infty E_{ij}\qquad\text{and}\qquad\sum_{j=1}^\infty\mu(E_{ij})\le\mu^*(B_i)+\frac{\varepsilon}{2^i}\]
		because $\varepsilon/2^i>0$ always. It follows that
		\[A\subseteq\bigcup_{i=1}^\infty B_i\subseteq\bigcup_{i=1}^\infty\bigcup_{j=1}^\infty E_{ij},\]
		so the definition of $\mu^*$ lets us say
		\[\mu^*(A)\le\sum_{i=1}^\infty\sum_{j=1}^\infty\mu(E_{ij})\le\sum_{i=1}^\infty\Bigg(\frac{\varepsilon}{2^i}+\mu^*(B_i)\Bigg)=\varepsilon+\sum_{i=1}^\infty\mu^*(B_i),\]
		which is what we wanted.
		\qedhere
	\end{listalph}
\end{proof}
It seems somewhat frustrating that we don't get equality in part (a) of \autoref{lem:hered-measure-facts}, but we need a few more adjectives to make the proof go through.
\begin{lemma} \label{lem:hered-measure-extends}
	Fix a set $X$ and a nonempty family $\mc F\subseteq\mc P(X)$ on $X$. Given a premeasure $\mu$ on $\mc P$, we have $\mu^*(E)=\mu(E)$ for any $E\in\mc F$.
\end{lemma}
\begin{proof}
	Fix some $E\in\mc F$. Note that $\mu^*(E)\le\mu(E)$ already from \autoref{lem:hered-measure-facts}, so we just need the other inequality. Well, for any cover
	\[E\subseteq\bigcup_{i=1}^\infty E_i,\]
	where $\{E_i\}_{i=1}^\infty\subseteq\mc F$, countable subadditivity tells us that
	\[\mu(E)\le\sum_{i=1}^\infty\mu(E_i)\]
	by \autoref{lem:premeas-is-countable-subadd}. Thus, $\mu(E)\le\mu^*(E)$, which is what we wanted.
\end{proof}
% \begin{remark}
% 	The hypothesis that $\mu$ takes finite values somewhere is necessary: if $\mu(F)=\infty$ for all $F\in\mc F$, then $E\in\mc H(\mc F)$ with any cover $E\subseteq\bigcup_{i=1}^\infty E_i$ such that $\{E_i\}_{i=1}^\infty$ will have $\sum_{i=1}^\infty\mu(E_i)=\infty$ always. Thus, $\mu(E)=\infty$.
% \end{remark}
The above results motivate the following definition.
\begin{definition}[Outer measure]
	Fix a set $X$ and a hereditary $\sigma$-ring $\mc H$. An \textit{outer measure} is a function $\mu^*\colon\mc H\to[0,\infty]$ which is monotone and countably subadditive.
\end{definition}
\begin{example} \label{ex:hered-measure-is-outer}
	From \autoref{lem:hered-measure-facts}, we note that if $\mu$ is a premeasure on a prering $\mc P$, then $\mu^*$ is an outer measure on the hereditary $\sigma$-ring $\mc H(\mc P)$.
\end{example}

\end{document}