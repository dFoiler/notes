% !TEX root = ../notes.tex

\documentclass[../notes.tex]{subfiles}

\begin{document}

\section{November 7}

We continue.

\subsection{Types of Theories}
Let's move from types of models $\mathcal M$ to types of theories $T$.
\begin{definition}[type]
	Fix an $\mathcal L$-theory $T$. Then an \textit{$n$-type} is a set $P$ of $\mathcal L$-formulae with $n$ free variables such that $P\cup T$ is satisfiable. A type is \textit{complete} if $\varphi\in P$ or $\lnot\varphi\in P$ for each $\mathcal L$-formula $\varphi$ with $n$ free variables. We let $S_n(T)$ denote the set of complete $n$-types.
\end{definition}
\begin{example}
	For an $\mathcal L$-structure $\mathcal M$, we have
	\[S_n(\op{Th}\mathcal M)=S_n^{\mathcal M}(\emp).\]
\end{example}
The main content here is that we are allowing $T$ to not be complete. Note that $S_n(T)$ has a topology given by the basic open sets
\[[\varphi]\coloneqq\{P\in S_n(T):\varphi\in P\}.\]
The checks on this topology are the same as when $T$ is complete; namely, we have defined basis as in \Cref{lem:stone-is-basis}, and it is totally disconnected as in \Cref{prop:stone-tot-disc}, and it is compact as in \Cref{thm:stone-compact}.

We are also able to provide definitions motivated by this topology.
\begin{definition}[isolated]
	Fix an $\mathcal L$-theory $T$. Then a complete $n$-type $P$ is \textit{isolated} if and only if there is an $\mathcal L$-formula $\varphi$ with $n$ free variables such that $\{P\}=[\varphi]$.
\end{definition}
\begin{remark}
	The argument of \Cref{prop:how-to-isolated-type} generalizes immediately to show that the following are equivalent for a complete $n$-type $P$ and $\mathcal L$-formula $\varphi$ with $n$ free variables.
	\begin{listalph}
		\item $P$ is isolated with $\{P\}=[\varphi]$.
		\item There is an $\mathcal L$-formula $\varphi\in P$ such that, for any other $\mathcal L$-formula $\psi$, we have $\psi\in P$ if and only if $T\models(\varphi\to\psi)$.
	\end{listalph}
	As before, the main input is to show that $[\varphi]\subseteq[\psi]$ if and only if $T\models(\varphi\to\psi)$, and the proof of this is quite similar.
\end{remark}
So we take the above remark as providing our definition of isolated types.
\begin{definition}[isolated]
	Fix an $\mathcal L$-theory $T$. Then an $n$-type $P$ is \textit{isolated} if and only if there is an $\mathcal L$-formula $\varphi$ such that $T\cup\varphi$ is satisfiable and the following holds: for any other $\mathcal L$-formula $\psi$, we have $\psi\in P$ if and only if $T\models(\varphi\to\psi)$.
\end{definition}
We can also use topology to define a notion of density.
\begin{definition}[dense]
	Fix an $\mathcal L$-theory $T$. Then a set $X$ of complete $n$-types is \textit{dense} if and only if $X$ intersects each nonempty basic open set of $S_n(T)$. In other words, for each $\mathcal L$-formula $\varphi$ with $n$ free variables such that $T\cup\{\varphi\}$ is satisfiable, there is a complete $n$-type $P\in X$ such that $\varphi\in P$.
\end{definition}
\begin{example}
	The set $S_n(T)\subseteq S_n(T)$ is dense.
\end{example}
\begin{example}
	Suppose $T=\op{Th}\mathcal M$ for some $\mathcal L$-structure $\mathcal M$. Then the set
	\[X\coloneqq\left\{P\in S_n^{\mathcal M}(\emp):P\text{ is realized in }\mathcal M\right\}\]
	is dense in $S_n(T)$. Indeed, suppose $\varphi$ is an $\mathcal L$-formula with $n$ free variables such that $T\cup\{\varphi\}$ is satisfiable. But $T=\op{Th}\mathcal M$ is complete, so $\mathcal M\models\exists\overline x\,\varphi(\overline x)$, so we may find $\overline a\in M$ such that $\mathcal M\models\varphi(\overline a)$. Thus, $\op{tp}^{\mathcal M}(\overline a)\in X$ contains $\varphi$, as needed.
\end{example}
\begin{remark}
	Let $T$ be an $\mathcal L$-theory. If $P$ is a complete isolated $n$-type, and $X\subseteq S_n(T)$ is dense, then we claim $P\in X$. Indeed, write $\{P\}=[\varphi]$
\end{remark}
Professor Montalban recommends reading types of discrete linear orders and of algebraically closed fields to understand what is going on. Here is a taste for the sort of thing one can show.
\begin{proposition}
	Fix a discrete linear order $(\mathcal M,<)$, and let $A\subseteq M$ be a subset. Then the types in $S_1^{\mathcal M}(A)$ which are not realized in $A$ correspond to a cut $(L,U)$ of $A$. (Here, $L\cup U=A$ and $L$ is closed downwards and $U$ is closed upwards.)
\end{proposition}
\begin{proof}[Sketch]
	The point is that every formula in a complete $n$-type is equivalent to a quantifier-free formula, which amounts to requiring some list of satisfiable inequalities. These lists of inequalities amount to a cut.
\end{proof}
\begin{proposition}
	Fix a discrete linear order $(\mathcal M,<)$, and let $A\subseteq M$ be a subset. Then a complete $1$-type $P\in S_1^{\mathcal M}(A)$ not realized in $A$ corresponding to the cut $(L,U)$ of $A$ fails to be isolated if and only if $L$ fails to have a maximum or $U$ fails to have a minimum.
\end{proposition}
Notably, if $L=\emp$ or $U=\emp$, then $P$ remains isolated.
\begin{proof}[Sketch]
	The point here is that we need to be determined by a single inequality. Being ``above $L$ and below $U$'' being encoded into a single formula requires that $L$ or $U$ contain their supremum or infimum (respectively).
\end{proof}

\subsection{Type Omitting}
Here is our theorem.
\begin{theorem}[Type omitting] \label{thm:omit}
	Fix a countable language $\mathcal L$, and let $T$ be an $\mathcal L$-theory. Further, let $P$ be an $n$-type which is not isolated. Then there is a countable model $\mathcal M\models T$ which omits $P$.
\end{theorem}
The ``non-isolated'' hypothesis on $P$ is necessary: for example, if $T=\op{Th}(\NN,0,s)$, then the type of $0$ is always realized, which is notably an isolated type. More generally, isolated types are always realized by \Cref{prop:isolated-is-realized}. \Cref{thm:omit} above is the converse.
\begin{proof}[Proof of \Cref{thm:omit}]
	We do a Henkin construction. Namely, we use an argument like \Cref{lem:extend-for-complete} to expand our language to $\mathcal L^*$ by adding in new constant symbols $\mathcal C$ to our language, and then we extend $T$ to an $\mathcal L^*$-theory $T^*$ to be complete (and satisfiable) and have witnesses. We will also arrange our construction so that each tuple $(c_1,\ldots,c_n)\in\mathcal C^n$ has some $\varphi\in P$ such that $\lnot\varphi(c_1,\ldots,c_n)$ is in $T^*$. Then the construction of \Cref{lem:last-compactness-lemma} produces the needed model $\mathcal M$ whose universe is $\mathcal C$ modded out by some equivalence relation dictated by $T^*$. Namely, having $\lnot\varphi(c_1,\ldots,c_n)$ in $T$ implies that $P$ is omitted because the universe of $\mathcal M$ arises exactly from $\mathcal C$.

	We will construct $T^*$ to be $T\cup\{\theta_0,\theta_1,\ldots\}$ by adding one sentence at a time; by compactness, the satisfiability of $T^*$ follows from the satisfiable at each finite step. (Technically, we will eventually have $T^*\models\varphi$ or $T^*\models\lnot\varphi$ for each $\varphi$ at the end of the construction.) We will also require that $T\models(\theta_{n+1}\to\theta_n)$ for each $n$, for psychological reasons. For convenience, we will also need the following enumerations.
	\begin{itemize}
		\item Let $\{\varphi_n:n\in\omega\}$ be an enumeration of all $\mathcal L^*$-sentences.
		\item Let $\left\{\psi_n(x):n\in\omega\right\}$ be an enumeration of $\mathcal L^*$-formulae with one free variable.
		\item Enumerate the $n$-tuples $\overline c$ of constants in $\mathcal C$.
	\end{itemize}
	We now proceed in steps.
	\begin{enumerate}
		\setcounter{enumi}{-1}
		\item On step $s=0$, we let $\theta_0$ be the sentence $\forall x(x=x)$, which is always true.
		\item On steps which are $s+1=3i+1$, we deal with completeness. Here, let $\theta_{s+1}$ be either $\theta_s\land\varphi_i$ or $\theta_s\land\lnot\varphi_i$, one of which we know is going to be satisfiable with $T$.
		\item On steps which are $s+2=3i+2$, we deal with witnesses. Here, we choose a constant $c\in\mathcal C$ not in $\theta_s$, and we let $\theta_{s+1}$ be the sentence
		\[\theta_{s}\land\left(\exists x\,\psi_i(x)\to\psi_i(c)\right),\]
		which continues to satisfiable by interpreting $c$ to be the needed witness to $\exists x\,\psi_i(x)$ (if it exists) in a model of $\theta_s$.
		\item On steps which are $s+3=3i+3$, we deal with omitting $P$. Let $\overline c$ be the $i$th $n$-tuple of constants in $\mathcal C$. We would like to find some $\varphi(\overline x)$ in $P$ such that $T\cup\{\theta_s\land\lnot\varphi(\overline c)\}$ is satisfiable.
		
		The point is to contradict the fact that $P$ is not isolated. Write $\theta_s$ as $\theta(\overline d,\overline c)$ where $\overline d$ are the constants which appear in $\theta_s$ despite not appearing in $\overline c$. By the satisfiability of $T\cup\{\theta_s\}$, we see that $T\cup\{\exists\overline y\exists\overline x\,\theta(\overline y,\overline x)\}$. But because $P$ is not isolated, there is $\varphi\in P$ such that $T$ does not prove $\forall\overline y\exists\overline x\,(\theta(\overline y,\overline x)\to\varphi(\overline x))$. Thus, there is a model $\mathcal M$ of $T$ such that all $\overline a\in M$ have some $\overline b\in M$ with
		\[\mathcal M\models(\theta(\overline b,\overline a)\land\lnot\varphi(\overline a)).\]
		Interpreting constants in $(\overline d,\overline c)$ as in $(\overline b,\overline a)$, we have shown that $T\cup\{\theta_s\land\lnot\varphi(\overline c)\}$ is satisfiable by $\mathcal M$, as required.
		\qedhere
	\end{enumerate}
\end{proof}

\end{document}