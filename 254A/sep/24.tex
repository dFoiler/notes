\documentclass[../notes.tex]{subfiles}

\begin{document}

% !TEX root = ../notes.tex














From last time, we have $K$ a number field, and we had the following diagram.
\[\begin{tikzcd}
	{\mathcal O_K} & S & H \\
	{K^\times} & {K_{\mathbb R}^\times} & {(\prod_\tau\mathbb R)^F} \\
	{\mathbb Q^\times} & {\mathbb R^\times} & {\mathbb R}
	\arrow["j", from=2-1, to=2-2]
	\arrow["\ell", from=2-2, to=2-3]
	\arrow["{\operatorname N_{\mathbb Q}^K}"', from=2-1, to=3-1]
	\arrow["{\operatorname N}"', from=2-2, to=3-2]
	\arrow[hook, from=3-1, to=3-2]
	\arrow["{\operatorname{Tr}}", from=2-3, to=3-3]
	\arrow["{z\mapsto-\log|z|}", from=3-2, to=3-3]
	\arrow["\subseteq"{description}, draw=none, from=1-1, to=2-1]
	\arrow["\subseteq"{description}, draw=none, from=1-2, to=2-2]
	\arrow["\subseteq"{description}, draw=none, from=1-3, to=2-3]
	\arrow["\lambda"{description}, curve={height=-12pt}, dashed, from=1-1, to=1-3]
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-2, to=1-3]
\end{tikzcd}\]

\subsection{Talking Units}
We also recall that we had the following lemma.
\begin{lemma}
    For any given $a\in\ZZ,$ there are only finitely many $\alpha\in\mathcal O_K$ such that $\op N_\QQ^K(\alpha)=a,$ up to multiplication by a unit.
\end{lemma}
In fact, from the proof we can take the slightly stronger version with the absolute value.
\begin{lemma}
    For any given $a\in\ZZ,$ there are only finitely many $\alpha\in\mathcal O_K$ such that $\left|\op N_\QQ^K(\alpha)\right|=a,$ up to multiplication by a unit.
\end{lemma}
\begin{proof}
    Use the same proof as before.
\end{proof}
Anyways, we continue with the lemmas.
\begin{lemma} \label{lem:makecols}
    For every $\tau_0:K\to\CC,$ there is a unit $\alpha\in\mathcal O_K^\times$ such that $|\tau u|<1$ for each $\tau\notin\{\tau_0,\overline{\tau_0}\}.$
\end{lemma}
The idea here is that $\alpha$ must have large $\tau_0$ and $\overline{\tau_0}$ component but small component at all other embeddings.
\begin{proof}
    We construct an infinite sequence
    \[\alpha_0,\alpha_1,\ldots\]
    with norm $\left|\op N_\QQ^K\alpha_\bullet\right|\le\left(\frac2\pi\right)\sqrt{|d_K|}=:A$ while $|\tau\alpha_{k+1}|<|\tau\alpha_k|$ for each $\tau\notin\{\tau_0,\overline{\tau_0}\}.$

    Indeed, we do induction. We start with $\alpha_0:=1\le A.$\footnote{$A\ge1$ from the class number stuff; namely, $A$ served as an upper bound for the ideal class number, and there is at least one ideal class.} Then, given $\alpha_k,$ we choose any
    \[c_\tau\in(0,|\tau\alpha_k|)\]
    for each $\tau\notin\{\tau_0,\overline{\tau_0}\}$; we also force $c_\tau=c_{\overline\tau}.$ It remains to choose
    \[c_{\tau_0}=c_{\overline{\tau_0}}>0,\]
    which we choose large enough so that $\prod_\tau c_\tau=A.$ Then Minkowski theory\todo{wut} provides us with an $\alpha_{k+1}\in\mathcal O_K\setminus\{0\}$ such that
    \[|\tau\alpha_{k+1}|<c_\tau.\]
    Now, to finish the proof, by the previous lemma, these $\alpha_\bullet$ lie in finitely many multiplicative cosets of $\mathcal O_K/\mathcal O_K^\times$ (they all have norm less than or equal to $A$), so there are $m>n\ge0$ such that $\alpha_m/\alpha_n\in\mathcal O_K^\times.$ This is what we wanted because
    \[|\tau(\alpha_m/\alpha_n)|<1\]
    by construction of our sequence.
\end{proof}
\begin{remark}
    There are some nice pictures associated with drawing the trace-zero hyperplane in $\RR^{r+s}.$ I won't TeX these because I cannot be bothered.
\end{remark}
Now, when we look at the trace-$0$ hyperplane, our chosen elements above have one positive sign after taking $\log$ while the other ones are negative. Geometrically, these look like good candidates as a basis for our hyperplane.
\begin{lemma} \label{lem:matrixrank}
    Fix $m$ a positive integer with $A\in\RR^{m\times m}$ an $m\times m$ matrix. We assume the following.
    \begin{enumerate}[label=(\roman*)]
        \item All the row sums of $A$ vanish.
        \item All entries off the main diagonal are negative.
    \end{enumerate}
    Then it follows that $\dim\im A=m-1.$
\end{lemma}
Note that this mirrors what is going on with our previous lemma: one given coordinate of our $\alpha$ units is positive, and the rest are negative.
\begin{example}
    With $m=1,$ $A$ has to be the zero matrix by (i). This is fine.
\end{example}
\begin{proof}
    Label $A$ by
    \[A=\begin{bmatrix}
        | & & | \\
        v_1 & \cdots v_n | \\
        1 & & |
    \end{bmatrix}\]
    Note that $\langle1,\ldots,1\rangle\in\ker A,$ so $A$ is singular, so $\dim\im A\le m-1.$

    Now suppose for the sake of contradiction $\dim\im A\le m-2$ so that there is an vector $\langle a_1,\ldots,a_m\rangle\in\ker A\setminus\RR\langle1,\ldots,1\rangle.$ Namely,
    \[\sum_{k=1}^ma_kv_k=0,\]
    where not all the $a_\bullet$ are zero. Without loss of generality, take $a_1$ the smallest; otherwise, if $a_k>a_1,$ then we can swap the $k$th row and column with the first row and column.

    From this it follows that
    \[0=\sum_{k=1}^ma_kv_k-a_1\sum_{k=1}^mv_k=\sum_{k=1}^m(a_k-a_1)v_k,\tag{$*$}\]
    which is not a linear combination of the $v_\bullet$ where all the terms are nonnegative, and the $v_1$ term has vanished. However, not all the $a_k$ are equal, so one of the $a_k-a_1$ will not vanish. It follows that $(*)$ has a negative term in it which doesn't vanish, and the entire sum will thus be negative.
\end{proof}
We now get the following theorem.
\begin{theorem}
    We have that $\Gamma$ is a complete lattice in $H.$
\end{theorem}
\begin{proof}
    Let $m=r+s,$ and let $A$ be the real $m\times m$ matrix, whose columns are populated by the negative embeddings of the units from \autoref{lem:makecols} in sequence. (We are taking the negative because $\lambda$ in our diagram has a $-\log$ involved.) Then $A$ satisfies the conditions of \autoref{lem:matrixrank}, and we are done because the rank of $H$ is also $r+s-1.$ (The column sums are $0$ because out units have norm $\pm1,$ which go to $0$ after logging.)
\end{proof}

\subsection{Dirichlet's Unit Theorem}
We are now ready for the finish of all our hard work.
\begin{theorem}
    We have that $\mathcal O_K^\times\cong\mu(K)\times\ZZ^{r+s-1}$ as an abstract group.
\end{theorem}
\begin{remark}
    In fact, we have shown that $\mu(K)$ is finite, from which it follows $\mu(K)$ is cyclic because it is a finite multiplicative group of a field.
\end{remark}
\begin{proof}
    We use the fact that $\Gamma=\lambda(\mathcal O_K^\times)$ is a complete lattice, which implies from $H\cong\RR^{r+s-1}$ that $\Gamma\cong\ZZ^{r+s-1}.$ Then, using $\lambda$ gives us a short exact sequence of abelian groups
    \[1\to\mu(K)\to\mathcal O_K^\times\to\ZZ^{r+s-1}\to0.\]
    This short exact sequence splits by tracking the basis of $\ZZ^{r+s-1}$ back into $\mathcal O_K^\times,$ which is good enough because we live in the category of $\ZZ$-modules.
\end{proof}
This gives the following definitions.
\begin{definition}[Fundamental units]
    A \textit{system of fundamental units} of $K$ is a sequence of units we name $\varepsilon_1,\varepsilon_2,\ldots,\varepsilon_{r+s-1}$ whose image in $\Gamma$ are a basis for $\Gamma.$
\end{definition}
\begin{definition}[Regulator]
    The regulator $R_K$ of $K$ is the absolute value of the determinant of any $(r+s-1)\times(r+s-1)$ minor of the $(r+s-1)\times(r+s)$ matrix
    \[\begin{bmatrix}
        -\log|\rho_1\varepsilon_1| & \cdots & -\log|\rho_r\varepsilon_1| & -\log|\sigma_1\varepsilon_1|^2 & \cdots & -\log|\sigma_s\varepsilon_1|^2 \\
        \vdots & \ddots & \vdots & \vdots & \ddots & \vdots \\
        -\log|\rho_1\varepsilon_{r+s}| & \cdots & -\log|\rho_r\varepsilon_{r+s}| & -\log|\sigma_1\varepsilon_{r+s}|^2 & \cdots & -\log|\sigma_s\varepsilon_{r+s}|^2 \\
    \end{bmatrix}\]
\end{definition}
Note that the regulator is well-defined because (1) multiplying by a root of unity does change the magnitude of the units, and (2) the basis doesn't matter by doing some row operations, and (3) the minor doesn't matter because the sum of the column vectors is $0.$\footnote{For (3), the explicit way to see this is to add a column of $1$s on the left matrix and do expansion by minors after adding all rows to the top row, effectively killing; this column is orthogonal to the rest of the vectors, so the next proposition follows by projecting.}

We end with one more result.
\begin{proposition}
    The covolume of $\Gamma$ in $H$ is $\sqrt{r+s}R.$
\end{proposition}
\begin{proof}
    Project $\Gamma$ onto any particular coordinate plane, which give covolume $R.$ Then we notice that doing the same for $H$ causes the volume to shrink by $\sqrt{r+s}$ because, for example,
    \[(r+s-1,1,\ldots,1)\in H\]
    will shrink to a length of $\sqrt{(r+s-1)^2+(r+s-1)}$ while being projected to a length of $\sqrt{r+s-1}$ upon killing the first coordinate. Namely, our shrinking factor from this vector is $\sqrt{r+s},$ which dictates the shrinking of the entire hyperplane for some reason.\todo{}
\end{proof}

\end{document}