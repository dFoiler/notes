% !TEX root = ../notes.tex

















The fun continues.

\subsection{Riemann--Roch}
As before, take $X$ beo a compact Riemann surface, and we defined
\[\op{Div}(X):=\ZZ^{\oplus X}.\]
Elements of $\op{Div}(X)$ are called \textit{divisors}, notated by
\[\sum_{p\in X}n_pp.\]
We have the following definition.
\begin{definition}[Degree]
	Fix $X$ a compact Riemann surface. The \textit{degree} of a divisor $D=\sum_pn_pp$ is
	\[\deg D:=\sum_pn_p.\]
\end{definition}
Note that
\[\deg:\op{Div}(X)\to\ZZ\]
is a homomorphism, well-defined because all but finitely many of the coordinates of $\op{Div}(X)$ vanish. We also define
\[H^0(X,\mathcal O(D)):=\{f\in\mathcal K(X):\op{ord}_pf\ge-n_p\text{ for each }p\in X\},\]
which is a finite-dimensional $\CC$-vector space. Here the $-$ in $-n_p$ is present in order to expand the set when $n_p$ increases.

The Riemann--Roch theorem gives us a little information on the dimension of $H^0(X,\mathcal O(D))$ in terms of $\deg D.$
\begin{theorem}[Riemann--Roch]
	Fix $X$ a compact Riemann surface. There exists a canonical divisor class $K$ such that
	\[\dim H^0(X,\mathcal O(D))-\dim H^0(X,\mathcal O(K-D))=\deg D+1-g,\]
	where $g$ is the genus of $X.$
\end{theorem}
We will not prove this because it will take us a bit far afield.

For number fields, we have the following.
\begin{defi}[\texorpdfstring{$H^0(\op{Spec}\mathcal O_K,\mathcal O(D))$}{}]
	Fix $K$ a number field and $D=\sum_{\mf p\in M_K}\nu_\mf p\mf p\in\overline{\op{Div}}(\mathcal O_K)$ a divisor. Then we define
	\[H^0(\op{Spec}\mathcal O_K,\mathcal O(D))=\left\{x\in K:\lVert x\rVert_\mf p\le\op N(\mf p)^{\nu_\mf p}\text{ for each }\mf p\in M_O\right\}.\]
	This is a finite set.
\end{defi}
Note that we can equivalently write the above as
\[\left\{x\in\prod_{\mf p\in M_K^\circ}\mf p^{-\nu_\mf p}:\lVert x\rVert_v\le e^{\nu_v}\text{ for each }v\in M_K^\infty\right\},\]
which is a bounded region of a lattice in Minkowski space, so indeed this set is finite. I cannot really be bothered to check that all the signs go through, but they are supposed to; one can sanity-check that larger values of $\nu_\mf p$ will give a larger set.

Minkowski's theorem on lattices is able to force large $\deg D$ to have
\[H^0(\op{Spec}\mathcal O_K,\mathcal O(D))\ne\{0\}\]
by placing a lattice point in our lattice. We also remark that $\deg D<0$ will force $H^0(\op{Spec}\mathcal O_K,\mathcal O(D))=\{0\}$ by the product formula.
\begin{remark}
	One can imagine using something akin to the Gauss circle problem to get an asymptotic for $H^0(\op{Spec}\mathcal O_K,\mathcal O(D)).$ We will not do this because I don't know what's happening anymore.
\end{remark}

\subsection{The Different Ideal}
Let's go back to doing algebraic number theory. Fix an $AKLB$ set-up with $L/K$ separable with separable residue field extensions. The separability of $L/K$ tells us that $\op T^L_K$ is nonzero (and in fact this is equivalent), so the corresponding symmetric bilinear form $\langle\alpha,\beta\rangle\mapsto\op T^L_K(\alpha\beta)$ is nonzero.

To define the relative discriminant, we have the following definition.
\begin{definition}[Dual module]
	Fix $\mf b$ a finitely generated full $A$-submodule of $L.$ (Most of the time we will take $\mf b$ to be a fractional ideal.) Then we define the \textit{dual module of $\mf b$} by
	\[\mf b^*:=\left\{x\in L:\op T^L_K(x\mf b)\subseteq A\right\}.\]
\end{definition}
We pick up the following lemma.
\begin{lemma}
	Fix $\mf b$ a (nonzero) fractional ideal of $L,$ then $\mf b^*$ is a (nonzero) fractional ideal as well.
\end{lemma}
\begin{proof}
	Because $\mf b$ is a $B$-module, we see that $\mf b^\times$ is also a $B$-module because $x\in\mf b^\times$ and $\alpha\in B$ will have
	\[\op T^L_K(\alpha x\mf b)=\op T^L_K(x\cdot\alpha\mf b)\subseteq\op T^L_K(x\mf b)\subseteq A.\]
	It remains to show that $\mf b^*$ is finitely generated. Fix $\alpha_1,\ldots,\alpha_n\in B$ a basis for $L/K,$ and we set $d:=\op{disc}(\alpha_1,\ldots,\alpha_n).$ Further, find $a\in\mf b\cap(A\setminus\{0\}),$ which exists because we can take the norm of some nonzero element of $\mf b.$

	Quickly, we claim that
	\[ad\mf b^*\stackrel?\subseteq B.\]
	Indeed, fixing any $x\in\mf b^*\subseteq L,$ we can write
	\[x=\sum_{k=1}^nx_k\alpha_k\]
	where $x_k\in K$ for each $k.$ Now, we note that $a\alpha_\bullet\in\mf b$ for each $\alpha_\bullet$ because $a\in\mf b$ and $\alpha_j\in B,$ so it follows that
	\[\sum_kax_k\op T^L_K(\alpha_k\alpha_\bullet)=\op T^L_K(xa\alpha_\bullet)\in A.\]
	We can view this as a system of equations to solve for the $ax_\bullet$ and everything else is a variable. Solving for this using Cram\'er's rule, we see that the coefficients live in $A$ and have determinant $d,$ where we also know that the constants are in $A.$ So it follows
	\[ax_\bullet\in\frac1dA\]
	for each $x_\bullet,$ so $dax_\bullet\in A,$ so $dax\in B,$ finishing.

	But we are done because $\mf b^*$ is a $B$-module where some multiple of it is contained in $B.$ Additionally, $\mf b^*$ is nonzero because $\mf b$ is finitely generated (it's a fractional ideal), so surely we can find some nonzero element of $L$ clearing the denominators. So it is supposed to follow that $\mf b^*$ is a nonzero fractional ideal.
\end{proof}
This lets us define the following.
\begin{definition}[Complementary ideal]
	The \textit{complementary ideal} $\mathcal C_{B/A}$ is defined as
	\[B^*=\left\{x\in L:\op T_K^L(xB)\subseteq A\right\}.\]
\end{definition}
We note that $\mathcal C_{B/A}$ is a fractional ideal containing $B.$
\begin{definition}[Different ideal]
	The \textit{different ideal} $\mathcal D_{A/B}$ is defined as $\mathcal D_{B/A}:=\mathcal C_{B/A}^{-1}.$ We might also write $\mathcal D_{L/K}$ depending on the phase of the Moon.
\end{definition}
Note that $B\subseteq\mathcal C_{B/A}$ implies $\mathcal D_{B/A}\subseteq B,$ so $\mathcal D_{B/A}$ is an integral ideal.

The different is a pretty nice ideal. We show the following.
\begin{definition}
	Fix $K\subseteq L\subseteq M$ a chain of finite, separable chain of fields, where $A\subseteq K$ is a ring of integers with $B$ and $C$ the integral closures in $L$ and $M$ respectively. Then
	\[\mathcal D_{M/K}=\mathcal D_{M/L}\mathcal D_{L/K}.\]
\end{definition}
\begin{proof}
	We refer to the book.
\end{proof}
\begin{prop}
	Fix $K/L$ a chain of finite, separable fields in the $AKLB$ set-up. Then $\mathcal D_{B/A}$ commutes with localization: if $S\subseteq A$ is a multiplicative subset, then 
	\[\mathcal D_{S^{-1}A/S^{-1}B}=S^{-1}\mathcal D_{B/A}.\]
\end{prop}
\begin{proof}
	The main idea is to show that each individual step of the construction of $\mathcal D_{B/A}$ is compatible with localization. We omit the proof.
\end{proof}
\begin{proposition}
	Fix $K/L$ a chain of finite, separable fields in the $AKLB$ set-up. Then $\mathcal D_{B/A}$is commutes with completion: if $\mf p$ is a nonzero prime of $A$ lying below a nonzero prime $\mf q$ of $B,$ then
	\[\mathcal D_{\hat B/\hat A}=\hat B\mathcal D_{B/A}.\]
	Further, $(\mathcal D_{B/A})_{\mf q}=\mathcal D_{\hat B/\hat A}\cap B.$
\end{proposition}
\begin{proof}
	We again refer to the book.
\end{proof}
We can also build the different by elements.
\begin{definition}[Different for elements]
	Fix $L/K$ a field extension, and find some $\alpha\in L$ with $f$ its minimal polynomial. Then we define the \textit{different} of $\alpha$ as
	\[\delta_{L/K}(\alpha)=\begin{cases}
		f'(\alpha) & L=K(\alpha), \\
		0 & \text{else}.
	\end{cases}\]
\end{definition}
The point of zeroing out so many elements is to make sure we only care about the separable ones. Next time we will show that the different ideal is generated by these elements.