% !TEX root = ../notes.tex

\documentclass[../notes.tex]{subfiles}

\begin{document}

\section{October 9}
Today we continue discussing the universal enveloping algebra.

\subsection{Gradings and Filtrations}
We would like to ``temper'' the infinite-dimensional representation $\op{ad}_\bullet\mf g\to\mf{gl}(U\mf g)$ given by \Cref{lem:ad-action-ug}. For $T\mf g$, one has a grading.
\begin{definition}[graded algebra]
	Fix a field $F$. A \textit{grading} on an $F$-algebra $A$ is a decomposition $A=\bigoplus_{i=0}^\infty A_i$ where each $A_\bullet\subseteq A$ is a subspace, and
	\[A_i\cdot A_j\subseteq A_{i+j}\]
	for all $i,j\ge0$. An $F$-algebra equipped with a grading is a \textit{graded algebra}. An element of some $A_i$ is \textit{homogeneous}.
\end{definition}
\begin{example}
	Any $F$-algebra $A$ has a trivial grading given by $A_0=A$ and $A_i=0$ for all $i>0$. Indeed, $A_i\cdot A_j\subseteq A_{i+j}$ has $A_iA_j=0$ unless $i=j=0$, in which case we see that the inclusion reads $A_0A_0=A=A_0$.
\end{example}
\begin{example} \label{ex:grade-tensor-algebra}
	Fix a vector space $\mf g$. Then the universal tensor algebra $T\mf g$ is graded by $T\mf g=\bigoplus_{i\ge0}\mf g^{\otimes i}$. Indeed, $\mf g^{\otimes i}\subseteq T\mf g$ has
	\[\mf g^{\otimes i}\cdot\mf g^{\otimes j}\to\mf g^{\otimes(i+j)}\]
	for all $i,j\ge0$ by definition of our multiplication.
\end{example}
Gradings sometimes descend quotients.
\begin{lemma} \label{lem:homogeneous-ideal-quotient}
	Fix a graded $F$-algebra $A=\bigoplus_{i=0}^\infty A_i$. If $I\subseteq A$ is a two-sided ideal generated by homogeneous elements, then we have a decomposition
	\[\frac AI=\bigoplus_{i=0}^\infty\frac{A_i}{I\cap A_i}\]
	making $A/I$ into a graded $F$-algebra.
\end{lemma}
\begin{proof}
	Note that we have maps $A_i\subseteq A\onto A/I$ with kernel $I\cap A_i$, so we induce injections $A_i/(I\cap A_i)\into A/I$. Summing over all $i$, we get an $F$-linear map
	\[\bigoplus_{i=0}^\infty\frac{A_i}{I\cap A_i}\to\frac AI.\]
	We claim that this map is an isomorphism of $F$-vector spaces providing the required grading. Here are our checks.
	\begin{itemize}
		\item Surjective: note that any $a+I\in A/I$ can decompose $a=\sum_{i=0}^\infty a_i$ where $a_i\in A_i$ for each $i$, so $(a_i+(I\cap A_i))_i$ maps to $\sum_i(a_i+I)=a+I$.

		\item Injective: suppose that $(a_i+(I\cap A_i))_i$ maps to $0$ in $A/I$. Namely, we see that
		\[\sum_{i=0}^\infty a_i\in I,\]
		which we must prove implies $a_i\in I$ for each $i$. It suffices to show that
		\[I\stackrel?=\left\{\sum_{i=0}^\infty a_i\in A:a_i\in(I\cap A_i)\text{ for all }i\right\}.\]
		Let the right-hand side be $J$. Certainly, $J\subseteq I$: note $a_i\in I$ for each $i$ implies that $\sum_{i=0}^\infty a_i\in I$ because $I$ is an ideal. To show $I\subseteq J$, we use the hypothesis that $I$ is generated by homogeneous elements.\footnote{This is the only place where we need this hypothesis, which explains why this check must be somewhat difficult.} In other words, $I$ is generated by the subsets $\{I\cap A_i\}_{i=0}^\infty$, which are all contained in $J$, so we will know that $I\subseteq J$ as soon as we check that $J$ is actually a two-sided ideal.
		
		Well, the construction of $J$ implies that $J$ is certainly an $F$-subspace, so it remains to do the ideal checks. By symmetry, it will be enough to just check that $J$ is a left ideal. Thus, we want to check that $AJ\subseteq J$. By linearity of this condition (and because $J$ is already an $F$-subspace), it is enough to merely check this on a spanning subset of $A$, for which we take the homogeneous elements. Namely, it is enough to check that $A_iJ\subseteq J$ for each $i$, so pick up some $b_j\in A_j$ and $\sum_ia_i\in J$, and we see
		\[b_j\cdot\sum_{i=0}^\infty a_i=\sum_{i=0}^\infty b_ja_i.\]
		Now, $b_ja_i\in A_{i+j}$ by the grading, and $b_ja_i\in I$ because $I$ is an ideal, so we see $b_j\cdot\sum_{i=0}^\infty a_i\in J$ follows.

		\item Grading: we claim that $\frac{A_i}{I\cap A_i}\cdot\frac{A_j}{I\cap A_j}\subseteq\frac{A_{i+j}}{I\cap A_{i+j}}$. Well, for any $a_i+(I\cap A_i)$ and $a_j+(I\cap A_j)$, we see that the product has $(a_ia_j+I)\in A/I$, which comes from $a_ia_J+(I\cap A_{i+j})=A_{i+j}/(I\cap A_{i+j})$.
		\qedhere
	\end{itemize}
\end{proof}
\begin{example}
	Let $\mf g$ be an $F$-vector space. Then $S\mf g$ is the quotient of $T\mf g$ by the ideal generated by the homogeneous elements $X\otimes Y-Y\otimes X$, so \Cref{lem:homogeneous-ideal-quotient} tells us that the grading on $T\mf g$ descends to a grading on $S\mf g$.
\end{example}
However, the grading $T\mf g$ need not descend to the quotient $U\mf g$. For example, given $X,Y\in\mf g$ which we expect to degree $1$, we have
\[XY-YX=[X,Y],\]
but the left-hand side is expected to live in degree $2$ while the right-hand side is expected to live in degree $1$. Of course, if $\mf g$ is abelian, then everything here vanishes, so this is okay, but in general, there is no reason to believe that this would be okay.

Thus, we want a version of grading which descends along quotients, which leads to the following notion.
\begin{definition}[filtered algebra]
	Fix a field $F$. A \textit{filtration} on an $F$-algebra $A$ is a sequence of ascending $F$-subspaces
	\[0=\mc F_{-1}A\subseteq\mc F_0A\subseteq\mc F_1A\subseteq\cdots\subseteq\mc F_{n-1}A\subseteq\mc F_nA\subseteq\mc F_{n+1}A\subseteq\cdots\]
	such that $A=\bigcup_{i\ge0}\mc F_iA$, and $\mc F_iA\cdot\mc F_jA\to\mc F_{i+j}A$ for all $i,j\ge0$.
\end{definition}
Here's a sanity check.
\begin{lemma} \label{lem:grade-to-filtration}
	Fix a graded $F$-algebra $A=\bigoplus_{i=0}^\infty A_i$. Then
	\[\mc F_jA\coloneqq\bigoplus_{i=0}^jA_i\]
	provides a filtration of $A$.
\end{lemma}
\begin{proof}
	Here are our checks.
	\begin{itemize}
		\item Certainly each $\mc F_jA$ is an $F$-subspace.
		\item The construction implies $\mc F_jA\subseteq\mc F_jA\oplus A_{j+1}=\mc F_{j+1}A$ for each $j$.
		\item Note $\bigcup_{j\ge9}\mc F_jA=\bigoplus_{i\ge0}A_i=A$. Explicitly, any $a\in A$ can be decomposed into $a=\bigcup_{i\ge0}a_i$ with $a_i\in A_i$ for each $i$; but then there is the largest $n$ for which $a_n\ne0$, and we see $a\in\bigoplus_{i=0}^na_i=\mc F_nA$.
		\item We check that $\mc F_iA\cdot\mc F_jA\subseteq\mc F_{i+j}A$. Everything here is linear, so is enough to check this on spanning subsets of $\mc F_iA$ and $\mc F_jA$, for which we use the homogeneous elements. Well, choose some $a_k\in A_k\subseteq\mc F_iA$ and $a_\ell\in A_\ell\subseteq\mc F_jA$ where $k\le i$ and $\ell\le j$. Then the product $a_ka_\ell$ lives in $A_{k+\ell}$, which is contained in $\mc F_{i+j}A$ because $k+\ell\le i+j$.
		\qedhere
	\end{itemize}
\end{proof}
The up-shot of filtrations is that they do descend to quotients.
\begin{lemma} \label{lem:quotient-filtration}
	Fix a filtered $F$-algebra $A$ with filtration $\{\mc F_iA\}_{i=0}^\infty$. If $I\subseteq I$ is any two-sided ideal, then $A/I$ is a filtered $F$-algebra with filtration
	\[\left\{\frac{\mc F_iA}{I\cap\mc F_iA}\right\}_{i=0}^\infty.\]
\end{lemma}
\begin{proof}
	Here are our checks.
	\begin{itemize}
		\item Well-defined: note that the inclusions $\mc F_iA\subseteq A$ turn into inclusions $\frac{\mc F_iA}{I\cap\mc F_iA}\subseteq\frac AI$ because $I\cap\mc F_iA$ is the kernel of the composite $\mc F_iA\subseteq A\onto A/I$.
		\item Covers: we claim that
		\[\bigcup_{i=0}^\infty\frac{\mc F_iA}{I\cap\mc F_iA}=\frac AI.\]
		Well, any $a+I$ has $a\in\mc F_iA$ for some $i$, so $a+I$ is in the image of $a+(I\cap\mc F_iA)\in\frac{\mc F_iA}{I\cap\mc F_iA}$.
		\item Filtration: for any $i$ and $j$, we must check that $\frac{\mc F_iA}{I\cap\mc F_iA}\cdot\frac{\mc F_jA}{I\cap\mc F_jA}\to\frac{\mc F_{i+j}A}{I\cap\mc F_{i+j}A}$. Well, for any $a_i+(I\cap\mc F_iA)$ and $a_j+(I\cap\mc F_jA)$ where $a_i\in\mc F_iA$ and $a_j\in\mc F_jA$, we see that $a_ia_j\in\mc F_{i+j}A$, so the product
		\[(a_i+(I\cap\mc F_iA))\cdot(a_j+(I\cap\mc F_jA))\]
		is $(a_ia_j+I)\in A/I$, which comes from $(a_ia_j+(I\cap\mc F_{i+j}A))$, as needed.
		\qedhere
	\end{itemize}
\end{proof}
\begin{example} \label{ex:filter-ug}
	The grading on $T\mf g$ of \Cref{ex:grade-tensor-algebra} produces a filtration via \Cref{lem:grade-to-filtration}, which then descends to the quotient $U\mf g$ via \Cref{lem:quotient-filtration}. We will denote the induced filtration by $\{\mc F_iU\mf g\}_{i=0}^\infty$. Notably, looking at the induced quotient filtration of \Cref{lem:quotient-filtration}, we see that $\mc F_iU\mf g$ is simply the image of $\mc F_iT\mf g$ in $U\mf g$. (This formally follows from the well-definedness check in \Cref{lem:quotient-filtration}.) Importantly, each graded component of $T\mf g$ is finite-dimensional, so $\mc F_iT\mf g$ is finite-dimensional, so its image $\mc F_iU\mf g$ is also finite-dimensional.
\end{example}
Here is a concrete consequence of the intuition that the filtration ``tempers'' $U\mf g$.
\begin{lemma}
	Fix a Lie algebra $\mf g$ over a field $F$. For $A\mf g\in\{T\mf g,U\mf g,S\mf g\}$, the adjoint action descends to a Lie algebra morphism $\op{ad}_\bullet\colon\mf g\to\mf{gl}(\mc F_iA\mf g)$ for each $i$.
\end{lemma}
\begin{proof}
	The main point is to check that $\op{ad}_X\colon A\mf g\to A\mf g$ restricts to $\op{ad}_X\colon\mc F_iA\mf g\to\mc F_iA\mf g$ for each $i\ge0$ and $X\in\mf g$. Well, it suffices to check this on a spanning subset of $\mc F_iA\mf g$, for which we use pure tensors of length less than or equal to $i$. Namely, for any $Y_1\cdots Y_j\in A\mf g$ for $Y_1,\ldots,Y_j\in\mf g$, we see that
	\[\op{ad}_X(Y_1\cdots Y_j) = \sum_{k=1}^jY_1\cdots Y_{k-1}[X,Y_k]Y_{k+1}\cdots Y_j\]
	by definition of $\op{ad}_\bullet$ (or alternatively by repeated application of the product rule). Now, we see that the summand $Y_1\cdots Y_{k-1}[X,Y_k]Y_{k+1}\cdots Y_j$ lives in the image of $\mf g^{\otimes j}\subseteq\mc F_i T\mf g\onto\mc F_i A\mf g$, so we conclude that $\op{ad}_X$ does in fact restrict.

	We now describe the other checks. Note $\op{ad}_X$ was linear on $A\mf g$, so it continues to be linear on $\mc F_iA\mf g$. Additionally, the equalities
	\[{\op{ad}_{c_1X_1+c_2X_2}}=c_1{\op{ad}_{X_1}}+c_2{\op{ad}_{X_2}}\]
	and
	\[{\op{ad}_{[X,Y]}}={\op{ad}_X}\circ{\op{ad}_Y}-{\op{ad}_Y}\circ{\op{ad}_X}\]
	held as equalities of linear maps $A\mf g\to A\mf g$, so they will continue to be true on their restrictions to $\mc F_iA\mf g$. This completes the proof that $\op{ad}_\bullet\colon\mf g\to\mf{gl}(\mc F_iA\mf g)$ is a representation of Lie algebras.
\end{proof}
The statement of \Cref{lem:grade-to-filtration} tells us that we may hope to recover a grading from a filtration by using the quotients $\mc F_{j+1}A/\mc F_jA$. This leads to the following definition.
\begin{definition}[associated graded algebra]
	Fix a filtered $F$-algebra $A$ with filtration $\{\mc F_iA\}_{i=0}^\infty$. Then the \textit{associated graded algebra} is
	\[\op{gr}A\coloneqq\bigoplus_{i=0}^\infty\frac{\mc F_{i}A}{\mc F_{i-1}A}.\]
	Here, $\mc F_{-1}A$ is understood to be $0$.
\end{definition}
Here are the checks on this definition.
\begin{lemma}
	Fix a filtered $F$-algebra $A$ with filtration $\{\mc F_iA\}_{i=0}^\infty$. Then $\op{gr}A$ is a graded $F$-algebra with grading given by its definition.
\end{lemma}
\begin{proof}
	Here are our checks.
	\begin{itemize}
		\item Note that $\op{gr}A$ is certainly a vector space over $F$ as the sum of vector spaces over $F$.
		\item We must define a multiplication for $\op{gr}A$. We are trying to define an $F$-bilinear map $\op{gr}A\times\op{gr}A\to\op{gr}A$, so we are trying to define a linear map $\op{gr}A\otimes_F\op{gr}A\to\op{gr}A$. Swapping the tensor product and sum, it is enough to define a map
		\[\frac{\mc F_iA}{\mc F_{i-1}A}\otimes_F\frac{\mc F_jA}{\mc F_{j-1}A}\to\frac{\mc F_{i+j}A}{\mc F_{i+j-1}A}\subseteq\op{gr}A\]
		for $i,j\ge0$. For this, we note the multiplication on $A$ defines an $F$-bilinear map $\mc F_iA\times\mc F_jA\to\mc F_{i+j}A$, but $\mc F_{i-1}A\mc F_jA\subseteq\mc F_{i+j-1}A$ and $\mc F_iA\mc F_{j-1}A\subseteq\mc F_{i+j-1}A$ means that our map descends to an $F$-bilinear map
		\[\frac{\mc F_iA}{\mc F_{i-1}A}\times\frac{\mc F_jA}{\mc F_{j-1}A}\to\frac{\mc F_{i+j}A}{\mc F_{i+j-1}A},\]
		so this descends to a map on the tensor product, as needed. Note that this definition of multiplication automatically respects the ``grading'' in the definition of $\op{gr}A$.
		\item Thus, it only remains that we actually have a well-defined multiplication. Well, the multiplication is $F$-bilinear by its construction, so it satisfies the usual distributivity and $F$-linear requirements. It remains to check associativity. Well, the associativity condition $(ab)c=a(bc)$ corresponds to the vanishing of some multilinear functional on $(\op{gr}A)^3$, which corresponds to the vanishing of some functional on $(\op{gr}A)^{\otimes3}$, which can be checked on the spanning subset of homogeneous elements. As such, we pick up three homogeneous elements $a_i+\mc F_{i-1}A$ and $a_j+\mc F_{j-1}A$ and $a_k+\mc F_{k-1}A$ and use the above definition to compute
		\begin{align*}
			& ((a_i+\mc F_{i-1}A)(a_j+\mc F_{j-1}A))(a_k+\mc F_{k-1}A) \\
			={}& (a_ia_j+\mc F_{i+j-1}A)(a_k+\mc F_{k-1}A) \\
			={}& (a_ia_ja_k+\mc F_{i+j+k-1}A) \\
			={}& (a_i+\mc F_{i-1}A)(a_ja_k+\mc F_{j+k-1}A) \\
			={}& (a_i+\mc F_{i-1}A)((a_j+\mc F_{j-1}A)(a_k+\mc F_{k-1}A)),
		\end{align*}
		as required.
		\qedhere
	\end{itemize}
\end{proof}
Before ending our discussion, we note the following property of $\op{gr}A$.
\begin{lemma} \label{lem:zero-divisor-gr}
	Fix a filtered $F$-algebra $A$ with filtration $\{\mc F_iA\}_{i=0}^\infty$. If $\op{gr}A$ has no zero divisors, then $A$ has no zero divisors.
\end{lemma}
\begin{proof}
	We proceed by contraposition. Suppose $A$ has zero divisors so that we have nonzero elements $a,b\in A$ such that $ab=0$. Let $i$ be the smallest nonnegative element $a\in\mc F_iA$ but $a\notin\mc F_{i-1}A$. (If $i=0$, then certainly $a\notin\mc F_{i-1}A$ because $\mc F_{i-1}A=0$, and $a\ne0$.) Similarly, we find $j\ge0$ such that $b\in\mc F_jA$ but $b\notin\mc F_{j-1}A$. Then $a+\mc F_{i-1}A$ and $b+\mc F_{j-1}A$ are nonzero elements in $\op{gr}A$ which multiply to $0+\mc F_{i+j-1}A$, so $\op{gr}A$ has zero divisors.
\end{proof}
% \begin{remark}
% 	One can check that $\op{gr}A$ is a graded algebra. Conversely, given a graded algebra $A$ with grading $A=\bigoplus_{i=1}^\infty A_i$, one can produce a filtered algebra with the filtration
% 	\[\mc F_iA\coloneqq\bigoplus_{j\le i}A_j.\]
% \end{remark}
% \begin{remark}
% 	Fix a filtered algebra $A$. If $\op{gr}A$ has no zero divisors, then one can check that $A$ also has no zero divisors.
% \end{remark}
% Now, the point is that $T\mf g=\bigoplus_{i\ge0}\mf g^{\otimes i}$ is graded, but we cannot expect $U\mf g$ to be graded because the relation $x\otimes y-y\otimes x=[x,y]$ is a relation between the second and first degree! But we can still pass to the filtration: let $\mc F_iU\mf g$ simply be the image of the natural grading $\mc F_iT\mf g$ under the surjection $T\mf g\onto U\mf g$.
% \begin{remark}
% 	In contrast, one can check that $S\mf g$ is not just filtered but graded!
% \end{remark}

\subsection{The Poincar\'e--Birkoff--Witt Theorem}
To understand the theorem of this subsection, we make the following observation.
\begin{lemma} \label{lem:pbw-span}
	Fix a Lie algebra $\mf g$ over a field $F$ with basis $\{X_1,\ldots,X_n\}$. Then the ordered monomials
	\[\left\{X_1^{d_1}\cdots X_n^{d_n}:a_1,\ldots,a_n\ge0\right\}\]
	span $U\mf g$.
\end{lemma}
\begin{proof}
	The point is to use the equality $XY-YX=[X,Y]$ in $U\mf g$ to slowly reorder unordered monomials, one transposition at a time. Let's be more explicit. The monomials $X_{i_1}\otimes\cdots\otimes X_{i_m}$ spans $\mf g^{\otimes m}$ (here, $i_1,\ldots,i_m\in\{1,\ldots,n\}$), so they will span $T\mf g$ as $m$ varies. Thus, it is enough to show that any such monomial $X_{i_1}\cdots X_{i_m}\in U\mf g$ lives in the span of the above ordered monomials. We will do this via a nested induction. To begin, we induct on $m$, for which the base cases $m=0$ and $m=1$ have no content because the monomial is already ordered. Thus, for the inductive step, we may assume the result for any monomial with less than $m$ terms.
	
	Next up, we note that $i_\bullet\colon\{1,\ldots,m\}\to\{1,\ldots,n\}$ is some function, so we choose some permutation $\sigma\in S_m$ so that
	\[i_{\sigma(1)}\le i_{\sigma(2)}\le\cdots\le i_{\sigma(m)}.\]
	Now, $\sigma\in S_m$ can be written as a product of transpositions of the form $(j,j+1)$, say $\sigma=(j_1,j_1+1)\cdots(j_\ell,j_\ell+1)$. We next induct on $\ell$, where the base case of $\ell=0$ has no content because it means that $\sigma$ is the identity so that the $i_\bullet$s are already ordered so that our monomial is already ordered. For the inductive step, we pick up our monomial $X_{i_1}\cdots X_{i_m}$ with $\sigma=(j_1,j_1+1)\cdots(j_\ell,j_\ell+1)$ where $\ell>0$, and we note that
	\begin{align*}
		X_{i_1}\cdots X_{i_m} &= X_{i_1}\cdots X_{i_{j_\ell}}X_{i_{j_\ell+1}}\cdots X_{i_m} \\
		&\stackrel*= X_{i_1}\cdots\big(X_{i_{j_\ell+1}}X_{i_{j_\ell}}+[X_{i_{j_\ell}},X_{i_{j_\ell+1}}]\big)\cdots X_{i_m} \\
		&= X_{i_1}\cdots X_{i_{j_\ell-1}}X_{i_{j_\ell+1}}X_{i_{j_\ell}}X_{i_{j_\ell+2}}\cdots X_{i_m}+X_{i_1}\cdots X_{i_{j_\ell-1}}[X_{i_{j_\ell}},X_{i_{j_\ell+1}}]X_{i_{j_\ell+2}}\cdots X_{i_m}.
	\end{align*}
	Here, the key step is the application of $XY-YX=[X,Y]$ in $U\mf g$ in the equality $\stackrel*=$. Anyway, the second term has fewer than $m$ terms, so the first inductive hypothesis implies that it is the span of our ordered monomials. The first term still has $m$ terms, but the permutation $\sigma'\in S_m$ required to reorder the $i_\bullet$s can simply be taken to be $(j_1,j_1+1)\cdots(j_{\ell-1},j_{\ell-1}+1)$, which has length smaller than $\ell$, so the second inductive hypothesis implies that it too is in the span of our ordered monomials.
\end{proof}
\begin{remark}
	The above nested induction can be turned into an algorithm: simply use the relation $XY-YX=[X,Y]$ to gradually reorder the consecutive terms of any monomial until it becomes ordered. The complications in this algorithm is that the ``error term'' $[X,Y]$ spawn lower-order monomials which must be dealt with recursively.
\end{remark}
\begin{remark} \label{rem:spit-error-term}
	Let's note a consequence of the proof of \Cref{lem:pbw-span}: in $U\mf g$, the difference
	\[X_{i_1}\cdots X_{i_m}-X_{\sigma(i_1)}\cdots X_{\sigma(i_m)}\]
	is a linear combination of ordered monomials of degree than smaller $m$. Indeed, the exact same inductive argument as in the proof of \Cref{lem:pbw-span} shows this, where the point is that the produced error term
	\[X_{i_1}\cdots X_{i_{j_\ell-1}}[X_{i_{j_\ell}},X_{i_{j_\ell+1}}]X_{i_{j_\ell+2}}\cdots X_{i_m}\]
	has fewer than $m$ monomials after expanding $[X_{i_{j_\ell}},X_{i_{j_\ell+1}}]$.
\end{remark}
With the lemma in mind, here is our statement of the theorem.
\begin{theorem}[Poincar\'e--Birkoff--Witt] \label{thm:pbw}
	Fix a Lie algebra $\mf g$ over a field $F$ with basis $\{X_1,\ldots,X_n\}$. Then the ordered monomials
	\[\left\{X_1^{d_1}\cdots X_n^{d_n}:a_1,\ldots,a_n\ge0\right\}\]
	are linearly independent in $U\mf g$.
\end{theorem}
\begin{proof}
	We will define a linear map $\varphi\colon T\mf g\to S\mf g$ satisfying the following properties.
	\begin{listalph}
		\item We have $\varphi\left(X_1^{d_1}\cdots X_n^{d_n}\right)=X_1^{d_1}\cdots X_n^{d_n}$ for any ordered monomial $X_1^{d_1}\cdots X_n^{d_n}$.
		\item We have $L\mf g\subseteq\ker\varphi$.
	\end{listalph}
	Let's see why this will complete the proof. Note (b) tells us that $\varphi$ descends to a linear map $U\mf g\to S\mf g$. But then because the ordered monomials are linearly independent in $S\mf g$, we see that the ordered monomials of $U\mf g$ (which go the ordered monomials in $S\mf g$ by (a)) must also be linearly independent.

	We will define $\varphi$ inductively by taking a union of linear maps $\varphi_k\colon\mc F_kT\mf g\to S\mf g$ satisfying the following.
	\begin{enumerate}[label=(\alph*')]
		\item We have $\varphi_k\left(X_1^{d_1}\cdots X_n^{d_n}\right)=X_1^{d_1}\cdots X_n^{d_n}$ for any ordered monomial $X_1^{d_1}\cdots X_n^{d_n}$ of total degree at most $k$.
		\item We have \[\sum_{a+b+2\le k}\big\{A(XY-YX-[X,Y])B:X,Y\in\mf g,A\in\mc F_{a}T\mf g,B\in\mc F_bT\mf g\big\}\subseteq\ker\varphi_k\]
		for each $k$. (We are not going to directly argue that the above equals $L\mf g\cap\mc F_kT\mf g$.)
		\item $\varphi_{k+1}|_{\mc F_kT\mf g}=\varphi_k$.
	\end{enumerate}
	Let's quickly explain how these conditions imply the result. Here are these checks.
	\begin{itemize}
		\item Quickly, note that (c') tells us that our $\varphi_\bullet$s at least assemble into a function $\varphi\colon T\mf g\to S\mf g$.
		\item Linear: we use the linearity of the $\varphi_\bullet$s. Indeed, for any $c_1,c_2\in F$ and $a_1,a_2\in T\mf g$, find some $k$ large enough so that $a_1,a_2\in\mc F_kT\mf g$, and then the linearity check
		\[\varphi(c_1a_1+c_2a_2)\stackrel?=c_1\varphi(a_1)+c_2\varphi(a_2)\]
		immediately reduces to the corresponding equality for $\varphi_k$.
		\item Note that $\varphi$ satisfies (a) because the $\varphi_\bullet$s satisfy (a').
		\item For (b), we need to show that $\ker\varphi$ contains $L\mf g$. Well, we know that $\ker\varphi$ is a subspace of $T\mf g$, so it suffices to check that an $F$-spanning subset of $L\mf g$ is contained in $\ker\varphi$. As such, it is enough to check that
		\[A(XY-YX-[X,Y])\in\ker\varphi\]
		for any $A\in\mc F_kT\mf g$ and $X,Y\in\mf g$. (Technically we must also check this for elements of the form $(XY-YX-[X,Y])A$, which follows by a symmetric argument.) However, the above element is in the kernel of $\varphi_{k+2}$ by (b'), so it will be in the kernel of $\varphi$.
	\end{itemize}
	We will construct the $\varphi_\bullet$s inductively. For $k=-1$, there is nothing to do because $\mc F_{-1}T\mf g=0$, and for $k=0$, there is still nothing to do because $\mc F_0T\mf g=F$, which must land identically to $F\subseteq S\mf g$.

	We now proceed with the induction to define the $\varphi_\bullet$s. Suppose that we have defined $\varphi_k$ already, and we would like to define $\varphi_{k+1}$. Because monomials $X\coloneqq X_{i_1}\cdots X_{i_{k+1}}$ of total degree $k+1$ form a basis of $\mc F_{k+1}T\mf g=\mf g^{\otimes(k+1)}$, we merely have to define $\varphi_{k+1}$ on such unordered monomials. Well, start with an ordering of the indices $i_1\le\cdots\le i_{k+1}$, and we want to define $\varphi(\sigma(X_{i_1}\cdots X_{i_{k+1}}))$ for each $\sigma\in S_{k+1}$, where $S_{k+1}$ acts on $\mc F_{k+1}T\mf g$ by permuting the basis.
	
	For motivation, note that it is clearest what to do on transpositions $\sigma$: for $Y_1\cdots Y_{k+1}\in\mf g$ and a transposition $(j,j+1)\in S_{k+1}$, we see that we need
	\begin{align*}
		\varphi(Y_1\cdots Y_{k+1}) &= Y_1\cdots Y_{j-1}(Y_{j+1}Y_j+[Y_j,Y_{j+1}])Y_{j+2}\cdots Y_{k+1} \\
		&= Y_1\cdots Y_{j-1}Y_{j+1}Y_jY_{j+2}\cdots Y_{k+1} \\
		&\qquad+Y_1\cdots Y_{j-1}[Y_j,Y_{j+1}]Y_{j+2}\cdots Y_{k+1}
	\end{align*}
	in order for $L\mf g\subseteq\ker\varphi$.

	We now iterate the computation of the previous paragraph to define $\varphi$ on general $\sigma(X_{i_1}\cdots X_{i_{k+1}})$. Because the transpositions $s_j\coloneqq(j,j+1)\in S_{k+1}$ generate $S_{k+1}$, we may decompose
	\[\sigma=s_{j_\ell}\cdots s_{j_1}.\]
	We now define
	\[\varphi_{k+1}\left(\sigma(X_{i_1}\cdots X_{i_{k+1}})\right)\coloneqq X_{\sigma(i_1)}\cdots X_{\sigma(i_{k+1})}-\sum_{m=0}^{\ell-1}\varphi_k\big([,]_{j_{m+1}}(s_{j_m}\cdots s_{j_1})X_{i_1}\cdots X_{i_{k+1}}\big),\]
	where the notation $[,]_j$ applied to a monomial is given by
	\[[,]_j(Y_1\cdots Y_{k+1})\coloneqq Y_1\cdots Y_{j-1}[Y_j,Y_{j+1}]Y_{j+2}\cdots Y_{k+1},\]
	which we note lives in $\mc F_kT\mf g$. There are many checks we must do to see that this definition works.
	\begin{itemize}
		\item We check that our definition does not depend on the choice of decomposition $\sigma=(j_1,j_1+1)\cdots(j_\ell,j_\ell+1)$. This is somewhat technical. To this end, we note that viewing $S_n$ as a Coxeter group with the reflection generators $s_j\coloneqq(j,j+1)$, we see that $S_{k+1}$ is generated by $\{s_1,\ldots,s_k\}$ with the generators
		\[\begin{cases}
			s_j^2 & \text{if }j\in\{1,\ldots,k\}, \\
			s_js_{j'}=s_{j'}s_j & \text{if }\left|j-j'\right|\ge2, \\
			s_js_{j+1}s_j=s_{j+1}s_js_{j+1} & \text{if }j\in\{1,\ldots,k-1\}.
		\end{cases}\]
		(The first relation holds because it squares a transposition. The second relation holds because $s_j$ and $s_{j'}$ are disjoint permutations. Computing $s_js_{j+1}s_j=(j,j+2)=s_{j+1}s_js_{j+1}$ gives the third relation. We will not check that these relations generate all relations.) Thus, any two decompositions may apply the above three rules to be shown equal. We will use this for our well-defined check as follows.
		\begin{itemize}
			\item First relation: after the dust settles, this follows by the skew-symmetry of the Lie bracket. Suppose our decompositions differ as $\sigma=\sigma_1\sigma_2=\sigma_1s_j^2\sigma_2$, where $\sigma_1=s_{j_\ell}\cdots s_{j_{r+1}}$ and $\sigma_2=s_{j_{r}}\cdots s_{j_1}$; label the second decomposition as $s_{j_{\ell+2}'}\cdots s_{j_1'}$. We now expand
			\begin{align*}
				& \sum_{m=0}^{\ell+1}\varphi_k\big([,]_{j_{m+1}'}(s_{j_m'}\cdots s_{j_1'})X_{i_1}\cdots X_{i_{k+1}}\big)-\sum_{m=0}^{\ell-1}\varphi_k\big([,]_{j_{m+1}}(s_{j_m}\cdots s_{j_1})X_{i_1}\cdots X_{i_{k+1}}\big) \\
				={}& \sum_{m=0}^{r-1}\varphi_k\big([,]_{j_{m+1}'}(s_{j_m'}\cdots s_{j_1'})X_{i_1}\cdots X_{i_{k+1}}\big)-\sum_{m=0}^{r-1}\varphi_k\big([,]_{j_{m+1}}(s_{j_m}\cdots s_{j_1})X_{i_1}\cdots X_{i_{k+1}}\big) \\
				&+\varphi_k\big([,]_{j_{r+1}'}(s_{j_r'}\cdots s_{j_1'})X_{i_1}\cdots X_{i_{k+1}}\big)-\varphi_k\big([,]_{j_{r+1}}(s_{j_r}\cdots s_{j_1})X_{i_1}\cdots X_{i_{k+1}}\big) \\
				&+\varphi_k\big([,]_{j_{r+1+1}'}(s_{j_{r+1}'}\cdots s_{j_1'})X_{i_1}\cdots X_{i_{k+1}}\big)+\varphi_k\big([,]_{j_{r+2+1}'}(s_{j_{r+2}'}\cdots s_{j_1'})X_{i_1}\cdots X_{i_{k+1}}\big) \\
				&+\sum_{m=r+3}^{\ell+1}\varphi_k\big([,]_{j_{m+1}'}(s_{j_m'}\cdots s_{j_1'})X_{i_1}\cdots X_{i_{k+1}}\big)-\sum_{m=r+1}^{\ell-1}\varphi_k\big([,]_{j_{m+1}}(s_{j_m}\cdots s_{j_1})X_{i_1}\cdots X_{i_{k+1}}\big).
			\end{align*}
			Now, we see that the sums in each row are identically equal: in the top row, the summands are both contained in $\sigma_2$, and in the bottom row, the summands are both contained in $\sigma_1\sigma_2$. Thus, it remains to show that the middle rows cancel out. Note $s_{j'_{r+1}}\cdots s_{j_1'}=s_j\sigma_2$, and $s_{j'_{r+2}}\cdots s_{j_1'}=s_j\sigma_2=s_js_j\sigma_2$, so we see are looking at
			\begin{align*}
				& \varphi_k\big([,]_{j_{r+1}'}(s_{j_r'}\cdots s_{j_1'})X_{i_1}\cdots X_{i_{k+1}}\big)-\varphi_k\big([,]_{j_{r+1}}(s_{j_r}\cdots s_{j_1})X_{i_1}\cdots X_{i_{k+1}}\big) \\
				&+\varphi_k\big([,]_{j_{r+1+1}'}(s_{j_{r+1}'}\cdots s_{j_1'})X_{i_1}\cdots X_{i_{k+1}}\big)+\varphi_k\big([,]_{j_{r+2+1}'}(s_{j_{r+2}'}\cdots s_{j_1'})X_{i_1}\cdots X_{i_{k+1}}\big) \\
				={}& \varphi_k\big([,]_{j}\sigma_2X_{i_1}\cdots X_{i_{k+1}}\big)-\varphi_k\big([,]_{j_{r+1}}\sigma_2X_{i_1}\cdots X_{i_{k+1}}\big) \\
				&+\varphi_k\big([,]_{j}s_j\sigma_2X_{i_1}\cdots X_{i_{k+1}}\big)+\varphi_k\big([,]_{j_{r+1}}\sigma_2X_{i_1}\cdots X_{i_{k+1}}\big).
			\end{align*}
			The two right terms now vanish, so we want the two left terms to cancel. Well, we see that
			\[[,]_{j}\sigma_2X_{i_1}\cdots X_{i_{k+1}}=X_{\sigma_2(i_1)}\cdots X_{\sigma_2(i_{j-1})}[X_{\sigma_2(i_j)},X_{\sigma_2(i_{j+1})}]X_{\sigma_2(i_{j+2}}\cdots X_{\sigma_2(i_{k+1})},\]
			but
			\[[,]_{j}s_j\sigma_2X_{i_1}\cdots X_{i_{k+1}}=X_{\sigma_2(i_1)}\cdots X_{\sigma_2(i_{j-1})}[X_{\sigma_2(i_{j+1})},X_{\sigma_2(i_{j})}]X_{\sigma_2(i_{j+2}}\cdots X_{\sigma_2(i_{k+1})},\]
			so the two terms cancel by skew-symmetry of the Lie bracket!

			\item Second relation: suppose our decompositions differ as $\sigma=\sigma_1s_{j_{r+1}}s_{j_{r+2}}\sigma_2=\sigma_1s_{j_{r+2}}s_{r+1}\sigma_2$ where $\sigma_1=s_{j_\ell}\cdots s_{j_{r+3}}$ and $\sigma_2=s_{j_r}\cdots s_{j_1}$; label the second decomposition as $s_{j_\ell'}\cdots s_{j_1'}$. We now note that the sums
			\begin{align*}
				& \sum_{m=0}^{\ell-1}\varphi_k\big([,]_{j_{m+1}'}(s_{j_m'}\cdots s_{j_1'})X_{i_1}\cdots X_{i_{k+1}}\big)\qquad\text{and}\qquad\sum_{m=0}^{\ell-1}\varphi_k\big([,]_{j_{m+1}}(s_{j_m}\cdots s_{j_1})X_{i_1}\cdots X_{i_{k+1}}\big)
				% \\
				% ={}& \sum_{m=0}^{r-1}\varphi_k\big([,]_{j_{m+1}'}(s_{j_m'}\cdots s_{j_1'})X_{i_1}\cdots X_{i_{k+1}}\big)-\sum_{m=0}^{r-1}\varphi_k\big([,]_{j_{m+1}}(s_{j_m}\cdots s_{j_1})X_{i_1}\cdots X_{i_{k+1}}\big) \\
				% &+ \varphi_k\big([,]_{j_{r+1}'}(s_{j_r'}\cdots s_{j_1'})X_{i_1}\cdots X_{i_{k+1}}\big)- \varphi_k\big([,]_{j_{r+1}}(s_{j_r}\cdots s_{j_1})X_{i_1}\cdots X_{i_{k+1}}\big) \\
				% &+ \varphi_k\big([,]_{j_{r+2}'}(s_{j_{r+1}'}\cdots s_{j_1'})X_{i_1}\cdots X_{i_{k+1}}\big)- \varphi_k\big([,]_{j_{r+2}}(s_{j_{r+1}}\cdots s_{j_1})X_{i_1}\cdots X_{i_{k+1}}\big) \\
				% &= \sum_{m=r+1}^{\ell-1}\varphi_k\big([,]_{j_{m+1}'}(s_{j_m'}\cdots s_{j_1'})X_{i_1}\cdots X_{i_{k+1}}\big)-\sum_{m=0}^{r-1}\varphi_k\big([,]_{j_{m+1}}(s_{j_m}\cdots s_{j_1})X_{i_1}\cdots X_{i_{k+1}}\big).
			\end{align*}
			differ only at terms $m\in\{r,r+1\}$: otherwise, the permutations applied to $X_{i_1}\cdots X_{i_{k+1}}$ are the same, we are taking the bracket at the same location. To deal with the terms $m\in\{r,r+1\}$ without too much pain, assume $(j,j')\coloneqq(j_{r+1},j_{r+2})$ has $j<j'$ (without loss of generality) and write $\sigma_2(X_{i_1}\cdots X_{i_{k+1}})=AY_{j}Y_{j+1}BY_{j'}Y_{j'+1}C$, where $A,B,C$ are monomials, and the $Y_\bullet$s are at the corresponding location. Examining the terms for $m\in\{r,r+1\}$, we would like
			\begin{align*}
				&\varphi_k(AY_{j}Y_{j+1}B[Y_{j'},Y_{j'+1}]C)+\varphi_k(A[Y_{j},Y_{j+1}]BY_{j'+1}Y_{j'}C) \\
				\stackrel?={}& \varphi_k(A[Y_{j},Y_{j+1}]BY_{j'}Y_{j'+1}C)+\varphi_k(AY_{j+1}Y_{j}B[Y_{j'},Y_{j'+1}]C).
			\end{align*}
			Well, by the inductive hypothesis on $\varphi_k$, we see
			\begin{align*}
				& \varphi_k(AY_{j}Y_{j+1}B[Y_{j'},Y_{j'+1}]C)-\varphi_k(AY_{j+1}Y_{j}B[Y_{j'},Y_{j'+1}]C) \\
				={}& \varphi_k(A(Y_{j}Y_{j+1}-Y_{j+1}Y_j)B[Y_{j'},Y_{j'+1}]C) \\
				={}& \varphi_k(A[Y_{j},Y_{j+1}]B[Y_{j'},Y_{j'+1}]C) \\
				={}& \varphi_k(A[Y_{j},Y_{j+1}]B(Y_{j'}Y_{j'+1}-Y_{j'+1}-Y_{j'})C) \\
				={}& \varphi_k(A[Y_{j},Y_{j+1}]BY_{j'}Y_{j'+1}C)-\varphi_k(A[Y_{j},Y_{j+1}]BY_{j'+1}Y_{j'}C),
			\end{align*}
			so we are done.
			
			\item Third relation: suppose our decompositions differ as $\sigma=\sigma_1s_js_{j+1}s_j\sigma_2=\sigma_1s_{j+1}s_js_{j+1}\sigma_2$, where $\sigma_2=s_{j_r}\cdots s_{j_1}$ and $\sigma_1=\sigma_{j_\ell}\cdots s_{j_{r+4}}$. Labeling the two decompositions as $s_{j_\ell}\cdots s_{j_1}$ and $s_{j_\ell'}\cdots s_{j_1'}$, respectively, we as above notice that the two sums
			\[\sum_{m=0}^{\ell-1}\varphi_k\big([,]_{j_{m+1}'}(s_{j_m'}\cdots s_{j_1'})X_{i_1}\cdots X_{i_{k+1}}\big)\qquad\text{and}\qquad\sum_{m=0}^{\ell-1}\varphi_k\big([,]_{j_{m+1}}(s_{j_m}\cdots s_{j_1})X_{i_1}\cdots X_{i_{k+1}}\big)\]
			only differ at terms $m\in\{r,r+1,r+2\}$, for otherwise we are applying to the same location of Lie bracket to the same permuted monomial.
			As such, we write $\sigma_2(X_{i_1}\cdots X_{i_{k+1}})=AY_jY_{j+1}Y_{j+2}B$ for some monomials $A$ and $B$, where the $Y_\bullet$s are at the corresponding location.
			Comparing terms $m\in\{r,r+1,r+2\}$, we would like for
			\begin{align*}
				&\varphi_k(A[Y_j,Y_{j+1}]Y_{j+2}B)+\varphi_k(AY_{j+1}[Y_j,Y_{j+2}]B)+\varphi_k(A[Y_{j+1},Y_{j+2}]Y_{j}B) \\
				\stackrel?={}& \varphi_k(AY_j[Y_{j+1},Y_{j+2}]B)+\varphi_k(A[Y_j,Y_{j+2}]Y_{j+1}B)+\varphi_k(AY_{j+2}[Y_{j},Y_{j+1}]B).
			\end{align*}
			Well, modulo $\ker\varphi_k$, we see that
			\begin{align*}
				& A[Y_j,Y_{j+1}]Y_{j+2}B + AY_{j+1}[Y_j,Y_{j+2}]B + A[Y_{j+1},Y_{j+2}]Y_{j}B \\
				={}& A\big(Y_jY_{j+1}Y_{j+2}-Y_{j+1}Y_jY_{j+2} + Y_{j+1}Y_jY_{j+2} - Y_{j+1}Y_{j+2}Y_j + Y_{j+1}Y_{j+2}Y_j - Y_{j+2}Y_{j+1}Y_j\big)B \\
				={}& A\big(Y_jY_{j+1}Y_{j+2} - Y_{j+2}Y_{j+1}Y_j\big)B,
			\end{align*}
			and
			\begin{align*}
				& AY_j[Y_{j+1},Y_{j+2}]B + A[Y_j,Y_{j+2}]Y_{j+1}B + AY_{j+2}[Y_{j},Y_{j+1}]B \\
				={}& A\big(Y_jY_{j+1}Y_{j+2}-Y_jY_{j+2}Y_{j+1} + Y_jY_{j+2}Y_{j+1}-Y_{j+2}Y_jY_{j+1} + Y_{j+2}Y_jY_{j+1}-Y_{j+2}Y_{j+1}Y_j\big)B \\
				={}& A\big(Y_jY_{j+1}Y_{j+2}-Y_{j+2}Y_{j+1}Y_j\big)B,
			\end{align*}
			so we will get the same result out after applying $\varphi_k$.
		\end{itemize}
		Because the three relations generate all equalities in $S_{k+1}$, we see that our $\varphi$ does not depend on the decomposition of $\sigma$.

		\item We check that the definition of $\varphi_{k+1}\left(\sigma(X_{i_1}\cdots X_{i_{k+1}})\right)$ does not depend on the choice of $\sigma$. Indeed, if $\sigma(X_{i_1}\cdots X_{i_{k+1}})=\sigma'(X_{i_1}\cdots X_{i_{k+1}})$ for two $\sigma,\sigma'\in S_{k+1}$, then $\sigma^{-1}\sigma'$ is a permutation which can only swap $X_{i_{j_1}}$ and $X_{i_{j_2}}$ when $i_{j_1}=i_{j_2}$. The collection of legal permutations is thus some product of symmetric groups (there is a permutation group for each $X_i$ because we are allowed to swap two copies of $X_i$ in different places). However, all the copies of $X_i$ in $X_{i_1}\cdots X_{i_{k+1}}$ are located right next to each other because this is an ordered monomial, so the legal permutations live in a product of symmetric groups of intervals of integers. Each of these individual symmetric groups of intervals of integers are generated by permutations $s_j$, so we can write
		\[\sigma'=\sigma s_{j_\ell}\cdots s_{j_1},\]
		where $s_{j_1},\ldots,s_{j_\ell}$ have $X_{i_{j_\bullet}}=X_{i_{j_\bullet+1}}$ for each $j_\bullet$.
		
		Thus, to check that our definition does not depend on the choice of $\sigma$, it is enough (by induction) to check that we can replace $\sigma$ with some $\sigma s_{j_1}$ when $X_{i_{j_1}}=X_{i_{j_1+1}}$. As such, we decompose $\sigma=s_{j_\ell}\cdots s_{j_2}$, and we want to show
		\[\sum_{m=0}^{\ell-1}\varphi_k\big([,]_{j_{m+1}}(s_{j_m}\cdots s_{j_1})X_{i_1}\cdots X_{i_{k+1}}\big)\stackrel?=\sum_{m=1}^{\ell-1}\varphi_k\big([,]_{j_{m+1}}(s_{j_m}\cdots s_{j_2})X_{i_1}\cdots X_{i_{k+1}}\big).\]
		These sums are term-wise equal for $m\ge1$ because it is the same Lie bracket applied to the same location of the same monomial (notably, $s_{j_1}$ fixes $X_{i_1}\cdots X_{i_{k+1}}$ by its construction). Thus, we want to show that
		\[\varphi_k\big([,]_{j_{1}}X_{i_1}\cdots X_{i_{k+1}}\big)\stackrel?=0.\]
		Well,
		\[[,]_{j_{1}}X_{i_1}\cdots X_{i_{k+1}}=X_{i_1}\cdots X_{i_{j-1}}[X_{i_j},X_{i_{j+1}}]X_{i_{j+1}}\cdots X_{i_{k+1}},\]
		which vanishes because $X_{i_j}=X_{i_{j+1}}$.
		
		\item We now know that our definition of $\varphi_k$ is well-defined. It remains to check that our linear map satisfies (c') for $\varphi_{k+1}$. Thus, fix some pair $(a,b)$ with $a+b+2\le k$; we may assume equality for otherwise this is true by the inductive hypothesis. The condition is linear in $A$ and $B$, so we may check it on a spanning subset of $\mc F_aT\mf g$ and $\mc F_bT\mf g$, for which we take the monomials; write $A=X_{i_1'}\cdots X_{i_a'}$ and $B=X_{i_{a+3}'}\cdots X_{i_{k+1}'}$. Similarly, the condition is linear in $X$ and $Y$, so we may assume that they are basis vectors $X_{i_{a+1}'}$ and $X_{i_{a+2}'}$. Rearranging, we would like to show that
		\[\varphi_k(s_a(X_{i_1'}\cdots X_{i_{k+1}'}))\stackrel?=\varphi_k(X_{i_1'}\cdots X_{i_{k+1}'})-\varphi_k([,]_aX_{i_1'}\cdots X_{i_{k+1}'}).\]
		Well, let $i_1\le\cdots\le i_{k+1}$ be an ordering, and let $\sigma\in S_{k+1}$ be the permutation so that $\sigma(i_j)=i_{\sigma(j)}'$. Thus, to compute $\varphi_k$, we expand $\sigma=s_{j_{\ell}}\cdots s_{j_1}$ and set $j_{\ell+1}\coloneqq a$ so that
		\begin{align*}
			\varphi_k(s_a\sigma(X_{i_1}\cdots X_{i_{k+1}})) &= X_{i_1}\cdots X_{i_{k+1}}-\sum_{m=0}^{\ell}\varphi_k\big([,]_{j_{m+1}}(s_{j_m}\cdots s_{j_1})X_{i_1}\cdots X_{i_{k+1}}\big) \\
			&= X_{i_1}\cdots X_{i_{k+1}}-\sum_{m=0}^{\ell-1}\varphi_k\big([,]_{j_{m+1}}(s_{j_m}\cdots s_{j_1})X_{i_1}\cdots X_{i_{k+1}}\big) \\
			&\qquad-\varphi_k\big([,]_{j_{\ell+1}}(s_{j_\ell}\cdots s_{j_1})X_{i_1}\cdots X_{i_{k+1}}\big) \\
			&= \varphi_k(\sigma (X_{i_1}\cdots X_{i_{k+1}}))-\varphi_k\big([,]_{a}\sigma (X_{i_1}\cdots X_{i_{k+1}})\big),
		\end{align*}
		as required.
		\qedhere
	\end{itemize}
\end{proof}

\subsection{Consequences of the Poincar\'e--Birkoff--Witt Theorem}
\Cref{thm:pbw} has important consequences for the structure of $U\mf g$. Let's see some.
\begin{corollary}
	Fix a Lie algebra $\mf g$ over a field $F$. Then the inclusion $\mf g\to U\mf g$ is actually injective.
\end{corollary}
\begin{proof}
	Let $\{X_1,\ldots,X_n\}$ be a basis of $\mf g$. Then \Cref{thm:pbw} implies that the monomials $\{X_1,\ldots,X_n\}\subseteq U\mf g$ are linearly independent. In particular, we see that any nonzero $X\in\mf g$ can be expanded as $\sum_{i=1}^na_iX_i$, where $a_i\ne0$ for some $i$, meaning that
	\[\sum_{i=1}^na_iX_i\in U\mf g\]
	is also nonzero by the aforementioned linear independence. Thus, the map $\mf g\to U\mf g$ has trivial kernel.
\end{proof}
\begin{corollary}
	Fix a Lie algebra $\mf g$ over a field $F$ with Lie subalgebras $\mf g_1,\ldots,\mf g_n\subseteq\mf g$ such that we have a vector space decomposition $\mf g=\mf g_1\oplus\cdots\oplus\mf g_n$. Then the ``multiplication'' map $\mu\colon U\mf g_1\otimes_F\cdots\otimes_F U\mf g_n\to U\mf g$, given by
	\[\mu(a_1\otimes\cdots\otimes a_n)\coloneqq a_1\cdots a_n\]
	on pure tensors, is an isomorphism of vector spaces.
\end{corollary}
\begin{proof}
	The point is that $\mu$ should send a basis of ordered monomials to a basis of ordered monomials. Quickly, observe that functoriality produces maps $U\mf g_\bullet\to U\mf g$ from the inclusions $\mf g_\bullet\subseteq\mf g$. As such, we may note that the map $U\mf g_1\times\cdots\times U\mf g_n\to U\mf g$
	\[(a_1,\ldots,a_n)\mapsto a_1\cdots a_n\]
	is $F$-multilinear because $U\mf g$ is an $F$-algebra, so we have indeed induced a unique morphism $U\mf g_1\otimes\cdots\otimes U\mf g_n\to U\mf g$ of vector spaces over $F$.

	It remains to check that this map is an isomorphism. Well, it is enough to check that it sends a basis. For this, we give each $\mf g_i$ a basis $\{X_{i1},\ldots,X_{in_i}\}$ so that the concatenation of these bases provides a basis of $\mf g$. Then the combination of \Cref{lem:pbw-span} and \Cref{thm:pbw} tells us that the ordered monomials
	\[X_{i1}^{d_{i1}}\cdots X_{in_i}^{d_{in_i}}\]
	form a basis of $\mf g_i$ for each $i$, so by taking the tensor product, we see that the ordered monomials
	\[X_{11}^{d_{11}}\cdots X_{1n_1}^{d_{1n_1}}\otimes\cdots\otimes X_{n1}^{d_{n1}}\cdots X_{nn_n}^{d_{nn_n}}\]
	form a basis of $U\mf g_1\otimes_F\cdots\otimes_F U\mf g_n$. On the other hand, the elements
	\[\left(X_{11}^{d_{11}}\cdots X_{1n_1}^{d_{1n_1}}\right)\cdots\left(X_{n1}^{d_{n1}}\cdots X_{nn_n}^{d_{nn_n}}\right)\]
	are the ordered monomials of $U\mf g$, so they also form a basis. Thus, $\mu$ sends a basis to a basis, so we are done.
\end{proof}
\begin{remark}
	The above proposition does not require the $\mf g_\bullet$s to commute within $\mf g$. Namely, it is not at all required that the vector space decomposition is actually a Lie algebra decomposition.
\end{remark}
% \begin{remark}
% 	Suppose we use the more general construction of $U\mf g$ as given in \Cref{rem:general-ug}. If we want the induced map $\mf g\to U\mf g$ to be injective, there are some requirements.
% 	\begin{itemize}
% 		\item Skew-symmetry: note 
% 	\end{itemize}
% \end{remark}
We next move on to results which sharpen \Cref{thm:pbw} in various ways. To begin, we will exhibit an isomorphism between $S\mf g$ and $\op{gr}U\mf g$. Let's begin with a couple lemmas.
\begin{lemma} \label{lem:gr-ug-commutative}
	Fix a Lie algebra $\mf g$ over a field $F$. Then $\op{gr}U\mf g$ is a commutative $F$-algebra.
\end{lemma}
\begin{proof}
	The point is to use \Cref{rem:spit-error-term} after making enough reductions. We would like to check that $ab=ba$ for all $a,b\in\op{gr}U\mf g$. This condition corresponds to an equality of some multilinear maps $\op{gr}U\mf g\times\op{gr}U\mf g\to\op{gr}U\mf g$, so it can be checked on spanning subsets of $\op{gr}U\mf g$. Namely, we may assume that $a\in\mc F_kU\mf g/\mc F_{k-1}U\mf g$ and $b\in\mc F_\ell U\mf g/\mc F_{\ell-1}U\mf g$. Now, by definition of $\mc F_kU\mf g$ in \Cref{ex:filter-ug} means that elements of $\mc F_kU\mf g$ can be written as homogeneous polynomials of degree $n$ in a basis $\{X_1,\ldots,X_n\}$ of $\mf g$. Thus, using the multilinearity, we may assume that $a\coloneqq X_{i_1}\cdots X_{i_k}$ and $b\coloneqq X_{j_1}\cdots X_{j_\ell}$ are monomials. We would like to show that $ab-ba=0$, which corresponds to showing that
	\[ab-ba\in\mc F_{k+\ell-1}U\mf g,\]
	which means that $ab-ba$ must be a linear combination of monomials of degree less than $k+\ell$. Well, let $\sigma,\tau\in S_{k+\ell}$ be permutations which order the monomials $ab$ and $ba$, which will produce the same ordered monomial $X_1^{d_1}\cdots X_n^{d_n}$ from both $ab$ and $ba$ (because we are reordering the same multiset $\{i_1,\ldots,i_k\}\sqcup\{j_1,\ldots,j_\ell\}$). But now \Cref{rem:spit-error-term} tells us that $ab-X_1^{d_1}\cdots X_n^{d_n}$ and $ba-X_1^{d_1}\cdots X_n^{d_n}$ both live in $\mc F_{k+\ell-1}U\mf g$, so $ab-ba\in\mc F_{k+\ell-1}U\mf g$, as required.
\end{proof}
\begin{proposition} \label{prop:gr-ug-is-sg}
	Fix a Lie algebra $\mf g$ over a field $F$ with basis $\{X_1,\ldots,X_n\}$. Then the map $S\mf g\to\op{gr}U\mf g$ given by
	\[X_1^{d_1}\cdots X_n^{d_n}\mapsto X_1^{d_1}\cdots X_n^{d_n}\in\frac{\mc F_{d_1+\cdots+d_n}U\mf g}{\mc F_{d_1+\cdots+d_n-1}U\mf g}\]
	is an isomorphism of graded $F$-algebras.
\end{proposition}
\begin{proof}
	Quickly, we note that there is a unique $F$-linear map $S\mf g\to\op{gr}U\mf g$ because ordered monomials form a basis of $S\mf g$: recall from \Cref{ex:sg} that $S\mf g=F[X_1,\ldots,X_n]$ is a commutative polynomial ring.
	
	To show that such an $F$-algebra morphism exists, we use the universal property of such polynomial rings is that an $F$-algebra map out of $S\mf g$ is determined exactly by choosing where the elements $\{X_1,\ldots,X_n\}$ go, provided the target is a commutative $F$-algebra. Thus, we define $\varphi\colon S\mf g\to\op{gr}U\mf g$ by defining $\varphi(X_i)\coloneqq X_i$ for each $i$. (Note $\op{gr}U\mf g$ is commutative by \Cref{lem:gr-ug-commutative}.) Here are the required checks on this map.
	\begin{itemize}
		\item On ordered monomials $X_1^{d_1}\cdots X_n^{d_n}$, we see that
		\[\varphi\left(X_1^{d_1}\cdots X_n^{d_n}\right)=\varphi(X_1)^{d_1}\cdots\varphi(X_n)^{d_n}=X_1^{d_1}\cdots X_n^{d_n},\]
		which we note lives in the degree-$d$ piece $\mc F_{d_1+\cdots+d_n}U\mf g/\mc F_{d_1+\cdots+d_n-1}U\mf g$ because each $X_i\in\op{gr}U\mf g$ has degree $1$.
		\item Graded: we claim that if $p(X_1,\ldots,X_n)\in S\mf g$ is in the degree-$d$ graded piece, then $\varphi(p)\in\op{gr}U\mf g$ is in the degree-$d$ graded piece as well. The graded pieces are $F$-linear subspaces, so we may check this on a basis of the degree-$d$ graded piece of $S\mf g$, for which we use the ordered monomials $X_1^{d_1}\cdots X_n^{d_n}$ of total degree $d$. But then the previous check already verified that $\varphi\left(X_1^{d_1}\cdots X_n^{d_n}\right)$ lands in the correct graded piece.
		\item Surjective: we use \Cref{lem:pbw-span}. It is enough to check that the spanning subset of homogeneous elements of $\op{gr}U\mf g$ are in the image of $\varphi$. Namely, we want a component $\mc F_kU\mf g/\mc F_{k-1}U\mf g$ to be in $\im\varphi$. However, $\mc F_kU\mf g$ consists of the sum of homogeneous polynomials in $\{X_1,\ldots,X_n\}$ of degree $k$, so it is enough to check that homogeneous polynomials in $\{X_1,\ldots,X_n\}$ of degree $k$ in $\mc F_kU\mf g/\mc F_{k-1}U\mf g$ are in $\im\varphi$. (Explicitly, $\mc F_{k-1}U\mc g$ kills homogeneous polynomials of degree less than $k$.) However, such homogeneous polynomials are spanned by the monomials
		\[X_1^{d_1}\cdots X_n^{d_n}\]
		of total degree $k$, which we note equals $\varphi\left(X_1^{d_1}\cdots X_n^{d_n}\right)\in\mc F_kU\mf g/\mc F_{k-1}$ and thus is in the image of $\varphi$.
		\item Injective: we use \Cref{thm:pbw} to show $\ker\varphi=0$. Suppose that some polynomial $p(X_1,\ldots,X_n)\in S\mf g$ vanishes in $\op{gr}U\mf g$. Splitting up $p$ up into graded pieces by the degree, the fact that $\varphi$ preserves grading allows us to assume that $p$ is homogeneous of degree $d$. Thus, say that
		\[\sum_{\substack{(d_1,\ldots,d_n)\in\NN^n\\d_1+\cdots+d_n=d}}a_{(d_1,\ldots,d_n)}X_1^{d_1}\cdots X_n^{d_n}\in\ker\varphi,\]
		and we want to check that this element actually vanishes. Well, unwrapping the definition of $\varphi$, we see that
		\[\sum_{\substack{(d_1,\ldots,d_n)\in\NN^n\\d_1+\cdots+d_n=d}}a_{(d_1,\ldots,d_n)}X_1^{d_1}\cdots X_n^{d_n}\in\mc F_{d_1+\cdots+d_n-1}U\mf g.\]
		Namely, we have a homogeneous polynomial of degree $d$ which can be written as an $F$-linear combination of homogeneous polynomials of strictly smaller degree, so we may write
		\[\sum_{\substack{(d_1,\ldots,d_n)\in\NN^n\\d_1+\cdots+d_n=d}}a_{(d_1,\ldots,d_n)}X_1^{d_1}\cdots X_n^{d_n}=\sum_{\substack{(d_1,\ldots,d_n)\in\NN^n\\d_1+\cdots+d_n<d}}a_{(d_1,\ldots,d_n)}X_1^{d_1}\cdots X_n^{d_n}\]
		for some new coefficients $a_{(d_1,\ldots,d_n)}$. However, the monomials $X_1^{d_1}\cdots X_n^{d_n}$ over all total degrees are linearly independent in $U\mf g$ by \Cref{thm:pbw}, so we see that all coefficients $a_{(d_1,\ldots,d_n)}$ must vanish, so in particular $p=0$.
		\qedhere
	\end{itemize}
\end{proof}
\begin{corollary}
	Fix a Lie algebra $\mf g$ over a field $F$. Then the algebra $U\mf g$ has no zero divisors.
\end{corollary}
\begin{proof}
	By \Cref{lem:zero-divisor-gr}, it is enough to check that $\op{gr}U\mf g$ has no zero divisors. But \Cref{prop:gr-ug-is-sg} tells us that $\op{gr}U\mf g$ is isomorphic to $S\mf g$ as rings, and the commutative polynomial ring $S\mf g$ certainly does not have zero divisors.
\end{proof}
\Cref{prop:gr-ug-is-sg} may be unsatisfying because it requires us to pass through $\op{gr}U\mf g$ even though it is really $U\mf g$ which interests us. Of course, we cannot expect $U\mf g$ and $S\mf g$ to be isomorphic as $F$-algebras because $U\mf g$ is not commutative in general (indeed, $XY-YX=[X,Y]$ only vanishes when $\mf g$ is abelian). However, we can get some structure preserved.
\begin{proposition} \label{prop:sg-is-ug}
	Fix a Lie algebra $\mf g$ over a field $F$. Define $\op{sym}\colon S\mf g\to U\mf g$ by
	\[\op{sym}(Y_1\cdots Y_k)\coloneqq\frac1{k!}\sum_{\sigma\in S_k}Y_{\sigma(1)}\cdots Y_{\sigma(k)}\]
	for any $Y_1,\ldots,Y_k\in\mf g$. Then $\op{sym}$ is a well-defined isomorphism of $\mf g$-modules, where we are using the adjoint action by $\mf g$.
\end{proposition}
\begin{proof}
	This is on the homework.
	% We run our checks in sequence. Let $\{X_1,\ldots,X_n\}$ be a basis of $\mf g$.
	% \begin{itemize}
	% 	\item Unique: note that $S\mf g$ is spanned as an $F$-vector space by monomials of the form $Y_1\cdots Y_k$, so $\op{sym}$ is certainly uniquely defined by the given data.
	% 	\item Well-defined: we begin by defining a map $\op{sym}\colon T\mf g\to U\mf g$ to satisfy the given equation, and then we will take a quotient by the ideal $I$ which is the kernel of linear map $T\mf g\onto S\mf g$. Well, to define $\op{sym}\colon T\mf g\to U\mf g$ as a linear map, it is enough to define it on the summands $\mf g^{\otimes k}$ of $T\mf g$, so we note that the map
	% 	\[(Y_1,\ldots,Y_k)\mapsto\frac1{k!}\sum_{\sigma\in S_k}Y_{\sigma(1)}\cdots Y_{\sigma(k)}\]
	% 	is an $F$-multilinear map $\mf g^k\to U\mf g$ because multiplication in $U\mf g$ is $F$-linear. Thus, we induce a map $\op{sym}\colon\mf g^{\otimes k}\to U\mf g$ such that
	% 	\[(Y_1\otimes\cdots\otimes Y_k)\mapsto\frac1{k!}\sum_{\sigma\in S_k}Y_{\sigma(1)}\cdots Y_{\sigma(k)}.\]
	% 	We now descend this to a map $S\mf g\to U\mf g$. It is not immediately enough to check this on generators of $I$ as an ideal because $\op{sym}$ is not a morphism of $F$-algebras. Thus, we must check the result on generators of $I$ as an abelian group: for $a,b\in T\mf g$ and $Y_1,Y_2\in\mf g$, we must check that
	% 	\[\op{sym}(a(Y_1\otimes Y_2-Y_2\otimes Y_1))\stackrel?=0,\]
	% 	where there is also a symmetric statement for right multiplication, which will have a sufficiently symmetric proof. %(Technically, we must also check that $\op{sym}(Y_1\otimes Y_2-Y_1\otimes Y_2)=0$, which is true by a direct expansion.)
	% 	Upon fixing $Y_1$ and $Y_2$, we see that we are checking some linear map $T\mf g\to U\mf g$ vanishes. Thus, we may check this when $a$ is homogeneous and even a pure tensor $a\coloneqq Y_3\otimes\cdots\otimes Y_k$ for some $k\ge2$ (permitting the empty pure tensor). As such, we compute
	% 	\begin{align*}
	% 		\op{sym}(a(Y_1\otimes Y_2)) &= \op{sym}(Y_3\otimes\cdots\otimes Y_k\otimes Y_1\otimes Y_2) \\
	% 		&= \frac1{k!}\sum_{\sigma\in S_k}Y_{\sigma(3)}\cdots Y_{\sigma(k)}Y_{\sigma(1)}Y_{\sigma(2)} \\
	% 		&\stackrel*= \frac1{k!}\sum_{\sigma\in S_k}Y_{\sigma(3)}\cdots Y_{\sigma(k)}Y_{\sigma(2)}Y_{\sigma(1)} \\
	% 		&= \op{sym}(Y_3\otimes\cdots\otimes Y_k\otimes Y_2\otimes Y_1) \\
	% 		&= \op{sym}(a(Y_2\otimes Y_1)),
	% 	\end{align*}
	% 	where the key point is that $\stackrel*=$ is merely a re-indexing of the sum to multiply $\sigma\in S_k$ by an additional transposition.
	%
	% 	\item Surjective: it is enough to surject onto $\mc F_iU\mf g$ for each $i\ge0$ because $U\mf g$ is a filtered $F$-algebra. For this, we will induct on $i$, where the base case of $i=-1$ has no content because $\mc F_{-1}U\mf g=0$. For the inductive step, we may assume that $\mc F_iU\mf g$ is already in the image, and we want to check that $\mc F_{i+1}U\mf g$ is in the image. By \Cref{lem:pbw-span}, it is enough to merely achieve the ordered monomials. Now, by \Cref{rem:spit-error-term}, we see that
	% 	\[\op{sym}\left(X_1^{a_1}\cdots X_n^{a_n}\right)\equiv X_1^{a_1}\cdots X_n^{a_n}\pmod{\mc F_iU\mf g}\]
	% 	if the total degree of $X_1^{a_1}\cdots X_n^{a_n}$ is $i+1$: all summands in $\op{sym}\left(X_1^{a_1}\cdots X_n^{a_n}\right)$ can be reordered to return to the ordered monomial $X_1^{a_1}\cdots X_n^{a_n}$ via \Cref{rem:spit-error-term} (up to elements of $\mc F_iU\mf g$). Thus, we see that all ordered monomials of total degree $i+1$ are in the image, which completes this check.
	%
	% 	\item Injective: we will have to use \Cref{thm:pbw}. Suppose that $p(X_1,\ldots,X_n)\in S\mf g$ is a nonzero polynomial. We will show that $\op{sym}(p)\ne0$. For example, if $p$ is constant, then of course $\op{sym}(p)=p$ is nonzero. Otherwise, let the total degree of $p$ be $i+1$ where $i\ge0$, and we will show $\op{sym}(p)\notin\mc F_iU\mf g$. Note that any terms in $p(X_1,\ldots,X_n)$ of total degree $i$ go to elements of $\mc F_iU\mf g$ by the construction of $\op{sym}$, so we may throw these terms to assume that $p(X_1,\ldots,X_n)$ is homogeneous of degree $i+1$. As such, we write
	% 	\[p(X_1,\ldots,X_n)=\sum_{\substack{(d_1,\ldots,d_n)\in\NN^n\\d_1+\cdots+d_n=i+1}}a_{(d_1,\ldots,d_n)}X_1^{d_1}\cdots X_n^{d_n}.\]
	% 	Now, we again use \Cref{rem:spit-error-term} to reorder our monomials$\pmod{\mc F_iU\mf g}$ so that
	% 	\[\op{sym}(p)\equiv\sum_{\substack{(d_1,\ldots,d_n)\in\NN^n\\d_1+\cdots+d_n=i+1}}a_{(d_1,\ldots,d_n)}X_1^{d_1}\cdots X_n^{d_n}\pmod{\mc F_iU\mf g}.\]
	% 	Thus, adding in terms of degree at most $i$, we see
	% 	\[\op{sym}(p)=\sum_{\substack{(d_1,\ldots,d_n)\in\NN^n\\d_1+\cdots+d_n\le i+1}}a_{(d_1,\ldots,d_n)}X_1^{d_1}\cdots X_n^{d_n}.\]
	% 	However, $p$ is nonzero, so some coefficient on the right-hand side is nonzero, so the right-hand side is nonzero because ordered monomials are linearly independent (by \Cref{thm:pbw}!), so $\op{sym}(p)\ne0$.
	%
	% 	\item $\mf g$-module: for any $X\in\mf g$, we must check that $\op{sym}(\op{ad}_Xp)=\op{ad}_X\op{sym}(p)$ for any $p\in S\mf g$. This is an equality of linear functions $S\mf g\to U\mf g$, so it is enough to check it on a spanning subset of $S\mf g$, so we will choose the spanning subset of pure tensors. As such, for $Y_1,\ldots,Y_k\in\mf g$, we compute
	% 	\[\op{sym}(\op{ad}_X(Y_1\cdots Y_k)) = \op{sym}\Bigg(\sum_{i=1}^kY_1\cdots Y_{i-1}[X,Y_i]Y_{i+1}\cdots Y_k\Bigg).\]
	% 	To move $\op{sym}$ inside, we need some notation: for each $i$, set $Y^i_j$ to be $Y_j$ if $i\ne j$ and $[X,Y_i]$ if $i=j$. Then
	% 	\begin{align*}
	% 		\op{sym}(\op{ad}_X(Y_1\cdots Y_k)) &= \sum_{i=1}^k\op{sym}\left(Y_1^i\cdots Y_k^i\right) \\
	% 		&= \frac1{k!}\sum_{i=1}^k\sum_{\sigma\in S_k}Y_{\sigma(1)}^i\cdots Y_{\sigma(k)}^i \\
	% 		&= \frac1{k!}\sum_{\sigma\in S_k}\sum_{i=1}^kY_{\sigma(1)}^i\cdots Y_{\sigma(k)}^i.
	% 	\end{align*}
	% 	We now acknowledge that the inner sum simply equals $\op{ad}_X\left(Y_{\sigma(1)}\cdots Y_{\sigma(k)}\right)$ after some rearranging of summands, so
	% 	\begin{align*}
	% 		\op{sym}(\op{ad}_X(Y_1\cdots Y_k)) &= \frac1{k!}\sum_{\sigma\in S_k}\op{ad}_X\left(Y_{\sigma(1)}\cdots Y_{\sigma(k)}\right) \\
	% 		&= \op{ad}_X\bigg(\frac1{k!}\sum_{\sigma\in S_k}Y_{\sigma(1)}\cdots Y_{\sigma(k)}\bigg) \\
	% 		&= \op{ad}_X(\op{sym}(Y_1\cdots Y_k)),
	% 	\end{align*}
	% 	as required.
	% 	\qedhere
	% \end{itemize}
\end{proof}
\begin{corollary}
	Fix a Lie algebra $\mf g$ over a field $F$. The map $\op{sym}\colon S\mf g\to U\mf g$ of \Cref{prop:sg-is-ug} restricts to an isomorphism
	\[(S\mf g)^{\mf g}\to Z(U\mf g).\]
\end{corollary}
\begin{proof}
	Because $\op{sym}$ is an isomorphism of $\mf g$-modules, we see that $\mf g$ will restrict to an isomorphism of $\mf g$-invariants. On one hand, the $\mf g$-invariants of $S\mf g$ make the space $(S\mf g)^{\mf g}$. On the other hand, we claim $(U\mf g)^{\mf g}=Z(U\mf g)$, which will complete the proof. In one direction, note $a\in Z(U\mf g)$ implies that $Xa=aX$ for all $X\in\mf g$, so $\op{ad}_X(a)=0$ by \Cref{lem:ad-action-ug}. In the other direction, if $a\in(U\mf g)^{\mf g}$, we merely know $\op{ad}_X(a)=Xa-aX$ vanishes for all $X\in\mf g$. Thus, we define
	\[C(a)\coloneqq\{b\in U\mf g:ab=ba\}.\]
	Note that $C(a)\subseteq U\mf g$ is the kernel of the linear map $b\mapsto ab-ba$, so it is a linear subspace. Additionally, $C(a)$ is closed under multiplication: if $b,b'\in C(a)$, then $abb'=bab'=bb'a$, so $bb'\in C(a)$. Now, we would like to check that $C(a)=U\mf g$, for which it is enough to check that $C(a)$ contains monomials (because these span $U\mf g$), for which it is enough to check that $\mf g\subseteq C(a)$ (because monomials are products of elements of $\mf g$).
\end{proof}
% \begin{remark}
% 	As a consequence, we see that the invariant subspace of $U\mf g$ by the adjoint action is the same as for $S\mf g$, which of course is $Z(U\mf g)$. For example, if $G$ is connected with $\mf g=\op{Lie}G$, then one sees that these are also the $G$-invariants.
% \end{remark}
% \begin{example}
% 	One can check that the Casimir element $C=ef+fe+\frac12h^2$ lives in the center of $Z(\mf{sl}_2)$. In fact, one can show that $Z(\mf{sl}_2)$ is generated by $C$.
% \end{example}

\end{document}