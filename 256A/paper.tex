% LTeX: enabled=false

\documentclass{article}
\usepackage[utf8]{inputenc}

\newcommand{\nirpdftitle}{256A Term Paper}
\usepackage{import}
\inputfrom{.}{pre}
\usepackage[backend=biber,
    style=alphabetic,
    sorting=ynt
]{biblatex}
\addbibresource{../bib.bib}
\addtolength{\headheight}{12.0pt}

\pagestyle{contentpage}

\title{Abelian Varieties}
\author{Nir Elber}
\date{9 December 2022}
\rhead{\textit{ABELIAN VARIETIES}}

\begin{document}

\maketitle

% \begin{abstract}
% 	\noindent We introduce the basics of abelian varieties for the sake of being able to state the Tate conjecture and some of its applications.
% \end{abstract}

\setcounter{tocdepth}{2}
\tableofcontents

\section{Introduction}
The goal of this paper is to introduce some of the theory around abelian varieties for the purpose of stating Tate's conjecture for abelian varieties over a field and explain some applications. As such, abelian varieties and their Tate modules will be the main characters of our story.
\begin{definition}[Abelian variety]
	Fix a field $k$. An \textit{abelian $k$-variety} is a smooth, geometrically integral, projective group $k$-variety.
\end{definition}
Recall that a $k$-variety is a reduced, separated $k$-scheme of finite type, and a group $k$-variety is a $k$-variety which is a group object in the category of schemes.
\begin{remark}
	In practice, one can get away with only assuming that an abelian variety is proper and geometrically integral, and being smooth and projective follow. For example, see \cite[\href{https://stacks.math.columbia.edu/tag/0BF9}{Section 0BF9}]{stacks}.
\end{remark}
We could define Tate modules here, but we will wait until \autoref{sec:tate-conj} when we will be able to understand what we're looking at. For now, we say that each abelian variety $A$ over $k$ has attached to an $\ell$-adic Tate module $T_\ell A$ (which is a $\ZZ_\ell$-module), for each prime $\ell$ not divisible by the characteristic of $k$. Roughly speaking, the Tate module $T_\ell A$ is some algebraic gadget built from $\ell$-power torsion of $A$.

It turns out that the $T_\ell$ construction is functorial. This allows us to state Tate's conjecture.
\begin{conj}[Tate] \label{conj:tate}
	Fix abelian varieties $A$ and $B$ over a field $k$. Then the map $\varphi\mapsto T_\ell\varphi$ induces an isomorphism
	\[\op{Hom}_k(A,B)\otimes_\ZZ\ZZ_\ell\to\op{Hom}_k(T_\ell A,T_\ell B).\]
	Here, $\op{Hom}_k(A,B)$ denotes the homomorphisms $A\to B$, and $\op{Hom}_k(T_\ell A,T_\ell B)$ denotes the homomorphisms fixed by some Galois action to be defined later.
\end{conj}
Note that we are looking at $\op{Hom}_k(A,B)\otimes_\ZZ\ZZ_\ell$ instead of $\op{Hom}_k(A,B)$ to ensure we have a $\ZZ_\ell$-module structure.

% We will see in \autoref{cor:ab-var-is-ab} that the group law on abelian varieties $A$ is commutative, so will write the group law on $A$ additively. Furthermore, each integer $n\in\ZZ$ defines a group homomorphism $[n]\colon A\to A$ given by multiplication by $n$. For notational convenience, we have the following convention.
% \begin{notation}
% 	Fix an abelian variety $A$ over a field $k$. For each $n\in\ZZ$, we define $A[n]$ to be the kernel (in other words, the fiber over $0$) of the multiplication-by-$n$ map $[n]\colon A\to A$.
% \end{notation}
% We are now ready to define the Tate module. Given integers $n$ and $d$, we have an inclusion
% \[A[n]\subseteq A[nd].\]
% The Tate module is constructed by taking an inverse limit over these.
% \begin{definition}[Tate module]
% 	Fix an abelian variety $A$ over a field $k$. For a finite prime $\ell$ not equal to $0$ in $k$, we define the \textit{$\ell$-adic Tate module}
% 	\[T_\ell A\coloneqq\limit_{n\in\ZZ^+}A\left[\ell^n\right](k^{\mathrm{sep}}).\]
% \end{definition}
% Here is a quick reason to care about Tate modules: each $A\left[\ell^n\right](k^{\mathrm{sep}})$ is a $\ZZ/\ell^n\ZZ$, so $T_\ell A$ is a $\ZZ_\ell$-module. In fact, setting $d\coloneqq\dim A$, we will be able to show that $T_\ell A\cong\ZZ_\ell^{2d}$, so the Galois action defines a representation
% \[\op{Gal}(k^{\mathrm{sep}}/k)\to\op{GL}(T_\ell A)\cong\op{GL}_{2d}(\ZZ_\ell)\subseteq\op{GL}_{2d}(\QQ_\ell).\]
% Thus, we see that abelian varieties have attached to them a Galois representation.

% By definition, we see that $T_\ell$ is functorial, so a morphism $\varphi\colon A\to B$ of abelian varieties will induce a morphism $\varphi_\ell\colon T_\ell A\to T_\ell B$. To keep track of our structure, we will want to limit the morphisms we pay attention to.
% \begin{definition}[Isogeny]
% 	A homorphism $\varphi\colon A\to B$ of abelian varieties over $k$ is an \textit{isogeny} if and only if $\varphi$ is surjective and has finite kernel. We will denote the set of isogenies $A\to B$ by $\op{Hom}_k(A,B)$.
% \end{definition}
% We are now ready to state Tate's conjecture.
% % \begin{conj}[Tate] \label{conj:tate}
% % 	Fix abelian varieties $A$ and $B$ over a field $k$. Then the map $\varphi\mapsto T_\ell\varphi$ induces an isomorphism
% % 	\[\op{Hom}_k(A,B)\otimes_\ZZ\ZZ_\ell\to\op{Hom}_k(T_\ell A,T_\ell B).\]
% % \end{conj}
% Note that we are looking at $\op{Hom}_k(A,B)\otimes_\ZZ\ZZ_\ell$ instead of $\op{Hom}_k(A,B)$ so that we have a $\ZZ_\ell$-module structure.

\autoref{conj:tate} is truly amazing: approximately speaking, we are able to intelligently discuss the structure of an abelian variety (up to isogeny)\todo{}

Tate's conjecture is known when $k$ is a finite field \cite{tate-conj-tate} and when $k$ is a number field.\todo{Faltings} Both of these proofs are beyond the scope of this paper. Instead, we will content with proving the following (much easier) result.
\begin{restatable}{theorem}{easytate} \label{thm:easy-tate}
	Fix abelian varieties $A$ and $B$ over a field $k$. Then the map $\varphi\mapsto T_\ell\varphi$ induces an injection
	\[T_\ell\colon\op{Hom}_k(A,B)\otimes_\ZZ\ZZ_\ell\to\op{Hom}_k(T_\ell A,T_\ell B).\]
\end{restatable}

\subsection{Layout}
Say words.\todo{}

\subsection{Notation}
Throughout, $k$ will denote a field, and $A,B,C$ will be abelian varieties over $k$. We will allow $\op{char}k\ne0$ and to not be algebraically closed. All morphisms are $k$-morphisms. When needed, we denote the group law on $A$ by $\mu_A\colon A\times A\to A$ or $+\colon A\times A\to A$, the identity by $0_A\colon\Spec k\to A$, and the inversion map by $\iota_A\colon A\to A$ or $[-1]\colon A\to A$. All scheme products will be over $k$.

\section{Torsion of Abelian Varieties}
The main goal of the present section is to show $A\left[\ell^n\right](k^{\mathrm{sep}})\cong\left(\ZZ/\ell^n\ZZ\right)^{2g}$ for $\op{char}k\ne\ell$, where $g=\dim A$. Along the way, we will develop some of the theory of isogenies which we will need for \autoref{thm:easy-tate}.

Before going any further, we introduce the examples which will follow us throughout the paper.
\begin{example} \label{ex:ec}
	Let $k$ be a field with $\op{char}k\notin\{2,3\}$. Then $E\coloneqq\Proj k[X,Y,Z]/\left(Y^2Z-X^3-Z^3\right)$ is an elliptic curve. Indeed, the discriminant of the corresponding planar curve $y^2=x^3+1$ is $3^3$, which is not $0$ because $\op{chark}k\notin\{2,3\}$. Explicitly, the discriminant computation shows $E$ is $k$-smooth, we see $E$ is irreducible over any finite extension $k'/k$ so that $E$ is geometrically integral, and $E$ embeds into $\PP^2_k$ and is thus projective.
\end{example}
\begin{example} \label{ex:c-mod-lattice}
	Let $\Lambda$ be a lattice in $\CC^g$ for some $g\in\ZZ^+$. Then one can check that $\CC/\Lambda$ defines abelian variety over $\CC$.
\end{example}

\subsection{Basic Properties}
We will permit arbitrary $k$-morphisms $\varphi\colon A\to B$ to be morphisms of abelian varieties over a field $k$, but we will shortly show that they must admit quite a bit of structure.
\begin{remark} \label{rem:morphism-is-proper}
	For example, let $\varphi\colon A\to B$ be a morphism of abeian varieties over a field $k$. Because the structure morphism $\alpha\colon A\to\Spec k$ is proper, and similarly $\beta\colon B\to\Spec k$ is separated, it is a consequence of the Cancellation~Theorem \cite[Theorem~11.2.1]{rising-sea} that $\varphi$ is proper. Namely, the diagonal morphism $\Delta\beta\colon B\times B\to\Spec k$ is a closed embedding and thus proper.
\end{remark}
Even though we permit all morphisms, some morphisms are still better than others.
\begin{definition}[Homomorphism]
	Fix a morphism $\varphi\colon A\to B$ of abelian varieties over a field $k$. Then $\varphi$ is a \textit{homomorphism} if and only if $\varphi\circ\mu_A=\mu_B\circ(\varphi,\varphi)$. Equivalently, for any $k$-scheme $T$, we require
	\[\varphi(t_1)+\varphi(t_2)=\varphi(t_1+t_2)\]
	for all $t_1,t_2\in A(T)$. If $A=B$, then we call $\varphi$ an \textit{endomorphism}. The group of homomorphisms (with pointwise operation) is denoted $\op{Hom}_k(A,B)$, and the ring of endomorphisms (with multiplication given by composition) is denoted $\op{End}_k(A)$.
\end{definition}
\begin{theorem}[Rigidity] \label{thm:rigid}
	Let $X,Y,Z$ be proper irreducible varieties over a field $k$, and let $p\in X(k)$ and $q\in Y(k)$ be rational points. If a morphism $\varphi\colon X\times Y\to Z$ is constant on $X\times\{p\}$ and $\{q\}\times Y$, then $\varphi$ is constant.
\end{theorem}
\begin{proof}
	We refer to \cite[Rigidity~Lemma~11.5.12]{rising-sea}. Note we have stated this result for varieties so as not to give the impression that this is a theorem about group schemes.
\end{proof}
% \begin{remark}
% 	Although the above statement of \autoref{thm:rigid} appears group-theoretic, it is in fact a statement about proper $k$-varieties.
% \end{remark}
\begin{corollary} \label{cor:morphism-of-ab-vars}
	Let $\varphi\colon A\to B$ be a morphism of abelian $k$-varieties. Then $\varphi$ is the composition of a homomorphism and a translation.
\end{corollary}
\begin{proof}
	We apply \autoref{thm:rigid}. Set $b\coloneqq\varphi(0_A)\in B(k)$. Letting $\tau\coloneqq\mu(-,b)$ denote translation by $b$, it suffices to show $\psi\coloneqq\tau^{-1}\varphi$ is a homomorphism, where now $\psi(0_A)=0_B$. (Here, $\tau^{-1}=\mu\left(-,b^{-1}\right)$.) For this, we need to show
	\[\mu_B\circ(\psi,\psi)=\psi\circ\mu_A.\]
	Equivalently, we need to show $\mu_B\big(\mu_B\circ(\psi,\psi),\iota\circ\psi\circ\mu_A\big)$ is constant, which we can check on $A\times\{0_A\}$ and $\{0_A\}\times A$.
\end{proof}
\begin{corollary} \label{cor:ab-var-is-ab}
	Fix a field $k$ and an abelian $k$-variety $A$. The group law on $A$ is commutative.
\end{corollary}
\begin{proof}
	By \autoref{cor:morphism-of-ab-vars}, the inversion morphism $\iota\colon A\to A$ can be written as $\tau\circ\varphi$, where $\tau$ is a translation and $\varphi$ a homomorphism. However, $\iota(0_A)=0_A$, so $\tau(0_A)=0_A$, so $\tau=\id_A$. Thus, $\iota$ is a homomorphism, so it follows $A$ is commutative. (Formally, one could diagram chase with arrows and note $A(T)$ is commutative for any test $k$-scheme $T$.)
\end{proof}
\begin{example}
	The group law of the elliptic curve in \autoref{ex:ec} comes from $\op{Pic}^0(E)$ and is therefore commutative. The group law of \autoref{ex:c-mod-lattice} is of course commutative.
\end{example}
To define the Tate module, we will need a firm understanding of torsion, so we pick up the corresponding morphism.
\begin{notation}
	Given an abelian variety $A$ over a field $k$, we define the morphism $[n]\colon A\to A$ by
	\[[n]\colon a\mapsto \underbrace{a+\cdots+a}_n\]
	for some integer $n$.
\end{notation}
Now that we know the group law is abelian (\autoref{cor:ab-var-is-ab}), we know $[n]\colon A\to A$ is a homomorphism.

\subsection{The Theorem of the Cube}
It will shortly be helpful for us to have the following result.
\begin{theorem}[Cube] \label{thm:cube}
	Let $X,Y,Z$ be proper irreducible varieties over $k$, and let $p\in X(k)$ and $q\in Y(k)$ and $r\in Z(k)$ be rational points. Then a line bundle $\mc L$ on $X\times Y\times Z$ is trivial if its restrictions to $\{p\}\times Y\times Z$ and $X\times\{q\}\times Z$ and $A\times B\times\{r\}$ are all trivial.
\end{theorem}
\begin{proof}
	Proving this would take us a little too far afield, so we refer to \cite[\href{https://stacks.math.columbia.edu/tag/0BF4}{Theorem 0BF4}]{stacks}. As with \autoref{thm:rigid}, we have stated this result for varieties so as not to give the impression that this is a result about group schemes.
\end{proof}
We will be interested in using \autoref{thm:cube} to compute pull-backs of line bundles along $[n]\colon A\to A$. As such, we apply \autoref{thm:cube} to obtain the following sequence of corollaries.
\begin{corollary} \label{cor:add-a-la-cube}
	Fix an abelian variety $A$ over a field $k$. Given integers $c_1,\ldots,c_n$, define the homomorphism $\mu_{c_1\ldots c_n}\colon A^n\to A$ by
	\[\mu_{c_1\ldots c_n}(a_1,\ldots,a_n)\coloneqq\sum_{i=1}^nc_ia_i.\]
	Then, for any line bundle $\mc L$ on $A$,
	\[\mu_{111}^*\mc L\otimes\mu_{100}^*\mc L\otimes\mu_{010}^*\mc L\otimes\mu_{001}^*\mc L\cong\mu_{110}^*\mc L\otimes\mu_{101}^*\mc L\otimes\mu_{011}^*\mc L.\]
\end{corollary}
\begin{proof}
	We apply \autoref{thm:cube} to the difference
	\[\mc M\coloneqq\mu_{111}^*\mc L\otimes\mu_{100}^*\mc L\otimes\mu_{010}^*\mc L\otimes\mu_{001}^*\mc L\otimes\left(\mu_{110}^*\mc L\right)^{\otimes-1}\otimes\left(\mu_{101}^*\mc L\right)^{\otimes-1}\otimes\left(\mu_{011}^*\mc L\right)^{\otimes-1}.\]
	By symmetry, to apply \autoref{thm:cube}, it suffices to show that $\mc M$ when restricted to $A\times A\times\{0_A\}$. Well, under the isomorphism $A\times A\times\{0_A\}\cong A\times A$, the morphism $\mu_{c_1c_2c_3}\colon A\times A\times\{0_A\}\to A$ becomes $\mu_{c_1c_2}\colon A\times A\to A$, so $\mc M$ restricted to $A\times A\times\{0_A\}$ looks like
	\[\mu_{11}^*\mc L\otimes\mu_{10}^*\mc L\otimes\mu_{01}^*\mc L\otimes\mu_{00}^*\mc L\otimes\left(\mu_{11}^*\mc L\right)^{\otimes-1}\otimes\left(\mu_{10}^*\mc L\right)^{\otimes-1}\otimes\left(\mu_{01}^*\mc L\right)^{\otimes-1}.\]
	After cancellation, this is $\mu_{00}^*\mc L$, but $\mu_{00}$ is the composite morphism $A\to\{0_A\}\to A$ and therefore must be trivial. Explicitly, the only line bundle over $\{0_A\}$ is trivial, so its pullback to $A$ will remain trivial. So indeed, $\mc M$ is trivial.
\end{proof}
\begin{corollary} \label{cor:better-add-a-la-cube}
	Fix an abelian variety $A$ over a field $k$. For any $k$-scheme $T$ and $k$-morphisms $\alpha,\beta,\gamma\colon T\to A$, we have
	\[(\alpha+\beta+\gamma)^*\mc L\otimes \alpha^*\mc L\otimes \beta^*\mc L\otimes \gamma^*\mc L\cong(\alpha+\beta)^*\mc L\otimes(\alpha+\gamma)^*\mc L\otimes(\beta+\gamma)^*\mc L.\]
\end{corollary}
\begin{proof}
	This follows from pulling back the identity of \autoref{cor:add-a-la-cube} along the morphism $(\alpha,\beta,\gamma)\colon T\to A^3$. Indeed, for $c_1,c_2,c_3\in\ZZ$, we see $\mu_{c_1c_2c_3}\circ(\alpha,\beta,\gamma)=c_1\alpha+c_2\beta+c_3\gamma$.
\end{proof}
\begin{corollary} \label{cor:pullback-l-by-n}
	Fix an abelian variety $A$ over a field $k$. For any integer $n\in\ZZ$ and line bundle $\mc L$ on $A$, we have
	\begin{equation}
		[n]^*\mc L\cong\mc L^{\otimes n(n+1)/2}\otimes\left([-1]^*\mc L\right)^{\otimes n(n-1)/2}. \label{eq:pullback-l-by-n}
	\end{equation}
\end{corollary}
\begin{proof}
	The point is to induct on $n$, using \autoref{cor:better-add-a-la-cube} for the inductive on step; the precise statement will follow after some arithmetic. For clarity, we will proceed in steps.
	\begin{enumerate}
		\item We work out small cases. For $n=0$, we note $[0]\colon A\to A$ is the map $A\to\{0_A\}\to A$, so the pullback of $\mc L$ along $[0]$ trivializes at $\{0_A\}$ and is thus trivial. So indeed,
		\[[0]^*\mc L\cong\OO_A\cong\mc L^{\otimes0}\otimes\left([-1]^*\mc L\right)^{\otimes0}.\]
		For $n=1$, we see $[1]\colon A\to A$ is $\id_A$, so we see
		\[[1]^*\mc L=\mc L\cong\mc L^{\otimes1}\otimes\left([-1]^*\mc L\right)^{\otimes0}.\]
		\item We deal with all $n\ge0$ by induction. Suppose \autoref{eq:pullback-l-by-n} holds for $n$ and $n+1$ for some $n\ge-1$, so we show $n+1$. Then we apply \autoref{cor:better-add-a-la-cube} to the morphisms $[1],[1],[n]\colon A\to A$ to get
		\[[n+2]^*\mc L\otimes\mc L\otimes\mc L\otimes[n]^*\mc L\cong[2]^*\mc L\otimes[n+1]^*\mc L\otimes[n+1]^*\mc L.\]
		Plugging in $n=-1$ and using the small cases shows $[2]^*\mc L\cong\mc L^{\otimes3}\otimes[-1]\mc L$, as needed. Thus, we may rearrange the above relation to
		\begin{align*}
			[n+2]^*\mc L &\cong\mc L\otimes[-1]^*\mc L\otimes\left([n+1]^*\mc L\right)^{\otimes2}\otimes\left([n]^*\mc L\right)^{\otimes-1} \\
			&\cong\mc L\otimes[-1]^*\mc L\otimes\mc L^{\otimes(n+1)(n+2)}\otimes\left([-1]^*\mc L\right)^{\otimes(n+1)n}\otimes\mc L^{\otimes-n(n+1)/2}\otimes\left([-1]^*\mc L\right)^{\otimes-n(n-1)/2} \\
			&\cong\mc L^{\otimes(n+2)(n+3)/2}\otimes\left([-1]^*\mc L\right)^{\otimes(n+2)(n+1)/2},
		\end{align*}
		which is what we wanted.
		\item We now deal with $n\le0$. We already know that \autoref{eq:pullback-l-by-n} holds for $-n\ge0$, so we note $[n]=[-1]\circ[-n]$ and compute
		\begin{align*}
			[n]^*\mc L &= [-1]^*\left([-n]^*\mc L\right) \\
			&= [-1]^*\left(\mc L^{\otimes-n(-n+1)/2}\otimes\left([-1]^*\mc L\right)^{\otimes-n(-n-1)/2}\right) \\
			&= \left([-1]^*\mc L\right)^{\otimes-n(-n+1)/2}\otimes\mc L^{\otimes-n(-n-1)/2} \\
			&= \mc L^{\otimes n(n+1)/2}\otimes\left([-1]^*\mc L\right)^{\otimes n(n-1)/2},
		\end{align*}
		which is what we wanted.
		\qedhere
	\end{enumerate}
\end{proof}
While we're here, we note that \autoref{cor:better-add-a-la-cube} products a positive-definite bilinear form on the endomorphisms of $A$. This bilinear form will be the key ingredient in the proof of \autoref{thm:easy-tate}.
\begin{proposition} \label{prop:get-bilin-form}
	FIx an abelian variety $A$ over a field $k$. Then there is a positive-definite symmetric $\ZZ$-bilinear form $\op{End}_k(A)^2\to\ZZ$.
\end{proposition}
\begin{proof}
	This is surprisingly difficult and uses some theory of Chow groups, which we will not introduce. As such, we will be terse and refer to \cite[Lemma~12.9]{egm-av} for details.\footnote{I also refer there in the likely event I make Chern-class-related mistakes in the following discussion.} Fix a very ample line bundle $\mc L$ on $A$, which exists because $A$ is projective. By replacing $\mc L$ with $\mc L\otimes[-1]^*\mc L$, we may assume $[-1]^*\mc L=\mc L$.
	
	We begin by defining $\langle\cdot,\cdot\rangle\colon\op{End}_k(A)^2\to\op{Pic}A$ by
	\[\langle\alpha,\beta\rangle_0\coloneqq(\alpha+\beta)^*\mc L\otimes\left(\alpha^*\mc L\right)^{\otimes-1}\otimes\left(\beta^*\mc L\right)^{\otimes-1}.\]
	Note that $\langle\cdot,\cdot\rangle_0$ is symmetric by definition. To check bilinearity, we compute
	\begin{align*}
		\langle\alpha,\beta+\gamma\rangle_0 &= (\alpha+\beta+\gamma)^*\mc L\otimes\left(\alpha^*\mc L\right)^{\otimes-1}\otimes\left((\beta+\gamma)^*\mc L\right)^{\otimes-1} \\
		&\stackrel*= (\alpha+\beta)^*\mc L\otimes(\alpha+\gamma)^*\mc L\otimes\left(\alpha^*\mc L\right)^{\otimes-2}\otimes\left(\beta^*\mc L\right)^{\otimes-1}\otimes\left(\gamma^*\mc L\right)^{\otimes-1} \\
		&= \langle \alpha,\beta\rangle_0\otimes\langle \alpha,\gamma\rangle_0,
	\end{align*}
	where we have used \autoref{cor:better-add-a-la-cube} at $\stackrel*=$.

	To finish the definition of our bilinear form, we map $\op{Pic}A\to\ZZ$ by $\mc M\mapsto c_1(\mc L)^{\dim A-1}\cap c_1(\mc M)$ to define
	\[\langle f,g\rangle\coloneqq  c_1(\mc L)^{\dim A-1}\cap c_1(\langle f,g\rangle_0),\]
	where $c_1\colon\op{Pic}A\to\op{CH}^1(A)$ denotes the first Chern class map, and $\cap$ denotes the cap product. The maps $c_1$ and $c_1(\mc L)^{\dim A-1}\cap-$ are both linear, so $\langle\cdot,\cdot\rangle$ is automatically symmetric and bilinear.
	
	Thus, the difficulty lies in showing that $\langle\cdot,\cdot\rangle$ is positive-definite. We will be quite sketchy. Suppose $\varphi\colon A\to A$ is nonzero so that we want to show $\langle\varphi,\varphi\rangle>0$. To begin, we use \autoref{cor:pullback-l-by-n} to compute
	\[\langle\varphi,\varphi\rangle=\varphi^*[2]^*\mc L\otimes\left(\varphi^*\mc L\right)^{\otimes-2}=\left(\varphi^*\mc L\right)^{\otimes2},\]
	so it suffices to show that $c_1\left(\varphi^*\mc L\right)$ is nonzero. On one hand, $B\coloneqq\im\varphi$ is a closed subvariety of $A$ (because $\varphi$ is proper), so we may think of $\varphi$ as an dominant morphism $\varphi\colon A\to B$. On the other hand, $\mc L$ restricted to $B$ remains very ample and therefore corresponds to an effective divisor
	\[D=\sum_{i=1}^Nn_i[B_i],\]
	where $B_i\subseteq B$ is a codimension-$1$ closed subscheme. Pulling back our divisor along $\varphi\colon A\to B$, we see $\varphi^*\mc L$ corresponds to the effective divisor
	\[f^*D=\sum_{i=1}^Nn_i\left[\varphi^*B_i\right],\]
	from which our positivity follows.
\end{proof}

\subsection{Isogenies}
To define an isogeny, we need to define the kernel.
\begin{definition}[Kernel]
	Fix a homomorphism $\varphi\colon A\to B$ of abelian varieties over a field $k$. The \textit{kernel} $\ker\varphi$ is defined as the fiber of $\varphi$ above $0_B$. Note $\ker\varphi$ is an abelian subvariety of $A$. In the case of $[n]\colon A\to A$ for $n\in\ZZ$, we may write $A[n]\coloneqq\ker[n]$.
\end{definition}
\begin{remark} \label{rem:iso-fibers}
	From the perspective of group theory, we expect all fibers of a homomorphism $\varphi\colon A\to B$ to look like $\ker\varphi$. Explicitly, for any closed point $b\in B$, let $\tau\colon B\to B$ denote the isomorphism given by translation by $-b$. Then we see all squares in
	% https://q.uiver.app/?q=WzAsOCxbMywwLCJCIl0sWzMsMSwiQSJdLFsyLDEsIlxcezBfQVxcfSJdLFsxLDEsIlxcezBfQVxcfV97ayhiKX0iXSxbMCwxLCJcXHtiXFx9Il0sWzIsMCwiXFxrZXJcXHZhcnBoaSJdLFsxLDAsIihcXGtlclxcdmFycGhpKV97ayhiKX0iXSxbMCwwLCIoXFxrZXJcXHZhcnBoaSlfe2soYil9Il0sWzQsMywiXFx0YXUiXSxbMywyXSxbMiwxLCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFs3LDYsIiIsMCx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzcsNCwiXFx0YXVeey0xfVxcdmFycGhpIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzYsMywiXFx2YXJwaGkiXSxbNSwyLCJcXHZhcnBoaSJdLFswLDEsIlxcdmFycGhpIl0sWzYsNV0sWzUsMCwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{(\ker\varphi)_{k(b)}} & {(\ker\varphi)_{k(b)}} & \ker\varphi & B \\
		{\{b\}} & {\{0_A\}_{k(b)}} & {\{0_A\}} & A
		\arrow["\tau", from=2-1, to=2-2]
		\arrow[from=2-2, to=2-3]
		\arrow[hook, from=2-3, to=2-4]
		\arrow[Rightarrow, no head, from=1-1, to=1-2]
		\arrow["{\tau^{-1}\varphi}"', dashed, from=1-1, to=2-1]
		\arrow["\varphi", from=1-2, to=2-2]
		\arrow["\varphi", from=1-3, to=2-3]
		\arrow["\varphi", from=1-4, to=2-4]
		\arrow[from=1-2, to=1-3]
		\arrow[hook, from=1-3, to=1-4]
	\end{tikzcd}\]
	are pullback squares (here, the dashed arrow is induced), so it follows $\varphi^{-1}(\{b\})\cong(\ker\varphi)_{k(b)}$.
\end{remark}
\begin{definition}[Isogeny]
	Fix a field $k$. An \textit{isogeny} is a homomorphism $\varphi\colon A\to B$ of abelian $k$-varieties that is dominant and has finite kernel.
\end{definition}
Note that being $\varphi\colon A\to B$ being dominant implies that $\varphi(A)$ is dense in $B$, but $\varphi$ is proper by the Cancellation~Theorem, so $\varphi(A)\subseteq B$ is closed, so actually $\varphi$ is surjective (on points).
\begin{example}
	We work in the context of \autoref{ex:ec}. Set $E'\coloneqq\Proj k[X,Y,Z]/\left(Y^2Z-X^3+27Z^3\right)$, which has discriminant a power of $3$ and is therefore also an elliptic curve over $k$. One can check that the map $\varphi\colon E\to E'$ defined by
	\[\varphi\colon[X:Y:Z]\mapsto\left[X^4+4XZ^3:X^3Y-8YZ^3:X^3Z\right]\]
	defines an isogeny where the kernel is $\{[0:1:0],[0:1:1],[0:-1:0]\}$. (This isogeny was found using Sage.)
\end{example}
\begin{example} \label{ex:n-for-c-mod-lattice}
	We work in the context of \autoref{ex:c-mod-lattice}, with $g=1$ for technical convenience. For any nonzero $n$, we see that $[n]\colon(\CC/\Lambda)\to(\CC/\Lambda)$ is an isogeny: on closed points, we see that the kernel is $\frac1n\Lambda/\Lambda$, which has $n^{2g}$ elements. Additionally, $[n]$ sends the generic point to the generic point, so $[n]$ is dominant. It follows that $[n]$ is an isogeny. We will generalize this example in \autoref{prop:n-is-isogeny}.
\end{example}
\begin{remark}
	Intuitively, an isogeny is a ``squishy isomorphism,'' as seen in \autoref{ex:n-for-c-mod-lattice}. For example, one can show that an isogeny $\varphi\colon A\to B$ has an ``inverse'' isogeny $\psi\colon B\to A$ such that $\varphi\circ\psi=[n]$ and $\psi\circ\varphi=[n]$ for some positive integer $n$. (We will not show this here.) In particular, two abelian varieties being isogenous forms an equivalence relation.
\end{remark}
As with any good condition, there are many ways to say that a morphism is an isogeny.
\begin{proposition} \label{prop:iso-by-dim}
	Fix a homomorphism $\varphi\colon A\to B$ of abelian varieties over a field $k$. The following are equivalent.
	\begin{listalph}
		\item $\varphi$ is an isogeny; in other words, dominant and has finite kernel.
		\item $\varphi$ is dominant, and $\dim A=\dim B$.
		\item $\varphi$ has finite kernel, and $\dim A=\dim B$.
	\end{listalph}
\end{proposition}
\begin{proof}
	We follow \cite[Proposition~I.7.1]{milne-av}. The main point is that a spreading out argument shows that
	\begin{equation}
		\dim\varphi^{-1}(\{b\})\ge\dim A-\dim\im\varphi, \label{eq:dim-fibers}
	\end{equation}
	for each $b\in B$, where equality holds on some nonempty open subscheme of $B$. (Here, $\im\varphi$ is topologically a closed subset of $B$ because $\varphi$ is proper, so we have given $\im\varphi$ the reduced scheme structure to make it a $k$-subvariety of $B$.) Proving this is somewhat technical, so we refer to \cite[Theorem~10.9]{milne-av}.

	However, once equality in \autoref{eq:dim-fibers} holds for a single $b\in B$, we note that \autoref{rem:iso-fibers} says all fibers are isomorphic up to base-change by a field (which does not adjust dimension!), so we conclude
	\[\dim\ker\varphi=\dim A-\dim\im\varphi.\]
	Now, $\varphi$ having finite kernel is equivalent to $\dim\ker\varphi=0$, and $\varphi$ being dominant is equivalent to $\im\varphi=B$, so the equivalence of (a), (b), and (c) follows.
\end{proof}
\begin{remark}
	\cite[Proposition~I.7.1]{milne-av} also shows that being an isogeny is equivalent to being finite, flat, and surjective, but we will not need this. However, we do need to know that isogenies are finite. By Zariski's Main Theorem (for example, see \cite[Theorem~30.6.2]{rising-sea}), it suffices to show $\varphi$ is quasifinite and proper. Well, $\varphi$ is proper by \autoref{rem:morphism-is-proper}, and $\varphi$ is quasifinite because it has finite kernel, and all fibers are isomorphic up to extension of scalars by \autoref{rem:iso-fibers}.
\end{remark}
And here is why we defined isogenies.
\begin{proposition} \label{prop:n-is-isogeny}
	Fix an abelian variety $A$ over a field $k$. Then the map $[n]\colon A\to A$ is an isogeny for all nonzero integers $n\in\ZZ$.
\end{proposition}
\begin{proof}
	The idea is to use \autoref{cor:pullback-l-by-n}. To show that $[n]\colon A\to A$ is an isogeny, it suffices by \autoref{prop:iso-by-dim} to show that $A[n]$ has dimension $0$. Because $A$ is projective, there is a very ample line bundle $\mc L$ on $A$. By replacing $\mc L$ with $\mc L\otimes[-1]^*\mc L$, we may assume that $\mc L\cong[-1]^*\mc L$. Thus, \autoref{cor:pullback-l-by-n} implies
	\[[n]^*\mc L\cong\mc L^{\otimes n^2}.\]
	Now, $[n]$ restricts to the zero map $A[n]\to\{0_A\}\to A[n]$ on $A[n]$, so $\mc L^{\otimes n^2}$ is trivial when restricted to $A[n]$. However, we see that $\mc L^{\otimes n^2}$ must also be very ample as the restriction of a very ample line bundle (recall $n\ne0$), which because $n\ne0$ forces $\dim A[n]=0$.\footnote{Making this explicit is somewhat annoying. Roughly speaking, if $\dim A[n]>0$, one can replace $A[n]$ with a proper subcurve $X$, and then it is a consequence of the Riemann--Roch theorem (see \cite[Corollar~3.3]{hartshorne}) that the trivial line bundle is not ample.} Thus, $[n]$ is an isogeny.
\end{proof}
\begin{corollary} \label{cor:hom-is-torsion-free}
	Fix abelian varieties $A$ and $B$ over a field $k$. Then the group $\op{Hom}_k(A,B)$ of homomorphisms $A\to B$ is torsion-free.
\end{corollary}
\begin{proof}
	Suppose $\varphi\colon A\to B$ has $\varphi\circ[n]=0$ for some $n\in\ZZ^+$. However, $[n]$ is surjective on points by \autoref{prop:n-is-isogeny}, so it follows that $\varphi$ sends all points to $0_B$. This forces $\varphi$ to be the zero morphism. (One can see this conclusion directly on sheaves or base-change to the algebraic closure where a morphism of varieties is determined by the topological information.)
\end{proof}

\subsection{Degrees of Isogenies}
We might be interested in the size of the kernel of an isogeny to know how much ``squishing'' it is doing, so we have the following definition.
\begin{definition}[Degree]
	Fix an isogeny $\varphi\colon A\to B$ of abelian varieties over a field $k$. Then the \textit{degree} of $\varphi$, denoted $\deg\varphi$, is defined as the degree of the field extension $\varphi^\sharp\colon K(B)\to K(A)$. This field extension is finite because isogenies are finite.
\end{definition}
By composing field extensions, we see that the degree is multiplicative.

Roughly speaking, the degree is the size of the kernel. Here is the precise statement.
\begin{lemma} \label{lem:deg-is-size-fiber}
	Let $\varphi\colon X\to Y$ be a finite, dominant morphism of irreducible $k$-varieties such that the induced field extension $\varphi^\sharp\colon K(Y)\to K(X)$ is separable. Then there is a nonempty open subscheme $U\subseteq Y$ such that each $y\in Y$ has
	\[\#\varphi^{-1}(\{y\})=[K(X):K(Y)].\]
\end{lemma}
\begin{proof}
	This is a spreading out argument---roughly speaking, we expect the Primitive element theorem to tell us that the fiber at the generic point has size $[K(X):K(Y)]$.
	
	The details are not terribly annoying, so we will include them. At any point, we may replace $Y$ with a nonempty open subscheme $U\subseteq Y$ and $X$ with $f^{-1}U$. For example, choosing an affine open subscheme of $Y$, we may assume that both $X$ and $Y$ are affine because $\varphi$ is finite. Thus, $\varphi$ is induced by a ring map $f\colon R\to S$, where $Y=\Spec R$ and $X=\Spec S$, and we may localize $R$ as much as we please.

	Note $f$ is injective because $\varphi$ is dominant, and $S$ is a finite extension over $R$ because $f$ is finite. Further, set $K\coloneqq\op{Frac}R$ and $L\coloneqq\op{Frac}S$ so that $L/K$ is a finite separable extension of fields. By the Primitive element theorem, we may find $\beta\in L$ such that $L=K(\beta)$. We no whave the following reductions.
	\begin{itemize}
		\item By clearing denominators in the monic minimal polynomial for $\beta$, we may assume that $\beta$ is integral over $R$.
		\item Writing $S=R[s_1,\ldots,s_n]$ for some $s_1,\ldots,s_n\in S$, we note that each $s_i\in L$ can be written as a polynomial in $\beta$ with coefficients in $K$. Collecting all these denominators and localizing $R$ appropriately, we may assume that $s_i\in R[\beta]$ for each $i$ and thus $S\subseteq R[\beta]$.
		\item Going in the other direction, we see
		\[K[\beta]=\op{Frac}R[\beta]=L=\op{Frac}S=\op{Frac}R[s_1,\ldots,s_n]=K[s_1,\ldots,s_n],\]
		so we can write $\beta$ as some polynomial in the $s_i$ with coefficients in $K$. Again collecting these denominators and localizing $R$ appropriately, we see $\beta\in R[s_1,\ldots,s_n]=S$, so $R[\beta]\subseteq S$. Localizing $R$ could not change $S\subseteq R[\beta]$, so we conclude $S=R[\beta]$.
	\end{itemize}
	We are now ready to complete the proof. Let $\pi\in R[T]$ be a monic minimal polynomial for $\beta$ so that $S\cong R[T]/(\pi)$. Because $L/K$ is separable, $\pi$ has nonzero discriminant $\op{disc}\pi\in R$, so we localize at $\op{disc}\pi$ to assume $\op{disc}\pi\in R^\times$. To finish, we note that the fiber over some $\mf p\in\Spec R$ is given by
	\[\varphi^{-1}(\{\mf p\})=\Spec\left(S\otimes_R(R/\mf p)\right)\cong\Spec\frac{(R/\mf p)[T]}{(\pi)},\]
	but $\op{disc}\pi$ is a unit in $R/\mf p$, so there are $\deg\pi=[L:K]$ distinct roots of $\pi$ in $\overline{R/\mf p}$, so there are $[L:K]$ distinct closed points in $\varphi^{-1}(\{\mf p\})$. (Note we only have to worry about closed points because $\varphi\colon\varphi^{-1}(\{\mf p\})\to\{\mf p\}$ being finite implies that the fiber $\varphi^{-1}(\{\mf p\})$ is zero-dimensional.)
\end{proof}
\begin{corollary} \label{cor:deg-is-size-ker}
	Fix an isogeny $\varphi\colon A\to B$ of abelian varieties over a field $k$ such that the field extension $\varphi^\sharp\colon K(B)\to K(A)$ is separable. Then $\#(\ker\varphi)=\deg\varphi$.
\end{corollary}
\begin{proof}
	By \autoref{lem:deg-is-size-fiber}, there exists some $b\in B$ such that $\#\varphi^{-1}(\{b\})=\deg\varphi$. However, \autoref{rem:iso-fibers} tells us that $\varphi^{-1}(\{b\})$ is isomorphic to $\ker\varphi$ up to base-change by a field (which does not change the number of closed points), so the result follows.
\end{proof}
Now, here is the degree computation for $[n]$.
\begin{proposition} \label{prop:deg-of-n}
	Fix an abelian variety $A$ over a field $k$. If $n$ is a nonzero integer, then $\deg[n]=n^{2\dim A}$.
\end{proposition}
\begin{proof}
	For this, one uses intersection theory, which we will not introduce here. In brief, using $\mc L$ as defined in the proof of \autoref{prop:n-is-isogeny} and write $\mc L=\mc L(D)$ for some divisor $D$. Then we can use the intersection product of divisors to compute
	\[\deg[n]\cdot\underbrace{(D,\ldots,D)}_{\dim A}=\underbrace{([n]^*D,\ldots,[n]^*D)}_{\dim A}=\underbrace{\left(n^2D,\ldots,n^2D\right)}_{\dim A}=n^{2\dim A}\cdot\underbrace{(D,\ldots,D)}_{\dim A},\]
	so we finish upon noting $(D,\ldots,D)$ is nonzero because $D$ is very ample. We refer to \cite[Theorem~I.7.2]{milne-av} or \cite[Proposition~5.17]{lombardo-av} for details.
\end{proof}
\begin{corollary} \label{cor:compute-ker-n}
	Fix an abelian variety $A$ over a field $k$. For $n\in\ZZ^+$ with $\op{char}k\nmid n$, we have $A[n](k^{\mathrm{sep}})\cong(\ZZ/n\ZZ)^{2\dim A}$.
\end{corollary}
\begin{proof}
	By \autoref{prop:deg-of-n}, the degree of $[n]$ is $n^{2\dim A}$, so the field extension $K(A)\to K(A)$ has degree $n^{2\dim A}$, which is not divisible by $\op{char}k$, and so the field extension is separable. Thus, the number of closed points in $A[n]$ is $n^{2\dim A}$ by \autoref{cor:deg-is-size-ker}, and all are defined over $k^{\mathrm{sep}}$. (Technically, the fact that all points are defined over $k^{\mathrm{sep}}$ follows from their construction at the end of \autoref{lem:deg-is-size-fiber}.)

	Finishing the proof requires some group theory. We induct on $n$ in steps.
	\begin{enumerate}
		\item When $n=1$, there is nothing to say. For primes $\ell$ not divisible by $\op{char}k$, we see $A[\ell]\left(k^{\mathrm{sep}}\right)$ has order $\ell^{2\dim A}$ while having exponent dividing $\ell$, so the result follows.
		\item We now show the result for prime-powers by induction. Suppose $\ell$ is not divisible by $\op{char}k$ and we know $A\left[\ell^v\right]\cong(\ZZ/\ell^v\ZZ)^{2\dim A}$ for some $v\in\ZZ^+$. Then we have a short exact sequence
		\[0\to A[\ell]\left(k^{\mathrm{sep}}\right)\to A\left[\ell^{v+1}\right]\left(k^{\mathrm{sep}}\right)\stackrel{[\ell]}\to A\left[\ell^v\right]\left(k^{\mathrm{sep}}\right)\to0.\]
		Using the classification of finitely generated abelian groups again, we must have $A\left[\ell^{n+1}\right]\left(k^{\mathrm{sep}}\right)\cong(\ZZ/\ell^{v+1}\ZZ)^{2\dim A}$.
		\item We now show the general case by induction. If $n$ is a prime-power, then we are done. Otherwise, we may write $n=n_1n_2$ where $\gcd(n_1,n_2)=1$ where $n_1,n_2<n$. Then we have a short exact sequence
		\[0\to A[n_1]\left(k^{\mathrm{sep}}\right)\to A[n]\left(k^{\mathrm{sep}}\right)\stackrel{[n_1]}\to A[n_2]\left(k^{\mathrm{sep}}\right)\to0.\]
		Thus, $A[n]\left(k^{\mathrm{sep}}\right)$ has order $n^{2\dim A}$ and has a subgroup isomorphic to $\left(\ZZ/n_1\ZZ\right)^{2\dim A}$. By symmetry, we also have a subgroup isomorphic to $\left(\ZZ/n_2\ZZ\right)^{2\dim A}$, but because $\gcd(n_1,n_2)=1$, we see we must have $A[n]\left(k^{\mathrm{sep}}\right)\cong\left(\ZZ/n_1\ZZ\right)^{2\dim A}\oplus\left(\ZZ/n_2\ZZ\right)^{2\dim A}$, which is what we wanted.
		\qedhere
	\end{enumerate}
\end{proof}
\begin{example}
	We work in the context of \autoref{ex:c-mod-lattice}. For any nonzero $n$, we saw that $[n]\colon\left(\CC^g/\Lambda\right)\to\left(\CC^g/\Lambda\right)$ has kernel $\frac1n\Lambda/\Lambda\cong\left(\ZZ/n\ZZ\right)^{2g}$. This is ``how to remember'' the $2$ in \autoref{cor:compute-ker-n}.
\end{example}
\begin{nex}
	Consider the elliptic curve $E\colon Y^2Z=X^3+Z^3$ of \autoref{ex:ec} over $\FF_5$. Let $\varphi\colon E\to E$ denote the Frobenius automorphism given by $[X:Y:Z]\mapsto\left[X^p:Y^p:Z^p\right]$. One can compute (for example, using Sage) that $[5]=\varphi^{\circ2}$; see also \cite[Exercise~5.16]{silverman}. Thus, $[5]$ is injective, so $E[5]\left(\overline k\right)=0$. In particular, $\op{char}k\nmid n$ is necessary in \autoref{cor:compute-ker-n}.
\end{nex}
\begin{remark}
	In characteristic $0$, we can see from \autoref{cor:compute-ker-n} that the torsion subgroup of $A\left(k^{\mathrm{sep}}\right)$ is isomorphic to $(\QQ/\ZZ)^{2\dim A}$ by taking a direct limit over all $n$. When defining the Tate module, we will take an inverse limit rather than an inverse limit.
\end{remark}

\section{The Tate Conjecture}
The goal of the present section is to define the Tate module, explain why we should care about it, and prove \autoref{thm:easy-tate}.

\subsection{Statement} \label{sec:tate-conj}
Here is our definiton.
\begin{definition}[Tate module]
	Fix an abelian variety $A$ over a field $k$. For primes $\ell$ not divisible by $\op{char}k$, we define the \textit{$\ell$-adic Tate module} by
	\[T_\ell A\coloneqq\limit_{n\in\ZZ^+}A\left[\ell^n\right]\left(k^{\mathrm{sep}}\right).\]
	Here, the inverse limit is given by the ``projection'' maps $[\ell]\colon A\left[\ell^{n+1}\right]\left(k^{\mathrm{sep}}\right)\to A\left[\ell^n\right]\left(k^{\mathrm{sep}}\right)$.
\end{definition}
We have the following quick remarks on this definition.
\begin{remark}
	Note that \autoref{cor:compute-ker-n} gives us isomorphisms $A\left[\ell^n\right]\left(k^{\mathrm{sep}}\right)\cong\left(\ZZ/\ell^n\ZZ\right)^{2\dim A}$ which commute with the maps $[\ell]$, so we see
	\[T_\ell A\cong\limit_{n\in\ZZ^+}\left(\ZZ/\ell^n\ZZ\right)^{2\dim A}=\ZZ_\ell^{2\dim A}.\]
	Thus, $T_\ell A$ is a free $\ZZ_\ell$-module.
\end{remark}
\begin{remark}
	Define $G\coloneqq\op{Gal}\left(k^{\mathrm{sep}}/k\right)$. Then some $\sigma\in G$ acts on $A\left(k^{\mathrm{sep}}\right)$ coordinate-wise (alternatively, one can pull back $\sigma\colon k^{\mathrm{sep}}\to k^{\mathrm{sep}}$ to a morphism $A_{k^{\mathrm{sep}}}\to A_{k^{\mathrm{sep}}}$) and commutes with the group law of $A$, so the action of $\sigma$ descends to a morphism $A[n]\to A[n]$ for each $n\in\ZZ^+$. Thus, $G$ acts on $T_\ell A$ and thus defines a group representation
	\[G\to\op{GL}(T_\ell A)\cong\op{GL}_{2\dim A}(\ZZ_\ell)\subseteq\op{Gal}_{2\dim A}(\QQ_\ell).\]
	Thus, each abelian variety $A$ over $k$ has attached to a Galois representation.
\end{remark}
Quickly, we note the construction $T_\ell$ is functorial: given a homomorphism $\varphi\colon A\to B$, we note $\varphi$ commutes with $[n]$ for any $n\in\ZZ^+$ and so induced a map $\varphi[n]\colon A[n]\to B[n]$ and thus a map
\[T_\ell A=\limit_{n\in\ZZ^+}A\left[\ell^n\right]\left(k^{\mathrm{sep}}\right)\xrightarrow{\varphi[\ell^n]}\limit_{n\in\ZZ^+}B\left[\ell^n\right]=T_\ell B.\]
We call this composite $T_\ell\varphi$, and it is relatively clear that this construction is functorial. Intuitively, $T_\ell\varphi$ is ``$\varphi$ component-wise.''

We are now ready to prove \autoref{thm:easy-tate}.
\easytate*
\begin{proof}
	We follow \cite[Theorem~12.10]{egm-av}. To begin, we reduce to the case where $A=B$. Define $C\coloneqq A\times B$. Given a homomorphism $\varphi\colon A\to B$, we note $(0_A,\varphi)\colon(x,y)\mapsto(0_A,\varphi(x))$ defines a homomorphism $C\to C$ and makes the diagram
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXG9we0hvbX1fayhBLEIpXFxvdGltZXNfXFxaWlxcWlpfXFxlbGwiXSxbMSwwLCJcXG9we0hvbX1fayhUX1xcZWxsIEEsVF9cXGVsbCBCKSJdLFsxLDEsIlxcb3B7SG9tfV9rKFRfXFxlbGwgQyxUX1xcZWxsIEMpIl0sWzAsMSwiXFxvcHtIb219X2soQyxDKVxcb3RpbWVzX1xcWlpcXFpaX1xcZWxsIl0sWzIsMCwiXFx2YXJwaGlcXG90aW1lcyB6Il0sWzIsMSwiKDBcXHRpbWVzXFx2YXJwaGkpXFxvdGltZXMgeiJdLFszLDAsInpcXGNkb3QgVF9cXGVsbFxcdmFycGhpIl0sWzMsMSwielxcY2RvdCgwLFRfXFxlbGxcXHZhcnBoaSkiXSxbMCwxLCJUX1xcZWxsIl0sWzMsMiwiVF9cXGVsbCJdLFswLDNdLFsxLDJdLFs0LDYsIiIsMSx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNiw3LCIiLDEseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzUsNywiIiwxLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs0LDUsIiIsMSx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\op{Hom}_k(A,B)\otimes_\ZZ\ZZ_\ell} & {\op{Hom}_k(T_\ell A,T_\ell B)} & {\varphi\otimes z} & {z\cdot T_\ell\varphi} \\
		{\op{Hom}_k(C,C)\otimes_\ZZ\ZZ_\ell} & {\op{Hom}_k(T_\ell C,T_\ell C)} & {(0_A,\varphi)\otimes z} & {z\cdot(0,T_\ell\varphi)}
		\arrow["{T_\ell}", from=1-1, to=1-2]
		\arrow["{T_\ell}", from=2-1, to=2-2]
		\arrow[from=1-1, to=2-1]
		\arrow[from=1-2, to=2-2]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
		\arrow[maps to, from=2-3, to=2-4]
		\arrow[maps to, from=1-3, to=2-3]
	\end{tikzcd}\]
	commute. (We have silently used the fact that $T_\ell(A\times B)\cong T_\ell A\times T_\ell B$.) Now, the map $\varphi\mapsto(0\times\varphi)$ is certainly injective (by projecting on the $B$-coordinate in the target), and $\ZZ_\ell$ is flat over $\ZZ$, so the left arrow above is injective. It follows that it suffices to show that the bottom arrow is injective.
	\begin{remark}
		Note that we have increased the dimension of our abelian varieties here, so this reduction would not work if we wanted to only work with elliptic curves.
	\end{remark}
	We now show that $T_\ell$ defines an injective map $\op{End}_k(A)\otimes_\ZZ\ZZ_\ell\to\op{End}_k(T_\ell A)$, where $\op{End}_k(T_\ell A)$ denotes the $\op{Gal}\left(k^{\mathrm{sep}}/k\right)$-equivarariant $\ZZ_\ell$-endomorphisms of $T_\ell A$. Indeed, suppose some element
	\[\varphi\coloneqq\sum_{i=1}^n\varphi_i\otimes z_i\]
	of $\op{End}_k(A)\otimes_\ZZ\ZZ_\ell$ goes to $0$ in $\op{End}_k(T_\ell A)$. We show that $\varphi$ vanishes. For this, we induct on $n$; when $n=0$, there is nothing to say. Thus, we suppose $n>0$ and that we know $\varphi$ will vanish if there are $n-1$ terms in the sum.

	We have the following reductions.
	\begin{itemize}
		\item Note $\op{Hom}_k(A,A)$ is torsion-free by \autoref{cor:hom-is-torsion-free}, so it suffices to show that any nonzero integer multiple of $\varphi$ vanishes.
		\item Roughly speaking, the $\varphi_i$ are intended to be like a basis, so we attempt to make them orthogonal via the Gram--Schmidt process: using the bilinear form $\langle\cdot,\cdot\rangle\colon\op{End}_k(A)^2\to\ZZ$ promised in \autoref{prop:get-bilin-form}, we set
		\[z_1'\coloneqq\sum_{i=1}^n\langle\varphi_i,\varphi_1\rangle z_i\qquad\text{and}\qquad\varphi_j'\coloneqq\langle\varphi_1,\varphi_1\rangle\varphi_j-\langle\varphi_j,\varphi_1\rangle\varphi_1\]
		for $j>1$ so that
		\[\langle\varphi_1,\varphi_1\rangle\varphi=\langle\varphi_1,\varphi_1\rangle\sum_{i=1}^n\varphi_i\otimes z_i=z_1'\otimes\varphi_1+\sum_{i=2}^n\varphi_i'\otimes z_i\]
		while $\langle\varphi_i,\varphi_1\rangle=0$ for $i>1$. As such, we may replace $\varphi$ with the nonzero integer multiple $\langle\varphi,\varphi\rangle$ and $z_1$ with $z_1'$ and each $\varphi_j$ with $\varphi_j'$ for $j>1$.
	\end{itemize}
	After the above reductions, we claim that $z_1=0$. We are given
	\[\sum_{i=1}^nz_i\cdot T_\ell\varphi_i=0\]
	and that $\langle\varphi_i,\varphi_1\rangle=0$ for $i>1$. Fix some large exponent $v$. Approximating, we may find $y_i\in\ZZ$ such that $z_i\equiv y_i\pmod{\ell^v}$, from which we define
	\[\psi\coloneqq\sum_{i=1}^ny_i\varphi_i.\]
	Now, for any $a\in A\left[\ell^v\right]$, we see
	\[\psi(a)=\sum_{i=1}^ny_i\varphi_i(a)=\sum_{i=1}^nz_i\cdot T_\ell\varphi_i(a)=0\]
	because $a$ vanishes when multiplied by high enough powers of $\ell$. Thus, $\psi$ vanishes on $A\left[\ell^v\right]$, so viewing $\left[\ell^v\right]\colon A\to A$ as a quotient map,\footnote{We are using a fppf quotient here.} we see $\psi$ must factor through $\left[\ell^v\right]$. Namely, we can write $\psi=\ell^v\psi'$ for some $\psi'\in\op{End}_k(A)$, from which we may compute
	\[y_1\langle\varphi_1,\varphi_1\rangle=\langle\psi,\varphi_1\rangle=\ell^v\langle\psi',\psi\rangle,\]
	so $y_1\langle\varphi_1,\varphi_1\rangle$ and hence $z_1\langle\varphi_1,\varphi_1\rangle$ is divisible by $\ell^v$. Sending $v\to\infty$ forces $z_1$ to vanish because $\langle\varphi_1,\varphi_1\rangle>0$, which completes the proof.
\end{proof}

\subsection{Application}
Our main application will be the following result.
\begin{theorem}[{\cite[Exercise~5.4]{silverman}}] \label{thm:tate-application}
	Fix elliptic cuvers $E$ and $E'$ over a finite field $\FF_q$. The following are equivalent.
	\begin{listalph}
		\item $E$ and $E'$ are isogenous.
		\item $\#E\left(\FF_{q^n}\right)=\#E\left(\FF_{q^n}\right)$ for all positive integers $n$.
	\end{listalph}
\end{theorem}
\begin{proof}
	Showing (a) implies (b) does not require Tate's conjecture. \todo{}
\end{proof}
Before the proof, we give a few remarks.
\begin{remark}
	We have stated \autoref{thm:tate-application} for elliptic curves, but more generally the following are equivalent for abelian varieties $A$ and $B$ over a finite field $k$.
	\begin{listalph}
		\item $A$ and $B$ are isogenous.
		\item $\#A(k')=\#B(k')$ for any finite extension $k'$ of $k$.
	\end{listalph}
	The main difficulty in extending the proof of \autoref{thm:tate-application} lies in determining $T_\ell A$ from its characteristic polynomial.
\end{remark}
\begin{remark}
	By the Weil conjectures, (b) in \autoref{thm:tate-application} is equivalent to $\#E\left(\FF_q\right)=\#E'\left(\FF_q\right)$. Proving the Weil conjectures, even for elliptic curves, is somewhat out of scope for our discussion, so we refer to \cite[Theorem~2.3.1]{silverman} for details. The point is that setting $a\coloneqq(q-1)-\#E(\FF_q)$ allows us to fully determine the characteristic polynomial
	\[\varphi^2-a\varphi+q=0\]
	of the Frobenius automorphism $\varphi\colon E\to E$. Letting $\alpha$ and $\beta$ denote the roots of this polynomial, we have $\#E\left(\FF_{q^n}\right)=q^n+1-\alpha^n-\beta^n$.
\end{remark}

\printbibliography[title={References}]

\end{document}