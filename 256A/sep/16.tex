% !TEX root = ../notes.tex

\documentclass[../notes.tex]{subfiles}

\begin{document}

\section{September 16}

We continue.

\subsection{Schemes over a scheme}
Here is our definition.
\begin{definition}[Schmes over a scheme]
	Fix a scheme $(S,\OO_S)$. An $S$-scheme is a scheme $(X,\OO_X)$ equipped with a morphism $(\pi,\pi^\sharp)\colon(X,\OO_X)\to(S,\OO_S)$ of schemes. We might write $X/S$.
\end{definition}
\begin{example}
	All schemes are naturally a scheme over $\Spec\ZZ$.
\end{example}
A morphism of two $S$-schemes $\pi\colon X\to S$ and $\pi'\colon X'\to S$ is a morphism $\varphi\colon X\to X'$ making the diagram
% https://q.uiver.app/?q=WzAsMyxbMCwwLCJYIl0sWzIsMCwiWCciXSxbMSwxLCJTIl0sWzAsMiwiXFxwaSIsMl0sWzEsMiwiXFxwaSciXSxbMCwxLCJcXHZhcnBoaSJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
\[\begin{tikzcd}
	X && {X'} \\
	& S
	\arrow["\pi"', from=1-1, to=2-2]
	\arrow["{\pi'}", from=1-3, to=2-2]
	\arrow["\varphi", from=1-1, to=1-3]
\end{tikzcd}\]
commute.
\begin{remark}
	Fix $S\coloneqq\Spec A$. Then we can define a projective scheme as a scheme $X$ over $S$ with a closed embedding into $\PP^n_S$. We will show the equivalence of this definition later; the point is that \autoref{prop:affineclosedsubschemes} should have an analogue to graded rings. % V 18.3.1
\end{remark}

\subsection{Reduced Schemes}
Given a closed subscheme $Z\subseteq X$, there might be many natural scheme structures from the topology. However, if we ask for it to be reduced, then it is unique.
\begin{proposition}
	Fix a scheme $X$ and a closed subset $Z\subseteq X$. Then there is a unique reduced, closed subscheme $Z\subseteq X$ whose topological space agrees with $Z$.
\end{proposition}
\begin{proof}
	We start by showing uniqueness. Note that we may replace $X$ with its reduced scheme without headaches, so we assume that $X$ is a reduced scheme. Fix an affine open subscheme $U\subseteq X$, and write $U=\Spec A$ for some ring $A$. Now, $U\cap Z$ is a reduced, closed subscheme of $U$, so by \autoref{prop:affineclosedsubschemes} tells us that
	\[(U\cap Z,\OO_{Z}|_U)\]
	comes from a radical ideal $I$, and we see that this is unique.

	This also tells us how to construct $Z$. Namely, each affine open subscheme $U\subseteq X$ with $U=\Spec A$ can take some $I=I(U\cap Z)\subseteq\Spec A$. As such, we can give $U\cap Z\subseteq U$ a reduced scheme structure from $\OO_{\Spec A/I}$, and we finish the construction by gluing these subschemes together. Notably, the gluing is possible because the uniqueness forces the cocycle condition.
\end{proof}
\begin{remark}
	Given a scheme morphism $f\colon X\to Y$, we might want to think about the image of $f$. The correct way to think about this is to say that there is a unique closed subscheme $Z\subseteq Y$ such that $f$ factors through $Z$, with the following universal property: for all closed subschemes $Z'\subseteq Y$ factoring through $f$, we have $Z\subseteq Z'$.

	At a high level, in some nice cases one takes $Z$ to be the kernel of $f^\sharp\colon\OO_Y\to f_*\OO_X$. Then we will look at $\OO_Y\to\OO_Y/\ker f^\sharp$, at least when $X$ is reduced.
	% H, 3.11(d); L 2.3.1
\end{remark}

\subsection{Quasiprojective Schemes}
We might want to talk about affine and projective schemes at the same time. Here is how we do this.
\begin{definition}[Quasiprojective]
	Fix an affine scheme $S\coloneqq\Spec A$. Then a scheme $X/S$ is \textit{quasiprojective} if and only if $X/S$ is a quasicompact open $S$-subscheme of some projective $S$-scheme.
\end{definition}
\begin{example}
	Affine $k$-varieties are quasiprojective.
\end{example}
Here is a related definition.
\begin{definition}[Locally closed embedding]
	A scheme morphism $\pi\colon X\to Y$ is a \textit{locally closed embedding} if and only if we can factor $\pi$ into
	\[X\into Z\into Y\]
	where $X\into Z$ is a closed embedding, and $Y\into Z$ is an open embedding.
\end{definition}
The reason that this is called a ``locally closed embedding'' is because it becomes a closed embedding on a sufficiently small open subset.
\begin{remark}
	For a locally closed embedding $\pi\colon X\to Y$, then under suitable smallness conditions (i.e., for $\pi$ to be quasicompact), we can find $Z'$ so that $\pi$ factors as
	\[X\into Z'\into Y\]
	where $X\into Z'$ is open, and $Z'\into Y$ is closed. The idea here is that we want to generalize the notion of ``constructible subsets'' which are intersections of open and closed subsets. This finiteness result is telling us that these are approximately the same notion.
	% V 9.2.B
\end{remark}

\subsection{Dimension}
The last topological property we will talk about is dimension.
\begin{definition}[Dimension]
	Fix a topological space $X$. Then the \textit{dimension} of $X$ is the longest possible length $n$ of a chain of closed irreducible subsets
	\[Z_0\subsetneq Z_1\subsetneq Z_3\subsetneq\cdots\subsetneq Z_n\subseteq X.\]
\end{definition}
\begin{example}
	If $X=\Spec A$, then $\dim X$ is the Krull dimension $\dim A$.
\end{example}
\begin{example}
	We see $\dim\AA^n_k=\dim\PP^n_k=n$.
\end{example}
Sometimes a topological space might have components of larger dimension than others, which is undesirable.
\begin{definition}[Pure dimension]
	Fix a topological space $X$. Then $X$ is of \textit{pure dimension $n$} if and only if all irreducible components of $X$ have dimension $n$.
\end{definition}
Having defined a notion of dimension, we can now define codimension.
\begin{definition}[Codimension]
	Fix a topological space $X$ and an irreducible closed subset $Z\subseteq X$. Then the \textit{codimension} $\codim_ZX$ is the supremum of the length $n$ of a chain of irreducible closed subsets
	\[Z=Z_0\subsetneq Z_1\subsetneq Z_2\subsetneq\cdots\subsetneq Z_n\subseteq X.\]
\end{definition}
\begin{remark}
	Of course, $\dim Z+\codim_XZ\le\dim Z$, but equality is not true in general because we lack pure dimension.
	% V 12.3.9
\end{remark}

\subsection{The Functor of Points}
Here is our definition.
\begin{definition}[Functor of points]
	Fix an $S$-scheme $X$. Then the functor of points of $X$ is the functor defined as follows.
	\[\arraycolsep=1.4pt\begin{array}{cccccc}
		h_X\colon& (\mathrm{Sch}_S)\opp &\to& \mathrm{Set} \\
		& Y &\mapsto& \op{Mor}_{\mathrm{Sch}_S}(Y,X)
	\end{array}\]
	% EH I.4, VI.1
\end{definition}
This provides the correct intuitive definition, say when $S=k$ is some field. In particular, the $A$-points of $X$ are made of the scheme morphisms
\[\Spec A\to X,\]
so we are taking a general scheme $Y$ to its ``$Y$-points.'' Notably, a morphism of schemes $X\to X'$ will induce a natural transformation $h_X\Rightarrow h_{X'}$.

A little category theory will be informative.
\begin{thm}[Yoneda's lemma] \label{thm:yo-lem}
	Fix a category $\mc C$, and define the functor $\yo\colon\mc C\opp\to\mathrm{Set}$ taking objects $X$ to $h_X$.
	\begin{listalph}
		\item Natural transformations from $h_X$ to a functor $\mc F\colon\mc C\opp\to\mathrm{Set}$ are canonically isomorphic to $\mc F(X)$.
		\item The functor $X\mapsto h_X$ is fully faithful.
	\end{listalph}
\end{thm}
We will be interested in the following special case.
\begin{corollary}
	Fix $\mc C$ to be the category of schemes over $S\coloneqq\Spec R$. Then the functor $h_\bullet$ taking $X$ to $h_X^{\mathrm{aff}}$ (where $h_X$ maps $R$-algbras $A$ to $\op{Mor}_{\mathrm{Sch}_{\Spec R}}(\Spec A,X)$) is fully faithful.
\end{corollary}
\begin{proof}
	For a given $S$-scheme $Y$, reduce to the case of affine open subsets, and then in the affine case we get to appeal directly to Yoneda's lemma.

	Namely, cover $X$ with some affine open cover $\mc U$. Then, given a natural transformation $\varphi\colon h_X^{\mathrm{aff}}\to h_{X'}^{\mathrm{aff}}$, we need to construct a (unique) morphism $X\to X'$. Well, we simply go down to each affine piece $U\in\mc U$, use the affine case which provides some
	\[\varphi(A_U)\colon\op{Mor}_R(U,X)\to\op{Mor}_R(U,X')\]
	for each $U\in\mc U$. Passing the inclusion $U\into X$ through this proof, we get a bunch of morphisms $U\into X'$, which we then glue to a morphism.
\end{proof}

\end{document}