% !TEX root = ../notes.tex

\documentclass[../notes.tex]{subfiles}

\begin{document}

\section{September 2}

It is another day.
\begin{remark}
	Facts used on the homework from Vakil which are in Vakil without proof should be proven on the homework.
\end{remark}
We begin lecture by providing an example which we don't quite have the language to describe yet, but we will elaborate on it more later.\todo{elaborate}
\begin{example} \label{ex:protoses}
	Fix $X=\CC$ with the usual topology, and give it the sheaf $\mc O_X$ of holomorphic functions. There is a constant sheaf $\underline\ZZ$ returning $\ZZ$ at its stalks. Then there is an exact sequence of sheaves
	\begin{equation}
		0\to\underline\ZZ\stackrel{2\pi i}\to\OO_X\stackrel{\exp}\to\OO_X^\times\to1 \label{eq:protoses}
	\end{equation}
	even though the last map is not always surjective for any $U\subseteq\CC$; for example, take $U=\CC\setminus\{0\}$. (However, if $U$ is simply connected, then the map will be surjective.)
\end{example}
\begin{remark}
	Cohomology applied to \autoref{eq:protoses} (with $X$ some smooth projective curve) shows a special case of the Hodge conjecture.
\end{remark}
The point here is that surjectivity cannot be checked on open sets the way that injectivity can. At some level, the issue here is that the cokernel presheaf is not a sheaf, so we have to apply a sheafification operation to fix this.
\begin{remark}
	Setting
	\[\mc F(U)\coloneqq\im\exp(U)\]
	makes $\mc F$ a presheaf but does not give a sheaf.
\end{remark}

\subsection{Sheafification}
We introduce sheafification by its universal property.
\begin{definition}[Sheafification]
	Fix a presheaf $\mc F$ on $X$ valued in a (concrete) category $\mc C$. The \textit{sheafification} of $\mc F$ is a pair $(\mc F^{\op{sh}},{\op{sh}})$ where ${\op{sh}}\colon\mc F\to\mc F^{\op{sh}}$ satisfies the following universal property: any sheaf $\mc G$ with a presheaf morphism $\varphi\colon\mc F\to\mc G$ has a unique sheaf morphism $\overline\varphi\colon\mc F^{\op{sh}}\to\mc G$ making the following diagram commute.
	% https://q.uiver.app/?q=WzAsMyxbMCwwLCJcXG1jIEYiXSxbMSwwLCJcXG1jIEZee1xcb3B7c2h9fSJdLFsxLDEsIlxcbWMgRyJdLFswLDIsIlxcdmFycGhpIiwyXSxbMCwxLCJcXG9we3NofSJdLFsxLDIsIlxccHNpIl1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc F} & {\mc F^{\op{sh}}} \\
		& {\mc G}
		\arrow["\varphi"', from=1-1, to=2-2]
		\arrow["{\op{sh}}", from=1-1, to=1-2]
		\arrow["\overline\varphi", from=1-2, to=2-2]
	\end{tikzcd}\]
\end{definition}
Of course, there are some checks we should do before using this object.
\begin{lemma}
	The sheafification of a presheaf $\mc F$ on $X$ exists and is unique up to (a suitable notion of) unique isomorphism.
\end{lemma}
\begin{proof}
	The idea of the construction is to set $\mc F^{\op{sh}}(U)$ to be systems of compatible germs; precisely,
	\[\mc F^{\op{sh}}(U)\coloneqq\Bigg\{(f_p)_{p\in U}\in\prod_{p\in U}\mc F_p:(f_p)_{p\in U}\text{ is a compatible system of germs}\Bigg\}.\]
	Given open sets $V\subseteq U$, we define the restriction map
	\[\arraycolsep=1.4pt\begin{array}{cccc}
		{\op{res}_{U,V}}\colon & \mc F^{\op{sh}}(U) &\to& \mc F^{\op{sh}}(V) \\
		& (f_p)_{p\in U} &\mapsto& (f_p)_{p\in V}
	\end{array}\]
	though we do have to check this is well-defined: to show $(f_p)_{p\in V}\in\mc F^{\op{sh}}(V)$, we note $(f_p)_{p\in U}\in\mc F^{\op{sh}}(U)$ promises that each $p\in U$ has $U_p\subseteq U$ containing $p$ with a lift $\widetilde f_p\in\mc F(U_p)$ so that $\widetilde f_p|_q=f_q$ for each $q\in U_p$. As such, each $p\in V$ has $V_p\coloneqq U_p\cap V$ containing $p$ with a lift $\widetilde f_p|_{U_p\cap V}\in\mc F(U_p\cap V)$ so that $\widetilde f_p|_{U_p\cap V}|_q=\widetilde f_p|_q=f_q$ for each $q\in U_p\cap V$. Thus, $(f_p)_{p\in V}$ is indeed a system of compatible germs.

	We now check that $\mc F^{\op{sh}}$ is a presheaf.
	\begin{itemize}
		\item Identity: given $(f_p)_{p\in U}\in\mc F^{\op{sh}}(U)$, we see $(f_p)_{p\in U}|_U=(f_p)_{p\in U}$.
		\item Functoriality: given open sets $W\subseteq V\subseteq U$, we see $(f_p)_{p\in U}|_V|_W=(f_p)_{p\in V}|_W=(f_p)_{p\in W}=(f_p)_{p\in U}|_W$.
	\end{itemize}
	Next up, we check that $\mc F^{\op{sh}}$ is a sheaf. Fix an open cover $\mc U$ of an open set $U\subseteq X$.
	\begin{itemize}
		\item Identity: suppose that $(f_p)_{p\in U},(g_p)_{p\in U}\in\mc F^{\op{sh}}(U)$ have $(f_p)_{p\in U}|_V=(g_p)_{p\in U}|_V$ for each $V\in\mc U$. Now, for each $q\in U$, there is some $V\in\mc U$ containing $q$, so we note
		\[(f_p)_{p\in V}=(f_p)_{p\in U}|_V=(g_p)_{p\in U}|_V=(g_p)_{p\in V}\]
		forces $f_q=g_q$. Thus, $(f_p)_{p\in U}=(g_p)_{p\in U}$.
		\item Gluability: suppose we have $(f_{V,p})_{p\in V}\in\mc F^{\op{sh}}(V)$ for each $V\in\mc U$ so that
		\[(f_{V,p})_{p\in V\cap V'}=(f_{V,p})_{p\in V}|_{V\cap V'}=(f_{V',p})_{p\in V'}|_{V\cap V'}=(f_{V',p})_{p\in V\cap V'}.\]
		Now, for each $q\in U$, find any $V\in\mc U$ containing $q$, and set $f_q\coloneqq f_{V,q}$. Note that this is independent of the choice of $V$: if we have $q\in V\cap V'$ with $V,V'\in\mc U$, then $(f_{V,p})_{p\in V\cap V'}=(f_{V',p})_{p\in V\cap V'}$ tells us that $f_{V,q}=f_{V',q}$. Further, we note that $(f_p)_{p\in U}|_V=(f_p)_{p\in V}=(f_{V,p})_{p\in V}$ for any $V\in\mc U$.
		
		So it remains to show that $(f_p)_{p\in U}\in\mc F^{\op{sh}}(U)$. Well, for each $p\in U$, find some $V\in\mc U$ containing $p$. Then $(f_{V,p})_{p\in V}$ is a system of compatible germs, so we can find $U_p\subseteq V$ containing $p$ and a lift $\widetilde f_p\in\mc F(U_p)$ such that
		\[\widetilde f_{p}|_q=f_{V,q}=f_q\]
		for each $q\in U_p$. This finishes checking that $(f_p)_{p\in U}$ is a compatible system of germs.
	\end{itemize}
	We now begin showing the universal property. The sheafification map is defined as
	\[\arraycolsep=1.4pt\begin{array}{ccccccccc}
		{\op{sh}_U}\colon & \mc F(U) &\to& \mc F^{\op{sh}}(U) \\
		& f &\mapsto& (f|_p)_{p\in U}
	\end{array}\]
	for any open set $U\subseteq X$. Note $f\in\mc F(U)$ does indeed give $(f|_p)_{p\in U}\in\mc F^{\op{sh}}(U)$ because each $p\in U$ can choose $U_p\coloneqq U$ (which contains $p$) with lift $\widetilde f_p\coloneqq f$ so that $\widetilde f_p|_q=f|_q$ for each $q\in U_p$.

	Additionally, it is fairly quick to check that $\op{sh}$ is actually a presheaf morphism: given open sets $V\subseteq U$ and $f\in\mc F(U)$, we compute
	\[\op{sh}_U(f)|_V=(f|_p)_{p\in U}|_V=(f|_p)_{p\in V}=(f|_V|_p)_{p\in V}=\op{sh}_V(f|_V).\]
	We are now ready to prove the universal property. Fix any sheaf $\mc G$ with a presheaf morphism $\varphi\colon\mc F\to\mc G$. We need to show there is a unique sheaf morphism $\overline\varphi\colon\mc F^{\op{sh}}\to\mc G$ such that $\varphi=\overline\varphi\circ\op{sh}$. We show these separately.
	\begin{itemize}
		\item Uniqueness: fix an open set $U\subseteq X$ and $(f_p)_{p\in U}\in\mc F^{\op{sh}}(U)$, and we will solve for $\overline\varphi_U((f_p)_{p\in U})$. Well, each $p\in U$ has some $U_p\subseteq U$ containing $p$ with a lift $\widetilde f_p\in\mc F(U_p)$ such that $\widetilde f_p|_q=f_q$ for each $q\in U_p$. As such, for each $q\in U$,
		\[\overline\varphi_U((f_p)_{p\in U})|_{U_q}=\overline\varphi_{U_q}((f_p)_{p\in U}|_{U_q})=\overline\varphi_{U_q}((f_p)_{p\in U_q})=\overline\varphi_{U_q}\big((\widetilde f_q|_p)_{p\in U_q}\big)=\overline\varphi_{U_q}(\op{sh}_{U_q}\widetilde f_q)=\varphi_{U_q}(\widetilde f_q).\]
		Thus, restrictions $\overline\varphi_U((f_p)_{p\in U})|_{U_q}$ are fixed by $\varphi$, so the identity axiom on $\mc G$ makes $\overline\varphi_U((f_p)_{p\in U})$ unique.
		\item Existence: fix an open set $U\subseteq X$ and $(f_p)_{p\in U}\in\mc F^{\op{sh}}(U)$, and we will define $\overline\varphi_U((f_p)_{p\in U})$. Well, $(\varphi_pf_p)_{p\in U}$ is a system of compatible germs in $\mc G(U)$ by \autoref{lem:movecompatibles}, so there is a unique $g\in\mc G(U)$ such that $g|_p=\varphi_p(f_p)$ for each $p\in U$. (Uniqueness is by \autoref{prop:stalkinjection}.) Thus, we set $\overline\varphi_U((f_p)_{p\in U})\coloneqq g$ so that $\overline\varphi_U((f_p)_{p\in U})$ is the unique section in $\mc G(U)$ such that
		\[\overline\varphi_U((f_p)_{p\in U})|_q=\varphi_q(f_q)\]
		for each $q\in U$. Note any section $f\in\mc F(U)$ has
		\[(\overline\varphi\circ{\op{sh}})_U(f)|_q=\overline\varphi_U((f|_p)_{p\in U})|_q=\varphi_q(f|_q)=\varphi_U(f)|_q\]
		for any $q\in U$, so \autoref{prop:stalkinjection} applied to the sheaf $\mc G$ forces equality, implying $\overline\varphi\circ{\op{sh}}=\varphi$.

		So we will be done as soon as we can show $\overline\varphi_U$ is a (pre)sheaf morphism. Well, given open sets $V\subseteq U$ and some $(f_p)_{p\in U}\in\mc F^{\op{sh}}(U)$, we note any $q\in V$ has
		\[\overline\varphi_U((f_p)_{p\in U})|_V|_q=\overline\varphi_U((f_p)_{p\in U})|_q=\varphi_q(f_q),\]
		so the uniqueness of $\overline\varphi_V((f_p)_{p\in V})$ forces $\overline\varphi_U((f_p)_{p\in U})|_V=\overline\varphi_V((f_p)_{p\in U}|_V),$ as desired.
		\qedhere
	\end{itemize}
\end{proof}
Here are some basic properties.
\begin{proposition} \label{prop:sheafificationstalk}
	Fix a presheaf $\mc F$ on $X$ with a sheafification ${\op{sh}}\colon\mc F\to\mc F^{\op{sh}}$. For given $p\in X$, the induced map ${\op{sh}_p}\colon\mc F_p\to(\mc F^{\op{sh}})_p$ on stalks is an isomorphism.
\end{proposition}
\begin{proof}
	We use the explicit description of the sheafification. To be explicit, our map ${\op{sh}_p}\colon\mc F_p\to(\mc F^{\op{sh}})_p$ sends $[(U,f)]$ to $[(U,(f|_q)_{q\in U})]$.

	For the inverse morphism $\pi_p\colon(\mc F^{\op{sh}})_p\to\mc F_p$, we simply send
	\[\pi_p\colon[(U,(f_q)_{q\in U})]\mapsto f_p.\]
	Notably, this is well-defined: $[(U,(f_q)_{q\in U})]=[(U',(f_q')_{q\in U})]$, then there is $V\subseteq U\cap U'$ such that $(f_q)_{q\in U})|_V=(f'_q)_{q\in U'}|_V$, which implies $f_p=f'_p$.

	It remains to show that these are inverse. Well, for $[(U,f)]\in\mc F_p$, we see
	\[\pi_p(\op{sh}_p([(U,f)]))=\pi_p([(U,(f|_q)_{q\in U})])=f|_p.\]
	And for $[(U,(f_q)_{q\in U})]\in(\mc F^{\op{sH}})_p$, we see
	\[\op{sh}_p(\pi_p([(U,(f_q)_{q\in U})]))=\op{sh}_p(f_p).\]
	Now, because $(f_q)_{q\in U}$ is a compatible system of germs, we may find $U_p\subseteq U$ containing $p$ with a lift $\widetilde f_p\in\mc F(U_p)$ such that $\widetilde f_p|_q=f_q$ for each $q\in U_p$. It follows
	\[\op{sh}_p(f_p)=\op{sh}_p(\widetilde f_p|_p)=[(U_p,(\widetilde f_p|_q)_{q\in U_p})]=[(U_p,(f_q)_{q\in U})]=[(U,(f_q)_{q\in U})],\]
	finishing this check.
\end{proof}
\begin{remark} \label{rem:sheafifysheaf}
	If $\mc F$ is itself a sheaf, then we can see fairly directly that $\mc F$ satisfies the universal property for $\mc F^{\op{sh}}$. Alternatively, the sheafification map ${\op{sh}}\colon\mc F\to\mc F^{\op{sh}}$ is a sheaf morphism which is an isomorphism on stalks by \autoref{prop:sheafificationstalk} and thus an isomorphism of sheaves by \autoref{prop:isoonstalks}.
\end{remark}
\begin{proposition}
	Sheafification $\mc F\mapsto\mc F^{\op{sh}}$ defines a functor $(-)^{\op{sh}}\colon\mathrm{PreSh}_X\to\mathrm{Sh}_X$ which is left adjoint to the forgetful functor $U\colon\mathrm{Sh}_X\to\mathrm{PreSh}_X$.
\end{proposition}
\begin{proof}
	We begin by describing the functor $(-)^{\op{sh}}$. We know its behavior on objects, so we still need to know its behavior on morphisms $\eta\colon\mc F\to\mc G$. Well, note that we have a composite map $\mc F\to\mc G\to\mc G^{\op{sh}}$, and $\mc G^{\op{sh}}$ is a sheaf, so the universal property of $\mc F^{\op{sh}}$ induces a unique map $\eta^{\op{sh}}\colon\mc F^{\op{sh}}\to\mc G^{\op{sh}}$ making the diagram
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXG1jIEYiXSxbMCwxLCJcXG1jIEciXSxbMSwwLCJcXG1jIEZee1xcb3B7c2h9fSJdLFsxLDEsIlxcbWMgR157XFxvcHtzaH19Il0sWzAsMl0sWzEsM10sWzAsMSwiXFxldGEiLDJdLFsyLDMsIlxcZXRhXntcXG9we3NofX0iLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc F} & {\mc F^{\op{sh}}} \\
		{\mc G} & {\mc G^{\op{sh}}}
		\arrow[from=1-1, to=1-2]
		\arrow[from=2-1, to=2-2]
		\arrow["\eta"', from=1-1, to=2-1]
		\arrow["{\eta^{\op{sh}}}", dashed, from=1-2, to=2-2]
	\end{tikzcd}\]
	commute. We quickly check functoriality.
	\begin{itemize}
		\item Identity: note $\id_{\mc F^{\op{sh}}}$ makes the diagram
		% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXG1jIEYiXSxbMCwxLCJcXG1jIEYiXSxbMSwwLCJcXG1jIEZee1xcb3B7c2h9fSJdLFsxLDEsIlxcbWMgRl57XFxvcHtzaH19Il0sWzAsMl0sWzEsM10sWzAsMSwiXFxpZF97XFxtYyBGfSIsMl0sWzIsMywiXFxpZF97XFxtYyBGXntcXG9we3NofX19IiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\mc F} & {\mc F^{\op{sh}}} \\
			{\mc F} & {\mc F^{\op{sh}}}
			\arrow[from=1-1, to=1-2]
			\arrow[from=2-1, to=2-2]
			\arrow["{\id_{\mc F}}"', from=1-1, to=2-1]
			\arrow["{\id_{\mc F^{\op{sh}}}}", dashed, from=1-2, to=2-2]
		\end{tikzcd}\]
		commute, so by definition, we see $({\id_\mc F})^{\op{sh}}=\id_{\mc F^{\op{sh}}}$.
		\item Functoriality: given presheaf morphisms $\varphi\colon\mc F\to\mc G$ and $\psi\colon\mc G\to\mc H$, we note that $\psi^{\op{sh}}\circ\varphi^{\op{sh}}$ makes the outer rectangle of
		% https://q.uiver.app/?q=WzAsNixbMCwwLCJcXG1jIEYiXSxbMCwxLCJcXG1jIEciXSxbMSwwLCJcXG1jIEZee1xcb3B7c2h9fSJdLFsxLDEsIlxcbWMgR157XFxvcHtzaH19Il0sWzAsMiwiXFxtYyBIIl0sWzEsMiwiXFxtYyBIXntcXG9we3NofX0iXSxbMCwyXSxbMSwzXSxbMCwxLCJcXHZhcnBoaSJdLFsyLDMsIlxcdmFycGhpXntcXG9we3NofX0iLDJdLFsxLDQsIlxccHNpIl0sWzMsNSwiXFxwc2lee1xcb3B7c2h9fSIsMl0sWzQsNV0sWzIsNSwiXFxwc2lee1xcb3B7c2h9fVxcY2lyY1xcdmFycGhpXntcXG9we3NofX0iLDAseyJjdXJ2ZSI6LTIsInN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFswLDQsIlxccHNpXFxjaXJjXFx2YXJwaGkiLDIseyJjdXJ2ZSI6Mn1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\mc F} & {\mc F^{\op{sh}}} \\
			{\mc G} & {\mc G^{\op{sh}}} \\
			{\mc H} & {\mc H^{\op{sh}}}
			\arrow[from=1-1, to=1-2]
			\arrow[from=2-1, to=2-2]
			\arrow["\varphi", from=1-1, to=2-1]
			\arrow["{\varphi^{\op{sh}}}"', from=1-2, to=2-2]
			\arrow["\psi", from=2-1, to=3-1]
			\arrow["{\psi^{\op{sh}}}"', from=2-2, to=3-2]
			\arrow[from=3-1, to=3-2]
			\arrow["{\psi^{\op{sh}}\circ\varphi^{\op{sh}}}", curve={height=-12pt}, dashed, from=1-2, to=3-2]
			\arrow["\psi\circ\varphi"', curve={height=12pt}, from=1-1, to=3-1]
		\end{tikzcd}\]
		commute, so by definition, we see $\psi^{\op{sh}}\circ\varphi^{\op{sh}}=(\psi\circ\varphi)^{\op{sh}}$.
	\end{itemize}
	We will not check that the forgetful functor $U$ is a functor; the main point is that it does nothing to morphisms. Also, we will not formally check the adjoint pair, but we will say that it requires exhibit a natural isomorphism
	\[\op{Mor}_{\mathrm{Sh}_X}(F^{\op{sh}},\mc G)\simeq\op{Mor}_{\mathrm{PreSh}_X}(F,U\mc G)\]
	where $F\in\mathrm{PreSh}_X$ and $\mc G\in\mathrm{Sh}_X$. And we will describe this isomorphism: if ${\op{sh}}\colon F\to F^{\op{sh}}$ is the sheafification map, the isomorphism is given by
	\[\arraycolsep=1.4pt\begin{array}{ccc}
		\op{Mor}_{\mathrm{Sh}_X}(F^{\op{sh}},\mc G) &\simeq& \op{Mor}_{\mathrm{PreSh}_X}(F,U\mc G) \\
		\varphi &\mapsto& \varphi\circ{\op{sh}} \\
		\overline\psi &\mapsfrom& \psi
	\end{array}\]
	where $\overline\psi$ is the morphism induced by the universal property of sheafification applied to the presheaf morphism $\psi\colon F\to\mc G$. That this is an isomorphism follows from the universal property, and the naturality checks for the adjoint pair are a matter of writing down the squares and checking them.
\end{proof}
\begin{remark}
	Sheafification being a left adjoint means that it preserves limits. Kernels and limits, so we see that the sheafification of the presheaf kernel is just the presheaf kernel again. The point here is that we don't need to sheafify the kernel, which is why we could talk about them before sheafification, but we will not be so lucky with cokernels.
\end{remark}

\subsection{Sheaf Cokernels}
Now that we have sheafification, we may continue showing that the category sheaves valued in an abelian category is abelian. For this, we need to understand cokernels.
\begin{definition}[Sheaf cokernel]
	Fix a morphism $\varphi\colon\mc F\to\mc G$ of presheaves on $X$. Then the \textit{presheaf cokernel} $\coker\varphi$ is the sheaf found by setting
	\[(\coker^{\op{pre}}\varphi)(U)\coloneqq\coker\varphi_U=\mc G(U)/\im\varphi_U.\]
	We define the \textit{sheaf kernel} as the sheafification of the presheaf $\coker^{\op{pre}}\varphi$.
\end{definition}
We begin by running our checks on the presheaf cokernel.
\begin{lemma} \label{lem:presheafcoker}
	Fix a presheaf morphism $\varphi\colon\mc F\to\mc G$. Then $\coker^{\op{pre}}\varphi$ is a presheaf, and it is the cokernel of $\varphi$ in the category $\mathrm{PreSh}_X$.
\end{lemma}
\begin{proof}
	To begin, we must exhibit our restriction maps. Given open sets $V\subseteq U$ and $[g]\in(\coker^{\op{pre}}\varphi)(U)=\coker\varphi_U$, we define
	\[\op{res}_{U,V}([g])\coloneqq[g|_V].\]
	Note this is well-defined: if $[g]=[g']$, then $g-g'\in\im\varphi_U$, so write $g-g'=\varphi_U(f)$ for $f\in\mc F(U)$. Thus, $g|_V-g'|_V=(g-g')|_V=\varphi_U(f)|_V=\varphi_V(f|_V)$ is in the image of $\varphi_V$, so $[g|_V]=[g'|_V]$.

	We quickly check that this data assembles into a presheaf.
	\begin{itemize}
		\item Identity: given $g\in(\coker^{\op{pre}}\varphi)(U)$, note $[g]|_U=[g|_U]=[g]$.
		\item Functoriality: given open sets $W\subseteq V\subseteq U$ and some $g\in(\coker^{\op{pre}}\varphi)(U)$, we see $[g]|_V|_W=[g|_V]|_W=[g|_V|_W]=[g|_W]=[g]|_W$.
	\end{itemize}
	It remains to check the universal property: we need $\coker^{\op{pre}}\varphi$ to be the colimit of the following diagram.
	% https://q.uiver.app/?q=WzAsMyxbMCwwLCJcXG1jIEYiXSxbMSwwLCJcXG1jIEciXSxbMCwxLCJcXG1jIFoiXSxbMCwxLCJcXHZhcnBoaSJdLFswLDJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc F} & {\mc G} \\
		{\mc Z}
		\arrow["\varphi", from=1-1, to=1-2]
		\arrow[from=1-1, to=2-1]
	\end{tikzcd}\]
	To begin, we define a morphism $\pi\colon\mc G\to\coker^{\op{pre}}\varphi$. Well, for each open $U\subseteq X$, there is a natural projection $\pi_U\colon\mc G(U)\onto\coker\varphi_U$ by $\pi_U\colon g\mapsto[g]$, which we need to assemble into a natural transformation. Indeed, given open sets $V\subseteq U$ and a section $g\in\mc G(U)$, we compute
	\[\pi_U(g)|_V=[g]|_V=[g|_V]=\pi_V(g|_V).\]
	This map $\pi\colon\mc G\to\coker^{\op{pre}}\varphi$ induces the other needed maps $\mc F\to\coker^{\op{pre}}\varphi$ (as $\pi\circ\varphi$) and $\mc Z\to\coker^{\op{pre}}\varphi$ (which is the zero map). Further, note that any open $U\subseteq X$ has $(\pi\circ\varphi)_U=\pi_U\circ\varphi_U=0$ because $\pi_U$ returns $0$ on $\im\varphi_U$; thus, $\pi\circ\varphi=0$. Thus, the diagram
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXG1jIEYiXSxbMSwwLCJcXG1jIEciXSxbMCwxLCJcXG1jIFoiXSxbMSwxLCJcXGNva2VyXntcXG9we3ByZX19XFx2YXJwaGkiXSxbMCwxLCJcXHZhcnBoaSJdLFswLDJdLFsxLDMsIlxccGkiLDJdLFsyLDNdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc F} & {\mc G} \\
		{\mc Z} & {\coker^{\op{pre}}\varphi}
		\arrow["\varphi", from=1-1, to=1-2]
		\arrow[from=1-1, to=2-1]
		\arrow["\pi"', from=1-2, to=2-2]
		\arrow[from=2-1, to=2-2]
	\end{tikzcd}\]
	commutes.

	We are now ready to show the universal property. Fix a presheaf $\mc H$ with a map $\psi\colon\mc G\to\mc H$ such that $\psi\circ\varphi=0$. Then we need a unique map $\overline\psi\colon(\coker^{\op{pre}}\varphi)\to\mc H$ such that $\psi=\overline\psi\circ\pi$; i.e., such that the diagram
	% https://q.uiver.app/?q=WzAsNSxbMCwwLCJcXG1jIEYiXSxbMSwwLCJcXG1jIEciXSxbMCwxLCJcXG1jIFoiXSxbMSwxLCJcXGNva2VyXntcXG9we3ByZX19XFx2YXJwaGkiXSxbMiwyLCJcXG1jIEgiXSxbMCwxLCJcXHZhcnBoaSJdLFswLDJdLFsxLDMsIlxccGkiLDJdLFsyLDNdLFszLDQsIlxcb3ZlcmxpbmVcXHBzaSIsMSx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFsxLDQsIlxccHNpIiwwLHsiY3VydmUiOi0yfV0sWzIsNCwiIiwwLHsiY3VydmUiOjJ9XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc F} & {\mc G} \\
		{\mc Z} & {\coker^{\op{pre}}\varphi} \\
		&& {\mc H}
		\arrow["\varphi", from=1-1, to=1-2]
		\arrow[from=1-1, to=2-1]
		\arrow["\pi"', from=1-2, to=2-2]
		\arrow[from=2-1, to=2-2]
		\arrow["\overline\psi"{description}, dashed, from=2-2, to=3-3]
		\arrow["\psi", curve={height=-12pt}, from=1-2, to=3-3]
		\arrow[curve={height=12pt}, from=2-1, to=3-3]
	\end{tikzcd}\]
	commutes. We show uniqueness and existence of $\overline\psi$ separately.
	\begin{itemize}
		\item Uniqueness: given an open set $U\subseteq X$ and some $[g]\in(\coker^{\op{pre}})(U)$, we must have
		\[\overline\psi_U([g])=\overline\psi_U(\pi_Ug)=\psi_U(g),\]
		so $\overline\psi_U$ is uniquely determined.
		\item Existence: given an open set $U\subseteq X$ and some $[g]\in(\coker^{\op{pre}}\varphi)(U)$, we simply define
		\[\overline\psi_U([g])\coloneqq\psi_U(g).\]
		Note this is well-defined: if $[g]=[g']$, then $g-g'\in\im\varphi_U$, so write $g-g'=\varphi_U(f)$. Then $\psi_U(g)-\psi_U(g')=\psi_U(\varphi_Uf)=0$, so $\psi_U(g)=\psi_U(g')$.
		
		Additionally, we note that any $g\in\mc G(U)$ will have $\overline\psi_U(\pi_Ug)=\overline\psi_U([g])=\psi_U(g)$, so we conclude $\overline\psi\circ\pi=\psi$. It remains to show that $\overline\psi$ is actually a presheaf morphism. Well, any open sets $V\subseteq U$ and $[g]\in(\coker^{\op{pre}}\varphi)(U)$ has
		\[\overline\psi_U([g])|_V=\psi_U(g)|_V=\psi_V(g|_V)=\overline\psi_V([g|_V])=\overline\psi_V([g]|_V),\]
		finishing.
		\qedhere
	\end{itemize}
\end{proof}
And now we run the checks on the sheaf kernel.
\begin{lemma} \label{lem:sheafcoker}
	Fix a morphism $\varphi\colon\mc F\to\mc G$ of sheaves on $X$. Then $\coker\varphi$ is the cokernel in the category $\mathrm{Sh}_X$.
\end{lemma}
\begin{proof}
	Let $\pi^{\op{pre}}\colon\mc G\to\coker^{\op{pre}}\varphi$ be the projection map of \autoref{lem:presheafcoker} and ${\op{sh}}\colon\coker^{\op{pre}}\varphi\to\coker\varphi$ be the sheafification map. Then we define $\pi\coloneqq{\op{sh}}\circ\pi^{\op{pre}}$, so we claim that this map makes $\coker\varphi$ the colimit of the following diagram.
	% https://q.uiver.app/?q=WzAsMyxbMCwwLCJcXG1jIEYiXSxbMSwwLCJcXG1jIEciXSxbMCwxLCJcXG1jIFoiXSxbMCwxLCJcXHZhcnBoaSJdLFswLDJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc F} & {\mc G} \\
		{\mc Z}
		\arrow["\varphi", from=1-1, to=1-2]
		\arrow[from=1-1, to=2-1]
	\end{tikzcd}\]
	Notably, we have $\pi\circ\varphi={\op{sh}}\circ\pi^{\op{pre}}\circ\varphi={\op{sh}}\circ0=0$, so $\pi$ at least works as a candidate morphism.

	To show the universal property, fix a sheaf $\mc H$ with a map $\psi\colon\mc G\to\mc H$ such that $\psi\circ\varphi=0$. Then we need a unique map $\overline\psi\colon\coker\varphi\to\mc H$ such that $\psi=\overline\psi\circ\pi$, or equivalently, making
	\[\begin{tikzcd}
		{\mc F} & {\mc G} \\
		{\mc Z} & {\coker\varphi} \\
		&& {\mc H}
		\arrow["\varphi", from=1-1, to=1-2]
		\arrow[from=1-1, to=2-1]
		\arrow["\pi"', from=1-2, to=2-2]
		\arrow[from=2-1, to=2-2]
		\arrow["\overline\psi"{description}, dashed, from=2-2, to=3-3]
		\arrow["\psi", curve={height=-12pt}, from=1-2, to=3-3]
		\arrow[curve={height=12pt}, from=2-1, to=3-3]
	\end{tikzcd}\]
	commute. We show existence and uniqueness separately.
	\begin{itemize}
		\item Existence: working in $\mathrm{PreSh}_X$ for a moment, the fact that $\psi\circ\varphi=0$ promises a map $\overline\psi^{\op{pre}}\colon\coker^{\op{pre}}\varphi\to\mc H$ such that $\overline\psi^{\op{pre}}\circ\pi^{\op{sh}}=\psi$. Now, from the definition of sheafification, we get a map $\overline\psi\colon\coker\varphi\to\mc H$ such that
		\[\overline\psi\circ{\op{sh}}=\overline\psi^{\op{pre}}.\]
		Thus, $\overline\psi\circ\pi=\overline\psi\circ{\op{sh}}\circ\pi^{\op{pre}}=\overline\psi^{\op{pre}}\circ\pi^{\op{pre}}=\psi$, as needed.
		\item Uniqueness: suppose $\overline\psi_1,\overline\psi_2\colon\coker\varphi\to\mc H$ have $\psi=\overline\psi_1\circ\pi=\overline\psi_2\circ\pi$. Then we see that actually
		\[\psi=(\overline\psi_1\circ{\op{sh}})\circ\pi^{\op{pre}}=(\overline\psi_2\circ{\op{sh}})\circ\pi^{\op{pre}},\]
		but the universal property of $\coker^{\op{pre}}\varphi$ has a uniqueness forcing $\overline\psi_1\circ{\op{sh}}=\overline\psi_2\circ{\op{sh}}$. But then the universal property of sheafification says there is a unique map $\overline\psi\colon\coker\varphi\to\mc H$ such that
		\[\overline\psi\circ{\op{sh}}=\overline\psi_1\circ{\op{sh}}=\overline\psi_2\circ{\op{sh}},\]
		so $\overline\psi=\overline\psi_1=\overline\psi_2$ follows.
		\qedhere
	\end{itemize}
\end{proof}
As before, we take a moment to verify that vanishing cokernel does indeed mean epic.
\begin{lemma} \label{lem:epiiszerocoker}
	Let $\mc C$ be a category with a zero object and cokernels. Then a morphism $\varphi\colon A\to B$ is epic if and only if $\coker\varphi$ vanishes.
\end{lemma}
\begin{proof}
	Reverse all the arrows in \autoref{lem:moniciszeroker}. Notably, the dual of the kernel is the cokernel, the dual of a monic map is an epic map, and the dual of the zero object is still the zero object.
\end{proof}

\subsection{Surjectivity at Stalks}
We are now ready to fix our surjectivity. Just like injectivity, we can check surjectivity at stalks.
\begin{lemma} \label{lem:cokerstalk}
	Fix a morphism $\varphi\colon\mc F\to\mc G$ of presheaves on $X$. Then, for any $p$, the projection $\mc G\to\coker^{\op{pre}}\varphi$ induces an isomorphism
	\[\coker\varphi_p\to(\coker^{\op{pre}}\varphi)_p.\]
	Thus, if $\mc F$ and $\mc G$ are sheaves, then the projection $\mc G\to\coker\varphi$ induces an isomorphism $\coker\varphi_p\simeq(\coker\varphi)_p$.
\end{lemma}
\begin{proof}
	Let $\pi^{\op{pre}}\colon\mc G\to\coker^{\op{pre}}\varphi$ be the natural projection witnessing that $\coker^{\op{pre}}\varphi$ is the presheaf cokernel.

	To show the second sentence note $\pi^{\op{pre}}$ induces a map $\mc G_p\to(\coker^{\op{pre}}\varphi)_p$ as
	\[\pi^{\op{pre}}_p\colon[(U,g)]\mapsto[(U,\pi^{\op{pre}}_Ug)].\]
	Note that, if $[(U,g)]\in\im\varphi_p$, then we can write $[(U,g)]=[(V,\varphi_Vf)]$ for some $f\in\mc F(V)$, so
	\[\pi^{\op{pre}}_p(f|_p)=(\pi^{\op{pre}}_Vf)|_p=0|_p=0,\]
	so $\im\varphi_p\subseteq\ker\pi^{\op{pre}}_p$, so we have actually induced a map $\coker\varphi_p\to(\coker^{\op{pre}}\varphi)_p$.

	In the other direction, we define $\varphi_p\colon(\coker^{\op{pre}}\varphi)_p\to\coker\varphi_p$ by
	\[\varphi_p\colon[(U,[g])]\mapsto(g|_p+\im\varphi_p).\]
	We do need to check that this is well-defined: if $(U,[g])\sim(U',[g'])$, then we can find $V\subseteq U\cap U'$ such that $[(g-g')|_V]=[g]|_V-[g']|_V=0$, so there is $f\in\mc F(V)$ such that $(g-g')|_V=\varphi_V(f)$. Thus, $g|_p-g'|_p=(g-g')|_p=(g-g')|_V|_p=\varphi_V(f)|_p$ is in $\im\varphi_p$.

	Lastly, we need to check that $\pi^{\op{pre}}_p$ and $\varphi_p$ are inverse. Given $[(U,g)]+\im\varphi_p\in\coker\varphi_p$, we note
	\[\varphi_p\left(\pi^{\op{pre}}([(U,g)]+\im\varphi_p)\right)=\varphi_p([(U,[g])])=g|_p+\im\varphi_p.\]
	Conversely, given $[(U,[g])]\in(\coker^{\op{pre}}\varphi)_p$, we note
	\[\pi^{\op{pre}}_p(\varphi_p([(U,[g])]))=\pi^{\op{pre}}([(U,g)]+\im\varphi_p)=[(U,[g])],\]
	finishing.

	We now show the last sentence. Let ${\op{sh}}\colon\coker^{\op{pre}}\varphi\to\coker\varphi$ be the sheafification map. Then $\pi_p=({\op{sh}}\circ\pi^{\op{pre}})_p$ we can check to be ${\op{sh}}_p\circ\pi^{\op{pre}}_p$ (by, say, \autoref{rem:stalkfunctor}). Stringing these isomorphisms together, we see
	\[\coker\varphi_p\to(\coker^{\op{pre}}\varphi)_p\simeq(\coker\varphi)_p,\]
	which is what we wanted.
\end{proof}
And here is our result.
\begin{proposition} \label{lem:surjonstalks}
	Fix a morphism $\varphi\colon\mc F\to\mc G$ of sheaves on $X$. The following are equivalent.
	\begin{listalph}
		\item $\varphi$ is epic.
		\item $(\coker\varphi)(U)$ vanishes for all open $U\subseteq X$.
		\item $\varphi_p$ is epic for all $p\in X$.
	\end{listalph}
\end{proposition}
\begin{proof}
	By \autoref{lem:epiiszerocoker}, these are equivalent to the following.
	\begin{enumerate}[label=(\alph*')]
		\item $\coker\varphi$ vanishes.
		\item $(\coker\varphi)(U)$ vanishes for all open $U\subseteq X$.
		\item $\coker\varphi_p$ vanishes for all $p\in X$. By \autoref{lem:cokerstalk}, this is equivalent to $(\coker\varphi)_p$ vanishing for all $p\in X$.
	\end{enumerate}
	These are equivalent by \autoref{lem:checkzerolocally}.
\end{proof}

\subsection{The Category of Sheaves Is Abelian}
Now that our category of sheaves (valued in an abelian category) has kernels and cokernels for our morphisms, we have two more conditions to check.
\begin{lemma} \label{lem:kercoker}
	Fix a monic morphism $\varphi\colon\mc F\to\mc G$ of sheaves on $X$. Then actually $\varphi\colon\mc F\to\mc G$ makes $\mc F$ the kernel of the cokernel $\pi\colon\mc G\to\coker\varphi$.
\end{lemma}
\begin{proof}
	We need to show that $\mc F$ is the limit of the following diagram.
	% https://q.uiver.app/?q=WzAsMyxbMSwwLCJcXG1jIEciXSxbMCwxLCJcXG1jIFoiXSxbMSwxLCJcXGNva2VyXFx2YXJwaGkiXSxbMCwyLCJcXHBpIl0sWzEsMl1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		& {\mc G} \\
		{\mc Z} & \coker\varphi
		\arrow["\pi", from=1-2, to=2-2]
		\arrow[from=2-1, to=2-2]
	\end{tikzcd}\]
	To begin, note that $\varphi\colon\mc F\to\mc G$ makes the diagram
	% https://q.uiver.app/?q=WzAsNCxbMSwwLCJcXG1jIEciXSxbMCwxLCJcXG1jIFoiXSxbMSwxLCJcXGNva2VyXFx2YXJwaGkiXSxbMCwwLCJcXG1jIEYiXSxbMCwyLCJcXHBpIl0sWzEsMl0sWzMsMCwiXFx2YXJwaGkiXSxbMywxXV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc F} & {\mc G} \\
		{\mc Z} & \coker\varphi
		\arrow["\pi", from=1-2, to=2-2]
		\arrow[from=2-1, to=2-2]
		\arrow["\varphi", from=1-1, to=1-2]
		\arrow[from=1-1, to=2-1]
	\end{tikzcd}\]
	commute by the construction of $\pi\colon\mc G\to\coker\varphi$. We now show that $\mc F$ satisfies the universal property. Fix a sheaf morphism $\psi\colon\mc H\to\mc G$ such that $\pi\circ\psi=0$. Then we need a unique map $\overline\psi\colon\mc H\to\mc F$ making the diagram
	% https://q.uiver.app/?q=WzAsNSxbMiwxLCJcXG1jIEciXSxbMSwyLCJcXG1jIFoiXSxbMiwyLCJcXGNva2VyXFx2YXJwaGkiXSxbMSwxLCJcXG1jIEYiXSxbMCwwLCJcXG1jIEgiXSxbMCwyLCJcXHBpIl0sWzEsMl0sWzMsMCwiXFx2YXJwaGkiXSxbMywxXSxbNCwzLCJcXG92ZXJsaW5lXFxwc2kiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbNCwwLCJcXHBzaSIsMCx7ImN1cnZlIjotMn1dLFs0LDEsIiIsMCx7ImN1cnZlIjoyfV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc H} \\
		& {\mc F} & {\mc G} \\
		& {\mc Z} & \coker\varphi
		\arrow["\pi", from=2-3, to=3-3]
		\arrow[from=3-2, to=3-3]
		\arrow["\varphi", from=2-2, to=2-3]
		\arrow[from=2-2, to=3-2]
		\arrow["\overline\psi"{description}, dashed, from=1-1, to=2-2]
		\arrow["\psi", curve={height=-12pt}, from=1-1, to=2-3]
		\arrow[curve={height=12pt}, from=1-1, to=3-2]
	\end{tikzcd}\]
	commute; i.e., we need $\psi=\varphi\circ\overline\psi$. We show uniqueness and existence separately.
	\begin{itemize}
		\item Uniqueness: this follows because $\varphi$ is monic. Indeed, if $\overline\psi_1,\overline\psi_2$ have $\varphi\circ\overline\psi_1=\psi=\varphi\circ\overline\psi_2$, then $\overline\psi_1=\overline\psi_2$ because $\varphi$ is monic.
		\item Existence: this is trickier. Let $\pi^{\op{pre}}\colon\mc G\to\coker^{\op{pre}}\varphi$ be the natural projection, and let ${\op{sh}}\colon\coker^{\op{pre}}\varphi\to\coker\varphi$ be the sheafification map.
		
		Now, given $U\subseteq X$ and $h\in\mc H(U)$, set $g\coloneqq\psi_U(h)$ for brevity. Notably, we have $\pi_U\circ\psi_U=0$, so $\pi_U(g)=0$. It follows $\pi_p(g|_p)=\pi_U(g)|_p=0$ for each $p\in U$, so $g|_p\in\ker\pi_p$ for each $p\in U$. Now, for each $p\in U$, by \autoref{lem:cokerstalk}, $\ker\pi_p=\im\varphi_p$, and by \autoref{prop:injonstalks}, $\varphi_p$ is monic, so is a unique $f_p\in\mc F_p$ such that
		\[\varphi_p(f_p)=g|_p.\]
		We claim that $(f_p)_{p\in U}$ is a system of compatible germs. To begin, choose some representative $f_p=[(U'_p,\widetilde f'_p)]$ and note that we have
		\[[(U,g)]=g|_p=\varphi_p(f_p)=[(U'_p,\varphi_{U'_p}(\widetilde f'_p))],\]
		so we can find $U_p\subseteq U'_p$ containing $p$ with $\widetilde f_p=\widetilde f'_p|_{U_p}$ small enough so that $g|_{U_p}=\varphi_{U_p}(\widetilde f_p)$. As such, any $q\in U_p$ has
		\[\varphi_q(\widetilde f_p|_q)=[(U_p,\varphi_{U_p}(\widetilde f_p))]=[(U_p,g|_{U_p})]=g|_p,\]
		so $\widetilde f_p|_q=f_q$ follows.

		Thus, \autoref{prop:stalkinjection} promises a unique $f\in\mc F(U)$ such that $f|_p=f_p$ for each $p\in U$. So we define $\overline\psi_U(h)\coloneqq f$ to be the unique element such that
		\[\varphi_p(\overline\psi_U(h)|_p)=\psi_U(h)|_p\]
		for all $p\in U$.
		
		It remains to show that $\overline\psi$ assembles into a presheaf morphism. Well, for open sets $V\subseteq U$ and $h\in\mc H(U)$, we see that any $p\in V$ will have
		\[\varphi_p(\overline\psi_U(h)|_V|_p)=\varphi_p(\overline\psi_U(h)|_p)=\psi_U(h)|_p=\psi_V(h|_V)|_p,\]
		so the uniqueness of $\psi_V(h|_V)$ forces $\overline\psi_U(h)|_V=\psi_V(h|_V)$.
		\qedhere
	\end{itemize}
\end{proof}
\begin{lemma} \label{lem:cokerker}
	Fix an epic morphism $\varphi\colon\mc F\to\mc G$ of sheaves on $X$. Then actually $\varphi\colon\mc F\to\mc G$ makes $\mc G$ the cokernel of the kernel $\iota\colon\ker\varphi\to\mc F$.
\end{lemma}
\begin{proof}
	We need to show that $\mc G$ is the colimit of the following diagram.
	% https://q.uiver.app/?q=WzAsMyxbMCwxLCJcXG1jIEYiXSxbMCwwLCJcXGtlclxcdmFycGhpIl0sWzEsMCwiXFxtYyBaIl0sWzEsMCwiXFxpb3RhIiwyXSxbMSwyXV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		\ker\varphi & {\mc Z} \\
		{\mc F}
		\arrow["\iota"', from=1-1, to=2-1]
		\arrow[from=1-1, to=1-2]
	\end{tikzcd}\]
	To begin, note that $\varphi\colon\mc F\to\mc G$ makes the diagram
	% https://q.uiver.app/?q=WzAsNCxbMCwxLCJcXG1jIEYiXSxbMCwwLCJcXGtlclxcdmFycGhpIl0sWzEsMCwiXFxtYyBaIl0sWzEsMSwiXFxtYyBHIl0sWzEsMCwiXFxpb3RhIiwyXSxbMSwyXSxbMCwzLCJcXHZhcnBoaSJdLFsyLDNdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		\ker\varphi & {\mc Z} \\
		{\mc F} & {\mc G}
		\arrow["\iota"', from=1-1, to=2-1]
		\arrow[from=1-1, to=1-2]
		\arrow["\varphi", from=2-1, to=2-2]
		\arrow[from=1-2, to=2-2]
	\end{tikzcd}\]
	commute by the construction of $\iota\colon\ker\varphi\to\mc G$. We are now ready to show that $\mc G$ satisfies the universal property. Fix a sheaf $\mc H$ with a morphism $\psi\colon\mc F\to\mc H$ such that $\psi\circ\iota=0$. We need a unique map $\overline\psi\colon\mc G\to\mc H$ such that $\psi=\overline\psi\circ\varphi$, or equivalently, making the diagram
	% https://q.uiver.app/?q=WzAsNSxbMCwxLCJcXG1jIEYiXSxbMCwwLCJcXGtlclxcdmFycGhpIl0sWzEsMCwiXFxtYyBaIl0sWzEsMSwiXFxtYyBHIl0sWzIsMiwiXFxtYyBIIl0sWzEsMCwiXFxpb3RhIiwyXSxbMSwyXSxbMCwzLCJcXHZhcnBoaSJdLFsyLDNdLFsyLDQsIiIsMix7ImN1cnZlIjotMn1dLFswLDQsIlxccHNpIiwyLHsiY3VydmUiOjJ9XSxbMyw0LCJcXG92ZXJsaW5lXFxwc2kiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		\ker\varphi & {\mc Z} \\
		{\mc F} & {\mc G} \\
		&& {\mc H}
		\arrow["\iota"', from=1-1, to=2-1]
		\arrow[from=1-1, to=1-2]
		\arrow["\varphi", from=2-1, to=2-2]
		\arrow[from=1-2, to=2-2]
		\arrow[curve={height=-12pt}, from=1-2, to=3-3]
		\arrow["\psi"', curve={height=12pt}, from=2-1, to=3-3]
		\arrow["\overline\psi"{description}, dashed, from=2-2, to=3-3]
	\end{tikzcd}\]
	commute. We show uniqueness and existence separately.
	\begin{itemize}
		\item Uniqueness: this follows because $\varphi$ is epic. Indeed, if $\overline\psi_1,\overline\psi_2\colon\mc G\to\mc H$ have $\overline\psi_1\circ\varphi=\psi=\overline\psi_2\circ\varphi$, then $\overline\psi_1=\overline\psi_2$ because $\varphi$ is epic.
		\item Existence: given $U\subseteq X$ and $g\in\mc G(U)$, we define $\overline\psi_U(g)$ by hand. By \autoref{lem:surjonstalks}, we see that $\varphi$ being epic means that $\varphi_p$ is surjective for each $p\in U$, we can find $f_p\in\mc F_p$ with $\varphi_p(f_p)=g|_p$ for each $p$. We now set
		\[h_p\coloneqq\psi_p(f_p).\]
		We claim that $h_p$ is independent of the choice for $f_p$. Indeed, if we have $[(U,f)]$ and $[(U',f')]$ in $\mc F_p$ with $[(U,\varphi_Uf)]=[(U',\varphi_{U'}f')]=g|_p$, then there is an open $V\subseteq U\cap U'$ such that $\varphi_V(f|_V-f'|_V)=0$. Thus, $f-f'\in\ker\varphi_V=(\ker\varphi)(V)$, so it follows $\psi_V((f-f')|_V)=0$. Thus, so
		\[\psi_p([(U,f)])-\psi_p([(U',f')])=\psi_p([(V,\psi_V((f-f')|_V))])=\psi_p([(V,0)])=0.\]
		Next, we claim that the $(h_p)_{p\in U}$ forms a compatible system of germs. Well, for each $p\in U$, we can find a sufficiently small open set $U_p$ with a lift $\widetilde f_p\in\mc F(U_p)$ such that $\varphi_{U_p}(\widetilde f_p)=g|_{U_p}$. Set $\widetilde h_p\coloneqq\psi_{U_p}(\widetilde f_p)$ so that for each $q\in U_p$ has $\varphi_q(\widetilde f_p|_q)=\varphi_{U_p}(\widetilde f_p)|_q=g|_q$ and thus
		\[h_q=\psi_q(\widetilde f_p|_q)=\psi_{U_p}(\widetilde f_p)|_q.\]
		It follows \autoref{prop:stalkinjection} that we have a unique $h\in\mc H(U)$ such that $h|_p=h_p$ for each $p\in U$, so we define $\overline\psi_U(g)\coloneqq h$. Explicitly, $\overline\psi_U(g)$ is the unique element of $\mc H(U)$ such that
		\[\overline\psi_U(g)|_p=\psi_p\left(\varphi_p^{-1}(g|_p)\right)\]
		for each $p\in U$.

		We now run checks on $\overline\psi$. To see that we have a morphism $\mc G\to\mc H$, note that any opens $V\subseteq U$ and $g\in\mc G(U)$ will have, for each $p\in U$,
		\[\overline\psi_U(g)|_V|_p=\overline\psi_U(g)|_p=\psi_p\left(\varphi_p^{-1}(g|_p)\right)=\psi_p\left(\varphi_p^{-1}(g|_V|_p)\right),\]
		so the uniqueness of $\overline\psi_V(g|_V)$ forces $\overline\psi_U(g)|_V=\overline\psi_V(g|_V)$.

		Lastly, we note that $\psi=\overline\psi\circ\varphi$: for any open $U\subseteq X$ and $f\in\mc F(U)$, all points $p\in U$ give
		\[\overline\psi_U(\varphi_U(f))|_p=\psi_p\left(\varphi_p^{-1}(\varphi_U(f)|_p)\right)=\psi_p\left(\varphi_p^{-1}(\varphi_p(f|_p))\right)=\psi_p(f|_p)=\psi_U(f)|_p,\]
		so the injectivity of \autoref{prop:stalkinjection} forces our equality.
		\qedhere
	\end{itemize}
\end{proof}
And here is our result.
\begin{theorem} \label{thm:sheafabelian}
	The category $\mathrm{Sh}_X$ of sheaves on a topological space $X$ valued in a (concrete) abelian category $\mc C$ is additive.
\end{theorem}
\begin{proof}
	The category is additive by \autoref{cor:sheavesadditive}. Kernels exist by \autoref{lem:sheafker}, and cokernels exist by \autoref{lem:sheafcoker}. The last conditions to check are \autoref{lem:kercoker} and \autoref{lem:cokerker}.
\end{proof}

\subsection{Exactness via Stalks}
It is a general philosophy, well-exhibited by \autoref{thm:sheafabelian}, that we can prove (categorical) facts about sheaves by passing to stalks. Here is an example.
\begin{proposition} \label{prop:sheafquotient}
	Let $\varphi\colon\mc F\to\mc G$ be a morphism of presheaves on $X$ valued in an abelian category. Then $\coker\varphi\simeq\coker\varphi^{\op{sh}}$.
\end{proposition}
\begin{proof}
	We merely need to exhibit a candidate isomorphism and then check that it is an isomorphism on stalks. Here is our diagram.
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXG1jIEYiXSxbMSwwLCJcXG1jIEciXSxbMCwxLCJcXG1jIEZee1xcb3B7c2h9fSJdLFsxLDEsIlxcbWMgR157XFxvcHtzaH19Il0sWzMsMCwiXFxjb2tlclxcdmFycGhpIl0sWzMsMSwiXFxjb2tlclxcdmFycGhpXntcXG9we3NofX0iXSxbMiwxLCJcXGNva2VyXntcXG9we3ByZX19XFx2YXJwaGlee1xcb3B7c2h9fSJdLFsyLDAsIlxcY29rZXJee1xcb3B7cHJlfX1cXHZhcnBoaSJdLFswLDEsIlxcdmFycGhpIl0sWzAsMiwiXFxvcHtzaH0iLDJdLFsxLDMsIlxcb3B7c2h9Il0sWzIsMywiXFx2YXJwaGlee1xcb3B7c2h9fSJdLFszLDYsIlxccGknIl0sWzYsNSwiXFxvcHtzaH0iXSxbNyw0LCJcXG9we3NofSJdLFsxLDcsIlxccGkiXV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc F} & {\mc G} & {\coker^{\op{pre}}\varphi} & \coker\varphi \\
		{\mc F^{\op{sh}}} & {\mc G^{\op{sh}}} & {\coker^{\op{pre}}\varphi^{\op{sh}}} & {\coker\varphi^{\op{sh}}}
		\arrow["\varphi", from=1-1, to=1-2]
		\arrow["{\op{sh}}"', from=1-1, to=2-1]
		\arrow["{\op{sh}}", from=1-2, to=2-2]
		\arrow["{\varphi^{\op{sh}}}", from=2-1, to=2-2]
		\arrow["{\pi'}", from=2-2, to=2-3]
		\arrow["{\op{sh}}", from=2-3, to=2-4]
		\arrow["{\op{sh}}", from=1-3, to=1-4]
		\arrow["\pi", from=1-2, to=1-3]
	\end{tikzcd}\]
	Note that the composite $\mc F\to\mc G\to\mc G^{\op{sh}}\to\coker^{\op{pre}}\varphi\to\coker\varphi^{\op{sh}}$ is the zero map because it is the same as the same as
	\[\mc F\to\underbrace{\mc F^{\op{sh}}\to\mc G^{\op{sh}}\to\coker^{\op{pre}}\varphi^{\op{sh}}}_0\to\coker\varphi^{\op{sh}}.\]
	Thus, the universal property of $\coker\varphi$ induces a unique sheaf morphism $\psi\colon\coker^{\op{pre}}\varphi\to\coker\varphi^{\op{sh}}$ making
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXG1jIEYiXSxbMSwwLCJcXG1jIEciXSxbMCwxLCJcXG1jIEZee1xcb3B7c2h9fSJdLFsxLDEsIlxcbWMgR157XFxvcHtzaH19Il0sWzMsMCwiXFxjb2tlclxcdmFycGhpIl0sWzMsMSwiXFxjb2tlclxcdmFycGhpXntcXG9we3NofX0iXSxbMiwxLCJcXGNva2VyXntcXG9we3ByZX19XFx2YXJwaGlee1xcb3B7c2h9fSJdLFsyLDAsIlxcY29rZXJee1xcb3B7cHJlfX1cXHZhcnBoaSJdLFswLDEsIlxcdmFycGhpIl0sWzAsMiwiXFxvcHtzaH0iLDJdLFsxLDMsIlxcb3B7c2h9Il0sWzIsMywiXFx2YXJwaGlee1xcb3B7c2h9fSJdLFszLDYsIlxccGknIl0sWzYsNSwiXFxvcHtzaH0iXSxbNyw0LCJcXG9we3NofSJdLFsxLDcsIlxccGkiXSxbNyw2LCJcXHBzaSIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc F} & {\mc G} & {\coker^{\op{pre}}\varphi} & \coker\varphi \\
		{\mc F^{\op{sh}}} & {\mc G^{\op{sh}}} & {\coker^{\op{pre}}\varphi^{\op{sh}}} & {\coker\varphi^{\op{sh}}}
		\arrow["\varphi", from=1-1, to=1-2]
		\arrow["{\op{sh}}"', from=1-1, to=2-1]
		\arrow["{\op{sh}}", from=1-2, to=2-2]
		\arrow["{\varphi^{\op{sh}}}", from=2-1, to=2-2]
		\arrow["{\pi'}", from=2-2, to=2-3]
		\arrow["{\op{sh}}", from=2-3, to=2-4]
		\arrow["{\op{sh}}", from=1-3, to=1-4]
		\arrow["\pi", from=1-2, to=1-3]
		\arrow["\psi", dashed, from=1-3, to=2-3]
	\end{tikzcd}\]
	commute. Now, sheafification promises a unique map $\psi^{\op{sh}}$ making
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXG1jIEYiXSxbMSwwLCJcXG1jIEciXSxbMCwxLCJcXG1jIEZee1xcb3B7c2h9fSJdLFsxLDEsIlxcbWMgR157XFxvcHtzaH19Il0sWzMsMCwiXFxjb2tlclxcdmFycGhpIl0sWzMsMSwiXFxjb2tlclxcdmFycGhpXntcXG9we3NofX0iXSxbMiwxLCJcXGNva2VyXntcXG9we3ByZX19XFx2YXJwaGlee1xcb3B7c2h9fSJdLFsyLDAsIlxcY29rZXJee1xcb3B7cHJlfX1cXHZhcnBoaSJdLFswLDEsIlxcdmFycGhpIl0sWzAsMiwiXFxvcHtzaH0iLDJdLFsxLDMsIlxcb3B7c2h9Il0sWzIsMywiXFx2YXJwaGlee1xcb3B7c2h9fSJdLFszLDYsIlxccGknIl0sWzYsNSwiXFxvcHtzaH0iXSxbNyw0LCJcXG9we3NofSJdLFsxLDcsIlxccGkiXSxbNyw2LCJcXHBzaSJdLFs0LDUsIlxccHNpXntcXG9we3NofX0iLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc F} & {\mc G} & {\coker^{\op{pre}}\varphi} & \coker\varphi \\
		{\mc F^{\op{sh}}} & {\mc G^{\op{sh}}} & {\coker^{\op{pre}}\varphi^{\op{sh}}} & {\coker\varphi^{\op{sh}}}
		\arrow["\varphi", from=1-1, to=1-2]
		\arrow["{\op{sh}}"', from=1-1, to=2-1]
		\arrow["{\op{sh}}", from=1-2, to=2-2]
		\arrow["{\varphi^{\op{sh}}}", from=2-1, to=2-2]
		\arrow["{\pi'}", from=2-2, to=2-3]
		\arrow["{\op{sh}}", from=2-3, to=2-4]
		\arrow["{\op{sh}}", from=1-3, to=1-4]
		\arrow["\pi", from=1-2, to=1-3]
		\arrow["\psi", from=1-3, to=2-3]
		\arrow["{\psi^{\op{sh}}}", dashed, from=1-4, to=2-4]
	\end{tikzcd}\]
	commute. We claim that $\psi^{\op{sh}}$ is the desired isomorphism, for which it suffices by \autoref{prop:isoonstalks} to take stalks at $p\in X$ everywhere. This gives the following diagram.
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXG1jIEZfcCJdLFsxLDAsIlxcbWMgR19wIl0sWzAsMSwiXFxtYyBGXntcXG9we3NofX1fcCJdLFsxLDEsIlxcbWMgR157XFxvcHtzaH19X3AiXSxbMywwLCIoXFxjb2tlclxcdmFycGhpKV9wIl0sWzMsMSwiKFxcY29rZXJcXHZhcnBoaV57XFxvcHtzaH19KV9wIl0sWzIsMSwiKFxcY29rZXJee1xcb3B7cHJlfX1cXHZhcnBoaV57XFxvcHtzaH19KV9wIl0sWzIsMCwiKFxcY29rZXJee1xcb3B7cHJlfX1cXHZhcnBoaSlfcCJdLFswLDEsIlxcdmFycGhpX3AiXSxbMCwyLCJcXG9we3NofV9wIiwyXSxbMSwzLCJcXG9we3NofV9wIl0sWzIsMywiXFx2YXJwaGlee1xcb3B7c2h9fV9wIl0sWzMsNiwiXFxwaSdfcCJdLFs2LDUsIlxcb3B7c2h9X3AiXSxbNyw0LCJcXG9we3NofV9wIl0sWzEsNywiXFxwaV9wIl0sWzcsNiwiXFxwc2lfcCJdLFs0LDUsIlxccHNpXntcXG9we3NofX1fcCJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc F_p} & {\mc G_p} & {(\coker^{\op{pre}}\varphi)_p} & {(\coker\varphi)_p} \\
		{\mc F^{\op{sh}}_p} & {\mc G^{\op{sh}}_p} & {(\coker^{\op{pre}}\varphi^{\op{sh}})_p} & {(\coker\varphi^{\op{sh}})_p}
		\arrow["{\varphi_p}", from=1-1, to=1-2]
		\arrow["{\op{sh}_p}"', from=1-1, to=2-1]
		\arrow["{\op{sh}_p}", from=1-2, to=2-2]
		\arrow["{\varphi^{\op{sh}}_p}", from=2-1, to=2-2]
		\arrow["{\pi'_p}", from=2-2, to=2-3]
		\arrow["{\op{sh}_p}", from=2-3, to=2-4]
		\arrow["{\op{sh}_p}", from=1-3, to=1-4]
		\arrow["{\pi_p}", from=1-2, to=1-3]
		\arrow["{\psi_p}", from=1-3, to=2-3]
		\arrow["{\psi^{\op{sh}}_p}", from=1-4, to=2-4]
	\end{tikzcd}\]
	All the $\op{sh}_p$ morphisms are isomorphisms by \autoref{prop:sheafificationstalk}, so to show $\psi^{\op{sh}}_p$ is an isomorphism, it suffices to show that $\psi_p$ is an isomorphism. Now, by \autoref{lem:cokerstalk}, we see that $\im\varphi_p$ lives in the kernel of $\mc G_p\to(\coker^{\op{pre}}\varphi)_p$ and analogously for the bottom row. So the fact that the $\op{sh}_p$s are isomorphisms induces the diagram
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXG1jIEdfcC9cXGltXFx2YXJwaGlfcCJdLFswLDEsIlxcbWMgR157XFxvcHtzaH19X3AvXFxpbVxcdmFycGhpX3AiXSxbMSwxLCIoXFxjb2tlcl57XFxvcHtwcmV9fVxcdmFycGhpXntcXG9we3NofX0pX3AiXSxbMSwwLCIoXFxjb2tlcl57XFxvcHtwcmV9fVxcdmFycGhpKV9wIl0sWzAsMSwiXFxvcHtzaH1fcCJdLFsxLDIsIlxcb3ZlcmxpbmVcXHBpJ19wIl0sWzAsMywiXFxvdmVybGluZVxccGlfcCJdLFszLDIsIlxccHNpX3AiXV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc G_p/\im\varphi_p} & {(\coker^{\op{pre}}\varphi)_p} \\
		{\mc G^{\op{sh}}_p/\im\varphi_p} & {(\coker^{\op{pre}}\varphi^{\op{sh}})_p}
		\arrow["{\op{sh}_p}", from=1-1, to=2-1]
		\arrow["{\overline\pi'_p}", from=2-1, to=2-2]
		\arrow["{\overline\pi_p}", from=1-1, to=1-2]
		\arrow["{\psi_p}", from=1-2, to=2-2]
	\end{tikzcd}\]
	where $\op{sh}_p$ is still an isomorphism because it was an isomorphism before. However, \autoref{lem:cokerstalk} actually tells us that this map $\pi_p$ from $\mc G_p/\im\varphi_p=\coker\varphi_p$ to $(\coker^{\op{pre}}\varphi)_p$ is an isomorphism, and analogous holds for the bottom row, so it follows that $\psi_p$ is an isomorphism. This finishes.
\end{proof}
\begin{remark}
	Thinking about cokernels as quotients, \autoref{prop:sheafquotient} roughly says that $(\mc F/\mc G)^{\op{sh}}\simeq(\mc F^{\op{sh}}/\mc G^{\op{sh}})^{\op{sh}}$, where the ``embedding'' $\varphi\colon\mc F\to\mc G$ has been made implicit.
\end{remark}
As an example application, we define the sheaf image.
\begin{defi}[Sheaf image]
	Fix a morphism $\varphi\colon\mc F\to\mc G$ of presheaves on $X$. Then the \textit{sheaf image $\im\varphi$} of $\varphi$ is the sheafification of the presheaf image
	\[(\im^{\op{pre}}\varphi)(U)=\im\varphi_U.\]
\end{defi}
We go ahead and check that we have an image presheaf very quickly.
\begin{lemma}
	Fix a morphism $\varphi\colon\mc F\to\mc G$ of presheaves on $X$. Then $\im^{\op{pre}}\varphi$ is a presheaf on $X$.
\end{lemma}
\begin{proof}
	We quickly define restriction maps in the obvious way. Given a containment $U\subseteq V$, we define ${\op{res}_{U,V}}\colon\im\varphi_U\to\im\varphi_V$ by restricting ${\op{res}_{U,V}}\colon\mc G(U)\to\mc G(V)$. This is well-defined: if $g\in(\im^{\op{pre}}\varphi)(U)=\im\varphi_U$, then we write $g=\varphi_U(f)$ for some $f\in\mc F(U)$, so $g|_V=\varphi_U(f)|_V=\varphi_V(f|_V)\in\im\varphi_V$.

	Now, here are our presheaf checks.
	\begin{itemize}
		\item Identity: note $g\in\im\varphi_U$ has $g|_U=g$.
		\item Functoriality: given open sets $W\subseteq V\subseteq U$ and $g\in\im\varphi_U$, we have $g|_V|_W=g|_W$.
		\qedhere
	\end{itemize}
\end{proof}
\begin{remark}
	Note there is an obvious inclusion $\iota^{\op{pre}}_U\colon(\im^{\op{pre}}\varphi)(U)\to\mc G(U)$ by $g\mapsto g$. This assembles into a presheaf morphism: given open sets $V\subseteq U$ and $g\in(\im^{\op{pre}}\varphi)(U)$, we have
	\[\iota^{\op{pre}}_U(g)|_V=g|_V=\iota^{\op{pre}}_V(g|_V).\]
	Thus, when $\mc G$ is a sheaf, sheafification induces a unique sheaf morphism $\iota\colon\im\varphi\to\mc G$.
\end{remark}
% And now we get the following analogue to \autoref{prop:injonstalks}.
% \begin{proposition}
% 	Fix a morphism $\varphi\colon\mc F\to\mc G$ of sheaves on $X$. The following are equivalent.
% 	\begin{listalph}
% 		\item $\varphi_p$ is surjective for each $p$.
% 		\item $\im\varphi=\mc G$.
% 		\item $\varphi\colon\mc F\to\mc G$ is an epimorphism in the category of sheaves.
% 	\end{listalph}
% \end{proposition}
% \begin{proof}
% 	Omitted. The main point is to hit everything with the universal property and the fact that stalks don't change under sheafification.
% \end{proof}
% \begin{remark}
% 	One can use the above proposition to show that the last map of \autoref{eq:protoses} is an epimorphism.
% \end{remark}
% And now we fix the cokernel.
% \begin{definition}[Sheaf cokernel]
% 	Fix a morphism $\varphi\colon\mc F\to\mc G$ of sheaves on $X$. Then the \textit{sheaf cokernel $\coker\varphi$} of $\varphi$ is the sheafification of the presheaf cokernel
% 	\[(\coker^{\op{pre}}\varphi)(U)=\coker\varphi_U.\]
% \end{definition}
% And so we get some nice results by passing to stalks.
% \begin{proposition}
% 	The category of sheaves on $X$ valued in an abelian category $\mc C$ is abelian. Notably, we have to use the sheaf kernel and sheaf cokernel.
% \end{proposition}
% \begin{proof}
% 	Pass all the checks to the stalks, where we get what we want for free because $\mc C$ is abelian.
% \end{proof}
We quickly check that our sheaf image is the categorical image.
\begin{proposition}
	Fix a morphism $\varphi\colon\mc F\to\mc G$ of sheaves on $X$, and let $\pi\colon\mc G\to\coker\varphi$ be the canonical projection. Then
	\[\im\varphi\simeq\ker\pi.\]
	In other words, the canonical inclusion $\iota\colon\im\varphi\to\mc G$ is a kernel for $\pi$.
\end{proposition}
\begin{proof}
	% Let $\pi^{\op{pre}}\colon\mc G\to\coker^{\op{pre}}\varphi$ be the canonical projection. We also set $\iota^{\op{pre}}\colon\im^{\op{pre}}\varphi\to\mc G$ and $\iota\colon\im\varphi\to\mc G$ be the canonical inclusions for the image (pre)sheaf. In particular, we see that
	% \[\ker\pi^{\op{pre}}=\im\varphi_U=(\im^{\op{pre}}\varphi)(U)\]
	% for each open subset $U\subseteq X$, and the restriction maps for both of these presheaves are equal because they are both restrictions of the restriction maps for $\mc G$. So we have an equality of presheaves $\im^{\op{pre}}\varphi=\ker\pi^{\op{pre}}$.
	
	% We are now ready to show that $\iota\colon\im\varphi\to\mc G$ is a kernel for $\pi\colon\mc G\to\coker\varphi$, which we do by checking the universal property. Suppose we have a sheaf $\mc H$ and a sheaf morphism $\psi\colon\mc H\to\mc G$ such that $\pi\circ\psi=0$. Then we need a unique sheaf morphism $\overline\psi\colon\im\varphi\to\mc H$ making the diagram
	% % https://q.uiver.app/?q=WzAsNSxbMiwxLCJcXG1jIFoiXSxbMiwyLCJcXGNva2VyXFx2YXJwaGkiXSxbMSwyLCJcXG1jIEciXSxbMSwxLCJcXGltXFx2YXJwaGkiXSxbMCwwLCJcXG1jIEgiXSxbMiwxLCJcXHBpIl0sWzAsMV0sWzMsMiwiXFxpb3RhIl0sWzMsMF0sWzQsMiwiXFxwc2kiLDIseyJjdXJ2ZSI6Mn1dLFs0LDAsIiIsMix7ImN1cnZlIjotMn1dLFs0LDMsIlxcb3ZlcmxpbmVcXHBzaSIsMSx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	% \[\begin{tikzcd}
	% 	{\mc H} \\
	% 	& \im\varphi & {\mc Z} \\
	% 	& {\mc G} & \coker\varphi
	% 	\arrow["\pi", from=3-2, to=3-3]
	% 	\arrow[from=2-3, to=3-3]
	% 	\arrow["\iota", from=2-2, to=3-2]
	% 	\arrow[from=2-2, to=2-3]
	% 	\arrow["\psi"', curve={height=12pt}, from=1-1, to=3-2]
	% 	\arrow[curve={height=-12pt}, from=1-1, to=2-3]
	% 	\arrow["\overline\psi"{description}, dashed, from=1-1, to=2-2]
	% \end{tikzcd}\]
	% commute. We show the existence and uniqueness separately.
	% \begin{itemize}
	% 	\item Existence: the main claim is that actually $\pi^{\op{pre}}\circ\psi=0$. Indeed, note that, by sheafification, $0$ is the unique morphism making the diagram
	% 	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXG1jIEgiXSxbMSwwLCJcXG1jIEciXSxbMiwwLCJcXGNva2VyXntcXG9we3ByZX19XFx2YXJwaGkiXSxbMiwxLCJcXGNva2VyXFx2YXJwaGkiXSxbMSwyLCJcXHBpXntcXG9we3ByZX19Il0sWzIsMywiXFxvcHtzaH0iXSxbMCwxLCJcXHBzaSJdLFswLDMsIjAiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	% 	\[\begin{tikzcd}
	% 		{\mc H} & {\mc G} & {\coker^{\op{pre}}\varphi} \\
	% 		&& \coker\varphi
	% 		\arrow["{\pi^{\op{pre}}}", from=1-2, to=1-3]
	% 		\arrow["{\op{sh}}", from=1-3, to=2-3]
	% 		\arrow["\psi", from=1-1, to=1-2]
	% 		\arrow["0"', dashed, from=1-1, to=2-3]
	% 	\end{tikzcd}\]
	% 	commute, but 
	% \end{itemize}
	Pass to stalks.\todo{}
\end{proof}
Having defined an image sheaf, we may deal with exactness.
\begin{definition}[Exact sequence]
	Fix an abelian category $\mc C$. Then a sequence of maps
	\[A\stackrel f\to B\stackrel g\to C\]
	is \textit{exact at $B$} if and only if $\im f\simeq\ker g$. More precisely, this is asking for the image of $f$, thought of as $\iota\colon\im f\to B$, to be a kernel of $g$.
\end{definition}
And here is our main result.
\begin{proposition}
	A sequence
	\[\mc F\to\mc G\to\mc H\]
	of sheaves on $X$ is exact (at $\mc G$) if and only if it is exact at all stalks.
\end{proposition}
\begin{proof}
	Unsurprisingly, pass to stalks.\todo{}
\end{proof}

\subsection{The Direct Image Sheaf}
We now discuss how to build some new sheaves from old.
\begin{definition}[Direct image sheaf]
	Fix a continuous map $f\colon X\to Y$ of topological spaces. Given a (pre)sheaf $\mc F$ on $X$, we define the \textit{direct image (pre)sheaf} on $Y$ to be
	\[f_*\mc F(U)\coloneqq\mc F\left(f^{-1}(U)\right).\]
\end{definition}
Here are our checks on the direct image sheaf.
\begin{lemma}
	Fix a continuous map $f\colon X\to Y$.
	\begin{listalph}
		\item If $\mc F$ is a presheaf on $X$, then $f_*\mc F$ defines a presheaf on $Y$.
		\item If $\mc F$ is a sheaf on $X$, then $f_*\mc F$ defines a sheaf on $Y$.
	\end{listalph}
\end{lemma}
\begin{proof}
	We do these one at a time.
	\begin{listalph}
		\item We begin by defining our restriction maps. Well, if we have open sets $V\subseteq U\subseteq Y$, then $f^{-1}(V)\subseteq f^{-1}(U)\subseteq X$, so there is a restriction map
		\[{\op{res}_{f^{-1}(U),f^{-1}(V)}}\colon\mc F\left(f^{-1}(U)\right)\to\mc F\left(f^{-1}(V)\right).\]
		Thus, we set our restriction map $\op{res}_{U,V}\colon f_*\mc F(U)\to f_*\mc F(V)$ as ${\op{res}_{U,V}}\coloneqq\op{res}_{f^{-1}(U),f^{-1}(V)}$.

		Here are our presheaf checks.
		\begin{itemize}
			\item Identity: given $s\in f_*\mc F(U)=\mc F\left(f^{-1}(U)\right)$, note $s|_U=s|_{f^{-1}(U)}=s$.
			\item Functoriality: given open sets $W\subseteq V\subseteq U$ and some $s\in f_*\mc F(U)$, we compute
			\[f|_V|_W=f|_{f^{-1}(V)}|_{f^{-1}(W)}=f|_{f^{-1}(W)}=f|_W.\]
		\end{itemize}

		\item Suppose $\mc F$ is a sheaf. We now run our sheaf checks. Fix an open cover $\mc U$ for an open set $U\subseteq Y$. Then define $V\coloneqq f^{-1}(U)$ and $\mc V\coloneq\left\{f^{-1}(U_0):U_0\in\mc U\right\}$; notably, $\mc U$ being an open cover of $U\subseteq Y$ promises that $\mc V$ is an open cover for $V$.
		\begin{itemize}
			\item Identity: suppose $s_1,s_2\in f_*\mc F(U)=\mc F(V)$ has
			\[s_1|_{U_0}=s_2|_{U_0}\]
			for each $U_0\in\mc U$. Then, moving back to $X$, we have $s_1|_{V_0}=s_2|_{V_0}$ for each $V_0\in\mc V$, so it follows $s_1=s_2$ as sections in $\mc F(V)=f_*\mc F(U)$ by the identity axiom of $\mc F$.
			\item Gluability: suppose we have sections $s_{U_0}\in f_*\mc F(U_0)=\mc F\left(f^{-1}(U_0)\right)$ for each $U_0\in\mc U$ such that
			\[s_{U_0}|_{U_0\cap U_0'}=s_{U_0'}|_{U_0\cap U_0'}.\]
			Moving back to $X$, we have sections $t_{f^{-1}(U_0)}\coloneqq s_{U_0}$ such that
			\[t_{f^{-1}(U_0)}|_{f^{-1}(U_0)\cap f^{-1}(U_0')}=t_{f^{-1}(U_0')}|_{f^{-1}(U_0)\cap f^{-1}(U_0')}.\]
			As such, the gluability axiom of $\mc F$ applied to the open cover $\mc V$ promises $s\in\mc F(V)=f_*\mc F(U)$ such that $s|_{U_0}=s|_{f^{-1}(U_0)}=t_{f^{-1}(U_0)}=s_{U_0}$ for each $U_0\in\mc U$. This finishes.
			\qedhere
		\end{itemize}
	\end{listalph}
\end{proof}
In fact, we can build a functor out of this.
\begin{lemma} \label{lem:directimagefunctor}
	Fix a continuous map $f\colon X\to Y$. Given a morphism $\eta\colon\mc F\to\mc G$ of (pre)sheaves on $X$, there is an induced morphism $f_*\eta\colon f_*\mc F\to f_*\mc G$ of (pre)sheaves on $Y$. This makes $f_*\colon\mathrm{Sh}_X\to\mathrm{Sh}_Y$ into a functor.
\end{lemma}
\begin{proof}
	For open $U\subseteq Y$, define $f_*\eta_U\colon f_*\mc F(U)\to f_*\mc G(U)$ by $f_*\eta_U\coloneqq\eta_{f^{-1}(U)}$. Note this makes sense because
	\[\eta_{f^{-1}(U)}\colon\mc F\left(f^{-1}(U)\right)\to\mc G\left(f^{-1}(U)\right).\]
	Observe quickly that $f_*\eta$ is indeed a morphism of (pre)sheaves: given open sets $U'\subseteq U$ and some $s\in f_*\mc F(U)$, we have
	\[f_*\eta_U(s)|_{U'}=\eta_{f^{-1}(U)}(s)|_{f^{-1}(U')}=\eta_{f^{-1}(U')}(s|_{f^{-1}(U')})=f_*\eta_{U'}(s|_{U'}).\]
	We now run functoriality checks on the functor $f_*\colon\mathrm{Sh}_X\to\mathrm{Sh}_Y$.
	\begin{itemize}
		\item Identity: given a (pre)sheaf $\mc F$ on $X$, an open set $U\subseteq Y$, and a section $s\in f_*\mc F(U)$, we compute
		\[(f_*{\id_{\mc F}})_U(s)=({\id_{\mc F}})_{f^{-1}(U)}(s)=s=({\id_{f_*\mc F}})_U(s).\]
		\item Functoriality: given morphisms $\varphi\colon\mc F\to\mc G$ and $\psi\colon\mc G\to\mc H$ of (pre)sheaves on $X$, pick up an open set $U\subseteq Y$ and compute
		\[f_*(\psi\circ\varphi)_U=(\psi\circ\varphi)_{f^{-1}(U)}=\varphi_{f^{-1}(U)}\circ\psi_{f^{-1}(U)}=f_*\psi\circ f_*\varphi,\]
		which is what we wanted.
		\qedhere
	\end{itemize}
\end{proof}
\begin{remark} \label{rem:directimagefunctor}
	Given continuous maps $f\colon X\to Y$ and $g\colon Y\to Z$, we have
	\[(g\circ f)_*=g_*\circ f_*\]
	as functors $\mathrm{Sh}_X\to\mathrm{Sh}_Z$. To see this, we have two checks. Fix any $U\subseteq Z$ and morphism $\varphi\colon\mc F\to\mc G$ of sheaves on $X$.
	\begin{itemize}
		\item On objects, we see $(g\circ f)_*\mc F(U)=\mc F\left((g\circ f)^{-1}(U)\right)=\mc F\left(f^{-1}(g^{-1}(U))\right)=g_*(f_*\mc F)(U)$. Additionally, given $U'\subseteq U$, the restriction map for $(g\circ f)_*\mc F$ is ${\op{res}_{(g\circ f)^{-1}(U),(g\circ f)^{-1}(U')}}$ of $\mc F$. This matches the restriction map for $g_*f_*\mc F$.
		\item On morphisms, we see $(g\circ f)_*\varphi_U=\varphi_{\left((g\circ f)^{-1}(U)\right)}=\varphi_{f^{-1}(g^{-1}(U))}=g_*(f_*\varphi)_U$.
	\end{itemize}
\end{remark}
Philosophically, we see that the point of the direct image sheaf is to use a continuous map $f\colon X\to Y$ to take a (pre)sheaf on $X$ to a (pre)sheaf on $Y$. Under our stalk philosophy, we might want something like $(f_*\mc F)_{f(x)}=\mc F_x$, but this need not be the case; essentially, $(f_*\mc F)_{f(x)}$ is a colimit over all open sets containing $f(x)$, but we want to only consider the ones of the form $f^{-1}(U)$ where $x\in U$.

Nonetheless, there is a canonical map.
\begin{lemma}
	Fix a continuous map $f\colon X\to Y$ and a (pre)sheaf $\mc F$ on $X$. Then, at any $x\in X$, there is a canonical map
	\[(f_*\mc F)_{f(x)}\to\mc F_x.\]
\end{lemma}
\begin{proof}
	A germ in $(f_*\mc F)_{f(x)}$ looks like $[(U,s)]$ where $f(x)\in U$ and $s\in f_*\mc F(U)=\mc F\left(f^{-1}(U)\right)$. As such, we will callously define
	\[\arraycolsep=1.4pt\begin{array}{cccc}
		\varphi\colon& (f_*\mc F)_{f(x)} &\to& \mc F_x \\
		{} & [(U,s)] &\mapsto& \left[(f^{-1}(U),s)\right]
	\end{array}\]
	which we will only have to verify is well-defined. Well, suppose $[(s,U)]=[(s',U')]$ in $(f_*\mc F)_{f(x)}$ so that we can find an open $V\subseteq U\cap U'$ such that $s|_V=s'|_V$. Moving back to $\mc F$, this translates to
	\[s|_{f^{-1}(V)}=s'|_{f^{-1}(V)},\]
	so $\left[(f^{-1}(U),s)\right]=\left[(f^{-1}(U'),s')\right]$ follows.
\end{proof}

\subsection{The Inverse Image Sheaf}
Given a continuous map $f\colon X\to Y$, the direct image sheaf tells us how to take a sheaf on $X$ to a sheaf on $Y$. We can also define an inverse image sheaf.
\begin{definition}[Inverse image sheaf]
	Fix a continuous map $f\colon X\to Y$ of topological spaces. Given a (pre)sheaf $\mc G$ on $Y$, we define the \textit{inverse image sheaf} $f^{-1}\mc G$ on $X$ to be the sheafification of the presheaf
	\[f^{-1,\op{pre}}\mc G(U)\coloneqq\colimit_{V\supseteq f(U)}\mc G(V)=\big\{(V,s):s\in\mc F(V)\text{ and }V\supseteq f(U)\big\}/{\sim},\]
	where $(V,s)\sim(V',s')$ if and only if there is some $V''\subseteq V\cap V'$ containing $f(U)$ such that $s|_{V''}=s'|_{V''}$.
\end{definition}
As usual, here are the checks on the inverse image sheaf.
\begin{lemma}
	Fix a continuous map $f\colon X\to Y$.
	\begin{listalph}
		\item If $\mc G$ is a presheaf on $Y$, then $f^{-1,\op{pre}}\mc G$ defines a presheaf on $X$.
		\item If $\mc G$ is a sheaf on $Y$, then $f^{-1}\mc G$ defines a sheaf on $X$.
	\end{listalph}
\end{lemma}
\begin{proof}
	Note that (b) is immediate from (a) because $f^{-1}\mc G$ is the sheafification of $f^{-1,\op{pre}}\mc G$. So we will focus on showing (a).

	To begin, we define our restriction maps for open sets $U'\subseteq U$ as
	\[\arraycolsep=1.4pt\begin{array}{ccccc}
		\op{res}_{U,U'}\colon& f^{-1,\op{pre}}\mc G(U) &\to& f^{-1,\op{pre}}\mc G(U') \\
		& [(V,s)] &\mapsto& [(V,s)]
	\end{array}\]
	which at least makes sense because $V\supseteq f(U)\supseteq f(U')$. To see that this is well-defined, suppose $[(V,s)]=[(V',s')]$ as elements of $f^{-1,\op{pre}}\mc G(U)$. Then there is $V''\subseteq V\cap V'$ with $V''\supseteq f(U)$ such that $s|_{V''}=s'|_{V''}$. As such, $V''\supseteq f(U')$ as well while $s|_{V''}=s'|_{V''}$, so $[(V,s)]=[(V',s')]$ as elements of $f^{-1,\op{pre}}\mc G(U')$.

	We now check our presheaf conditions.
	\begin{itemize}
		\item Identity: observe that $[(V,s)]\in f^{-1,\op{pre}}\mc G(U)$ has $[(V,s)]|_U=[(V,s)]$.
		\item Functoriality: fix open sets $U''\subseteq U'\subseteq U$ and some $[(V,s)]\in f^{-1,\op{pre}}\mc G(U)$. Then
		\[[(V,s)]|_{U'}|_{U''}=[(V,s)]|_{U''}=[(V,s)]=[(V,s)]|_{U''},\]
		finishing.
		\qedhere
	\end{itemize}
\end{proof}
As before, we actually have a functor.
\begin{lemma}
	Fix a continuous map $f\colon X\to Y$. Given a morphism $\eta\colon\mc F\to\mc G$ of sheaves on $Y$, there is an induced morphism $f^{-1}\eta\colon f^{-1}\mc F\to f^{-1}\mc G$ of sheaves on $X$. This makes $f^{-1}\colon\mathrm{Sh}_Y\to\mathrm{Sh}_X$ into a functor.
\end{lemma}
\begin{proof}
	For open $U\subseteq X$, define
	\[\arraycolsep=1.4pt\begin{array}{cccc}
		f^{-1,\op{pre}}\eta_U\colon& f^{-1,\op{pre}}\mc F(U) &\to& f^{-1,\op{pre}}\mc G(U) \\
		& [(V,s)] &\mapsto& [(V,\eta_V(s))]
	\end{array}\]
	where $[(V,\eta_V(s))]\in f^{-1,\op{pre}}\mc G(U)$ again at least makes sense because $V\supseteq f(U)$. To see that this is well-defined, note $[(V,s)]=[(V',s')]$ as elements of $f^{-1,\op{pre}}\mc F(U)$ promises some $V''\subseteq V\cap V'$ containing $f(U)$ such that $s|_{V''}=s'|_{V''}$. Then
	\[\eta_V(s)|_{V''}=\eta_{V''}(s|_{V''})=\eta_{V''}(s'|_{V''})=\eta_{V'}(s')|_{V''},\]
	so we conclude $[(V,\eta_V(s))]=[(V',\eta_{V'}(s'))]$ as elements of $f^{-1,\op{pre}}\mc G(U)$.

	Additionally, we see that $f^{-1,\op{pre}}\eta$ assembles into a presheaf morphism: given open sets $U'\subseteq U$, note that the diagram
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJmXnstMSxcXG9we3ByZX19XFxtYyBGKFUpIl0sWzEsMCwiZl57LTEsXFxvcHtwcmV9fVxcbWMgRyhVKSJdLFswLDEsImZeey0xLFxcb3B7cHJlfX1cXG1jIEYoVScpIl0sWzEsMSwiZl57LTEsXFxvcHtwcmV9fVxcbWMgRyhVJykiXSxbMywwLCJbKFYscyldIl0sWzMsMSwiWyhWLHMpXSJdLFs0LDEsIlsoVixcXGV0YV9WKHMpKV0iXSxbNCwwLCJbKFYsXFxldGFfVihzKSldIl0sWzAsMiwiXFxvcHtyZXN9X3tVLFUnfSIsMl0sWzEsMywiXFxvcHtyZXN9X3tVLFUnfSJdLFswLDEsImZeey0xLFxcb3B7cHJlfX1cXGV0YV9VIl0sWzIsMywiZl57LTEsXFxvcHtwcmV9fVxcZXRhX3tVJ30iXSxbNCw1LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzUsNiwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs0LDcsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNyw2LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{f^{-1,\op{pre}}\mc F(U)} & {f^{-1,\op{pre}}\mc G(U)} && {[(V,s)]} & {[(V,\eta_V(s))]} \\
		{f^{-1,\op{pre}}\mc F(U')} & {f^{-1,\op{pre}}\mc G(U')} && {[(V,s)]} & {[(V,\eta_V(s))]}
		\arrow["{\op{res}_{U,U'}}"', from=1-1, to=2-1]
		\arrow["{\op{res}_{U,U'}}", from=1-2, to=2-2]
		\arrow["{f^{-1,\op{pre}}\eta_U}", from=1-1, to=1-2]
		\arrow["{f^{-1,\op{pre}}\eta_{U'}}", from=2-1, to=2-2]
		\arrow[maps to, from=1-4, to=2-4]
		\arrow[maps to, from=2-4, to=2-5]
		\arrow[maps to, from=1-4, to=1-5]
		\arrow[maps to, from=1-5, to=2-5]
	\end{tikzcd}\]
	commutes. We now run the functoriality checks on $f^{-1,\op{pre}}$.
	\begin{itemize}
		\item Identity: given a (pre)sheaf $\mc F$ on $X$, we see
		\[(f^{-1,\op{pre}}{\id_{\mc F}})_U\big([(V,s)]\big)=[(V,\id_{\mc F(V)}s)]=[(V,s)].\]
		\item Functoriality: given morphisms $\varphi\colon\mc F\to\mc G$ and $\psi\colon\mc G\to\mc H$ of (pre)sheaves on $X$, pick up an open set $U\subseteq X$ and some $[(V,s)]\in f^{-1,\op{pre}}\mc F(U)$. Then we see
		\[f^{-1,\op{pre}}(\psi\circ\varphi)\big([(V,s)]\big)=[(V,\psi_V\varphi_V(s))]=(f^{-1,\op{pre}}\psi\circ f^{-1,\op{pre}}\varphi)_U\big([(V,s)]\big).\]
	\end{itemize}
	To finish, we define $f^{-1}\eta\coloneqq\left(f^{-1,\op{pre}}\eta\right)^{\op{sh}}$ to be a map $f^{-1}\mc F\to f^{-1}\mc G$. Here are the functoriality checks.
	\begin{itemize}
		\item Identity: given a sheaf $\mc F$ on $X$, we see $f^{-1}{\id_{\mc F}}=(f^{-1,\op{pre}}\id_{\mc F})^{\op{sh}}=\id_{f^{-1,\op{pre}}\mc F}^{\op{sh}}=\id_{f^{-1}\mc F}$.
		\item Functoriality: given morphisms $\varphi\colon\mc F\to\mc G$ and $\psi\colon\mc G\to\mc H$ of sheaves on $X$, we see
		\[f^{-1}(\varphi\circ\psi)=\left(f^{-1,\op{pre}}(\varphi\circ\psi)\right)^{\op{sh}}=\left(f^{-1,\op{pre}}\varphi\circ f^{-1,\op{pre}}\psi\right)^{\op{sh}}=f^{-1}\varphi\circ f^{-1}\psi,\]
		finishing.
		\qedhere
	\end{itemize}
\end{proof}
\begin{remark}
	As in \autoref{rem:directimagefunctor}, continuous maps $f\colon X\to Y$ and $g\colon Y\to Z$ give $(f\circ g)^{-1}=g^{-1}\circ f^{-1}$ as functors $\mathrm{Sh}_Z\to\mathrm{Sh}_X$. Dealing with the implicit intermediate sheafification is not something that fits into a remark, so we will omit showing this. I suspect that we will not use this fact.
\end{remark}
Here is, approximately, the reason that we like the inverse image sheaf.
\begin{lemma} \label{lem:invimagestalk}
	Fix a continuous map $f\colon X\to Y$ and a sheaf $\mc G$ on $Y$. Then, for any $x\in X$, we have $\left(f^{-1}\mc G\right)_x\simeq\mc G_{f(x)}$.
\end{lemma}
\begin{proof}
	This is somewhat annoying because $\left(f^{-1}\mc G\right)_x$ involves equivalence classes of equivalence classes. In particular, an element looks like $[(U,[(V,s)])]$ where $[(V,s)]\in f^{-1}\mc G(U)$, meaning $s\in\mc F(V)$ while $V\supseteq f(U)$. Thus, we see $x\in U$ gives $f(x)\in V$, so we define our map as
	\[\arraycolsep=1.4pt\begin{array}{cccc}
		\varphi\colon& \left(f^{-1}\mc G\right)_x &\to& \mc G_{f(x)} \\
		& [(U,[(V,s)])] &\mapsto& [(V,s)]
	\end{array}\]
	which again makes sense because $s\in\mc F(V)$ and $f(x)\in V$. We have the following checks on $\varphi$.
	\begin{itemize}
		\item Well-defined: if $[(U,[(V,s)])]=[(U',[(V',s')])]$, then there is an open set $U''\subseteq U\cap U'$ containing $f(x)$ such that $[(V,s)]=[(V',s')]$ as elements of $f^{-1}\mc G(U'')$. Thus, we are promised $V''\subseteq V\cap V'$ containing $f(U'')$ and thus $f(x)$ such that $s|_{V''}=s'|_{V''}$. It follows $[(V,s)]=[(V',s')]$ as elements of $\mc G_{f(x)}$.
		\item Injective: suppose that $[(U,[(V,s)])]$ and $[(U',[(V',s')])]$ have $[(V,s)]=[(V',s')]$ as elements of $\mc G_{f(x)}$. This then promises some open $V''\subseteq V\cap V'$ containing $f(x)$ such that $s|_{V''}=s'|_{V''}$. As such, set
		\[U''\coloneqq f^{-1}(V'')\cap U\cap U'.\]
		We automatically see $U''\subseteq U\cap U'$ and $V''\supseteq f(U'')$, so we note $[(V,s)]=[(V',s')]$ as elements of $f^{-1}\mc G(U'')$. Thus,
		\[[(U,[(V,s)])]=[(U'',[(V,s)]|_{U''})]=[(U'',[(V,s)])]=[(U'',[(V',s')])]=[(U',[(V',s')])].\]
		\item Surjective: pick up some $[(V,s)]\in\mc G_{f(x)}$ we would like to hit with $\varphi$. Well, set $U\coloneqq f^{-1}(V)$ so that $V\supseteq f(U)$ and $x\in U$, meaning that $[(U,[(V,s)])]$ is a valid element of $\left(f^{-1}\mc G\right)_{x}$, which we can fairly directly check goes to $[(V,s)]$ under $\varphi$.
		\qedhere
	\end{itemize}
\end{proof}
% \begin{remark} 
% 	The stalks of the inverse image sheaf are just the stalks of the original sheaf. Namely, $\left(f^{-1}\mc G\right)_x=\mc G_{f(x)}$.
% \end{remark}

\subsection{A Sheaf Adjunction}
The two sheaves we just introduced are intertwined, as follows.
\begin{proposition}
	There is a natural bijection
	\[\op{Mor}_{\mathrm{Sh}_X}\left(f^{-1}\mc G,\mc F\right)\simeq\op{Mor}_{\mathrm{Sh}_Y}\left(\mc G,f_*\mc F\right).\]
	In other words, we have a pair of adjoint functors.
\end{proposition}
\begin{proof}
	We proceed with in steps. The main point is to define a unit and counit map.
	\begin{enumerate}
		\item We define the natural map $\varepsilon\colon f^{-1}f_*\mc F\to\mc F$ given a sheaf $\mc F$ on $X$. Well, for any open set $U\subseteq X$, we compute
		\[\left(f^{-1,\op{pre}}f_*\mc F\right)(U)=\colimit_{V\supseteq f(U)}f_*\mc F(V)=\colimit_{V\supseteq f(U)}\mc F\left(f^{-1}(V)\right).\]
		Notably, $V\supseteq f(U)$ implies $U_X\subseteq f^{-1}(U)$, so we can take some $[(V,s)]$ with $s\in\mc F\left(f^{-1}(V)\right)$ to $s|_U\in\mc F(U)$. As such, we define
		\[\arraycolsep=1.4pt\begin{array}{cccc}
			\varepsilon^{\op{pre}}_U\colon& \left(f^{-1,\op{pre}}f_*\mc F\right)(U) &\to& \mc F(U_X) \\
			& [(V,s)] &\mapsto& s|_{U}
		\end{array}\]
		for which we have the following checks.
		\begin{itemize}
			\item Well-defined: if $(V,s)\sim(V',s')$, then there is some open set $V''\subseteq V\cap V'$ with $V\supseteq f(U_X)$ such that $s|_{f^{-1}(V'')}=s'|_{f^{-1}(V'')}$. As such, we find
			\[s|_U=s|_{f^{-1}(V'')}|_U=s'|_{f^{-1}(V'')}|_U=s'|_U,\]
			so $\varepsilon^{\op{pre}}_U([(V,s)])$ is in fact well-defined.
			\item Natural: we verify that $\varepsilon^{\op{pre}}$ is a (pre)sheaf morphism. Fix open sets $U'\subseteq U\subseteq X$. Then we see that the diagram
			% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXGxlZnQoZl57LTEsXFxvcHtwcmV9fWZfKlxcbWMgRlxccmlnaHQpKFUpIl0sWzEsMCwiXFxtYyBGKFUpIl0sWzAsMSwiXFxsZWZ0KGZeey0xLFxcb3B7cHJlfX1mXypcXG1jIEZcXHJpZ2h0KShVJykiXSxbMSwxLCJcXG1jIEYoVScpIl0sWzMsMCwiWyhWLHMpXSJdLFs0LDAsInN8X1UiXSxbNCwxLCJzfF9WIl0sWzMsMSwiWyhWLHMpXSJdLFswLDEsIlxcdmFyZXBzaWxvbl9VXntcXG9we3ByZX19Il0sWzIsMywiXFx2YXJlcHNpbG9uX1Zee1xcb3B7cHJlfX0iXSxbMCwyLCJcXG9we3Jlc31fe1UsVSd9IiwyXSxbMSwzLCJcXG9we3Jlc31fe1UsVSd9Il0sWzQsNSwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs1LDYsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw3LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzcsNiwiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}
				{\left(f^{-1,\op{pre}}f_*\mc F\right)(U)} & {\mc F(U)} && {[(V,s)]} & {s|_U} \\
				{\left(f^{-1,\op{pre}}f_*\mc F\right)(U')} & {\mc F(U')} && {[(V,s)]} & {s|_V}
				\arrow["{\varepsilon_U^{\op{pre}}}", from=1-1, to=1-2]
				\arrow["{\varepsilon_{U'}^{\op{pre}}}", from=2-1, to=2-2]
				\arrow["{\op{res}_{U,U'}}"', from=1-1, to=2-1]
				\arrow["{\op{res}_{U,U'}}", from=1-2, to=2-2]
				\arrow[maps to, from=1-4, to=1-5]
				\arrow[maps to, from=1-5, to=2-5]
				\arrow[maps to, from=1-4, to=2-4]
				\arrow[maps to, from=2-4, to=2-5]
			\end{tikzcd}\]
			commutes.
			\item Natural: we verify that $\varepsilon^{\op{pre}}$ assembles into a natural transformation $f^{-1,\op{pre}}f_*\Rightarrow{\id_{\mathrm{PreSh}_X}}$. Indeed, given a presheaf morphism $\varphi\colon\mc F\to\mc F'$, observe that the left diagram
			% https://q.uiver.app/?q=WzAsOCxbMCwwLCJmXnstMSxcXG9we3ByZX19Zl8qXFxtYyBGIl0sWzEsMCwiZl57LTEsXFxvcHtwcmV9fWZfKlxcbWMgRiciXSxbMCwxLCJcXG1jIEYiXSxbMSwxLCJcXG1jIEYnIl0sWzMsMCwiWyhWLHMpXSJdLFs0LDAsIlsoVixcXHZhcnBoaV9WKHMpKV0iXSxbMywxLCJzfF9VIl0sWzQsMSwiXFx2YXJwaGlfVihzKXxfVSJdLFswLDEsImZeey0xLFxcb3B7cHJlfX1mXypcXHZhcnBoaSJdLFsyLDMsIlxcdmFycGhpIl0sWzAsMiwiXFx2YXJlcHNpbG9uXntcXG9we3ByZX19IiwyXSxbMSwzLCJcXHZhcmVwc2lsb25ee1xcb3B7cHJlfX0iXSxbNCw1LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzUsNywiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs0LDYsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNiw3LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}
				{f^{-1,\op{pre}}f_*\mc F} & {f^{-1,\op{pre}}f_*\mc F'} && {[(V,s)]} & {[(V,\varphi_V(s))]} \\
				{\mc F} & {\mc F'} && {s|_U} & {\varphi_V(s)|_U}
				\arrow["{f^{-1,\op{pre}}f_*\varphi}", from=1-1, to=1-2]
				\arrow["\varphi", from=2-1, to=2-2]
				\arrow["{\varepsilon^{\op{pre}}}"', from=1-1, to=2-1]
				\arrow["{\varepsilon^{\op{pre}}}", from=1-2, to=2-2]
				\arrow[maps to, from=1-4, to=1-5]
				\arrow[maps to, from=1-5, to=2-5]
				\arrow[maps to, from=1-4, to=2-4]
				\arrow[maps to, from=2-4, to=2-5]
			\end{tikzcd}\]
			commutes at each open set $U\subseteq X$, as shown in the right diagram.
		\end{itemize}
		The {universal property of sheafification tells us that there is a unique sheaf morphism $\varepsilon\colon f^{-1}f_*\mc F\to\mc F$ making the diagram
		% https://q.uiver.app/?q=WzAsMyxbMCwwLCJmXnstMSxcXG9we3ByZX19Zl8qXFxtYyBGIl0sWzEsMCwiZl57LTF9Zl8qXFxtYyBGIl0sWzEsMSwiXFxtYyBGIl0sWzAsMiwiXFx2YXJlcHNpbG9uXntcXG9we3ByZX19IiwyXSxbMCwxLCJcXG9we3NofSJdLFsxLDIsIlxcdmFyZXBzaWxvbiIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{f^{-1,\op{pre}}f_*\mc F} & {f^{-1}f_*\mc F} \\
			& {\mc F}
			\arrow["{\varepsilon^{\op{pre}}}"', from=1-1, to=2-2]
			\arrow["{\op{sh}}", from=1-1, to=1-2]
			\arrow["\varepsilon", dashed, from=1-2, to=2-2]
		\end{tikzcd}\]
		commute}. We quickly check the naturality of $\varepsilon\colon f^{-1}f_*\Rightarrow{\id_{\mathrm{Sh}_X}}$: given a sheaf morphism $\varphi\colon\mc F\to\mc F'$, the outer square of
		% https://q.uiver.app/?q=WzAsNixbMCwwLCJmXnstMSxcXG9we3ByZX19Zl8qXFxtYyBGIl0sWzAsMiwiXFxtYyBGIl0sWzMsMCwiZl57LTEsXFxvcHtwcmV9fWZfKlxcbWMgRiciXSxbMywyLCJcXG1jIEYnIl0sWzEsMSwiZl57LTF9Zl8qXFxtYyBGIl0sWzIsMSwiZl57LTF9Zl8qXFxtYyBGJyJdLFswLDEsIlxcdmFyZXBzaWxvbl57XFxvcHtwcmV9fV9cXG1jIEYiLDJdLFsyLDMsIlxcdmFyZXBzaWxvbl57XFxvcHtwcmV9fV97XFxtYyBGJ30iXSxbNCw1LCJmXnstMX1mXypcXHZhcnBoaSJdLFswLDIsImZeey0xLFxcb3B7cHJlfX1mXypcXHZhcnBoaSJdLFsxLDMsIlxcdmFycGhpIl0sWzAsNCwiXFxvcHtzaH0iLDFdLFsyLDUsIlxcb3B7c2h9IiwxXSxbNCwxLCJcXHZhcmVwc2lsb25fXFxtYyBGIiwxXSxbNSwzLCJcXHZhcmVwc2lsb25fe1xcbWMgRid9IiwxXV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{f^{-1,\op{pre}}f_*\mc F} &&& {f^{-1,\op{pre}}f_*\mc F'} \\
			& {f^{-1}f_*\mc F} & {f^{-1}f_*\mc F'} \\
			{\mc F} &&& {\mc F'}
			\arrow["{\varepsilon^{\op{pre}}_\mc F}"', from=1-1, to=3-1]
			\arrow["{\varepsilon^{\op{pre}}_{\mc F'}}", from=1-4, to=3-4]
			\arrow["{f^{-1}f_*\varphi}", from=2-2, to=2-3]
			\arrow["{f^{-1,\op{pre}}f_*\varphi}", from=1-1, to=1-4]
			\arrow["\varphi", from=3-1, to=3-4]
			\arrow["{\op{sh}}"{description}, from=1-1, to=2-2]
			\arrow["{\op{sh}}"{description}, from=1-4, to=2-3]
			\arrow["{\varepsilon_\mc F}"{description}, from=2-2, to=3-1]
			\arrow["{\varepsilon_{\mc F'}}"{description}, from=2-3, to=3-4]
		\end{tikzcd}\]
		commutes by our previous naturality check. Additionally, the triangles and top square commutes by sheafification. We want the bottom square to commute. Well, the path
		\[f^{-1,\op{pre}}f_*\mc F\to\mc F\to\mc F'\]
		by sheafification induces a unique morphism $f^{-1}f_*\mc F\to\mc F'$ making the diagram commute. Comparing our two candidates, we see that $\varphi\circ\varepsilon_{\mc F}=\varepsilon_{\mc F'}\circ f^{-1}f_*\varphi$. This finishes our check.

		\item We define the natural map $\eta\colon\mc G\to f_*f^{-1}\mc G$ given a sheaf $\mc G$ on $Y$. Well, for any open set $U\subseteq Y$, we compute
		\[\left(f_*f^{-1,\op{pre}}\mc G\right)(U)=f^{-1,\op{pre}}\mc G\left(f^{-1}(U)\right)=\colimit_{V\supseteq f(f^{-1}(U))}\mc G(V).\]
		As such, there is a natural map
		\[\arraycolsep=1.4pt\begin{array}{cccc}
			\eta_U^{\op{pre}}\colon& \mc G(U) &\to& \left(f_*f^{-1,\op{pre}}\mc G\right)(U) \\
			& s &\mapsto& [(U,s)]
		\end{array}\]
		which makes sense because $U\supseteq f\left(f^{-1}(U)\right)$. We have the following naturality checks on $\eta_U^{\op{pre}}$.
		\begin{itemize}
			\item Natural: we verify that $\varepsilon^{\op{pre}}$ assembles into a (pre)sheaf morphism. Indeed, given open sets $U'\subseteq U\subseteq Y$, the diagram
			% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXG1jIEcoVSkiXSxbMCwxLCJcXG1jIEcoVScpIl0sWzEsMCwiZl8qZl57LTEsXFxvcHtwcmV9fVxcbWMgRyhVKSJdLFsxLDEsImZfKmZeey0xLFxcb3B7cHJlfX1cXG1jIEcoVScpIl0sWzMsMCwicyJdLFs0LDAsIlsocyxVKV0iXSxbNCwxLCJbKHMsVSldIl0sWzMsMSwic3xfe1UnfSJdLFswLDIsIlxcZXRhXntcXG9we3ByZX19X1UiXSxbMSwzLCJcXGV0YV97VSd9XntcXG9we3ByZX19Il0sWzAsMSwiXFxvcHtyZXN9X3tVLFUnfSIsMl0sWzIsMywiXFxvcHtyZXN9X3tVLFUnfSJdLFs0LDUsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNSw2LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzQsNywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs3LDYsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}
				{\mc G(U)} & {f_*f^{-1,\op{pre}}\mc G(U)} && s & {[(U,s)]} \\
				{\mc G(U')} & {f_*f^{-1,\op{pre}}\mc G(U')} && {s|_{U'}} & {[(U,s)]}
				\arrow["{\eta^{\op{pre}}_U}", from=1-1, to=1-2]
				\arrow["{\eta_{U'}^{\op{pre}}}", from=2-1, to=2-2]
				\arrow["{\op{res}_{U,U'}}"', from=1-1, to=2-1]
				\arrow["{\op{res}_{U,U'}}", from=1-2, to=2-2]
				\arrow[maps to, from=1-4, to=1-5]
				\arrow[maps to, from=1-5, to=2-5]
				\arrow[maps to, from=1-4, to=2-4]
				\arrow[maps to, from=2-4, to=2-5]
			\end{tikzcd}\]
			commutes because $s|_{U'}|_{U'}=s|_{U'}$ verifies $[(U',s|_{U'})]=[(U,s)]$.
			\item Natural: we verify that $\varepsilon^{\op{pre}}$ assembles into a natural transformation ${\id_{\mathrm{PreSh}_Y}}\Rightarrow f_*f^{-1}$. Indeed, given a presheaf morphism $\varphi\colon\mc G\to\mc G'$, observe the left diagram
			% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXG1jIEciXSxbMSwwLCJcXG1jIEcnIl0sWzAsMSwiZl8qZl57LTEsXFxvcHtwcmV9fVxcbWMgRyJdLFsxLDEsImZfKmZeey0xLFxcb3B7cHJlfX1cXG1jIEcnIl0sWzMsMCwicyJdLFs0LDAsIlxcdmFycGhpX1UocykiXSxbMywxLCJbKFUscyldIl0sWzQsMSwiWyhVLFxcdmFycGhpX1UocykpXSJdLFswLDIsIlxcZXRhX3tcXG1jIEcnfSIsMl0sWzEsMywiXFxldGFfe1xcbWMgRyd9Il0sWzAsMSwiXFx2YXJwaGkiXSxbMiwzLCJmXypmXnstMSxcXG9we3ByZX19XFx2YXJwaGkiXSxbNCw1LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzQsNiwiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs2LDcsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNSw3LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}
				{\mc G} & {\mc G'} && s & {\varphi_U(s)} \\
				{f_*f^{-1,\op{pre}}\mc G} & {f_*f^{-1,\op{pre}}\mc G'} && {[(U,s)]} & {[(U,\varphi_U(s))]}
				\arrow["{\eta_{\mc G}^{\op{pre}}}"', from=1-1, to=2-1]
				\arrow["{\eta_{\mc G'}^{\op{pre}}}", from=1-2, to=2-2]
				\arrow["\varphi", from=1-1, to=1-2]
				\arrow["{f_*f^{-1,\op{pre}}\varphi}", from=2-1, to=2-2]
				\arrow[maps to, from=1-4, to=1-5]
				\arrow[maps to, from=1-4, to=2-4]
				\arrow[maps to, from=2-4, to=2-5]
				\arrow[maps to, from=1-5, to=2-5]
			\end{tikzcd}\]
			commutes at each open set $U\subseteq X$ as shown in the right diagram.
		\end{itemize}
		{Denoting our sheafification map by $\op{sh}\colon f^{-1,\op{pre}}\mc G\to\mc G$, we define $\eta\coloneqq{f_*\op{sh}}\circ\eta^{\op{pre}}$.} We automatically know that $\eta$ is always a sheaf morphism, but to see that a natural transformation $\eta\colon{\id_{\mathrm{Sh}_Y}}\Rightarrow f_*f^{-1}$, observe that a morphism $\varphi\colon\mc G\to\mc G'$ makes the diagram
		% https://q.uiver.app/?q=WzAsNixbMCwwLCJcXG1jIEciXSxbMSwwLCJcXG1jIEcnIl0sWzAsMSwiZl8qZl57LTEsXFxvcHtwcmV9fVxcbWMgRyJdLFsxLDEsImZfKmZeey0xLFxcb3B7cHJlfX1cXG1jIEcnIl0sWzAsMiwiZl8qZl57LTF9XFxtYyBHIl0sWzEsMiwiZl8qZl57LTF9XFxtYyBHJyJdLFswLDIsIlxcZXRhX3tcXG1jIEcnfSIsMl0sWzEsMywiXFxldGFfe1xcbWMgRyd9Il0sWzAsMSwiXFx2YXJwaGkiXSxbMiwzLCJmXypmXnstMSxcXG9we3ByZX19XFx2YXJwaGkiXSxbMiw0LCJmXypcXG9we3NofSIsMl0sWzMsNSwiZl8qXFxvcHtzaH0iXSxbNCw1LCJmXypmXnstMX1cXHZhcnBoaSJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\mc G} & {\mc G'} \\
			{f_*f^{-1,\op{pre}}\mc G} & {f_*f^{-1,\op{pre}}\mc G'} \\
			{f_*f^{-1}\mc G} & {f_*f^{-1}\mc G'}
			\arrow["{\eta_{\mc G'}}"', from=1-1, to=2-1]
			\arrow["{\eta_{\mc G'}}", from=1-2, to=2-2]
			\arrow["\varphi", from=1-1, to=1-2]
			\arrow["{f_*f^{-1,\op{pre}}\varphi}", from=2-1, to=2-2]
			\arrow["{f_*\op{sh}}"', from=2-1, to=3-1]
			\arrow["{f_*\op{sh}}", from=2-2, to=3-2]
			\arrow["{f_*f^{-1}\varphi}", from=3-1, to=3-2]
		\end{tikzcd}\]
		commute: the top square commutes as shown above, and the bottom square by applying $f_*$ to the usual sheafification square. As such, the outer rectangle commutes, finishing.

		\item We verify the triangle identities.
		\begin{itemize}
			\item Given a sheaf $\mc F$ on $X$, we verify that the diagram
			% https://q.uiver.app/?q=WzAsMyxbMCwwLCJmXypcXG1jIEYiXSxbMSwxLCJmXypcXG1jIEYiXSxbMSwwLCJmXypmXnstMX1mXypcXG1jIEYiXSxbMCwyLCJcXGV0YV97Zl8qXFxtYyBGfSJdLFsyLDEsImZfKlxcdmFyZXBzaWxvbl97XFxtYyBGfSJdLFswLDEsIiIsMix7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}
				{f_*\mc F} & {f_*f^{-1}f_*\mc F} \\
				& {f_*\mc F}
				\arrow["{\eta_{f_*\mc F}}", from=1-1, to=1-2]
				\arrow["{f_*\varepsilon_{\mc F}}", from=1-2, to=2-2]
				\arrow[Rightarrow, no head, from=1-1, to=2-2]
			\end{tikzcd}\]
			commutes. Indeed, for any open set $U\subseteq Y$ and $s\in\mc F\left(f^{-1}(U)\right)$, we see
			% https://q.uiver.app/?q=WzAsNixbMCwwLCJmXypcXG1jIEYoVSkiXSxbMSwxLCJmXypcXG1jIEYoVSkiXSxbMSwwLCJmXypmXnstMSxcXG9we3ByZX19Zl8qXFxtYyBGKFUpIl0sWzIsMCwicyJdLFszLDAsIlsoVSxzKV0iXSxbMywxLCJzfF9VPXN8X3tmXnstMX0oVSl9PXMiXSxbMCwyLCJcXGV0YV97Zl8qXFxtYyBGfV57XFxvcHtwcmV9fSJdLFsyLDEsImZfKlxcdmFyZXBzaWxvbl97XFxtYyBGfV57XFxvcHtwcmV9fSJdLFswLDEsIiIsMix7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzMsNCwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs0LDUsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbMyw1LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}
				{f_*\mc F(U)} & {f_*f^{-1,\op{pre}}f_*\mc F(U)} & s & {[(U,s)]} \\
				& {f_*\mc F(U)} && {s|_U=s|_{f^{-1}(U)}=s}
				\arrow["{\eta_{f_*\mc F}^{\op{pre}}(U)}", from=1-1, to=1-2]
				\arrow["{f_*\varepsilon_{\mc F}^{\op{pre}}(U)}", from=1-2, to=2-2]
				\arrow[Rightarrow, no head, from=1-1, to=2-2]
				\arrow[maps to, from=1-3, to=1-4]
				\arrow[maps to, from=1-4, to=2-4]
				\arrow[maps to, from=1-3, to=2-4]
			\end{tikzcd}\]
			commutes. As such, the outer triangle of
			% https://q.uiver.app/?q=WzAsNCxbMCwwLCJmXypcXG1jIEYiXSxbMSwxLCJmXypmXnstMSxcXG9we3ByZX19Zl8qXFxtYyBGIl0sWzAsMiwiZl8qXFxtYyBGIl0sWzIsMSwiZl8qZl57LTF9Zl8qXFxtYyBGIl0sWzAsMiwiIiwyLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMywyLCJmXypcXHZhcmVwc2lsb25fe1xcbWMgRn0iXSxbMCwzLCJcXGV0YV97Zl8qXFxtYyBGfSJdLFswLDEsIlxcZXRhX3tmXypcXG1jIEZ9XntcXG9we3ByZX19IiwyXSxbMSwyLCJmXypcXHZhcmVwc2lsb25fXFxtYyBGXntcXG9we3ByZX19IiwyXSxbMSwzLCJcXG9we3NofSIsMV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}[column sep=2.25em]
				{f_*\mc F} \\
				& {f_*f^{-1,\op{pre}}f_*\mc F} & {f_*f^{-1}f_*\mc F} \\
				{f_*\mc F}
				\arrow[Rightarrow, no head, from=1-1, to=3-1]
				\arrow["{f_*\varepsilon_{\mc F}}", from=2-3, to=3-1]
				\arrow["{\eta_{f_*\mc F}}", from=1-1, to=2-3]
				\arrow["{\eta_{f_*\mc F}^{\op{pre}}}"', from=1-1, to=2-2]
				\arrow["{f_*\varepsilon_\mc F^{\op{pre}}}"', from=2-2, to=3-1]
				\arrow["{\op{sh}}"{description}, from=2-2, to=2-3]
			\end{tikzcd}\]
			commutes, making the inner triangle commute by definition of those morphisms.

			\item Give a sheaf $\mc G$ on $Y$, we verify that the diagram
			% https://q.uiver.app/?q=WzAsMyxbMCwwLCJmXnstMX1cXG1jIEciXSxbMSwwLCJmXnstMX1mXypmXnstMX1cXG1jIEciXSxbMSwxLCJmXnstMX1cXG1jIEciXSxbMCwxLCJmXnstMX1cXGV0YV97XFxtYyBHfSJdLFsxLDIsIlxcdmFyZXBzaWxvbl97Zl57LTF9XFxtYyBHfSJdLFswLDIsIiIsMix7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}
				{f^{-1}\mc G} & {f^{-1}f_*f^{-1}\mc G} \\
				& {f^{-1}\mc G}
				\arrow["{f^{-1}\eta_{\mc G}}", from=1-1, to=1-2]
				\arrow["{\varepsilon_{f^{-1}\mc G}}", from=1-2, to=2-2]
				\arrow[Rightarrow, no head, from=1-1, to=2-2]
			\end{tikzcd}\]
			commutes. Indeed, for any open set $U\subseteq X$ and $[(V,s)]\in f^{-1}\mc G(U)$, we see
			% https://q.uiver.app/?q=WzAsNixbMCwwLCJmXnstMSxcXG9we3ByZX19XFxtYyBHKFUpIl0sWzEsMCwiZl57LTEsXFxvcHtwcmV9fWZfKmZeey0xLFxcb3B7cHJlfX1cXG1jIEcoVSkiXSxbMSwxLCJmXnstMSxcXG9we3ByZX19XFxtYyBHKFUpIl0sWzIsMCwiWyhWLHMpXSJdLFszLDAsIlsoVixcXGV0YV9cXG1jIEcocykpXT1bKFYsWyhWLHMpXSldIl0sWzMsMSwiWyhWLHMpXXxfVT1bKFYscyldIl0sWzAsMSwiZl57LTEsXFxvcHtwcmV9fVxcZXRhX3tmXnstMSxcXG9we3ByZX19XFxtYyBHfV57XFxvcHtwcmV9fShVKSJdLFsxLDIsIlxcdmFyZXBzaWxvbl97Zl57LTEsXFxvcHtwcmV9fVxcbWMgR31ee1xcb3B7cHJlfX0oVSkiXSxbMCwyLCIiLDIseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFszLDQsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw1LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzMsNSwiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}
				{f^{-1,\op{pre}}\mc G(U)} & {f^{-1,\op{pre}}f_*f^{-1,\op{pre}}\mc G(U)} & {[(V,s)]} & {[(V,\eta_\mc G(s))]=[(V,[(V,s)])]} \\
				& {f^{-1,\op{pre}}\mc G(U)} && {[(V,s)]|_U=[(V,s)]}
				\arrow["{f^{-1,\op{pre}}\eta_{f^{-1}\mc G}^{\op{pre}}(U)}", from=1-1, to=1-2]
				\arrow["{\varepsilon_{f^{-1,\op{pre}}\mc G}^{\op{pre}}(U)}", from=1-2, to=2-2]
				\arrow[Rightarrow, no head, from=1-1, to=2-2]
				\arrow[maps to, from=1-3, to=1-4]
				\arrow[maps to, from=1-4, to=2-4]
				\arrow[maps to, from=1-3, to=2-4]
			\end{tikzcd}\]
			commutes; here we have extended $\eta^{\op{pre}}$ and $\varepsilon^{\op{pre}}$ in the natural way to all presheaves. Thus, we claim that the diagram
			% https://q.uiver.app/?q=WzAsOCxbMCwwLCJmXnstMX1cXG1jIEciXSxbMSwwLCJmXnstMX1mXypmXnstMSxcXG9we3ByZX19XFxtYyBHIl0sWzIsMCwiZl57LTF9Zl8qZl57LTF9XFxtYyBHIl0sWzAsMSwiZl57LTEsXFxvcHtwcmV9fVxcbWMgRyJdLFsxLDEsImZeey0xLFxcb3B7cHJlfX1mXypmXnstMSxcXG9we3ByZX19XFxtYyBHIl0sWzIsMSwiZl57LTEsXFxvcHtwcmV9fWZfKmZeey0xfVxcbWMgRyJdLFsyLDIsImZeey0xfVxcbWMgRyJdLFsxLDIsImZeey0xLFxcb3B7cHJlfX1cXG1jIEciXSxbMyw0LCJmXnstMSxcXG9we3ByZX19XFxldGFee1xcb3B7cHJlfX1fXFxtYyBHIl0sWzQsNywiXFx2YXJlcHNpbG9uXntcXG9we3ByZX19X3tmXnstMSxcXG9we3ByZX19fVxcbWMgRyJdLFszLDcsIiIsMCx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzMsMCwiXFxvcHtzaH0iXSxbNCwxLCJcXG9we3NofSJdLFs1LDIsIlxcb3B7c2h9Il0sWzAsMSwiZl57LTF9XFxldGFee1xcb3B7cHJlfX1fXFxtYyBHIl0sWzEsMiwiZl57LTF9Zl8qXFxvcHtzaH0iXSxbNCw1LCJmXnstMSxcXG9we3ByZX19Zl8qXFxvcHtzaH0iXSxbNSw2LCJcXHZhcmVwc2lsb25ee1xcb3B7cHJlfX1fe2Zeey0xfVxcbWMgR30iXSxbNyw2LCJcXG9we3NofSJdLFswLDIsImZeey0xfVxcZXRhX3tcXG1jIEd9IiwwLHsib2Zmc2V0IjotMywiY3VydmUiOi0yfV0sWzIsNiwiXFx2YXJlcHNpbG9uX3tmXnstMX1cXG1jIEd9IiwwLHsib2Zmc2V0IjotMywiY3VydmUiOi0yfV0sWzExLDEyLCIoMSkiLDMseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9LCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMTIsMTMsIigyKSIsMyx7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH0sInN0eWxlIjp7ImJvZHkiOnsibmFtZSI6Im5vbmUifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs5LDE3LCIoMykiLDMseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9LCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}[sep=large]
				{f^{-1}\mc G} & {f^{-1}f_*f^{-1,\op{pre}}\mc G} & {f^{-1}f_*f^{-1}\mc G} \\
				{f^{-1,\op{pre}}\mc G} & {f^{-1,\op{pre}}f_*f^{-1,\op{pre}}\mc G} & {f^{-1,\op{pre}}f_*f^{-1}\mc G} \\
				& {f^{-1,\op{pre}}\mc G} & {f^{-1}\mc G}
				\arrow["{f^{-1,\op{pre}}\eta^{\op{pre}}_\mc G}", from=2-1, to=2-2]
				\arrow[""{name=0, anchor=center, inner sep=0}, "{\varepsilon^{\op{pre}}_{f^{-1,\op{pre}}}\mc G}", from=2-2, to=3-2]
				\arrow[Rightarrow, no head, from=2-1, to=3-2]
				\arrow[""{name=1, anchor=center, inner sep=0}, "{\op{sh}}", from=2-1, to=1-1]
				\arrow[""{name=2, anchor=center, inner sep=0}, "{\op{sh}}", from=2-2, to=1-2]
				\arrow[""{name=3, anchor=center, inner sep=0}, "{\op{sh}}", from=2-3, to=1-3]
				\arrow["{f^{-1}\eta^{\op{pre}}_\mc G}", from=1-1, to=1-2]
				\arrow["{f^{-1}f_*\op{sh}}", from=1-2, to=1-3]
				\arrow["{f^{-1,\op{pre}}f_*\op{sh}}", from=2-2, to=2-3]
				\arrow[""{name=4, anchor=center, inner sep=0}, "{\varepsilon^{\op{pre}}_{f^{-1}\mc G}}", from=2-3, to=3-3]
				\arrow["{\op{sh}}", from=3-2, to=3-3]
				\arrow["{f^{-1}\eta_{\mc G}}", shift left=3, curve={height=-12pt}, from=1-1, to=1-3, color={rgb,255:red,214;green,92;blue,92}]
				\arrow["{\varepsilon_{f^{-1}\mc G}}", shift left=6, curve={height=-20pt}, from=1-3, to=3-3, color={rgb,255:red,214;green,92;blue,92}]
				\arrow["{(1)}"{marking}, draw=none, from=1, to=2]
				\arrow["{(2)}"{marking}, draw=none, from=2, to=3]
				\arrow["{(3)}"{marking}, draw=none, from=0, to=4]
			\end{tikzcd}\]
			commutes. The triangle commutes as checked above; $(1)$ and $(2)$ both commute because $f^{-1}$ is sheafification applied to the functor $f^{-1,\op{pre}}$. Lastly, $(3)$ is a naturality square for $\varepsilon^{\op{pre}}$ applied to $\op{sh}\colon f^{-1,\op{pre}}\mc G\to\mc G$. Collapsing the above diagram, we conclude that
			% https://q.uiver.app/?q=WzAsNCxbMCwwLCJmXnstMSxcXG9we3ByZX19XFxtYyBHIl0sWzEsMCwiZl57LTEsXFxvcHtwcmV9fVxcbWMgRyJdLFswLDEsImZeey0xfVxcbWMgRyJdLFsxLDEsImZeey0xfVxcbWMgRyJdLFswLDEsIiIsMCx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzAsMiwiXFxvcHtzaH0iLDJdLFsxLDMsIlxcb3B7c2h9Il0sWzIsMywiXFx2YXJlcHNpbG9uX3tmXnstMX1cXG1jIEd9XFxjaXJjIGZeey0xfVxcZXRhX1xcbWMgRyIsMl1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}
				{f^{-1,\op{pre}}\mc G} & {f^{-1,\op{pre}}\mc G} \\
				{f^{-1}\mc G} & {f^{-1}\mc G}
				\arrow[Rightarrow, no head, from=1-1, to=1-2]
				\arrow["{\op{sh}}"', from=1-1, to=2-1]
				\arrow["{\op{sh}}", from=1-2, to=2-2]
				\arrow["{\varepsilon_{f^{-1}\mc G}\circ f^{-1}\eta_\mc G}"', from=2-1, to=2-2]
			\end{tikzcd}\]
			commutes, but because sheafification is a functor, we are forced to have $\varepsilon_{f^{-1}\mc G}\circ f^{-1}\eta_\mc G=\id_{f^{-1}\mc G}$, which finishes this check.
		\end{itemize}

		\item We now exhibit our natural bijection as follows; fix sheaves $\mc F$ on $X$ and $\mc G$ on $Y$.
		\[\arraycolsep=1.4pt\begin{array}{ccc}
			\op{Mor}_{\mathrm{Sh}_X}(f^{-1}\mc G,\mc F) &\simeq& \op{Mor}_{\mathrm{Sh}_Y}(\mc G,f_*\mc F) \\
			\varphi &\mapsto& f_*\varphi\circ\eta_{\mc G} \\
			\varepsilon_\mc F\circ f^{-1}\psi &\mapsfrom& \psi
		\end{array}\]
		We have the following checks.
		\begin{itemize}
			\item Bijective: starting with $\varphi\colon f^{-1}\mc G\to\mc F$, we get mapped to
			\begin{align*}
				\varepsilon_\mc F\circ f^{-1}\left(f_*\varphi\circ\eta_\mc G\right) &= \varepsilon_\mc F\circ f^{-1}f_*\varphi\circ f^{-1}\eta_\mc G \\
				&\stackrel*= \varphi\circ\varepsilon_{f^{-1}\mc G}\circ f^{-1}f_*\varphi\circ f^{-1}\eta_\mc G \\
				&= \varphi,
			\end{align*}
			where in $\stackrel*=$ we used the naturality of $\varepsilon$, and the last equality used the triangle equalities. Similarly, starting with $\psi\colon\mc G\to f_*\mc F$, we get mapped to
			\begin{align*}
				f_*\left(\varepsilon_\mc F\circ f^{-1}\psi\right)\circ\eta_\mc G &= f_*\varepsilon_\mc F\circ f_*f^{-1}\psi\circ\eta_\mc G \\
				&\stackrel*= f_*\varepsilon_\mc F\circ\eta_{f_*\mc F}\circ\psi \\
				&= \psi,
			\end{align*}
			where in $\stackrel*=$ we used the naturality of $\eta$, and the last equality used the triangle equalities.
			\item Natural: given a morphism $\alpha\colon\mc F\to\mc F'$ of sheaves on $X$, the square
			% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXG9we0hvbX1fe1xcbWF0aHJte1NofV9YfShmXnstMX1cXG1jIEcsXFxtYyBGKSJdLFsxLDAsIlxcb3B7SG9tfV97XFxtYXRocm17U2h9X1l9KFxcbWMgRyxmXypcXG1jIEYpIl0sWzAsMSwiXFxvcHtIb219X3tcXG1hdGhybXtTaH1fWH0oZl57LTF9XFxtYyBHLFxcbWMgRicpIl0sWzEsMSwiXFxvcHtIb219X3tcXG1hdGhybXtTaH1fWX0oXFxtYyBHLGZfKlxcbWMgRikiXSxbMiwwLCJcXHZhcnBoaSJdLFszLDAsImZfKlxcdmFycGhpXFxjaXJjXFxldGFfXFxtYyBHIl0sWzIsMSwiXFxhbHBoYVxcY2lyY1xcdmFycGhpIl0sWzMsMSwiZl8qKFxcYWxwaGFcXGNpcmNcXHZhcnBoaSlcXGNpcmNcXGV0YV9cXG1jIEciXSxbMCwxLCJcXHNpbWVxIiwzLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzAsMiwiXFxhbHBoYVxcY2lyYy0iLDJdLFsxLDMsImZfKlxcYWxwaGFcXGNpcmMtIl0sWzIsMywiXFxzaW1lcSIsMyx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6Im5vbmUifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs0LDYsIiIsMyx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNiw3LCIiLDMseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzQsNSwiIiwzLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs1LDcsIiIsMyx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}
				{\op{Mor}_{\mathrm{Sh}_X}(f^{-1}\mc G,\mc F)} & {\op{Mor}_{\mathrm{Sh}_Y}(\mc G,f_*\mc F)} & \varphi & {f_*\varphi\circ\eta_\mc G} \\
				{\op{Mor}_{\mathrm{Sh}_X}(f^{-1}\mc G,\mc F')} & {\op{Mor}_{\mathrm{Sh}_Y}(\mc G,f_*\mc F')} & \alpha\circ\varphi & {f_*(\alpha\circ\varphi)\circ\eta_\mc G}
				\arrow["\simeq"{marking}, draw=none, from=1-1, to=1-2]
				\arrow["{\alpha\circ-}"', from=1-1, to=2-1]
				\arrow["{f_*\alpha\circ-}", from=1-2, to=2-2]
				\arrow["\simeq"{marking}, draw=none, from=2-1, to=2-2]
				\arrow[maps to, from=1-3, to=2-3]
				\arrow[maps to, from=2-3, to=2-4]
				\arrow[maps to, from=1-3, to=1-4]
				\arrow[maps to, from=1-4, to=2-4]
			\end{tikzcd}\]
			commutes. Similarly, given a morphism $\beta\colon\mc G\to\mc G'$ of sheaves on $Y$, the square
			% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXG9we0hvbX1fe1xcbWF0aHJte1NofV9YfShmXnstMX1cXG1jIEcnLFxcbWMgRikiXSxbMSwwLCJcXG9we0hvbX1fe1xcbWF0aHJte1NofV9ZfShcXG1jIEcnLGZfKlxcbWMgRikiXSxbMCwxLCJcXG9we0hvbX1fe1xcbWF0aHJte1NofV9YfShmXnstMX1cXG1jIEcsXFxtYyBGKSJdLFsxLDEsIlxcb3B7SG9tfV97XFxtYXRocm17U2h9X1l9KFxcbWMgRyxmXypcXG1jIEYpIl0sWzMsMCwiXFxwc2kiXSxbMiwwLCJcXHZhcmVwc2lsb25fXFxtYyBGXFxjaXJjIGZeey0xfVxccHNpIl0sWzMsMSwiXFxwc2lcXGNpcmNcXGJldGEiXSxbMiwxLCJcXHZhcmVwc2lsb25fXFxtYyBGXFxjaXJjIGZeey0xfShcXHBzaVxcY2lyY1xcYmV0YSkiXSxbMCwxLCJcXHNpbWVxIiwzLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzAsMiwiLVxcY2lyYyBmXnstMX1cXGJldGEiLDJdLFsxLDMsIi1cXGNpcmNcXGJldGEiXSxbMiwzLCJcXHNpbWVxIiwzLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzUsNywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs0LDYsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNiw3LCIiLDEseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzQsNSwiIiwxLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}
				{\op{Mor}_{\mathrm{Sh}_X}(f^{-1}\mc G',\mc F)} & {\op{Mor}_{\mathrm{Sh}_Y}(\mc G',f_*\mc F)} & {\varepsilon_\mc F\circ f^{-1}\psi} & \psi \\
				{\op{Mor}_{\mathrm{Sh}_X}(f^{-1}\mc G,\mc F)} & {\op{Mor}_{\mathrm{Sh}_Y}(\mc G,f_*\mc F)} & {\varepsilon_\mc F\circ f^{-1}(\psi\circ\beta)} & \psi\circ\beta
				\arrow["\simeq"{marking}, draw=none, from=1-1, to=1-2]
				\arrow["{-\circ f^{-1}\beta}"', from=1-1, to=2-1]
				\arrow["{-\circ\beta}", from=1-2, to=2-2]
				\arrow["\simeq"{marking}, draw=none, from=2-1, to=2-2]
				\arrow[maps to, from=1-3, to=2-3]
				\arrow[maps to, from=1-4, to=2-4]
				\arrow[maps to, from=2-4, to=2-3]
				\arrow[maps to, from=1-4, to=1-3]
			\end{tikzcd}\]
			commutes.
		\end{itemize}
		The above checks finish the proof.
		\qedhere
	\end{enumerate}
\end{proof}
% \begin{remark}
% 	The functor $f^{-1}$ also has a right adjoint, which will appear on the homework. Thus, $f^{-1}$ as a functor is exact.
% \end{remark}

\subsection{More Sheaves}
Let's see a few more examples, for fun.
\begin{definition}[Constant sheaf]
	Fix a set $S$ and a topological space $X$. Then the \textit{constant sheaf} is
	\[\underline S(U)\coloneqq S^{\oplus\pi_0(U)},\]
	where $\pi_0(U)$ is the number of connected components in $U$. Notably, all the stalks of $\underline S$ are $S$.
\end{definition}
\begin{definition}[Skyscraper sheaf]
	Fix a topological space $Y$ and a set $S$. For $y\in Y$, set $X\coloneqq\{y\}$ so that there is a continuous map $\iota\colon X\into Y$. Then we define the \textit{skyscraper sheaf} as
	\[\iota_*S(U)\coloneqq\begin{cases}
		S & y\in U, \\
		\{*\} & y\notin U.
	\end{cases}\]
\end{definition}
\begin{remark}
	For $z\in Y$, we can compute the stalk of the skyscraper sheaf as
	\[(\iota_*S)_z=\begin{cases}
		S & z\in\overline{\{y\}}, \\
		\{*\} & z\notin\overline{\{y\}}.
	\end{cases}\]
\end{remark}
For another remark, we pick up the following definition.
\begin{definition}[Support]
	Fix a sheaf $\mc F$ on a topological space $x$. Then we define the \textit{support} of $\mc F$ to be
	\[\op{supp}\mc F\coloneqq\{x\in X:\#\mc F_x>1\}.\]
\end{definition}
\begin{remark}
	The support of $\iota_*S$ is $\overline{\{y\}}$.
\end{remark}
Here is another result, which explains why we care about the skyscraper sheaf.
\begin{proposition}
	There is a natural bijection
	\[\op{Mor}_{\{y\}}(\mc F_y,\mc G)\simeq\op{Mor}_Y(\mc F,\iota_*\mc G).\]
	In other words, understanding maps from stalks is roughly the same as understanding maps to the corresponding skyscraper sheaf.
\end{proposition}

\subsection{Schemes}
We close lecture by defining schemes. We begin by defining a locally ringed space.
\begin{definition}[Locally ringed space]
	A \textit{locally ringed space} is a sheaf of rings $\mc O_X$ on a topological space $X$ such that all stalks are local rings.
\end{definition}
\begin{example}
	Affine schemes give locally ringed spaces.
\end{example}
\begin{definition}[Morphism of locally ringed spaces]
	A \textit{morphism $\varphi\colon(X,\mc O_X)\to(Y,\mc O_Y)$ of locally ringed spaces} consists of an ordered pair $(f,f^\sharp)$ in such a way that $f\colon X\to Y$ is continuous, and $f^\sharp\colon\mc O_Y\to f_*\mc O_X$ is a morphism of sheaves in such a way that the induced map
	\[f^\sharp_p\colon\mc O_{Y,p}\to(f_*\mc O_X)_p\]
	of stalks is a map of local rings.
\end{definition}
Notably, a morphism of local rings $\varphi\colon(R,\mf m)\to(S,\mf n)$ requires $\varphi^{-1}\mf n=\mf m$.
\begin{definition}[Scheme]
	A \textit{scheme} is a pair $(X,\mc O_X)$ of a topological space $X$ and a locally ringed space $\mc O_X$ such that each $p\in X$ has a $U_p\subseteq X$ such that $(U_p,\mc O_X|_{U_p})$ is isomorphic (as a locally ringed space) to an affine scheme.
\end{definition}

\end{document}