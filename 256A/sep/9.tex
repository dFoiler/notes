% !TEX root = ../notes.tex

\documentclass[../notes.tex]{subfiles}

\begin{document}

\section{September 9}

The fun continues.

\subsection{Modules}
We are not going to need modules for quite some time, but we will go ahead and define them now.
\begin{definition}[Module]
	Fix a scheme $(X,\OO_X)$. Then an \textit{$\OO_X$-module} is a sheaf $\mc F$ on $X$ with sheaf morphisms for addition $+\colon\mc F\times\mc F\to\mc F$ and a scalar multiplication $\cdot\colon\OO_X\times\mc F\to\mc F$.
\end{definition}
\begin{remark}
	In particular, for each $U\subseteq X$, we see $\mc F(U)$ is an $\OO_X(U)$-module.
\end{remark}
We will remark that one can define kernels, cokernels, and images as we did for sheaves values in general abelian categories, so the category of $\OO_X$-modules is again an abelian category. We refer to \cite[\S2.6.3]{rising-sea}.

\subsection{Gluing Scheme Morphisms}
We are going to want to build new schemes from old ones. Because all schemes are covered by affine schemes, our primary way of making schemes is going to be by gluing (especially affine) schemes together. Because affine schemes make open sets, we are going to want to glue ``open subschemes.''
\begin{definition}[Open subscheme]
	Fix a scheme $(X,\OO_X)$ and an open subset $U\subseteq X$. Then we define the scheme $(U,\OO_X|_U)$ to be an \textit{open subscheme}.
\end{definition}
In particular, $(U,\OO_X|_U)$ is still a scheme, as we saw in \autoref{cor:getopensubscheme}.
\begin{example}
	Given an affine scheme $(\Spec A,\OO_{\Spec A})$, we note that taking $U\coloneqq D(f)$ has
	\[(U,\OO_{\Spec A}|_U)=(\Spec A_f,\OO_{\Spec A_f}),\]
	where we are using \autoref{exe:distinguishedisaffine}.
\end{example}
As a taste of how we glue schemes, we will start by gluing scheme morphisms. To be able to glue, we need to be able to restrict, so here is our restriction.
\begin{lemma} \label{lem:restrictlocringspacemorphism}
	Fix a scheme morphism $(\varphi,\varphi^\sharp)\colon(X,\OO_X)\to(Y,\OO_Y)$ and open subset $U\subseteq X$ and $V\subseteq Y$ such that $\varphi(U)\subseteq V$. Then $(\varphi|_U,\varphi^\sharp|_U)$ assembles into a scheme morphism $(U,\OO_X|_U)\to(V,\OO_Y|_V)$.
\end{lemma}
\begin{proof}
	The restriction of a continuous function is still continuous, so $\varphi|_U\colon U\to Y$ is still continuous; restricting the image is okay because open subsets of $V$ are also open subsets of $Y$ because $V\subseteq Y$ is open.
	
	We now define $\varphi^\sharp|_U\colon\OO_Y|_V\to(\varphi|_U)_*(\OO_X|_U)$: for each open $W\subseteq V$, we see $W$ is open in $Y$, and $(\varphi|_U)^{-1}(W)=U\cap\varphi^{-1}(W)$, so we want a map $\OO_Y(W)\to\OO_X(U\cap\varphi^{-1}(W))$, so we define $(\varphi^\sharp|_U)_W$ as the composite
	\[\OO_Y|_V(W)\stackrel{\varphi^\sharp_W}\to\OO_X\left(\varphi^{-1}(W)\right)\stackrel{\op{res}_{\varphi^{-1}W,U\cap\varphi^{-1}W}}\to\OO_X\left(U\cap\varphi^{-1}(W)\right).\]
	To see that $\varphi^\sharp|_U$ assembles into a sheaf morphism, fix open sets $W'\subseteq W\subseteq V$, and we note the diagram
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXE9PX1koVikiXSxbMCwxLCJcXE9PX1koVicpIl0sWzEsMCwiKFxcdmFycGhpfF9VKV8qKFxcT09fWHxfVSkoVikiXSxbMSwxLCIoXFx2YXJwaGl8X1UpXyooXFxPT19YfF9VKShWJykiXSxbMiwzLCJcXG9we3Jlc31fe1YsVid9Il0sWzAsMSwiXFxvcHtyZXN9X3tWLFYnfSIsMl0sWzAsMiwiKFxcdmFycGhpXlxcc2hhcnB8X1UpX1YiXSxbMSwzLCIoXFx2YXJwaGleXFxzaGFycHxfVSlfe1YnfSJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\OO_Y(W)} & {(\varphi|_U)_*(\OO_X|_U)(W)} \\
		{\OO_Y(W')} & {(\varphi|_U)_*(\OO_X|_U)(W')}
		\arrow["{\op{res}_{W,W'}}", from=1-2, to=2-2]
		\arrow["{\op{res}_{W,W'}}"', from=1-1, to=2-1]
		\arrow["{(\varphi^\sharp|_U)_W}", from=1-1, to=1-2]
		\arrow["{(\varphi^\sharp|_U)_{W'}}", from=2-1, to=2-2]
	\end{tikzcd}\]
	commutes because it is the same as 
	% https://q.uiver.app/?q=WzAsNixbMCwwLCJcXE9PX1koVikiXSxbMCwxLCJcXE9PX1koVicpIl0sWzEsMCwiXFxPT19YKFxcdmFycGhpXnstMX0oVikpIl0sWzEsMSwiXFxPT19YKFxcdmFycGhpXnstMX0oVicpKSJdLFsyLDAsIlxcT09fWChVXFxjYXBcXHZhcnBoaV57LTF9KFYpKSJdLFsyLDEsIlxcT09fWChVXFxjYXBcXHZhcnBoaV57LTF9KFYnKSkiXSxbMiwzLCJcXG9we3Jlc31fe1xcdmFycGhpXnstMX1WLFxcdmFycGhpXnstMX1WJ30iXSxbMCwxLCJcXG9we3Jlc31fe1YsVid9IiwyXSxbMCwyLCJcXHZhcnBoaV5cXHNoYXJwX1YiXSxbMSwzLCJcXHZhcnBoaV5cXHNoYXJwX3tWJ30iXSxbNCw1LCJcXG9we3Jlc31fe1VcXGNhcFxcdmFycGhpXnstMX1WLFVcXGNhcFxcdmFycGhpXnstMX1WJ30iXSxbMiw0LCJcXG9we3Jlc30iXSxbMyw1LCJcXG9we3Jlc30iXV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\OO_Y(W)} & {\OO_X(\varphi^{-1}(W))} & {\OO_X(U\cap\varphi^{-1}(W))} \\
		{\OO_Y(W')} & {\OO_X(\varphi^{-1}(W'))} & {\OO_X(U\cap\varphi^{-1}(W'))}
		\arrow["{\op{res}_{\varphi^{-1}W,\varphi^{-1}W'}}", from=1-2, to=2-2]
		\arrow["{\op{res}_{W,W'}}"', from=1-1, to=2-1]
		\arrow["{\varphi^\sharp_W}", from=1-1, to=1-2]
		\arrow["{\varphi^\sharp_{W'}}", from=2-1, to=2-2]
		\arrow["{\op{res}_{U\cap\varphi^{-1}W,U\cap\varphi^{-1}W'}}", from=1-3, to=2-3]
		\arrow["{\op{res}}", from=1-2, to=1-3]
		\arrow["{\op{res}}", from=2-2, to=2-3]
	\end{tikzcd}\]
	where now the left square commutes because $\varphi^\sharp$ is a sheaf morphism, and the right diagram commutes because $\OO_X$ is a sheaf.
	\begin{remark} \label{rem:restrictlocringspacemorphism}
		If we only wanted a morphism of ringed spaces, then we could end the proof here. We remark here to point out that we can also restrict ``morphisms of ringed spaces.''
	\end{remark}
	It remains to check that $(\varphi|_U,\varphi^\sharp|_U)$ assembles into a morphism of locally ringed spaces. Well, fixing some point $p\in U$, we want to show that the composite
	\[\arraycolsep=1.4pt\begin{array}{ccccccccc}
		(\OO_Y|_V)_{\varphi(p)} &\stackrel{(\varphi^\sharp|_U)_{\varphi(p)}}\to& ((\varphi|_U)_*\OO_X)_{\varphi(p)} &\to& (\OO_X|_U)_p \\
		{[(W,s)]} &\mapsto& [(W,\varphi^\sharp_W(s)|_{U\cap\varphi^{-1}W})] &\mapsto& [(U\cap\varphi^{-1}W,\varphi^\sharp_W(s)|_{U\cap\varphi^{-1}W})]
	\end{array}\]
	is a map of local rings. It will suffice to show that the diagram
	% https://q.uiver.app/?q=WzAsNixbMCwxLCJcXE9PX3tZLFxcdmFycGhpKHApfSJdLFsxLDEsIihcXHZhcnBoaV8qXFxPT19YKV97XFx2YXJwaGkocCl9Il0sWzIsMSwiXFxPT197WCxwfSJdLFswLDAsIlxcT09fe1ksXFx2YXJwaGkocCl9Il0sWzEsMCwiKFxcdmFycGhpfF9VKV8qKFxcT09fWHxfVSlfe1xcdmFycGhpKHApfSJdLFsyLDAsIihcXE9PX1h8X1UpX3AiXSxbMyw0LCIoXFx2YXJwaGleXFxzaGFycHxfVSlfe1xcdmFycGhpKHApfSJdLFs0LDVdLFsxLDJdLFswLDEsIlxcdmFycGhpXlxcc2hhcnBfcCJdLFszLDAsIiIsMSx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzUsMiwiIiwxLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{(\OO_{Y}|_V)_{\varphi(p)}} & {(\varphi|_U)_*(\OO_X|_U)_{\varphi(p)}} & {(\OO_X|_U)_p} \\
		{(\OO_Y|_V)_{\varphi(p)}} & {(\varphi_*\OO_X)_{\varphi(p)}} & {\OO_{X,p}}
		\arrow["{(\varphi^\sharp|_U)_{\varphi(p)}}", from=1-1, to=1-2]
		\arrow[from=1-2, to=1-3]
		\arrow[from=2-2, to=2-3]
		\arrow["{\varphi^\sharp_{\varphi(p)}}", from=2-1, to=2-2]
		\arrow[Rightarrow, no head, from=1-1, to=2-1]
		\arrow[Rightarrow, no head, from=1-3, to=2-3]
	\end{tikzcd}\]
	commutes. Notably, $[(U\cap\varphi^{-1}W,\varphi^\sharp_W(s)|_{U\cap\varphi^{-1}W})]=[(\varphi^{-1}W,\varphi^\sharp_W(s)]$. Additionally, \autoref{lem:invimagestalk} (combined with the notation that $\OO_X|_U$ refers to the inverse image presheaf) tells us that $(\OO_X|_U)_p\simeq\OO_{X,p}$ by $[(W,s)]\mapsto[(W,s)]$. Thus, we can track through the above diagram as
	% https://q.uiver.app/?q=WzAsNixbMCwxLCJbKFYscyldIl0sWzEsMSwiWyhWLFxcdmFycGhpXlxcc2hhcnBfVihzKSldIl0sWzIsMSwiWyhcXHZhcnBoaV57LTF9VixcXHZhcnBoaV5cXHNoYXJwX1YocykpXSJdLFswLDAsIlsoVixzKV0iXSxbMSwwLCJbKFYsXFx2YXJwaGleXFxzaGFycF9WKHMpfF97VVxcY2FwXFx2YXJwaGleey0xfVZ9KV0iXSxbMiwwLCJbKFVcXGNhcFxcdmFycGhpXnstMX1WLFxcdmFycGhpXlxcc2hhcnBfVihzKXxfe1VcXGNhcFxcdmFycGhpXnstMX1WfSldIl0sWzMsNCwiKFxcdmFycGhpXlxcc2hhcnB8X1UpX3tcXHZhcnBoaShwKX0iLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzQsNSwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFsxLDIsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbMCwxLCJcXHZhcnBoaV5cXHNoYXJwX3AiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzMsMCwiIiwxLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNSwyLCIiLDEseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{[(W,s)]} & {[(W,\varphi^\sharp_W(s)|_{U\cap\varphi^{-1}W})]} & {[(U\cap\varphi^{-1}W,\varphi^\sharp_W(s)|_{U\cap\varphi^{-1}W})]} \\
		{[(W,s)]} & {[(W,\varphi^\sharp_W(s))]} & {[(\varphi^{-1}W,\varphi^\sharp_W(s))]}
		\arrow["{(\varphi^\sharp|_U)_{\varphi(p)}}", maps to, from=1-1, to=1-2]
		\arrow[maps to, from=1-2, to=1-3]
		\arrow[maps to, from=2-2, to=2-3]
		\arrow["{\varphi^\sharp_{\varphi(p)}}", maps to, from=2-1, to=2-2]
		\arrow[Rightarrow, no head, from=1-1, to=2-1]
		\arrow[Rightarrow, no head, from=1-3, to=2-3]
	\end{tikzcd}\]
	which does indeed commute.
\end{proof}
\begin{remark} \label{rem:restrictmorphismlocringspace}
	From the above proof, it will be worth our time to keep the commutative diagram
	% https://q.uiver.app/?q=WzAsNixbMCwxLCJcXE9PX3tZLFxcdmFycGhpKHApfSJdLFsxLDEsIihcXHZhcnBoaV8qXFxPT19YKV97XFx2YXJwaGkocCl9Il0sWzIsMSwiXFxPT197WCxwfSJdLFswLDAsIlxcT09fe1ksXFx2YXJwaGkocCl9Il0sWzEsMCwiKFxcdmFycGhpfF9VKV8qKFxcT09fWHxfVSlfe1xcdmFycGhpKHApfSJdLFsyLDAsIihcXE9PX1h8X1UpX3AiXSxbMyw0LCIoXFx2YXJwaGleXFxzaGFycHxfVSlfe1xcdmFycGhpKHApfSJdLFs0LDVdLFsxLDJdLFswLDEsIlxcdmFycGhpXlxcc2hhcnBfcCJdLFszLDAsIiIsMSx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzUsMiwiIiwxLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\OO_{Y,\varphi(p)}} & {(\varphi|_U)_*(\OO_X|_U)_{\varphi(p)}} & {(\OO_X|_U)_p} \\
		{\OO_{Y,\varphi(p)}} & {(\varphi_*\OO_X)_{\varphi(p)}} & {\OO_{X,p}}
		\arrow["{(\varphi^\sharp|_U)_{\varphi(p)}}", from=1-1, to=1-2]
		\arrow[from=1-2, to=1-3]
		\arrow[from=2-2, to=2-3]
		\arrow["{\varphi^\sharp_p}", from=2-1, to=2-2]
		\arrow[Rightarrow, no head, from=1-1, to=2-1]
		\arrow[Rightarrow, no head, from=1-3, to=2-3]
	\end{tikzcd}\]
	in a safe place. Notably, the proof of the commutativity of this diagram does not need to know that $(\varphi,\varphi^\sharp)$ is actually a morphism of local rings.
\end{remark}
\begin{remark} \label{rem:better-restriction}
	It will be worth pointing out that open subsets $\jmath\colon U\subseteq X$ and $\iota\colon V\subseteq Y$ with $\varphi(U)\subseteq V$ will make the diagram
	% https://q.uiver.app/?q=WzAsNCxbMSwwLCIoWCxcXE9PX1gpIl0sWzAsMCwiKFUsXFxPT19YfF9VKSJdLFsxLDEsIihZLFxcT09fWSkiXSxbMCwxLCIoVixcXE9PX1l8X1YpIl0sWzEsMCwiKFxcam1hdGgsXFxqbWF0aF5cXHNoYXJwKSJdLFswLDIsIihcXHZhcnBoaSxcXHZhcnBoaV5cXHNoYXJwKSJdLFsxLDMsIihcXHZhcnBoaSxcXHZhcnBoaV5cXHNoYXJwKXxfVSIsMl0sWzMsMiwiKFxcaW90YSxcXGlvdGFeXFxzaGFycCkiXV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{(U,\OO_X|_U)} & {(X,\OO_X)} \\
		{(V,\OO_Y|_V)} & {(Y,\OO_Y)}
		\arrow["{(\jmath,\jmath^\sharp)}", from=1-1, to=1-2]
		\arrow["{(\varphi,\varphi^\sharp)}", from=1-2, to=2-2]
		\arrow["{(\varphi,\varphi^\sharp)|_U}"', from=1-1, to=2-1]
		\arrow["{(\iota,\iota^\sharp)}", from=2-1, to=2-2]
	\end{tikzcd}\]
	commute. This commutes on topological spaces because the map $(\varphi,\varphi^\sharp)|_U$ on spaces is just $\varphi|_U$. This commutes on sheaves by noting any open $W\subseteq V$ makes the following diagram commute.
	% https://q.uiver.app/?q=WzAsOCxbMSwxLCJcXE9PX1koVykiXSxbMSwwLCJcXHZhcnBoaV8qXFxPT19YKFcpIl0sWzAsMCwiXFx2YXJwaGlfKlxcam1hdGhfKihcXE9PX1h8X1UpKFcpIl0sWzAsMSwiXFxpb3RhXyooXFxPT19ZfF9WKShXKSJdLFszLDEsInMiXSxbMywwLCJcXHZhcnBoaV5cXHNoYXJwX1cocykiXSxbMiwwLCJcXHZhcnBoaV5cXHNoYXJwX1cocyl8X3tVXFxjYXBcXHZhcnBoaV57LTF9V30iXSxbMiwxLCJzfF97VlxcY2FwIFd9Il0sWzAsMSwiXFx2YXJwaGleXFxzaGFycF9XIiwyXSxbMSwyLCIoXFx2YXJwaGlfKlxcam1hdGheXFxzaGFycClfVyIsMl0sWzAsMywiXFxpb3RhXlxcc2hhcnBfVyIsMl0sWzMsMiwiXFxpb3RhXyooXFx2YXJwaGl8X1UpXlxcc2hhcnBfe1d9Il0sWzQsNywiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs3LDYsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw1LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzUsNiwiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\varphi_*\jmath_*(\OO_X|_U)(W)} & {\varphi_*\OO_X(W)} & {\varphi^\sharp_W(s)|_{U\cap\varphi^{-1}W}} & {\varphi^\sharp_W(s)} \\
		{\iota_*(\OO_Y|_V)(W)} & {\OO_Y(W)} & {s|_{V\cap W}} & s
		\arrow["{\varphi^\sharp_W}"', from=2-2, to=1-2]
		\arrow["{(\varphi_*\jmath^\sharp)_W}"', from=1-2, to=1-1]
		\arrow["{\iota^\sharp_W}"', from=2-2, to=2-1]
		\arrow["{\iota_*(\varphi|_U)^\sharp_{W}}", from=2-1, to=1-1]
		\arrow[maps to, from=2-4, to=2-3]
		\arrow[maps to, from=2-3, to=1-3]
		\arrow[maps to, from=2-4, to=1-4]
		\arrow[maps to, from=1-4, to=1-3]
	\end{tikzcd}\]
\end{remark}
\begin{remark} \label{rem:scheme-restriction-functorial}
	Additionally, restriction is functorial. Given scheme morphisms $\varphi\colon X\to Y$ and $\psi\colon Y\to Z$ with open subsets $U\subseteq X$ and $V\subseteq Y$ and $W\subseteq Z$ such that $\varphi(U)\subseteq V$ and $\psi(V)\subseteq W$, we see that
	% https://q.uiver.app/?q=WzAsMyxbMCwwLCIoVSxcXE9PX1h8X1UpIl0sWzEsMCwiKFYsXFxPT19ZfF9WKSJdLFsxLDEsIihXLFxcT09fWnxfVykiXSxbMCwxLCIoXFx2YXJwaGksXFx2YXJwaGleXFxzaGFycCl8X1UiXSxbMSwyLCIoXFxwc2ksXFxwc2leXFxzaGFycCl8X1YiXSxbMCwyLCIoKFxccHNpLFxccHNpXlxcc2hhcnApXFxjaXJjKFxcdmFycGhpLFxcdmFycGhpXlxcc2hhcnApKXxfVSIsMl1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{(U,\OO_X|_U)} & {(V,\OO_Y|_V)} \\
		& {(W,\OO_Z|_W)}
		\arrow["{(\varphi,\varphi^\sharp)|_U}", from=1-1, to=1-2]
		\arrow["{(\psi,\psi^\sharp)|_V}", from=1-2, to=2-2]
		\arrow["{((\psi,\psi^\sharp)\circ(\varphi,\varphi^\sharp))|_U}"', from=1-1, to=2-2]
	\end{tikzcd}\]
	commutes. This commutes on the level of topological spaces because we're just restricting continuous maps. This commutes on the level of sheaves because any $W'\subseteq W$ makes the following diagram commute.
	% https://q.uiver.app/?q=WzAsNixbMCwwLCJcXHZhcnBoaV8qXFxwc2lfKlxcT09fWHxfVSJdLFsxLDAsIihcXHBzaXxfVilfKlxcT09fWXxfVihXJykiXSxbMSwxLCJcXE9PX1p8X1coVycpIl0sWzMsMSwicyJdLFszLDAsIlxccHNpXlxcc2hhcnBfe1cnfShzKXxfe1ZcXGNhcFxccHNpXnstMX1XJ30iXSxbMiwwLCJcXHZhcnBoaV5cXHNoYXJwX3tcXHBzaV57LTF9Vyd9KFxccHNpXlxcc2hhcnBfe1cnfShzKSl8X3tVXFxjYXBcXHZhcnBoaV57LTF9XFxwc2leey0xfVcnfSJdLFsxLDAsIihcXHZhcnBoaV5cXHNoYXJwfF9VKV97VlxcY2FwXFxwc2leey0xfVcnfSIsMl0sWzIsMSwiKFxccHNpXlxcc2hhcnB8X1YpX1ciLDJdLFsyLDAsIigoXFx2YXJwaGlfKlxccHNpXlxcc2hhcnBcXGNpcmNcXHZhcnBoaV5cXHNoYXJwKXxfVSlfe1cnfSJdLFszLDQsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw1LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzMsNSwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\varphi_*\psi_*\OO_X|_U} & {(\psi|_V)_*\OO_Y|_V(W')} & {\varphi^\sharp_{\psi^{-1}W'}(\psi^\sharp_{W'}(s))|_{U\cap\varphi^{-1}\psi^{-1}W'}} & {\psi^\sharp_{W'}(s)|_{V\cap\psi^{-1}W'}} \\
		& {\OO_Z|_W(W')} && s
		\arrow["{(\varphi^\sharp|_U)_{V\cap\psi^{-1}W'}}"', from=1-2, to=1-1]
		\arrow["{(\psi^\sharp|_V)_W}"', from=2-2, to=1-2]
		\arrow["{((\varphi_*\psi^\sharp\circ\varphi^\sharp)|_U)_{W'}}", from=2-2, to=1-1]
		\arrow[maps to, from=2-4, to=1-4]
		\arrow[maps to, from=1-4, to=1-3]
		\arrow[maps to, from=2-4, to=1-3]
	\end{tikzcd}\]
\end{remark}
And now we can glue morphisms.
% \begin{proposition} \label{prop:morphismtoaffine}
% 	Fix a scheme $(X,\OO_X)$. Given an affine scheme $(\Spec A,\OO_A)$, we can define
% 	\[\op{Mor}_{\mathrm{Sch}_X}((X,\OO_X),(\Spec A,\OO_A))\simeq\op{Hom}_{\mathrm{Ring}}(A,\OO_X(X)).\]
% \end{proposition}
% This is intended to generalize \autoref{thm:geoisoppalg}.
% \begin{remark}
% 	Reversing the arguments in \autoref{prop:morphismtoaffine} is no longer true.
% \end{remark}
% \autoref{prop:morphismtoaffine} will follow from the following, where we let the open cover $\mc U$ below comes from the affine open cover.
\begin{proposition} \label{prop:glue-morphisms}
	Fix schemes $(X,\OO_X)$ and $(Y,\OO_Y)$. Let $\{U_\alpha\}_{\alpha\in\lambda}$ be an open cover for $X$; then, given scheme morphisms $(\varphi_\alpha,\varphi^\sharp_\alpha)\colon(U_\alpha,\OO_X|_{U_\alpha})\to (Y,\OO_Y)$ such that any $\alpha,\beta\in\lambda$ have
	\[(\varphi_\alpha,\varphi^\sharp_\alpha)|_{U_\alpha\cap U_\beta}=(\varphi_\beta,\varphi^{\sharp}_\beta)|_{U_\alpha\cap U_\beta},\]
	there is a unique scheme morphism $(\varphi,\varphi^\sharp)\colon (X,\OO_X)\to (Y,\OO_Y)$ such that $(\varphi,\varphi^\sharp)|_{U_\alpha}=(\varphi_\alpha,\varphi^{\sharp}_\alpha)$.
\end{proposition}
\begin{proof}
	Notably, we are using \autoref{lem:restrictmorphism} to discuss the restriction of our morphisms. We show uniqueness and existence separately.
	\begin{itemize}
		\item Uniqueness: suppose that we have two scheme morphisms $(\varphi,\varphi^\sharp),(\psi,\psi^\sharp)\colon(X,\OO_X)\to(Y,\OO_Y)$ which restrict to $(\varphi_\alpha,\varphi^{\sharp}_\alpha)$ on each $U\in\mc U$. On the level of topological spaces, we see that any $p\in X$ has $p\in U_\alpha$ for some $\alpha$, so
		\[\varphi(p)=\varphi_\alpha(p)=\psi(p).\]
		On the level of sheaves, pick up some open subset $V\subseteq Y$. Because $(\varphi,\varphi^\sharp)|_{U_\alpha}=(\varphi_\alpha,\varphi^\sharp_\alpha)$, we are promised that the diagram
		% https://q.uiver.app/?q=WzAsNixbMCwwLCJcXE9PX1koVikiXSxbMSwwLCJcXHZhcnBoaV8qXFxPT19YKFYpIl0sWzIsMCwiXFxPT19YKFxcdmFycGhpXnstMX0oVikpIl0sWzAsMSwiXFxPT19YKFYpIl0sWzEsMSwiKFxcdmFycGhpX1xcYWxwaGEpXyooXFxPT19YfF97VV9cXGFscGhhfSkoVikiXSxbMiwxLCJcXE9PX1goVV9cXGFscGhhXFxjYXBcXHZhcnBoaV57LTF9KFYpKSJdLFsxLDIsIiIsMCx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzAsMSwiXFx2YXJwaGleXFxzaGFycF9WIl0sWzAsMywiIiwyLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMyw0LCIoXFx2YXJwaGleXFxzaGFycF9cXGFscGhhKV9WIl0sWzQsNSwiIiwwLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMiw1LCJcXG9we3Jlc31fe1xcdmFycGhpXnstMX1WLFVfXFxhbHBoYVxcY2FwXFx2YXJwaGleey0xfVZ9Il1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\begin{equation}
			\begin{tikzcd}
				{\OO_Y(V)} & {\varphi_*\OO_X(V)} & {\OO_X(\varphi^{-1}(V))} \\
				{\OO_Y(V)} & {(\varphi_\alpha)_*(\OO_X|_{U_\alpha})(V)} & {\OO_X(U_\alpha\cap\varphi^{-1}(V))}
				\arrow[Rightarrow, no head, from=1-2, to=1-3]
				\arrow["{\varphi^\sharp_V}", from=1-1, to=1-2]
				\arrow[Rightarrow, no head, from=1-1, to=2-1]
				\arrow["{(\varphi^\sharp_\alpha)_V}", from=2-1, to=2-2]
				\arrow[Rightarrow, no head, from=2-2, to=2-3]
				\arrow["{\op{res}_{\varphi^{-1}V,U_\alpha\cap\varphi^{-1}V}}", from=1-3, to=2-3]
			\end{tikzcd} \label{eq:definesheafmapglue}
		\end{equation}
		commutes for each $\alpha\in\lambda$. In particular, tracking some $s\in\OO_X(V)$ through, we see that
		\[\varphi^\sharp_V(s)|_{U_\alpha\cap\varphi^{-1}V}=\varphi^\sharp_\alpha(s)\]
		for each $\alpha\in\lambda$, so the identity axiom on $\OO_X$ uniquely determines $\varphi^\sharp(s)$. Thus, $\varphi^\sharp_V$ is uniquely determined.

		\item Existence: On the level of topological spaces, we pick up any $p\in X$ and find some $U_\alpha$ containing $p$, so we define $\varphi(p)\coloneqq\varphi_\alpha(p)$. This is well-defined because $p\in U_\alpha\cap U_\beta$ implies
		\[\varphi_\alpha(p)=\varphi_\alpha|_{U_\alpha\cap U_\beta}(p)=\varphi_\beta|_{U_\alpha\cap U_\beta}(p)=\varphi_\beta(p).\]
		Additionally, $\varphi$ is continuous because any open $V\subseteq Y$ will have
		\[\varphi^{-1}(V)=\bigcup_{\alpha\in\lambda}\{p\in U_\alpha:\varphi(p)\in V\}=\bigcup_{\alpha\in\lambda}\{p\in U_\alpha:\varphi_\alpha(p)\in V\}=\bigcup_{\alpha\in\lambda}\varphi^{-1}_\alpha(V),\]
		and $\varphi^{-1}_\alpha(V)$ is open in $U_\alpha$ and hence in $X$, so this arbitrary union remains open.

		It remains to define our map on the level of sheaves. Fix some $s\in\OO_Y(V)$. Using the diagram of \autoref{eq:definesheafmapglue} as our intuition, we define $s_\alpha\coloneqq(\varphi_\alpha^\sharp)_V(s)\in\OO_X(U_\alpha\cap\varphi^{-1}(V))$, which we would like to glue. Well, for any $\alpha,\beta\in\lambda$, we see that
		\begin{align*}
			s_\alpha|_{U_\alpha\cap U_\beta\cap\varphi^{-1}(V)} &= (\varphi_\alpha^\sharp)_V(s)|_{U_\alpha\cap U_\beta\cap\varphi^{-1}(V)} \\
			&= (\varphi_\alpha^\sharp|_{U_\alpha\cap U_\beta})_V(s) \\
			&= (\varphi_\beta^\sharp|_{U_\alpha\cap U_\beta})_V(s) \\
			&= (\varphi_\beta^\sharp)_V(s)|_{U_\alpha\cap U_\beta\cap\varphi^{-1}(V)} \\
			&= s_\alpha|_{U_\alpha\cap U_\beta\cap\varphi^{-1}(V)},
		\end{align*}
		so the $\{s_\alpha\}_{\alpha\in\lambda}$ on the open cover $\{U_\alpha\cap\varphi^{-1}V\}_{\alpha\in\lambda}$ of $\varphi^{-1}(V)$ grants a unique $s\in\varphi_*\OO_X(V)$ such that $s|_{U_\alpha\cap\varphi^{-1}V}=s_\alpha$. In other words, $\varphi^\sharp_V(s)\in\OO_X(\varphi^{-1}(V))$ should be uniquely defined to have
		\begin{equation}
			\varphi^\sharp_V(s)|_{U_\alpha\cap\varphi^{-1}(V)}=(\varphi^\sharp_\alpha)_V(s). \label{eq:definegluedsheafmorphism}
		\end{equation}
		We now run our checks.
		\begin{itemize}
			\item Sheaf morphism: given open sets $V'\subseteq V\subseteq Y$, we see that
			\begin{align*}
				\big(\varphi^\sharp_V(s)|_{V'}\big)|_{U_\alpha\cap\varphi^{-1}(V')} &= \varphi^\sharp_V(s)|_{U_\alpha\cap\varphi^{-1}(V)}|_{U_\alpha\cap\varphi^{-1}(V')} \\
				&=(\varphi^\sharp_\alpha)_V(s)|_{U_\alpha\cap\varphi^{-1}(V')} \\
				&= (\varphi^\sharp_\alpha)_{V'}(s|_{V'})|_{U_\alpha\cap\varphi^{-1}(V')}
			\end{align*}
			for each $\alpha\in\lambda$, so $\varphi^\sharp_V(s)|_{V'}=(\varphi^\sharp_\alpha)_{V'}(s|_{V'})$ follows.
			\item Ring morphism: we won't write this out, but one should just use the uniqueness of \autoref{eq:definegluedsheafmorphism} to verify the various properties for a ring morphism. For example, $(\varphi^\sharp_\alpha)_V(1)=1$ everywhere because we have ring maps, so it follows $\varphi^\sharp_V(s)$ by uniqueness. Similarly,
			\[(\varphi^\sharp_\alpha)_V(ax+by)=(\varphi^\sharp_\alpha)_V(a)\cdot(\varphi^\sharp_\alpha)_V(x)+(\varphi^\sharp_\alpha)_V(b)\cdot(\varphi^\sharp_\alpha)_V(y)\]
			because $(\varphi^\sharp_\alpha)_V$ is a ring map, so gluing all $\alpha\in\lambda$ forces $\varphi^\sharp_V(ax+by)=\varphi^\sharp_V(a)\varphi^\sharp_V(x)+\varphi^\sharp_V(b)\varphi^\sharp_V(y)$.
			\item Restrictions: we show that $(\varphi,\varphi^\sharp)|_{U_\alpha}=(\varphi_\alpha,\varphi^\sharp_\alpha)$ as morphisms of ringed spaces. (Namely, the algorithm to restrict from \autoref{lem:restrictlocringspacemorphism} also works for ringed spaces, as noted in \autoref{rem:restrictlocringspacemorphism}.) On the level of topological spaces, by construction we have $\varphi|_{U_\alpha}(p)=\varphi_\alpha(p)$ for each $p\in U_\alpha$. On the level of sheaves, we note that the map $(\varphi^\sharp)|_{U_\alpha}\colon\OO_Y\to(\varphi|_{U_\alpha})_*\OO_X$ by definition sends $s\in\OO_Y(V)$ to
			\[((\varphi^\sharp)|_{U_\alpha})_V(s)=\varphi^\sharp_V(s)|_{U_\alpha\cap\varphi^{-1}V}=(\varphi^\sharp_\alpha)_V(s),\]
			where the last equality is by \autoref{eq:definegluedsheafmorphism}. This finishes.
			\item Locally ringed space: we show that $(\varphi,\varphi^\sharp)$ is a morphism of locally ringed spaces. Well, for some $p\in X$, place $p$ in some $U\coloneqq U_\alpha$, and we note that we want the bottom row of the diagram in \autoref{rem:restrictmorphismlocringspace} to be a map of local rings. Thus, it suffices for the top row of the diagram in \autoref{rem:restrictmorphismlocringspace} to be a map of local rings, but this is clear because $\varphi^\sharp|_{U_\alpha}=\varphi^\sharp_\alpha$ and $\varphi|_U=\varphi_\alpha$ already makes
			\[\OO_{Y,\varphi(p)}\stackrel{(\varphi_\alpha^\sharp)_{\varphi(p)}}\to((\varphi_\alpha)_*(\OO_X|_{U_\alpha})_{\varphi_\alpha(p)}\to(\OO_X)_p\]
			a map of local rings because $(\varphi_\alpha,\varphi^\sharp_\alpha)$ is a morphism of locally ringed spaces.
		\end{itemize}
		The above checks complete the proof.
		\qedhere
	\end{itemize}
\end{proof}

\subsection{Gluing Sheaves}
So far we've glued together morphisms. It remains to glue together schemes. Unsurprisingly, this will happen in two steps: we will first glue the topological spaces (which is comparatively easy) and then we will glue the sheaves. Gluing sheaves is hard enough on its own, so we will discuss how to do that now.
\begin{lemma}[Vakil~2.5.D] \label{lem:gluesheaf}
	Fix a topological space $X$ with an open cover $\{U_\alpha\}_{\alpha\in\lambda}$. Suppose we have sheaves $\mc F_\alpha$ on $U_\alpha$, along with isomorphisms $\varphi_{\alpha\beta}\colon\mc F_\alpha|_{U_\alpha\cap U_\beta}\to\mc F_\beta|_{U_\alpha\cap U_\beta}$ (with $\varphi_{\alpha\alpha}$ the identity) that agree on triple overlaps such that
	\[\varphi_{\beta\gamma}\circ\varphi_{\alpha\beta}=\varphi_{\alpha\gamma}\qquad\text{on}\qquad U_i\cap U_j\cap U_k.\]
	Then these sheaves can be glued together into a sheaf $\mc F$ on $X$ (unique up to unique isomorphism) equipped with isomorphisms $\pi_\alpha\colon\mc F|_{U_\alpha}\to\mc F_\alpha$ making the following diagram commute.
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXG1jIEZ8X3tVX1xcYWxwaGFcXGNhcCBVX1xcYmV0YX0iXSxbMCwxLCJcXG1jIEZ8X3tVX1xcYWxwaGFcXGNhcCBVX1xcYmV0YX0iXSxbMSwwLCJcXG1jIEZfXFxhbHBoYXxfe1VfXFxhbHBoYVxcY2FwIFVfXFxiZXRhfSJdLFsxLDEsIlxcbWMgRl9cXGJldGF8X3tVX1xcYWxwaGFcXGNhcCBVX1xcYmV0YX0iXSxbMiwzLCJcXHZhcnBoaV97XFxhbHBoYVxcYmV0YX0iXSxbMCwyLCJcXHBpX1xcYWxwaGEiXSxbMSwzLCJcXHBpX1xcYmV0YSJdLFswLDEsIiIsMSx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc F|_{U_\alpha\cap U_\beta}} & {\mc F_\alpha|_{U_\alpha\cap U_\beta}} \\
		{\mc F|_{U_\alpha\cap U_\beta}} & {\mc F_\beta|_{U_\alpha\cap U_\beta}}
		\arrow["{\varphi_{\alpha\beta}}", from=1-2, to=2-2]
		\arrow["{\pi_\alpha}", from=1-1, to=1-2]
		\arrow["{\pi_\beta}", from=2-1, to=2-2]
		\arrow[Rightarrow, no head, from=1-1, to=2-1]
	\end{tikzcd}\]
\end{lemma}
\begin{proof}
	Because $X=\bigcup_{\alpha\in\lambda}U_\alpha$, we may set
	\[\mc B\coloneqq\bigcup_{\alpha\in\lambda}\{\text{open }U\subseteq X:U\subseteq U_\alpha\}\]
	to be a basis for $X$. (Indeed, for any open $U\subseteq X$, we have $U=\bigcup_{\alpha\in\lambda}(U\cap U_\alpha)$ where $U\cap U_\alpha\in\mc B$ for each $\alpha$.) The point is to build $\mc F$ as a sheaf on the base $\mc B$.

	For each $B\in\mc B$, make some arbitrary choice and set $\alpha(B)\in\lambda$ to be such that $B\subseteq U_{\alpha(B)}$. We now define
	\[F(B)\coloneqq\mc F_{\alpha(B)}(B).\]
	To define our restriction maps, we note that $B'\subseteq B$ implies that $B'\subseteq U_{\alpha(B)}\cap U_{\alpha(B')}$, so the sheaf isomorphism
	\[\varphi_{\alpha(B),\alpha(B')}\colon\mc F_{\alpha(B)}|_{U_{\alpha(B)}\cap U_{\alpha(B')}}\to\mc F_{\alpha(B')}|_{U_{\alpha(B)}\cap U_{\alpha(B')}}\]
	grants us an isomorphism
	\[\varphi_{\alpha(B),\alpha(B')}(B')\colon\mc F_{\alpha(B)}(B')\to\mc F_{\alpha(B')}(B'),\]
	so we may define our restriction map as the composite
	\[\mc F_{\alpha(B)}(B)\stackrel{\op{res}_{B,B'}}\to\mc F_{\alpha(B)}(B')\stackrel{\varphi_{\alpha(B),\alpha(B')}(B')}\to\mc F_{\alpha(B')}(B').\]
	For concreteness, denote this composite by $r_{B,B'}$. We now check that $F$ assembles to a presheaf on the base $\mc B$.
	\begin{itemize}
		\item Identity: given $B\in\mc B$, our restriction to $B$ is the composite
		\[\mc F_{\alpha(B)}(B)\stackrel{\op{res}_{B,B}}\to\mc F_{\alpha(B)}(B)\stackrel{\varphi_{\alpha(B),\alpha(B)}(B')}\to\mc F_{\alpha(B)}(B),\]
		but both these maps are the identity (the first because $\mc F_{\alpha(B)}$ is a sheaf, and the second by hypothesis on the $\varphi_\bullet$).
		\item Functoriality: given basis elements $B''\subseteq B'\subseteq B$, we are interested in showing that the following diagram
		% https://q.uiver.app/?q=WzAsNixbMCwwLCJcXG1jIEZfe1xcYWxwaGEoQil9KEIpIl0sWzEsMCwiXFxtYyBGX3tcXGFscGhhKEIpfShCJykiXSxbMiwwLCJcXG1jIEZfe1xcYWxwaGEoQicpfShCJykiXSxbMiwxLCJcXG1jIEZfe1xcYWxwaGEoQicpfShCJycpIl0sWzIsMiwiXFxtYyBGX3tcXGFscGhhKEInJyl9KEInJykiXSxbMSwxLCJcXG1jIEZfe1xcYWxwaGEoQil9KEInJykiXSxbMCw1LCJcXG9we3Jlc31fe0IsQicnfSIsMl0sWzAsMSwiXFxvcHtyZXN9X3tCLEInfSJdLFsxLDIsIlxcdmFycGhpX3tcXGFscGhhKEIpLFxcYWxwaGEoQicpfShCJykiXSxbMiwzLCJcXG9we3Jlc31fe0InLEInJ30iXSxbNSwzLCJcXHZhcnBoaV97XFxhbHBoYShCKSxcXGFscGhhKEInKX0oQicnKSJdLFsxLDUsIlxcb3B7cmVzfV97QicsQicnfSJdLFs1LDQsIlxcdmFycGhpX3tcXGFscGhhKEIpLFxcYWxwaGEoQicnKX0oQicnKSIsMl0sWzMsNCwiXFx2YXJwaGlfe1xcYWxwaGEoQicpLFxcYWxwaGEoQicnKX0oQicnKSJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\begin{equation}
			\begin{tikzcd}[{column sep=6em}]
				{\mc F_{\alpha(B)}(B)} & {\mc F_{\alpha(B)}(B')} & {\mc F_{\alpha(B')}(B')} \\
				& {\mc F_{\alpha(B)}(B'')} & {\mc F_{\alpha(B')}(B'')} \\
				&& {\mc F_{\alpha(B'')}(B'')}
				\arrow["{\op{res}_{B,B''}}"', from=1-1, to=2-2]
				\arrow["{\op{res}_{B,B'}}", from=1-1, to=1-2]
				\arrow["{\varphi_{\alpha(B),\alpha(B')}(B')}", from=1-2, to=1-3]
				\arrow["{\op{res}_{B',B''}}", from=1-3, to=2-3]
				\arrow["{\varphi_{\alpha(B),\alpha(B')}(B'')}", from=2-2, to=2-3]
				\arrow["{\op{res}_{B',B''}}", from=1-2, to=2-2]
				\arrow["{\varphi_{\alpha(B),\alpha(B'')}(B'')}"', from=2-2, to=3-3]
				\arrow["{\varphi_{\alpha(B'),\alpha(B'')}(B'')}", from=2-3, to=3-3]
			\end{tikzcd} \label{eq:gluefunctorial}
		\end{equation}
		commutes. Namely, the top row is $r_{B,B'}$, the right column is $r_{B',B''}$, and we want to know that the composite of these is the diagonal $r_{B,B''}$.

		Now, the top-left triangle of \autoref{eq:gluefunctorial} commutes by the functoriality of the (pre)sheaf $\mc F_{\alpha(B)}$. The square of \autoref{eq:gluefunctorial} commutes because $\varphi_{\alpha(B),\alpha(B')}$ is a (pre)sheaf morphism. Lastly, the bottom-right triangle of \autoref{eq:gluefunctorial} commutes because $\varphi_{\alpha(B),\alpha(B'')}=\varphi_{\alpha(B'),\alpha(B'')}\circ\varphi_{\alpha(B),\alpha(B')}$ by the cocycle condition.
	\end{itemize}
	It remains to check that we have a sheaf on the base. Fix some $B\in\mc B$ with a basic cover $\{B_i\}_{i\in I}\subseteq\mc B$. For brevity, set $\beta_i\coloneqq\alpha(B_i)$ and $\beta\coloneqq\alpha(B)$.
	\begin{itemize}
		\item Identity: suppose $s,s'\in F(B)$ have $r_{B,B_i}(s)=r_{B,B_i}(s')$ for each $i\in I$. Expanding out what restriction really means here, we are saying that $s,s'\in\mc F_{\beta}(B)$ has
		\[\varphi_{\beta,\beta_i}(B_i)(\op{res}_{B,B_i}(s))=\varphi_{\beta,\beta_i}(B_i)(\op{res}_{B,B_i}(s'))\]
		as elements of $\mc F_{\beta_i}(B_i)$. Undoing the isomorphism, we see that
		\[\op{res}_{B,B_i}(s)=\op{res}_{B,B_i}(s')\]
		as elements of $\mc F_{\beta}(B_i)$. Thus, the identity axiom of $\mc F_\beta$ forces $s=s'$.
		\item Gluability: suppose we have $s_i\in F(B_i)$ for each $i\in I$ such that
		\[r_{B_i,B'}(s_i)=r_{B_j,B'}(s_j)\]
		for each $i,j\in I$ and basis element $B'\subseteq B_i\cap B_j$. Notably, $B'\subseteq B_i\subseteq U_{\alpha(B_i)}$ implies that $B'\in\mc B$, so we might as well assume this for $B'=B_i\cap B_j$. Expanding out the restriction, we are asserting
		\[\varphi_{\beta_i,\alpha(B')}(B')(\op{res}_{B_i,B'}(s_i))=\varphi_{\beta_j,\alpha(B')}(B')(\op{res}_{B_j,B'}(s_j)).\]
		Hitting both sides with $\varphi_{\alpha(B'),\beta}(B_i)$ (which is legal because $B'\subseteq B$ after all), the cocycle condition gives
		\[\varphi_{\beta_i,\beta}(B')(\op{res}_{B_i,B'}(s_i))=\varphi_{\beta_j,\beta}(B')(\op{res}_{B_j,B'}(s_j)).\]
		Using the fact that the $\varphi$ are sheaf morphisms, this is equivalent to
		\[\op{res}_{B_i,B'}(\varphi_{\beta_i,\beta}(B_i)(s_i))=\op{res}_{B_j,B'}(\varphi_{\beta_j,\beta}(B_j)(s_j)).\]
		Setting $t_i\coloneqq\varphi_{\beta_i,\beta}(B_i)(s_i)\in\mc F_\beta(B_i)$, we see that $t_i|_{B_i\cap B_j}=t_j|_{B_i\cap B_j}$ for each $i,j\in I$, so gluability on $\mc F_\beta$ gives some $s\in\mc F_\beta(B)$ such that
		\[s|_{B_i}=\varphi_{\beta_i,\beta}(B_i)(s_i)\]
		for each $i\in I$. Equivalently, we have
		\[r_{B,B_i}(s)=\varphi_{\beta,\beta_i}(B_i)(\op{res}_{B,B_i}(s))=s_i,\]
		which is what we wanted.
	\end{itemize}
	Thus, $F$ does indeed define a sheaf on the base $\mc B$, which extends to a sheaf $\mc F$ (unique up to unique isomorphism) by \autoref{prop:sheaffrombase}. Here are our last checks on $\mc F$.
	\begin{itemize}
		\item We exhibit an isomorphism $\pi_\alpha\colon\mc F|_{U_\alpha}\to\mc F_\alpha$ for each $\alpha\in\lambda$. Indeed, for any $B\subseteq U_\alpha$, note $B\in\mc B$, so we define $\pi_\alpha(B)$ as the composite
		\[\mc F|_{U_\alpha}(B)=\mc F(B)=F(B)=\mc F_{\alpha(B)}(B)\stackrel{\varphi_{\alpha(B),\alpha}(B)}\to\mc F_\alpha(B),\]
		where $\varphi_{\alpha(B),\alpha}(B)$ makes sense because $B\subseteq U_{\alpha(B)}\cap U_\alpha$.
		
		Now, to see that $\pi_\alpha$ assembles into a natural transformation, we suppose $B'\subseteq B\subseteq U_\alpha$ and draw the diagram
		% https://q.uiver.app/?q=WzAsMTAsWzAsMCwiXFxtYyBGfF97VV9cXGFscGhhfShCKSJdLFsxLDAsIlxcbWMgRihCKSJdLFsyLDAsIkYoQikiXSxbMywwLCJcXG1jIEZfe1xcYWxwaGEoQil9KEIpIl0sWzQsMCwiXFxtYyBGX1xcYWxwaGEoQikiXSxbMCwxLCJcXG1jIEZ8X3tVX1xcYWxwaGF9KEInKSJdLFsxLDEsIlxcbWMgRihCJykiXSxbMiwxLCJGKEInKSJdLFszLDEsIlxcbWMgRl97XFxhbHBoYShCJyl9KEInKSJdLFs0LDEsIlxcbWMgRl9cXGFscGhhKEInKSJdLFszLDQsIlxcdmFycGhpX3tcXGFscGhhKEIpLFxcYWxwaGF9KEIpIl0sWzAsMSwiIiwwLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMSwyLCIiLDAseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsyLDMsIiIsMCx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzAsNV0sWzUsNiwiIiwyLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNiw3LCIiLDIseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs3LDgsIiIsMix7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzMsOCwicl97QixCJ30iLDJdLFs0LDksIlxcb3B7cmVzfV97QixCJ30iXSxbOCw5LCJcXHZhcnBoaV97XFxhbHBoYShCJyksXFxhbHBoYX0oQicpIiwyXV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\mc F|_{U_\alpha}(B)} & {\mc F(B)} & {F(B)} & {\mc F_{\alpha(B)}(B)} & {\mc F_\alpha(B)} \\
			{\mc F|_{U_\alpha}(B')} & {\mc F(B')} & {F(B')} & {\mc F_{\alpha(B')}(B')} & {\mc F_\alpha(B')}
			\arrow["{\varphi_{\alpha(B),\alpha}(B)}", from=1-4, to=1-5]
			\arrow[Rightarrow, no head, from=1-1, to=1-2]
			\arrow[Rightarrow, no head, from=1-2, to=1-3]
			\arrow[Rightarrow, no head, from=1-3, to=1-4]
			\arrow[from=1-1, to=2-1]
			\arrow[Rightarrow, no head, from=2-1, to=2-2]
			\arrow[Rightarrow, no head, from=2-2, to=2-3]
			\arrow[Rightarrow, no head, from=2-3, to=2-4]
			\arrow["{r_{B,B'}}"', from=1-4, to=2-4]
			\arrow["{\op{res}_{B,B'}}", from=1-5, to=2-5]
			\arrow["{\varphi_{\alpha(B'),\alpha}(B')}"', from=2-4, to=2-5]
		\end{tikzcd}\]
		which we would like to commute. Well, we compute directly that
		\begin{align*}
			\varphi_{\alpha(B'),\alpha}(B')\circ r_{B,B'} &= \varphi_{\alpha(B'),\alpha}(B')\circ\varphi_{\alpha(B),\alpha(B')}(B')\circ{\op{res}_{B,B'}} \\
			&= \varphi_{\alpha(B),\alpha}(B')\circ{\op{res}_{B,B'}} \\
			&= {\op{res}_{B,B'}}\circ\varphi_{\alpha(B),\alpha}(B).
		\end{align*}
		Lastly, we note that $\pi_\alpha$ is component-wise an isomorphism, so it follows that $\pi_\alpha$ is an isomorphism on the level of sheaves.

		\item We show that the diagram
		% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXG1jIEZ8X3tVX1xcYWxwaGFcXGNhcCBVX1xcYmV0YX0iXSxbMCwxLCJcXG1jIEZ8X3tVX1xcYWxwaGFcXGNhcCBVX1xcYmV0YX0iXSxbMSwwLCJcXG1jIEZfXFxhbHBoYXxfe1VfXFxhbHBoYVxcY2FwIFVfXFxiZXRhfSJdLFsxLDEsIlxcbWMgRl9cXGJldGF8X3tVX1xcYWxwaGFcXGNhcCBVX1xcYmV0YX0iXSxbMiwzLCJcXHZhcnBoaV97XFxhbHBoYVxcYmV0YX0iXSxbMCwyLCJcXHBpX1xcYWxwaGEiXSxbMSwzLCJcXHBpX1xcYmV0YSJdLFswLDEsIiIsMSx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\mc F|_{U_\alpha\cap U_\beta}} & {\mc F_\alpha|_{U_\alpha\cap U_\beta}} \\
			{\mc F|_{U_\alpha\cap U_\beta}} & {\mc F_\beta|_{U_\alpha\cap U_\beta}}
			\arrow["{\varphi_{\alpha\beta}}", from=1-2, to=2-2]
			\arrow["{\pi_\alpha}", from=1-1, to=1-2]
			\arrow["{\pi_\beta}", from=2-1, to=2-2]
			\arrow[Rightarrow, no head, from=1-1, to=2-1]
		\end{tikzcd}\]
		commutes. Indeed, for any $B\subseteq U_\alpha\cap U_\beta$, we have $B\in\mc B$, and as such we compute
		\begin{align*}
			\pi_\beta(B)\circ\pi_\alpha(B)^{-1} &= \varphi_{\alpha(B),\beta}(B)\circ\varphi_{\alpha(B),\alpha}(B)^{-1} \\
			&= \varphi_{\alpha(B),\beta}(B)\circ\varphi_{\alpha,\alpha(B)}(B) \\
			&= \varphi_{\alpha,\beta}(B),
		\end{align*}
		where the last two equalities hold by the cocycle condition.
		\qedhere
	\end{itemize}
\end{proof}
This sheaf we just built satisfies the following universal property.
\begin{proposition} \label{prop:gluesheafup}
	Work in the context of \autoref{lem:gluesheaf}. Given any sheaf $\mc G$ on $X$ with maps $\gamma_\alpha\colon\mc G|_{U_\alpha}\to\mc F_\alpha$ making the diagram
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXG1jIEZ8X3tVX1xcYWxwaGFcXGNhcCBVX1xcYmV0YX0iXSxbMCwxLCJcXG1jIEZ8X3tVX1xcYWxwaGFcXGNhcCBVX1xcYmV0YX0iXSxbMSwwLCJcXG1jIEZfXFxhbHBoYXxfe1VfXFxhbHBoYVxcY2FwIFVfXFxiZXRhfSJdLFsxLDEsIlxcbWMgRl9cXGJldGF8X3tVX1xcYWxwaGFcXGNhcCBVX1xcYmV0YX0iXSxbMiwzLCJcXHZhcnBoaV97XFxhbHBoYVxcYmV0YX0iXSxbMCwyLCJcXHBpX1xcYWxwaGEiXSxbMSwzLCJcXHBpX1xcYmV0YSJdLFswLDEsIiIsMSx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc G|_{U_\alpha\cap U_\beta}} & {\mc F_\alpha|_{U_\alpha\cap U_\beta}} \\
		{\mc G|_{U_\alpha\cap U_\beta}} & {\mc F_\beta|_{U_\alpha\cap U_\beta}}
		\arrow["{\varphi_{\alpha\beta}}", from=1-2, to=2-2]
		\arrow["{\gamma_\alpha}", from=1-1, to=1-2]
		\arrow["{\gamma_\beta}", from=2-1, to=2-2]
		\arrow[Rightarrow, no head, from=1-1, to=2-1]
	\end{tikzcd}\]
	commute, there is a unique map $\gamma\colon\mc G\to\mc F$ such that $\gamma_\alpha=\pi_\alpha\circ\gamma|_{U_\alpha}$.
\end{proposition}
\begin{proof}
	We continue to work with the explicit description of $\mc F$ as coming from the sheaf $F$ on the base $\mc B$. We show existence and uniqueness of $\gamma$ separately.
	\begin{itemize}
		\item Uniqueness: on the base $\mc B$, for any $B\in\mc B$ with $B\subseteq U_{\alpha(B)}$, we see that $\gamma_B$ must have
		\[\gamma_B=(\pi_{\alpha(B)}^{-1})_B\circ(\gamma_{\alpha(B)})_B,\]
		so $\gamma$ is uniquely determined on the base $\mc B$. It follows from \autoref{lem:morphismonbase} that $\gamma$ is unique.
		\item Existence: on the base $\mc B$, for any $B\in\mc B$ with $B\subseteq U_{\alpha(B)}$, we set
		\[\gamma_B\coloneqq(\pi_{\alpha(B)}^{-1})_B\circ(\gamma_{\alpha(B)})_B.\]
		We claim that $\gamma$ will at least assemble into a morphism of sheaves $\mc G_\mc B\to\mc F_\mc B$ on sheaves on the base $\mc B$. Well, given $B'\subseteq B\subseteq U_\alpha$ for $\alpha=\alpha(B)$, we need the diagram
		% https://q.uiver.app/?q=WzAsNixbMCwwLCJcXG1jIEcoQikiXSxbMCwxLCJcXG1jIEcoQicpIl0sWzEsMCwiXFxtYyBGX3tcXGFscGhhKEIpfShCKSJdLFsxLDEsIlxcbWMgRl97XFxhbHBoYShCJyl9KEInKSJdLFsyLDAsIlxcbWMgRihCKSJdLFsyLDEsIlxcbWMgRihCJykiXSxbMCwxLCJcXG9we3Jlc31fe0IsQid9IiwyXSxbMCwyLCJcXGdhbW1hX3tcXGFscGhhKEIpfShCKSJdLFsxLDMsIlxcZ2FtbWFfe1xcYWxwaGEoQicpfShCJykiXSxbNCwyLCJcXHBpX3tcXGFscGhhKEIpfShCKSIsMl0sWzUsMywiXFxwaV97XFxhbHBoYShCKX0oQicpIiwyXSxbNCw1LCJcXG9we3Jlc31fe0IsQid9Il1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\mc G(B)} & {\mc F_{\alpha(B)}(B)} & {\mc F(B)} \\
			{\mc G(B')} & {\mc F_{\alpha(B')}(B')} & {\mc F(B')}
			\arrow["{\op{res}_{B,B'}}"', from=1-1, to=2-1]
			\arrow["{\gamma_{\alpha(B)}(B)}", from=1-1, to=1-2]
			\arrow["{\gamma_{\alpha(B')}(B')}", from=2-1, to=2-2]
			\arrow["{\pi_{\alpha(B)}(B)}"', from=1-3, to=1-2]
			\arrow["{\pi_{\alpha(B)}(B')}"', from=2-3, to=2-2]
			\arrow["{\op{res}_{B,B'}}", from=1-3, to=2-3]
		\end{tikzcd}\]
		to commute. Well, we expand this diagram into
		% https://q.uiver.app/?q=WzAsOSxbMCwwLCJcXG1jIEcoQikiXSxbMiwwLCJcXG1jIEZfe1xcYWxwaGEoQil9KEIpIl0sWzAsMiwiXFxtYyBHKEInKSJdLFsyLDIsIlxcbWMgRl97XFxhbHBoYShCJyl9KEInKSJdLFsyLDEsIlxcbWMgRl97XFxhbHBoYShCKX0oQicpIl0sWzQsMCwiXFxtYyBGKEIpIl0sWzQsMSwiXFxtYyBGKEInKSJdLFs0LDIsIlxcbWMgRihCJykiXSxbMCwxLCJcXG1jIEcoQicpIl0sWzAsMSwiXFxnYW1tYV97XFxhbHBoYShCKX0oQikiXSxbMSw0LCJcXG9we3Jlc31fe0IsQid9Il0sWzQsMywiXFx2YXJwaGlfe1xcYWxwaGEoQiksXFxhbHBoYShCJyl9KEInKSJdLFsyLDMsIlxcZ2FtbWFfe1xcYWxwaGEoQicpfShCJykiLDJdLFs1LDEsIlxccGlfe1xcYWxwaGEoQil9KEIpIiwyXSxbNiw0LCJcXHBpX3tcXGFscGhhKEIpfShCJykiLDJdLFs1LDYsIlxcb3B7cmVzfV97QixCJ30iXSxbNiw3LCIiLDAseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs3LDMsIlxccGlfe1xcYWxwaGEoQicpfShCJykiXSxbOCw0LCJcXGdhbW1hX3tcXGFscGhhKEIpfShCJykiXSxbMCw4LCJcXG9we3Jlc31fe0IsQid9IiwyXSxbOCwyLCIiLDIseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\mc G(B)} && {\mc F_{\alpha(B)}(B)} && {\mc F(B)} \\
			{\mc G(B')} && {\mc F_{\alpha(B)}(B')} && {\mc F(B')} \\
			{\mc G(B')} && {\mc F_{\alpha(B')}(B')} && {\mc F(B')}
			\arrow["{\gamma_{\alpha(B)}(B)}", from=1-1, to=1-3]
			\arrow["{\op{res}_{B,B'}}", from=1-3, to=2-3]
			\arrow["{\varphi_{\alpha(B),\alpha(B')}(B')}", from=2-3, to=3-3]
			\arrow["{\gamma_{\alpha(B')}(B')}"', from=3-1, to=3-3]
			\arrow["{\pi_{\alpha(B)}(B)}"', from=1-5, to=1-3]
			\arrow["{\pi_{\alpha(B)}(B')}"', from=2-5, to=2-3]
			\arrow["{\op{res}_{B,B'}}", from=1-5, to=2-5]
			\arrow[Rightarrow, no head, from=2-5, to=3-5]
			\arrow["{\pi_{\alpha(B')}(B')}", from=3-5, to=3-3]
			\arrow["{\gamma_{\alpha(B)}(B')}", from=2-1, to=2-3]
			\arrow["{\op{res}_{B,B'}}"', from=1-1, to=2-1]
			\arrow[Rightarrow, no head, from=2-1, to=3-1]
		\end{tikzcd}\]
		and check commutativity square-by-square: the top squares commute because $\gamma_{\alpha(B)}$ and $\pi_{\alpha(B)}$ are natural transformations, and the bottom squares commute by coherence of the $\gamma$ and $\pi$.

		In total, we are thus promised some sheaf morphism $\gamma$ such that $\gamma_B=(\pi_{\alpha(B)}^{-1})_B\circ(\gamma_{\alpha(B)})_B$ for each $B\in\mc B$. We claim that $\gamma\circ\pi_\alpha=\gamma_\alpha$ for each $\alpha$, for which it suffices to check on the base $\mc B$. Well, for any fixed $B\in\mc B$, we are asking for
		\[(\pi_{\alpha(B)}^{-1})_B\circ(\gamma_{\alpha(B)})_B\circ\pi_\alpha=\gamma_\alpha,\]
		which translates into the diagram
		% https://q.uiver.app/?q=WzAsNixbMCwwLCJcXG1jIEcoQikiXSxbMCwxLCJcXG1jIEcoQikiXSxbMSwwLCJcXG1jIEZfe1xcYWxwaGEoQil9KEIpIl0sWzEsMSwiXFxtYyBGX1xcYWxwaGEoQikiXSxbMiwwLCJcXG1jIEYoQikiXSxbMiwxLCJcXG1jIEYoQikiXSxbMCwyLCJcXGdhbW1hX3tcXGFscGhhKEIpfSJdLFsyLDMsIlxcdmFycGhpX3tcXGFscGhhKEIpLFxcYWxwaGF9KEIpIl0sWzEsMywiXFxnYW1tYV97XFxhbHBoYX0oQikiLDJdLFsyLDQsIlxccGlfe1xcYWxwaGEoQil9KEIpIl0sWzMsNSwiXFxwaV9cXGFscGhhKEIpIiwyXSxbNCw1LCIiLDEseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFswLDEsIiIsMix7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\mc G(B)} & {\mc F_{\alpha(B)}(B)} & {\mc F(B)} \\
			{\mc G(B)} & {\mc F_\alpha(B)} & {\mc F(B)}
			\arrow["{\gamma_{\alpha(B)}}", from=1-1, to=1-2]
			\arrow["{\varphi_{\alpha(B),\alpha}(B)}", from=1-2, to=2-2]
			\arrow["{\gamma_{\alpha}(B)}"', from=2-1, to=2-2]
			\arrow["{\pi_{\alpha(B)}(B)}", from=1-2, to=1-3]
			\arrow["{\pi_\alpha(B)}"', from=2-2, to=2-3]
			\arrow[Rightarrow, no head, from=1-3, to=2-3]
			\arrow[Rightarrow, no head, from=1-1, to=2-1]
		\end{tikzcd}\]
		commuting, which holds by the coherence of $\pi$ and $\gamma$.
		\qedhere
	\end{itemize}
\end{proof}
\begin{remark}
	Reversing the direction of the $\gamma$s in \autoref{prop:gluesheafup} gives another universal property: given any sheaf $\mc G$ on $X$ with maps $\gamma_\alpha\colon\mc F_\alpha\to\mc G|_{U_\alpha}$ making the diagram
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXG1jIEZfXFxhbHBoYXxfe1VfXFxhbHBoYVxcY2FwIFVfXFxiZXRhfSJdLFswLDEsIlxcbWMgRl9cXGJldGF8X3tVX1xcYWxwaGFcXGNhcCBVX1xcYmV0YX0iXSxbMSwwLCJcXG1jIEd8X3tVX1xcYWxwaGFcXGNhcCBVX1xcYmV0YX0iXSxbMSwxLCJcXG1jIEd8X3tVX1xcYWxwaGFcXGNhcCBVX1xcYmV0YX0iXSxbMCwxLCJcXHZhcnBoaV97XFxhbHBoYVxcYmV0YX0iLDJdLFswLDIsIlxcZ2FtbWFfXFxhbHBoYSJdLFsxLDMsIlxcZ2FtbWFfXFxiZXRhIl0sWzIsMywiIiwxLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc F_\alpha|_{U_\alpha\cap U_\beta}} & {\mc G|_{U_\alpha\cap U_\beta}} \\
		{\mc F_\beta|_{U_\alpha\cap U_\beta}} & {\mc G|_{U_\alpha\cap U_\beta}}
		\arrow["{\varphi_{\alpha\beta}}"', from=1-1, to=2-1]
		\arrow["{\gamma_\alpha}", from=1-1, to=1-2]
		\arrow["{\gamma_\beta}", from=2-1, to=2-2]
		\arrow[Rightarrow, no head, from=1-2, to=2-2]
	\end{tikzcd}\]
	commute, there is a unique map $\gamma\colon\mc F\to\mc G$ such that $\gamma_\alpha\circ\pi_\alpha=\gamma|_{U_\alpha}$.
\end{remark}

\subsection{Gluing Schemes}
We are finally ready to glue schemes.
\begin{proposition} \label{prop:glue-schemes}
	Fix a collection of schemes $(X_\alpha,\OO_\alpha)$ for each $\alpha\in\lambda$, with an open subset $U_{\alpha\beta}\subseteq X_\alpha$ for each $\alpha,\beta\in\lambda$, where $X_{\alpha\alpha}=X_\alpha$; let $(X_{\alpha\beta},\OO_{\alpha\beta})\coloneqq(U_{\alpha\beta},\OO_{X_\alpha}|_{U_{\alpha\beta}})$ be the induced open subscheme. Further, pick up some isomorphisms $(\varphi_{\alpha\beta},\varphi_{\alpha\beta}^\sharp)\colon (X_{\alpha\beta},\OO_{\alpha\beta})\to (X_{\beta\alpha},\OO_{\beta\alpha})$ satisfying the ``cocycle condition''
	\[(\varphi_{\alpha\gamma},\varphi_{\alpha\gamma}^\sharp)=(\varphi_{\beta\gamma},\varphi_{\beta\gamma}^\sharp)\circ(\varphi_{\alpha\beta},\varphi_{\alpha\beta}^\sharp),\]
	on $(U_{\alpha\beta}\cap U_{\alpha\gamma},\OO_{X_\alpha}|_{U_{\alpha\beta}\cap U_{\alpha\gamma}})\subseteq X_\alpha$, where we implicitly assume that $\varphi_{\alpha\beta}(U_{\alpha\beta}\cap U_{\alpha\gamma})\subseteq U_{\beta\gamma}$. Then there is a scheme $(X,\OO)$ equipped with an open cover $\{U_\alpha\}_{\alpha\in\lambda}$ and isomorphisms $(\iota_\alpha,\iota_\alpha^\sharp)\colon (X_\alpha,\OO_\alpha)\to(U_\alpha,\OO|_{U_\alpha})$ covering $X$ such that
	\begin{itemize}
		\item $(\iota_\alpha,\iota_\alpha^\sharp)|_{X_{\alpha\beta}}=(\iota_\beta,\iota_\beta^\sharp)|_{X_{\beta\alpha}}\circ(\varphi_{\alpha\beta},\varphi^\sharp_{\alpha\beta})$, and
		\item $U_\alpha\cap U_\beta=\iota_\alpha(X_{\alpha\beta})=\iota_\beta(X_{\beta\alpha})$.
	\end{itemize}
\end{proposition}
\begin{proof}
	As a quick aside, we note that setting $\alpha=\beta=\gamma$ in the cocycle condition tells us that $(\varphi_{\alpha\alpha},\varphi_{\alpha\alpha}^\sharp)$ is the identity. Then setting $\alpha=\gamma$ in the cocycle condition tells us that $(\varphi_{\alpha\beta},\varphi_{\alpha\beta}^\sharp)$ is the inverse of $(\varphi_{\beta\alpha},\varphi_{\beta\alpha}^\sharp)$.

	We begin by gluing the topological space. Let $\widetilde X$ denote the disjoint union of the $X_\alpha$s, equipped with inclusions $\widetilde\jmath_\alpha\colon X_\alpha\to\widetilde X$. Then we define the equivalence relation $\sim$ by taking $x_\alpha\in U_{\alpha\beta}$ and identifying $\widetilde\jmath_\alpha x_\alpha\sim\widetilde\jmath_\beta\varphi_{\alpha\beta}x_\alpha$. Quickly, we show $\sim$ forms an equivalence relation.
	\begin{itemize}
		\item Reflexive: note $x_\alpha\in U_{\alpha\alpha}$ has $\widetilde\jmath_\alpha x_\alpha\sim\widetilde\jmath_\alpha x_\alpha$.
		\item Symmetric: given $\widetilde\jmath_\alpha x_\alpha\sim\widetilde\jmath_\beta\varphi_{\alpha\beta}x_\alpha$, we set $x_\beta\coloneqq\varphi_{\alpha\beta}x_\alpha$ so that $x_\alpha=\varphi_{\beta\alpha}x_\beta$, from which
		\[\jmath_\beta\varphi_{\alpha\beta}x_\alpha=\widetilde\jmath_\beta x_\beta\sim\widetilde\jmath_\alpha\varphi_{\beta\alpha}x_\beta=\widetilde\jmath_\alpha x_\alpha\]
		follows.
		\item Transitive: given $\widetilde\jmath_\alpha x_\alpha\sim\widetilde\jmath_\beta\varphi_{\alpha\beta}x_\alpha$ and $\widetilde\jmath_\beta\varphi_{\alpha\beta}x_\alpha\sim\widetilde\jmath_\gamma\varphi_{\beta\gamma}\varphi_{\alpha\beta}x_\alpha$, we see that $\varphi_{\beta\gamma}\circ\varphi_{\alpha\beta}=\varphi_{\alpha\gamma}$ by the cocycle condition, so it follows
		\[\widetilde\jmath_\alpha x_\alpha\sim\widetilde\jmath_\gamma\varphi_{\alpha\gamma}x_\alpha=\widetilde\jmath_\gamma\varphi_{\beta\gamma}\varphi_{\alpha\beta}x_\alpha.\]
	\end{itemize}
	Thus, we give $X\coloneqq\widetilde X/{\sim}$ the quotient topology, where $\pi\colon \widetilde X\onto X$ is the canonical projection. Let $\jmath_\alpha\colon X_\alpha\to X$ be the composite $\pi\circ\widetilde\jmath_\alpha$. In particular, $U\subseteq X$ is open if and only if $\pi^{-1}(U)\subseteq\widetilde X$ is open, which is true if and only if $\jmath_\alpha^{-1}(U)\subseteq X_\alpha$ is open for each $\alpha\in\lambda$. We now have two topological checks.
	\begin{itemize}
		\item Note that $\jmath_\beta(x_\beta)\in\jmath_\alpha(X_\alpha)$ if and only if $\widetilde\jmath_\beta(x_\beta)\sim\widetilde\jmath_\alpha(x_\alpha)$ for some $x_\alpha\in X_\alpha$. But the only elements in $\widetilde\jmath_\beta(X_\beta)$ which can be identified with an element of $\widetilde\jmath_\beta(X_\beta)$ live in $U_{\beta\alpha}$, so $x_\beta\in U_{\beta\alpha}$. Conversely, if $x_\beta\in U_{\beta\alpha}$ give
		\[\widetilde\jmath_\beta x_\beta\sim\widetilde\jmath_\alpha\varphi_{\beta\alpha}x_\beta.\]
		It follows that $\jmath_\beta(X_\beta)\cap\jmath_\alpha(X_\alpha)=\jmath_\beta(U_{\beta\alpha})$. Analogously, we get $\jmath_\alpha(X_\alpha)\cap\jmath_\beta(X_\beta)=\jmath_\alpha(U_{\alpha\beta})$.
		\item We show $\jmath_\alpha\colon X_\alpha\to X$ is an open embedding (i.e., with open image and a homeomorphism onto its image). To begin, note that $\jmath_\alpha$ is injective: we have $\widetilde\jmath_\alpha x_\alpha\sim\widetilde\jmath_\alpha x_\alpha'$ if and only if $x_\alpha=\varphi_{\alpha\alpha}x_\alpha'$, from which $x_\alpha=x_\alpha'$ follows.
		
		Continuing, note $\im\jmath_\alpha$ is open because $\jmath_\beta^{-1}(\im\jmath_\alpha)=U_{\beta\alpha}\subseteq X_\beta$ is always open by construction. Lastly, $\jmath_\alpha$ is an open map: for any open subset $U\subseteq X_\alpha$, we see that
		\[\jmath_\beta^{-1}(\jmath_\alpha(U))=\{x_\beta\in U_{\beta\alpha}:\varphi_{\alpha\beta}x_\beta\in U\}=\varphi_{\beta\alpha}^{-1}(U)\]
		is open for each $\beta$, so $\jmath_\alpha(U)$ is in fact open.
	\end{itemize}
	Thus, we now set $\iota_\alpha\colon X_\alpha\to\im\jmath_\alpha$ to be the map $\jmath_\alpha$ restricted to its image.

	It remains to glue our structure sheaves together. By construction of $X$, the map $\pi$ is surjective, and $\widetilde X$ is covered by the sets $\widetilde\iota_\alpha(X_\alpha)$, so $X$ is covered by the sets $U_\alpha\coloneqq\iota_\alpha(X_\alpha)$; note that this is an open cover because $U_\alpha$ is open by the above check. Importantly, the following diagram commutes.
	% https://q.uiver.app/?q=WzAsMTAsWzAsMCwiVV97XFxhbHBoYVxcYmV0YX0iXSxbMSwwLCJVX1xcYWxwaGEiXSxbMCwxLCJVX3tcXGJldGFcXGFscGhhfSJdLFsxLDEsIlVfXFxiZXRhIl0sWzIsMCwiWCJdLFsyLDEsIlgiXSxbMywwLCJ4X1xcYWxwaGEiXSxbMywxLCJcXHZhcnBoaV97XFxhbHBoYVxcYmV0YX0oeF9cXGFscGhhKSJdLFs0LDAsIltcXHdpZGV0aWxkZVxcam1hdGhfXFxhbHBoYSh4X1xcYWxwaGEpXSJdLFs0LDEsIltcXHdpZGV0aWxkZVxcam1hdGhfXFxiZXRhKFxcdmFycGhpX3tcXGFscGhhXFxiZXRhfSh4X1xcYWxwaGEpKV0iXSxbMCwyLCJcXHZhcnBoaV97XFxhbHBoYVxcYmV0YX0iLDJdLFswLDEsIlxcaW90YV9cXGFscGhhIl0sWzIsMywiXFxpb3RhX1xcYmV0YSJdLFsxLDQsIlxcc3Vic2V0ZXEiLDMseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMyw1LCJcXHN1YnNldGVxIiwzLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzQsNSwiIiwzLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNiw4LCIiLDMseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzgsOSwiIiwzLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNyw5LCIiLDMseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzYsNywiIiwzLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\begin{equation}
		\begin{tikzcd}
			{U_{\alpha\beta}} & {U_\alpha} & X & {x_\alpha} & {[\widetilde\jmath_\alpha(x_\alpha)]} \\
			{U_{\beta\alpha}} & {U_\beta} & X & {\varphi_{\alpha\beta}(x_\alpha)} & {[\widetilde\jmath_\beta(\varphi_{\alpha\beta}(x_\alpha))]}
			\arrow["{\varphi_{\alpha\beta}}"', from=1-1, to=2-1]
			\arrow["{\iota_\alpha}", from=1-1, to=1-2]
			\arrow["{\iota_\beta}", from=2-1, to=2-2]
			\arrow["\subseteq"{marking}, draw=none, from=1-2, to=1-3]
			\arrow["\subseteq"{marking}, draw=none, from=2-2, to=2-3]
			\arrow[Rightarrow, no head, from=1-3, to=2-3]
			\arrow[maps to, from=1-4, to=1-5]
			\arrow[Rightarrow, no head, from=1-5, to=2-5]
			\arrow[maps to, from=2-4, to=2-5]
			\arrow[maps to, from=1-4, to=2-4]
		\end{tikzcd} \label{eq:glueschemetop}
	\end{equation}
	% Thus, the given cocycle condition also makes the diagram
	% % https://q.uiver.app/?q=WzAsOSxbMCwwLCJVX3tcXGFscGhhXFxiZXRhfVxcY2FwIFVfe1xcYWxwaGFcXGdhbW1hfSJdLFsxLDAsIlVfXFxhbHBoYSJdLFswLDEsIlVfe1xcYmV0YVxcYWxwaGF9XFxjYXAgVV97XFxiZXRhXFxnYW1tYX0iXSxbMSwxLCJVX1xcYmV0YSJdLFsyLDAsIlgiXSxbMiwxLCJYIl0sWzAsMiwiVV97XFxnYW1tYVxcYmV0YX0iXSxbMSwyLCJVX1xcZ2FtbWEiXSxbMiwyLCJYIl0sWzAsMiwiXFx2YXJwaGlfe1xcYWxwaGFcXGJldGF9Il0sWzAsMSwiXFxpb3RhX1xcYWxwaGEiXSxbMiwzLCJcXGlvdGFfXFxiZXRhIl0sWzEsNCwiXFxzdWJzZXRlcSIsMyx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6Im5vbmUifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFszLDUsIlxcc3Vic2V0ZXEiLDMseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNCw1LCIiLDMseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs2LDcsIlxcaW90YV9cXGdhbW1hIl0sWzcsOCwiXFxzdWJzZXRlcSIsMyx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6Im5vbmUifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs1LDgsIiIsMyx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzIsNiwiXFx2YXJwaGlfe1xcYmV0YVxcZ2FtbWF9Il0sWzAsNiwiXFx2YXJwaGlfe1xcYWxwaGFcXGdhbW1hfSIsMix7Im9mZnNldCI6MywiY3VydmUiOjN9XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	% \begin{equation}
	% 	\begin{tikzcd}
	% 		{U_{\alpha\beta}\cap U_{\alpha\gamma}} & {U_\alpha} & X \\
	% 		{U_{\beta\alpha}\cap U_{\beta\gamma}} & {U_\beta} & X \\
	% 		{U_{\gamma\beta}} & {U_\gamma} & X
	% 		\arrow["{\varphi_{\alpha\beta}}", from=1-1, to=2-1]
	% 		\arrow["{\iota_\alpha}", from=1-1, to=1-2]
	% 		\arrow["{\iota_\beta}", from=2-1, to=2-2]
	% 		\arrow["\subseteq"{marking}, draw=none, from=1-2, to=1-3]
	% 		\arrow["\subseteq"{marking}, draw=none, from=2-2, to=2-3]
	% 		\arrow[Rightarrow, no head, from=1-3, to=2-3]
	% 		\arrow["{\iota_\gamma}", from=3-1, to=3-2]
	% 		\arrow["\subseteq"{marking}, draw=none, from=3-2, to=3-3]
	% 		\arrow[Rightarrow, no head, from=2-3, to=3-3]
	% 		\arrow["{\varphi_{\beta\gamma}}", from=2-1, to=3-1]
	% 		\arrow["{\varphi_{\alpha\gamma}}"', shift right=3, curve={height=18pt}, from=1-1, to=3-1]
	% 	\end{tikzcd} \label{eq:glueschemetopcocycle}
	% \end{equation}
	% also commute.
	Now, we can take each structure sheaf $\OO_\alpha$ and push it to the sheaf $\mc F_\alpha\coloneqq(\iota_\alpha)_*\OO_\alpha$ on $U_\alpha$. We will glue these together using \autoref{lem:gluesheaf}.
	\begin{itemize}
		\item We exhibit isomorphisms $\psi_{\beta\alpha}^\sharp\colon\mc F_\alpha|_{U_\alpha\cap U_\beta}\to\mc F_\beta|_{U_\alpha\cap U_\beta}$.
		
		For any $\alpha,\beta\in\lambda$, we note that any $U\subseteq U_{\beta\alpha}$ gives the isomorphism
		\[(\varphi_{\alpha\beta}^\sharp)_U\colon\OO_\beta(U)\to\OO_\alpha(\varphi_{\alpha\beta}^{-1}(U)).\]
		Hitting this isomorphism with $(\iota_\beta)_*$, we see that \autoref{eq:glueschemetop} tells us that $\varphi_{\alpha\beta}^{-1}\circ\iota_\beta^{-1}=\iota_\alpha^{-1}$, so we have the isomorphism
		\[(\varphi_{\alpha\beta}^\sharp)_{\iota_\beta^{-1}U}\colon\underbrace{\OO_\beta\left(\iota_\beta^{-1}U\right)}_{\mc F_\alpha(U)}\to\underbrace{\OO_\alpha\left(\iota_\alpha^{-1}U\right)}_{\mc F_\beta(U)}\]
		for any $\iota_\beta^{-1}U\subseteq U_{\beta\alpha}$, which is equivalent to $U\subseteq U_\alpha\cap U_\beta$.
	
		Thus, we set $(\psi_{\beta\alpha}^\sharp)_U\coloneqq(\varphi_{\alpha\beta}^\sharp)_{\iota_\beta^{-1}U}$ for $U\subseteq U_\alpha\cap U_\beta$. To see that $\psi_{\beta\alpha}^\sharp$ assembles into a sheaf isomorphism, we pick open sets $U'\subseteq U\subseteq U_\alpha\cap U_\beta$ and check that the left diagram of
		% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXG1jIEZfXFxiZXRhKFUpIl0sWzEsMCwiXFxtYyBGX1xcYWxwaGEoVSkiXSxbMCwxLCJcXG1jIEZfXFxiZXRhKFUnKSJdLFsxLDEsIlxcbWMgRl9cXGFscGhhKFUnKSJdLFszLDAsIlxcT09fXFxiZXRhKFxcaW90YV9cXGJldGFeey0xfVUpIl0sWzMsMSwiXFxPT19cXGJldGEoXFxpb3RhX1xcYmV0YV57LTF9VScpIl0sWzQsMCwiKFxcdmFycGhpX3tcXGFscGhhXFxiZXRhfSlfKlxcT09fXFxhbHBoYShcXGlvdGFfXFxiZXRhXnstMX1VKSJdLFs0LDEsIihcXHZhcnBoaV97XFxhbHBoYVxcYmV0YX0pXypcXE9PX1xcYWxwaGEoXFxpb3RhX1xcYmV0YV57LTF9VScpIl0sWzAsMiwiXFxvcHtyZXN9X3tVLFUnfSIsMl0sWzAsMSwiXFxwc2leXFxzaGFycF97XFxhbHBoYVxcYmV0YX0oVSkiXSxbMSwzLCJcXG9we3Jlc31fe1UsVSd9Il0sWzIsMywiXFxwc2leXFxzaGFycF97XFxhbHBoYVxcYmV0YX0oVScpIl0sWzQsNiwiXFx2YXJwaGleXFxzaGFycF97XFxhbHBoYVxcYmV0YX0oXFxpb3RhX1xcYmV0YV57LTF9VSkiXSxbNCw1LCJcXG9we3Jlc31fe1xcaW90YV9cXGJldGFeey0xfVUsXFxpb3RhX1xcYmV0YV57LTF9VSd9IiwyXSxbNiw3LCJcXG9we3Jlc31fe1xcaW90YV9cXGJldGFeey0xfVUsXFxpb3RhX1xcYmV0YV57LTF9VSd9Il0sWzUsNywiXFx2YXJwaGleXFxzaGFycF97XFxhbHBoYVxcYmV0YX0oXFxpb3RhX1xcYmV0YV57LTF9VScpIl1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\mc F_\beta(U)} & {\mc F_\alpha(U)} && {\OO_\beta(\iota_\beta^{-1}U)} & {(\varphi_{\alpha\beta})_*\OO_\alpha(\iota_\beta^{-1}U)} \\
			{\mc F_\beta(U')} & {\mc F_\alpha(U')} && {\OO_\beta(\iota_\beta^{-1}U')} & {(\varphi_{\alpha\beta})_*\OO_\alpha(\iota_\beta^{-1}U')}
			\arrow["{\op{res}_{U,U'}}"', from=1-1, to=2-1]
			\arrow["{\psi^\sharp_{\beta\alpha}(U)}", from=1-1, to=1-2]
			\arrow["{\op{res}_{U,U'}}", from=1-2, to=2-2]
			\arrow["{\psi^\sharp_{\beta\alpha}(U')}", from=2-1, to=2-2]
			\arrow["{\varphi^\sharp_{\alpha\beta}(\iota_\beta^{-1}U)}", from=1-4, to=1-5]
			\arrow["{\op{res}_{\iota_\beta^{-1}U,\iota_\beta^{-1}U'}}"', from=1-4, to=2-4]
			\arrow["{\op{res}_{\iota_\beta^{-1}U,\iota_\beta^{-1}U'}}", from=1-5, to=2-5]
			\arrow["{\varphi^\sharp_{\alpha\beta}(\iota_\beta^{-1}U')}", from=2-4, to=2-5]
		\end{tikzcd}\]
		commutes, which holds because it is the same as the right diagram, which commutes by the naturality of $\varphi^\sharp_{\alpha\beta}$. Thus, we have induced a sheaf isomorphism $\psi_{\beta\alpha}^\sharp\colon\mc F_\alpha|_{U_\alpha\cap U_\beta}\to\mc F_\beta|_{U_\alpha\cap U_\beta}$.

		\item We now check the cocycle condition. Namely, for $U\subseteq U_\alpha\cap U_\beta\cap U_\gamma$, we need the diagram
		% https://q.uiver.app/?q=WzAsMyxbMCwwLCJcXG1jIEZfXFxhbHBoYShVKSJdLFsxLDAsIlxcbWMgRl9cXGJldGEoVSkiXSxbMSwxLCJcXG1jIEZfXFxnYW1tYShVKSJdLFswLDEsIihcXHBzaV97XFxhbHBoYVxcYmV0YX1eXFxzaGFycClfVSJdLFsxLDIsIihcXHBzaV5cXHNoYXJwX3tcXGJldGFcXGdhbW1hfSlfVSJdLFswLDIsIihcXHBzaV97XFxhbHBoYVxcZ2FtbWF9Xlxcc2hhcnApX1UiLDJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\mc F_\alpha(U)} & {\mc F_\beta(U)} \\
			& {\mc F_\gamma(U)}
			\arrow["{(\psi_{\alpha\beta}^\sharp)_U}", from=1-1, to=1-2]
			\arrow["{(\psi^\sharp_{\beta\gamma})_U}", from=1-2, to=2-2]
			\arrow["{(\psi_{\alpha\gamma}^\sharp)_U}"', from=1-1, to=2-2]
		\end{tikzcd}\]
		to commute. Well, this diagram is the same as
		% https://q.uiver.app/?q=WzAsMyxbMCwwLCJcXE9PX1xcYWxwaGEoXFxpb3RhX1xcYWxwaGFeey0xfVUpIl0sWzEsMCwiXFxPT19cXGJldGEoXFx2YXJwaGlfe1xcYmV0YVxcYWxwaGF9XnstMX1cXGlvdGFfXFxhbHBoYV57LTF9VSkiXSxbMSwxLCJcXE9PX1xcZ2FtbWEoXFx2YXJwaGlfe1xcZ2FtbWFcXGFscGhhfV57LTF9XFxpb3RhX1xcYWxwaGFeey0xfVUpIl0sWzAsMSwiKFxcdmFycGhpX3tcXGJldGFcXGFscGhhfV5cXHNoYXJwKV97XFxpb3RhX1xcYWxwaGFeey0xfVV9Il0sWzEsMiwiKFxcdmFycGhpXlxcc2hhcnBfe1xcZ2FtbWFcXGJldGF9KV97e1xcaW90YV9cXGJldGFeey0xfVV9fSJdLFswLDIsIihcXHZhcnBoaV97XFxhbHBoYVxcZ2FtbWF9Xlxcc2hhcnApX3tcXGlvdGFfXFxhbHBoYV57LTF9VX0iLDJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\OO_\alpha(\iota_\alpha^{-1}U)} & {\OO_\beta(\varphi_{\beta\alpha}^{-1}\iota_\alpha^{-1}U)} \\
			& {\OO_\gamma(\varphi_{\gamma\alpha}^{-1}\iota_\alpha^{-1}U)}
			\arrow["{(\varphi_{\beta\alpha}^\sharp)_{\iota_\alpha^{-1}U}}", from=1-1, to=1-2]
			\arrow["{(\varphi^\sharp_{\gamma\beta})_{\varphi_{\gamma\beta}^{-1}{\iota_\alpha^{-1}U}}}", from=1-2, to=2-2]
			\arrow["{(\varphi_{\alpha\gamma}^\sharp)_{\iota_\alpha^{-1}U}}"', from=1-1, to=2-2]
		\end{tikzcd}\]
		where we have used the cocycle condition on the topological spaces to see that $\varphi_{\alpha\gamma}^{-1}=\varphi_{\gamma\beta}^{-1}\circ\varphi_{\beta\alpha}^{-1}$. As such, we set $V\coloneqq\iota_\alpha^{-1}U$ so that we are asking for
		% https://q.uiver.app/?q=WzAsMyxbMCwwLCJcXE9PX1xcYWxwaGEoVikiXSxbMSwwLCIoXFx2YXJwaGlfe1xcYmV0YVxcYWxwaGF9KV8qXFxPT19cXGJldGEoVikiXSxbMSwxLCIoXFx2YXJwaGlfe1xcZ2FtbWFcXGFscGhhfSlfKlxcT09fXFxnYW1tYShWKSJdLFswLDEsIihcXHZhcnBoaV97XFxiZXRhXFxhbHBoYX1eXFxzaGFycClfe1Z9Il0sWzEsMiwiKFxcdmFycGhpX3tcXGJldGFcXGFscGhhfSlfKihcXHZhcnBoaV5cXHNoYXJwX3tcXGdhbW1hXFxiZXRhfSlfe1Z9Il0sWzAsMiwiKFxcdmFycGhpX3tcXGFscGhhXFxnYW1tYX1eXFxzaGFycClfe1Z9IiwyXV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\OO_\alpha(V)} & {(\varphi_{\beta\alpha})_*\OO_\beta(V)} \\
			& {(\varphi_{\gamma\alpha})_*\OO_\gamma(V)}
			\arrow["{(\varphi_{\beta\alpha}^\sharp)_{V}}", from=1-1, to=1-2]
			\arrow["{(\varphi_{\beta\alpha})_*(\varphi^\sharp_{\gamma\beta})_{V}}", from=1-2, to=2-2]
			\arrow["{(\varphi_{\alpha\gamma}^\sharp)_{V}}"', from=1-1, to=2-2]
		\end{tikzcd}\]
		to commute, which is by the given cocycle condition on sheaves.
	\end{itemize}
	In total, we get promised a sheaf $\OO$ on $X$ which glues the $\mc F_\alpha$. Namely, we are equipped with isomorphisms $\pi_\alpha^\sharp\colon\mc O|_{U_\alpha}\to\mc F_\alpha$ which makes the diagram
	\begin{equation}
		\begin{tikzcd}
			{\mc O|_{U_\alpha\cap U_\beta}} & {\mc F_\alpha|_{U_\alpha\cap U_\beta}} \\
			{\mc O|_{U_\alpha\cap U_\beta}} & {\mc F_\beta|_{U_\alpha\cap U_\beta}}
			\arrow["{\varphi_{\beta\alpha}^\sharp}", from=1-2, to=2-2]
			\arrow["{\pi_\alpha^\sharp}", from=1-1, to=1-2]
			\arrow["{\pi_\beta^\sharp}", from=2-1, to=2-2]
			\arrow[Rightarrow, no head, from=1-1, to=2-1]
		\end{tikzcd} \label{eq:embedsheaves}
	\end{equation}
	commute. Here are our checks.
	\begin{itemize}
		\item We build our isomorphisms of ringed spaces $(\iota_\alpha,\iota_\alpha^\sharp)\colon(X_\alpha,\OO_\alpha)\to(U_\alpha,\OO|_{U_\alpha})$. Above we noted we already have homeomorphisms $\iota_\alpha\colon X_\alpha\to U_\alpha$. By \autoref{lem:betterlocaliso}, it suffices to exhibit an isomorphism $\iota_\alpha^\sharp\colon\OO|_{U_\alpha}\to(\iota_\alpha)_*\OO_\alpha$, but $\mc F_\alpha=(\iota_\alpha)_*\OO_\alpha$, so we just set $\iota_\alpha^\sharp\coloneqq\pi_\alpha^\sharp$.
		\item We show that $(X,\OO)$ is a scheme. Indeed, any $p\in X$ has some $\alpha$ such that $p\in U_\alpha$. Pulling back, find some affine open subset $U\subseteq X_\alpha$ containing $\iota_\alpha^{-1}(p)$ with $(\mu,\mu^\sharp)\colon(\Spec A,\OO_{\Spec A})\cong(U,\OO_\alpha|_U)$.

		Finishing, we set $V\coloneqq\iota_\alpha(U)$. Then we have a homeomorphism
		\[\Spec A\stackrel\mu\cong U\stackrel{\iota_\alpha}\cong V\]
		and isomorphisms
		\[\OO(V')\stackrel{\mu^\sharp_V}\cong\OO_\alpha(\iota_\alpha^{-1}V')\stackrel{\mu^\sharp_{\iota_\alpha^{-1}V'}}\cong\OO_{\Spec A}(\mu^{-1}\iota_\alpha^{-1}V'),\]
		for any $V'\subseteq V$; these isomorphisms are natural in $V$ because both $\mu^\sharp$ and $(\iota_\alpha)_*\mu^\sharp$ are natural transformations. (Checking this is a matter of writing down the appropriate square.) It follows that we have an isomorphism of ringed spaces
		\[(\Spec A,\OO_{\Spec A})\cong(V,\OO|_V)\]
		where $V\subseteq X$ contains $p$. Thus, we have given $p$ an affine open neighborhood, which is enough.
		\item We show $(\iota_\alpha,\iota_\alpha^\sharp)|_{X_{\alpha\beta}}=(\iota_\beta,\iota_\beta^\sharp)|_{X_{\beta\alpha}}\circ(\varphi_{\alpha\beta},\varphi^\sharp_{\alpha\beta})$. Some trickery is required to make this equality make sense. Namely, note that $\iota_\alpha(U_{\alpha\beta})=U_\alpha\cap U_\beta$ as discussed earlier; additionally, for each open subset $U\subseteq U_\alpha\cap U_\beta$, we are granted an isomorphism
		\[\iota_\alpha^\sharp\colon\OO(U)\cong\OO_\alpha(\iota_\alpha^{-1}U)\]
		which is natural by the naturality of $\iota_\alpha^\sharp$, so this assembles into a sheaf isomorphism $\iota_\alpha^\sharp\colon\OO|_{U_\alpha\cap U_\beta}\cong(\iota_\alpha)_*(\OO_\alpha|_{U_{\alpha\beta}})$. In total, we see that we have assembled an isomorphism
		\[(\iota_\alpha,\iota_\alpha^\sharp)\colon(U_{\alpha\beta},\OO_\alpha|_{U_{\alpha\beta}})\cong(U_\alpha\cap U_\beta,\OO|_{U_\alpha\cap U_\beta}).\]
		Doing the same for $(\iota_\beta,\iota_\alpha^\beta)$, we are being asked for the diagram
		% https://q.uiver.app/?q=WzAsNCxbMCwwLCIoVV97XFxhbHBoYVxcYmV0YX0sXFxPT19cXGFscGhhfF97VV97XFxhbHBoYVxcYmV0YX19KSJdLFsxLDAsIihVX1xcYWxwaGFcXGNhcCBVX1xcYmV0YSxcXE9PfF97VV9cXGFscGhhXFxjYXAgVV9cXGJldGF9KSJdLFswLDEsIihVX3tcXGJldGFcXGFscGhhfSxcXE9PX1xcYmV0YXxfe1Vfe1xcYmV0YVxcYWxwaGF9fSkiXSxbMSwxLCIoVV9cXGFscGhhXFxjYXAgVV9cXGJldGEsXFxPT3xfe1VfXFxhbHBoYVxcY2FwIFVfe1xcYmV0YX19KSJdLFsxLDMsIiIsMCx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzAsMSwiKFxcaW90YV9cXGFscGhhLFxcaW90YV9cXGFscGhhXlxcc2hhcnApIl0sWzIsMywiKFxcaW90YV9cXGJldGEsXFxpb3RhX1xcYmV0YV5cXHNoYXJwKSJdLFswLDIsIihcXHZhcnBoaV97XFxhbHBoYVxcYmV0YX0sXFx2YXJwaGlfe1xcYWxwaGFcXGJldGF9Xlxcc2hhcnApIiwyXV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{(U_{\alpha\beta},\OO_\alpha|_{U_{\alpha\beta}})} & {(U_\alpha\cap U_\beta,\OO|_{U_\alpha\cap U_\beta})} \\
			{(U_{\beta\alpha},\OO_\beta|_{U_{\beta\alpha}})} & {(U_\alpha\cap U_\beta,\OO|_{U_\alpha\cap U_{\beta}})}
			\arrow[Rightarrow, no head, from=1-2, to=2-2]
			\arrow["{(\iota_\alpha,\iota_\alpha^\sharp)}", from=1-1, to=1-2]
			\arrow["{(\iota_\beta,\iota_\beta^\sharp)}", from=2-1, to=2-2]
			\arrow["{(\varphi_{\alpha\beta},\varphi_{\alpha\beta}^\sharp)}"', from=1-1, to=2-1]
		\end{tikzcd}\]
		to commute. Well, on topological spaces, we have $\iota_\alpha=\iota_\beta\circ\varphi_{\alpha\beta}$ by \autoref{eq:glueschemetop}. On sheaves, we are asking for the diagram
		% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXE9PfF97VV9cXGFscGhhXFxjYXAgVV9cXGJldGF9Il0sWzAsMSwiXFxPT3xfe1VfXFxhbHBoYVxcY2FwIFVfe1xcYmV0YX19Il0sWzEsMCwiKFxcaW90YV9cXGJldGEpXyooXFxPT19cXGJldGF8X3tVX3tcXGJldGFcXGFscGhhfX0pIl0sWzEsMSwiKFxcaW90YV9cXGFscGhhKV8qKFxcT09fXFxhbHBoYXxfe1Vfe1xcYWxwaGFcXGJldGF9fSkiXSxbMCwxLCIiLDAseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFswLDIsIlxcaW90YV9cXGJldGFeXFxzaGFycCJdLFsxLDMsIlxcaW90YV9cXGFscGhhXlxcc2hhcnAiXSxbMiwzLCJcXHZhcnBoaV5cXHNoYXJwX3tcXGFscGhhXFxiZXRhfSJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\OO|_{U_\alpha\cap U_\beta}} & {(\iota_\beta)_*(\OO_\beta|_{U_{\beta\alpha}})} \\
			{\OO|_{U_\alpha\cap U_{\beta}}} & {(\iota_\alpha)_*(\OO_\alpha|_{U_{\alpha\beta}})}
			\arrow[Rightarrow, no head, from=1-1, to=2-1]
			\arrow["{\iota_\beta^\sharp}", from=1-1, to=1-2]
			\arrow["{\iota_\alpha^\sharp}", from=2-1, to=2-2]
			\arrow["{\varphi^\sharp_{\alpha\beta}}", from=1-2, to=2-2]
		\end{tikzcd}\]
		to commute. Well, we note that any open set $U\subseteq X_\beta$ will have the equality of sheaves
		\[(\iota_\beta)_*(\OO_\beta|_{U_{\beta\alpha}})(U)=\OO_\beta(\iota_\beta^{-1}(U_{\beta\alpha}\cap U))=\OO_\beta(U_\alpha\cap U_\beta\cap\iota_\beta^{-1}(U))=((\iota_\beta)_*\OO_\beta)|_{U_\alpha\cap U_\beta}(U),\]
		and similar for $\alpha$, so we are really staring at the commuting square \autoref{eq:embedsheaves}.
	\end{itemize}
	The above checks complete the proof.
\end{proof}

\subsection{Projective Space by Gluing}
Fix a ring $R$. Let's define $\PP_R^n$ by gluing $n+1$ different affine sets $\AA^n_R$. Intuitively, we want to define projective space to have the topological space of homogeneous coordinates
\[[X_0:X_1:\ldots:X_n],\]
and we would like the $i$th affine piece of this space to be given by
\[\left(\frac{X_0}{X_i},\frac{X_1}{X_i},\ldots,\frac{X_n}{X_i}\right).\]
Notably, this has killed a coordinate with $X_i/X_i=1$.

As such, to glue properly, we define the $i$th affine piece to be
\[X_i\coloneqq\Spec R\left[x_{0/i},x_{1/i},\ldots,x_{(i-1)/i},x_{(i+1)/i},\ldots,x_{n/i}\right].\]
To glue this $X_i$ piece to the $X_j$ piece, we need to force $x_{j/i}$ to be nonzero (namely, to invert it), so we look at the open subscheme
\[X_{ij}\coloneqq\Spec R\left[x_{0/i},x_{1/i},\ldots,x_{(i-1)/i},x_{(i+1)/i},\ldots,x_{n/i},x_{j/i}^{-1}\right].\]
To glue these open subschemes directly, we remember that $x_{i/j}$ is supposed to mean $X_i/X_j$ as a quotient not always defined, so we define our isomorphism as
\[\arraycolsep=1.4pt\begin{array}{cccc}
	f_{ji}\colon& X_{ij} &\to& X_{ji} \\
	& x_{k/i} &\mapsto& x_{k/j}/x_{i/j}
\end{array}\]
from which we can pretty directly check the cocycle condition. (The $f_{ji}$ is an isomorphism because we can see its inverse is $f_{ij}$.) This gives us our definition.
\begin{definition}[Projective space]
	Fix a ring $R$. Then we define \textit{projective $n$-space over $R$}, denoted $\PP^n_R$ to be the scheme obtained from the above gluing data.
\end{definition}
\begin{remark}
	One can see that
	\[\OO_{\PP^n_R}(\PP^n_R)=R.\]
	Indeed, any global section $s\in\OO_{\PP^n_R}(\PP^n_R)$ must restrict to each affine open set $X_i$; however, looking at our gluing data $X_i$ and $X_j$ tells us that we cannot use a non-constant polynomial because having any positive degree (in, say $x_{i/j}$), would induce a denominator when pushing to $X_i$. Thus, $\PP^n_R$ is not an affine scheme unless $n=0$, for we would be asserting that $\PP^n_R$ is the affine scheme $\Spec R$.
\end{remark}

\subsection{Graded Rings}
Another way to look at projective schemes is to approach them from graded rings.
\begin{definition}[Graded rings]
	Fix a commutative monoid $(M,+)$. An \textit{$M$-graded ring} $S$ is a ring $S$ equipped with a decomposition of abelian groups
	\[S=\bigoplus_{d\in M}S_d\]
	such that $S_k\cdot S_k\subseteq S_{k+\ell}$ for any $k,\ell\in M$. By convention, a \textit{graded ring} will be an $\NN$-graded ring.
\end{definition}
\begin{remark}
	If $S$ is an $M$-graded ring, then $S_0\subseteq S$ is a subring. Here are our checks.
	\begin{itemize}
		\item Note $0\in S_0$ and that $S_0$ is closed under addition and subtraction because $S_0$ is an abelian group.
		\item We check $1\in S_0$. Well, suppose $1=\sum_{d\in M}^Ns_d$. Observe that $s_0s_d\in S_0S_d\subseteq S_d$ for each $d\in M$, so by comparing degrees, we are forced to have $s_0s_d=s_d$. But then
		\[s_0=s_0\cdot1=s_0\sum_{d\in M}s_d=\sum_{d\in M}s_d=1,\]
		so $1=s_0\in S_0$ follows.
		\item For $s,s'\in S_0$, we see $ss'\in S_0S_0\subseteq S_0$.
	\end{itemize}
\end{remark}
\begin{remark}
	Certainly, if $S$ is an $\NN$-graded ring, then $S$ is a $\ZZ$-graded ring by just setting $S_d=0$ for $d<0$.
\end{remark}
\begin{example}
	Take $S\coloneqq R[x_0,\ldots,x_n]$ graded by degree; namely, $S_k$ is the set of homogeneous polynomials of degree $k$ with $0$. Because $\deg(fg)=\deg f+\deg g$, we do indeed have $S_kS_\ell\subseteq S_{k+\ell}$.
\end{example}
\begin{example}
	If $S$ is a graded ring, and $f\in S_n$, then $S_f$ is a $\ZZ$-graded ring, where we are allowing negative degrees coming from $1/f$.
\end{example}
We will want our ideals to keep track of the grading, so we have the following definition.
\begin{definition}[Homogeneous element]
	Fix an $M$-graded ring $S$. Then an element $f\in S$ is \textit{homogeneous} if and only if $f\in S_d$ for some $d\in M$. If $s\in S_d\setminus\{0\}$ is nonzero and homogeneous, we set $\deg s\coloneqq S_d$.
\end{definition}
\begin{definition}[Homogeneous ideal]
	Fix an $M$-graded ring $S$. An ideal $I\subseteq S$ is \textit{homogeneous} if and only if $I$ is generated by homogeneous elements.
\end{definition}
\begin{remark} \label{rem:sumprodhomoideal}
	Directly from the definition, we can see that the (arbitrary) sum of homogeneous ideals is homogeneous by just taking the union of the homogeneous generators. Also, if $I=(r_\alpha)_{\alpha\in\lambda}$ and $J=(s_\beta)_{\beta\in\kappa}$ are homogeneous ideals, we see
	\[IJ=(r_\alpha s_\beta)_{(\alpha,\beta)\in\lambda\times\kappa},\]
	so $IJ$ is homogeneous as well; namely, $r_\alpha s_\beta\in S_{\deg r_\alpha}S_{\deg s_\beta}=S_{\deg r_\alpha+\deg s_\beta}$.
\end{remark}
This definition of a homogeneous ideal is easy to think about, but it is not yet clear why it ``respects the grading.''
\begin{lemma} \label{lem:betterhomogeneousideal}
	Fix an $M$-graded ring $S$ and ideal $I\subseteq S$. The following are equivalent.
	\begin{listalph}
		\item $I$ is generated by homogeneous elements.
		\item If $s=\sum_{d\in M}s_d$ lives in $I$, then $s_d\in I$ for each $d\in M$.
	\end{listalph}
\end{lemma}
\begin{proof}
	To see that (b) implies (a), note that $I$ is generated by
	\[I=\Bigg(\sum_{d\in M}s_d:\sum_{d\in M}s_d\in I\Bigg)\subseteq\Bigg(s_d:\sum_{d\in M}s_d\in I\Bigg).\]
	However, $\sum_{d\in M}s_d\in I$ implies $s_d\in I$ for each $d\in M$, so in fact
	\[\Bigg(s_d:\sum_{d\in M}s_d\in I\Bigg)\subseteq I,\]
	giving the needed equality. Thus, we have shown $I$ to be generated by homogeneous elements.

	We now show that (a) implies (b). Suppose $I$ is generated by the homogeneous elements $\{s_\alpha\}_{\alpha\in\lambda}$, where the degree of $s_\alpha$ is $d_\alpha$. Now, for any $s\in I$, write $s=\sum_{d\in M}s_d$ for $s_d\in S_d$. Of course, we can also write
	\[\sum_{d\in M}s_d=s=\sum_{\alpha\in\lambda}r_\alpha s_\alpha\]
	for some $r_\alpha\in S$. Writing $r_\alpha=\sum_{d\in M}r_{\alpha,d}$, we have
	\[\sum_{d\in M}s_d=\sum_{\alpha\in\lambda}\sum_{d\in M}r_{\alpha,d}s_\alpha.\]
	Comparing the $d$th degree on both sides, we see that
	\[s_d=\sum_{\alpha\in\lambda}r_{\alpha,d_\alpha-d}s_d,\]
	which is indeed an element of $I$. This finishes.
\end{proof}
\begin{corollary}
	Fix an $M$-graded ring $S$ and homogeneous ideal $I\subseteq S$. Then, setting $I_d\coloneqq I\cap S_d$, we see $S/I$ is an $M$-graded ring by $(S/I)_d\simeq S_d/I_d$ for each $d\in M$.
\end{corollary}
\begin{proof}
	Note we have the surjection
	\[\arraycolsep=1.4pt\begin{array}{ccccc}
		S &\simeq& \displaystyle\bigoplus_{d\in M}S_d &\onto& \displaystyle\bigoplus_{d\in M}S_d/I_d \\
		\displaystyle\sum_{d\in M}s_d &\mapsto& (s_d)_{d\in M} &\mapsto& (s_d+I_d)_{d\in M}
	\end{array}\]
	which is indeed a surjection because some $(s_d+I_d)_{d\in M}\in\bigoplus_{d\in M}S_d/I_d$ will just lift right back to $(s_d)_{d\in M}\in\bigoplus_{d\in M}S_d$, where $s_d=0$ if $s_d+I_d=I_d$ (which occurs all but finitely often). Additionally, an element $\sum_{d\in M}s_d\in S$ lives in the kernel of this map if and only if $s_d\in I_d$ for each $d\in M$, which by \autoref{lem:betterhomogeneousideal} is equivalent to $\sum_{d\in M}s_d\in I$. So we actually have the isomorphism
	\[\arraycolsep=1.4pt\begin{array}{ccccc}
		S/I &\simeq& \displaystyle\bigoplus_{d\in M}S_d/I_d \\
		\displaystyle\sum_{d\in M}s_d+I &\mapsto& (s_d+I_d)_{d\in M}
	\end{array}\]
	which becomes a grading upon noting that $k,\ell\in M$ with $s_k+I\in(S/I)_k\simeq S_k/I_k$ and $s_\ell+I\in(S/I)_\ell\simeq S_\ell/I_\ell$ will have $s_ks_\ell+I\in(S/I)_{k+\ell}\simeq S_{k+\ell}/I_{k+\ell}$.
\end{proof}
Here are some other quick facts about homogeneous ideals.
\begin{corollary} \label{cor:intersecthomoideals}
	Fix an $M$-graded ring $S$ and homogeneous ideals $\{I_\alpha\}_{\alpha\in\lambda}$. Then $\bigcap_{\alpha\in\lambda}I_\alpha$ is also a homogeneous ideal.
\end{corollary}
\begin{proof}
	Set $I\coloneqq\bigcap_{\alpha\in\lambda}I_\alpha$. We use \autoref{lem:betterhomogeneousideal}. Indeed, if $s=\sum_{d\in M}s_d$ lives in $I$, then $s\in I_\alpha$ for each $\alpha\in\lambda$, so each $d\in M$ has $s_d\in I_\alpha$ for each $\alpha\in\lambda$. Thus, $s_d\in I$ for each $d\in M$.
\end{proof}
\begin{lemma} \label{lem:fasthomoprime}
	Fix an $M$-graded ring $S$ and homogeneous ideal $I$. Then $I$ is prime if and only if, for any homogeneous elements $ab\in I$, we have $a,b\in I$.
\end{lemma}
\begin{proof}
	Certainly if $I$ is prime, then the conclusion holds. Conversely, we need to show that $I$ is prime. Well, suppose $a=\sum_{d\in M}a_d$ and $b=\sum_{d\in M}b_d$ have $ab\notin I$. Expanding,
	\[ab=\sum_{d\in M}\Bigg(\sum_{k+\ell=d}a_kb_\ell\Bigg)\notin I,\]
	so there is some term $a_kb_\ell\notin I$. Using the hypothesis, we see $a_k\notin I$ and $b_\ell\notin I$, so because $I$ is homogeneous, we conclude $a\notin I$ and $b\notin I$ by \autoref{lem:betterhomogeneousideal}.
\end{proof}
\begin{lemma} \label{lem:radhomo}
	Fix an $M$-graded ring $S$ and homogeneous ideal $I$. Then
	\[\rad I=\bigcap_{\substack{\mf p\supseteq I\\\mf p\text{ homogeneous}}}\mf p.\]
	In particular, $\rad I$ is homogeneous.
\end{lemma}
\begin{proof}
	We follow \cite{ms-238203}. The main claim is the first one; that $\rad I$ is homogeneous will follow by \autoref{cor:intersecthomoideals}. Now, for any prime ideal $\mf p$ containing $I$, let $\mf p'$ denote the ideal generated by the homogeneous elements of $\mf p$. We collect the following facts.
	\begin{itemize}
		\item By definition, $\mf p'$ is homogeneous, and $\mf p'\subseteq\mf p$.
		\item Note $\mf p'$ is prime by \autoref{lem:fasthomoprime}: given homogeneous elements $a,b$ with $ab\in\mf p'$, we see $ab\in\mf p$, so $a\in\mf p$ or $b\in\mf p$, so $a\in\mf p'$ or $b\in\mf p'$ by definition of $\mf p'$.
		\item If $s=\sum_{d\in M}s_d$ lives in $I$, then $s_d\in I\subseteq\mf p$ for each $d\in M$, so $s_d\in\mf p'$ for each $d\in M$, so $s\in\mf p'$. Thus, $I\subseteq\mf p'$.
	\end{itemize}
	From the above, we see
	\[\rad I=\bigcap_{\mf p\supseteq I}\mf p\supseteq\bigcap_{\mf p\supseteq I}\mf p'\supseteq\bigcap_{\substack{\mf p\supseteq I\\\mf p\text{ homogeneous}}}\mf p\supseteq\bigcap_{\mf p\supseteq I}\mf p,\]
	which is what we wanted.
\end{proof}
It turns out that some ideals do not carry geometric information.
\begin{definition}[Irrelevant ideal]
	Fix a graded ring $S$. Then the \textit{irrelevant ideal} $S_+$ is the ideal of $S$ generated by the homogeneous elements of positive degree.
\end{definition}
We will see why this ideal is called the irrelevant ideal shortly. For now, note that $S_+$ is a homogeneous ideal, and because
\[(S_+)_d\coloneqq S_+\cap S_d=\begin{cases}
	0 & d=0, \\
	S_d & d>0,
\end{cases}\]
we see that
\[S/S_+\simeq\bigoplus_{d\in\NN}\left(S_d/(S_+)_d\right)=S_0\oplus\bigoplus_{d\in\NN}0\simeq S_0.\]

\subsection{The Topological Space \texorpdfstring{$\mathrm{Proj}$}{\textrm{Proj}}}
Fix a graded ring $S$. We now construct $\op{Proj}S$. Intuitively, we want to have $\op{Proj}R[x_0,\ldots,x_n]=\PP^n_R$ and $\op{Proj}S[x_0,\ldots,x_n]/I=V(I)$ when $I$ is a homogeneous ideal. Rigorously, we are going to retell the affine story but add the word homogeneous everywhere.

Let's speak a little non-rigorously for a moment. In some sense, the point $p=[\lambda_0:\lambda_1:\ldots:\lambda_n]\in\PP^n_R$ should correspond to the ideal of $R[x_0,\ldots,x_n]$ which cuts out this line. Supposing $\lambda_0\ne0$ without loss of generality, we can see that the correct ideal is
\[\mf m_p=(\lambda_0x_1-\lambda_1x_0,\lambda_0x_2-\lambda_2x_0,\ldots,\lambda_0x_n-\lambda_nx_0).\]
In particular, $x_i\in\mf m_p$ if and only if $\lambda_i=0$, so we can encode the condition that $\lambda_i\ne0$ for some $i$ by requiring $\mf p\not\supseteq R[x_0,\ldots,x_n]_+$---namely, our irrelevant ideal $R[x_0,\ldots,x_n]_+$ carves out no points.\footnote{This is why $S_+$ is called the irrelevant ideal.} This gives our definition.
\begin{defihelper}[\textrm{Proj}] \nirindex{Proj@\textrm{Proj}}
	Given a graded ring $S$, we define
	\[\op{Proj}S\coloneqq\left\{\mf p\in\Spec S:\mf p\text{ homogeneous},\mf p\not\supseteq S_+\right\}.\]
\end{defihelper}
Having defined a version of our spectrum, we should give it a Zariski topology.
\begin{defihelper}[Zariski topology] \nirindex{Zariski topology!for \textrm{Proj}}
	Fix a graded ring $S$. Given a homogeneous ideal $\mf a\subseteq S$, define
	\[V_+(\mf a)\coloneqq\{\mf p\in\op{Proj}S:\mf p\supseteq\mf a\}.\]
	In other words, $V_+(\mf a)=V(\mf a)\cap\Proj S$.
\end{defihelper}
\begin{remark} \label{rem:vreversescontain}
	As before, we see homogeneous ideals $\mf a\subseteq\mf b$ give
	\[V_+(\mf b)=\{\mf p\in\Proj S:\mf p\supseteq\mf b\}\subseteq\{\mf p\in\Proj S:\mf p\supseteq\mf a\}=V_+(\mf a).\]
\end{remark}
\begin{remark}
	In light of \autoref{lem:radhomo}, we may say
	\[V_+(\mf a)=V(\mf a)\cap\Proj S=V(\rad\mf a)\cap\Proj S=V_+(\mf a).\]
\end{remark}
Here is the check that we have defined a topology.
\begin{lemma} \label{lem:zariskitopcheckproj}
	Fix a graded ring $S$. Then the subsets $\{V_+(\mf a)\}$ define a topology of closed sets on $\Proj S$. In particular, we have the following.
	\begin{listalph}
		\item $V_+(S_+)=\emp$ and $V_+((0))=\Proj S$.
		\item Arbitrary intersection: homogeneous ideals $\{\mf a_\alpha\}_{\alpha\in\lambda}$ give $\bigcap_{\alpha\in\lambda}V_+(\mf a_\alpha)=V_+\left(\sum_{\alpha\in\lambda}\mf a_\alpha\right)$.
		\item Finite union: homogeneous ideals $\mf a$ and $\mf b$ give $V_+(\mf a\mf b)=V_+(\mf a)\cup V_+(\mf b)$.
	\end{listalph}
\end{lemma}
\begin{proof}
	This largely follows straight from \autoref{lem:zariskitopcheck}.
	\begin{listalph}
		\item Note there is no $\mf p\in\Proj S$ with $\mf p\supseteq S_+$ by construction, so $V_+(S_+)=\emp$. Also, all ideals contain $(0)$, so $V_+((0))=\Proj S$. We also note that $S_+$ and $(0)$ are both homogeneous ideals.

		\item Using \autoref{lem:zariskitopcheck}, we see
		\[V_+\Bigg(\sum_{\alpha\in\lambda}\mf a_\alpha\Bigg)=V\Bigg(\sum_{\alpha\in\lambda}\mf a_\alpha\Bigg)\cap\Proj S=\Bigg(\bigcap_{\alpha\in\lambda}V(\mf a_\alpha)\Bigg)\cap\Proj S=\bigcap_{\alpha\in\lambda}\underbrace{(V(\mf a_\alpha)\cap\Proj S)}_{V_+(\mf a_\alpha)}.\]
		We close by noting that $\sum_{\alpha\in\lambda}\mf a_\alpha$ is a homogeneous ideal by \autoref{rem:sumprodhomoideal}.

		\item Again using \autoref{lem:zariskitopcheck}, we see
		\[V_+(\mf a\mf b)=V(\mf a\mf b)\cap\Proj S=(V(\mf a)\cup V(\mf b))\cap\Proj S=\underbrace{(V(\mf a)\cap\Proj S)}_{V_+(\mf a)}\cup\underbrace{(V(\mf b)\cap\Proj S)}_{V_+(\mf b)}.\]
		We close by noting that $\mf a\mf b$ is a homogeneous ideal by \autoref{rem:sumprodhomoideal}.
		\qedhere
	\end{listalph}
\end{proof}
As before, we will have a distinguished base, but we will be a little more careful.
\begin{defihelper}[Distinguished open sets] \nirindex{Distinguished open sets!for \textrm{Proj}}
	Fix a graded ring $S$. For a homogeneous element $f\in S_+$, we define
	\[D_+(f)\coloneqq\{\mf p\in\Proj S:f\notin\mf p\}.\]
	As before, we see $D_+(f)=D(f)\cap\Proj S$.
\end{defihelper}
Here is the analogue of \autoref{rem:distinguishedbase}.
\begin{lemma}
	Fix a graded ring $S$. The open sets $\{D_+(f)\}_{f\in S_+}$ form a base of the Zariski topology on $\Proj S$.
\end{lemma}
\begin{proof}
	Given any open subset $(\Proj S)\setminus V_+(\mf a)$ and point $\mf p\in(\Proj S)\setminus V_+(\mf a)$, we need to find $f\in S_+$ such that $D_+(f)$ contains $\mf p$ and $D_+(f)\subseteq(\Proj S)\setminus V_+(\mf a)$. In other words, we need $f\notin\mf p$ while $V_+(\mf a)\subseteq V_+((f))$. As such, it will suffice to find $f\notin\mf p$ with $f\in\mf a$ by \autoref{rem:vreversescontain}.

	Note that $\mf a$ is generated by homogeneous elements, so there certainly must exist some homogeneous element in $\mf a$ which is not in $\mf p$. If this element has positive degree, we are done immediately. Otherwise, suppose for contradiction the only homogeneous elements $f\in\mf a\setminus\mf p$ have degree zero. Then any homogeneous $s\in S_+$ of positive degree will have
	\[fs\in\mf a\]
	while $fs$ has positive degree, but then we forced ourselves into having $s\in\mf p$. Thus, $\mf p$ contains all homogeneous elements of $S_+$, so $\mf p\supseteq S_+$ because $S_+$ is homogeneous (!), which contradicts $\mf p\in\Proj S$.
\end{proof}

\subsection{Easy Nullstellensatz for \texorpdfstring{$\mathrm{Proj}$}{\textrm{Proj}}}
For fun, we take a moment to establish the analogue for \autoref{prop:easynullstellensatz}.
\begin{definition}
	Fix a graded ring $S$. Then, given a subset $Y\subseteq\Proj S$, we define
	\[I(Y)\coloneqq\bigcap_{\mf p\in Y}\mf p.\]
\end{definition}
\begin{remark} \label{rem:ireversecontain}
	Identically as in \autoref{lem:basiciprops}, we have $X\subseteq Y\subseteq\Proj S$ implies $I(Y)=\bigcap_{\mf p\in Y}\mf p\subseteq\bigcap_{\mf p\in X}\mf p=I(X)$.
\end{remark}
\begin{remark} \label{rem:iisradhomo}
	Because the intersection of homogeneous radical ideals is homogeneous (\autoref{cor:intersecthomoideals}) and radical, we see that $I(Y)$ is a homogeneous radical ideal for any $Y\subseteq\Proj S$.
\end{remark}
And here is our analogue.
\begin{proposition}
	Fix a graded ring $S$.
	\begin{listalph}
		\item Given a homogeneous ideal $\mf a\subseteq A$, we have $I(V_+(\mf a))=\rad\mf a$.
		\item Given a subset $X\subseteq\Proj S$, we have $V_+(I(X))=\overline X$.
		\item The functions $V_+$ and $I$ provide an inclusion-reversing bijection between radical ideals of $A$ and closed subsets of $\op{Spec}A$.
	\end{listalph}
\end{proposition}
\begin{proof}
	The proof are essentially analogous to \autoref{prop:easynullstellensatz}; we record them for completeness.
	\begin{listalph}
		\item Note
		\[I(V_+(\mf a))=\bigcap_{\mf p\in V_+(\mf a)}\mf a=\bigcap_{\substack{\mf p\supseteq\mf a\\\mf p\text{ homogeneous}}}\mf p=\rad\mf a,\]
		where the last equality follows from \autoref{lem:radhomo}.
		\item Using \autoref{lem:zariskitopcheckproj}, we see
		\[\overline X=\bigcap_{V_+(\mf a)\supseteq X}V_+(\mf a)=V_+\Bigg(\sum_{V_+(\mf a)\supseteq X}\mf a\Bigg).\]
		In particular, $X\subseteq V_+(\mf a)$ if and only if $\mf a\subseteq\mf p$ for all $\mf p\in X$, which means $\mf a\subseteq I(X)$. Thus, $\overline X=V\left(\sum_{\mf a\subseteq I(X)}\mf a\right)=V(I(X))$.
		\item As before, $V_+$ sends radical homogeneous ideals to closed subsets of $\Proj S$ (by definition of the topology), and $I$ sends closed subsets of $\Proj S$ to radical homogeneous ideals by \autoref{rem:iisradhomo}. These mappings are inclusion-reversing by \autoref{rem:vreversescontain} and \autoref{rem:ireversecontain}. Lastly, (a) and (b) show that these mappings compose to the identity.
		\qedhere
	\end{listalph}
\end{proof}

\subsection{The Structure Sheaf for \texorpdfstring{$\mathrm{Proj}$}{\textrm{Proj}}}
One can again check that this makes a topology. In fact, given $f\in S$, we can define
\[D_+(f)\coloneqq(\op{Proj}S)\setminus V((f))\]
and then check that this makes a basis for our topology, essentially for the same reason.
\begin{remark}
	One can check that the map
	\[\arraycolsep=1.4pt\begin{array}{ccc}
		D_+(f) &\simeq& \Spec (S_f)_0 \\
		\mf p &\mapsto& (\mf pS_f)\cap(S_f)_0
	\end{array}\]
	is a homeomorphism.
\end{remark}
As such, we give the open set $D_+(f)$ the structure sheaf $\OO_{\Spec((S_f)_0)}$. To glue these together, we choose the affine open subset
\[\Spec((S_f)_0)_{g^{\deg f}/f^{\deg g}}\subseteq\Spec(S_f)_0\]
and identify them with $\Spec(S_{fg})_0$.

\end{document}