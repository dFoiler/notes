% !TEX root = ../notes.tex

\documentclass[../notes.tex]{subfiles}

\begin{document}

\section{September 7}
Today we define schemes.

\subsection{Locally Ringed Spaces}
Schemes will be a special kind of locally ringed space, so we take a moment to define these.
\begin{definition}[Locally ringed space]
	A \textit{locally ringed space} is an ordered pair $(X,\OO_X)$ of a topological space $X$ and sheaf of rings $\mc O_X$ such that all stalks are local rings.
\end{definition}
\begin{example}
	Affine schemes are locally ringed spaces by \autoref{lem:affinestalk}.
\end{example}
\begin{example}
	Fix a locally ringed space $(X,\OO_X)$. For any open subset $U\subseteq X$, we see that $(U,\OO_X|_U)$ is a locally ringed space as well. Namely, $\OO_X|_U$ is certainly a sheaf of rings on $U$, and by \autoref{lem:invimagestalk} tells us that any $x\in U$ makes
	\[(\OO_X|_U)_x=\OO_{X,x}\]
	a local ring, so all stalks are indeed local rings.
\end{example}
Having been introduced to a new algebraic object, one should ask how to define a morphism. This is somewhat subtle. We begin by just giving the definition.
\begin{definition}[Morphism of locally ringed spaces] \label{def:ringspacemorphism}
	Given locally ringed spaces $(X,\mc O_X)$ and $(Y,\mc O_Y)$ locally ringed spaces, a \textit{morphism} is a pair $(\varphi,\varphi^\sharp)$ of a continuous map $\varphi\colon X\to Y$ and a sheaf morphism $\varphi^\sharp\colon\OO_Y\to f_*\OO_X$. Further, we require that, at each $x\in X$, the induced map
	\[\arraycolsep=1.4pt\begin{array}{cccccc}
		\OO_{Y,\varphi(x)} &\stackrel{\varphi^\sharp_{\varphi(x)}}\to& (\varphi_*\OO_X)_{\varphi(x)} &\to& \OO_{X,x} \\
		{[(V,s)]} &\mapsto& \left[(V,\varphi^\sharp_V(s))\right] &\mapsto& \varphi^\sharp_V(s)|_x
	\end{array}\]
	is a morphism of local rings; i.e., the image of $\mf m_{Y,\varphi(x)}$ is contained in $\mf m_{X,x}$, or equivalently the pre-image of $\mf m_{X,x}$ is $\mf m_{Y,\varphi(x)}$.
\end{definition}
Notably, the last map $(f_*\OO_X)_{f(x)}\to\OO_{X,x}$ above is the canonical map of \autoref{lem:directimagestalk}.
\begin{remark}
	Using the inverse image sheaf instead of the direct image sheaf, we can use \autoref{prop:invdiradjunction} to think about $f^\sharp$ as
	\[f^\flat\colon f^{-1}\mc O_Y\to\mc O_X.\]
	One might want to do this because the stalks of $f^{-1}\mc O_Y$ are nicely behaved by \autoref{lem:invimagestalk}.
\end{remark}
We take a moment to provide two ways to motivate \autoref{def:ringspacemorphism}.
\begin{enumerate}
	\item On the algebraic side, it will turn out that this definition makes the only morphisms of affine schemes (which are locally ringed spaces) come from ring homomorphisms, so we can ``check'' that this definition is the correct one.

	To help see why \autoref{def:ringspacemorphism} looks the way that it does a ring homomorphism $f\colon A\to B$ gives rise to a continuous map $\varphi\colon\Spec B\to\Spec A$, but the function data still goes to $A\to B$. This explains why $\varphi^\sharp$ should go $\OO_Y\to\varphi_*\OO_X$.

	Lastly, we can view the local ring condition as checking that we cohere with the ``local'' part of a locally ringed space.

	\item On the geometric side, we should imagine that a morphism of locally ringed spaces is like a map $\varphi\colon X\to Y$ of manifolds, where $\OO_X$ and $\OO_Y$ are the sheaf of holomorphic functions on each. Then the sheaf morphism
	\[\OO_Y\to\varphi_*\OO_X\]
	is saying that a holomorphic function $f\colon V\to\CC$ (for some open $V\subseteq Y$) should pull back through $\varphi$ to a differential function
	\begin{equation}
		\varphi^{-1}(V)\stackrel\varphi\to V\stackrel f\to\CC \label{eq:pullbackholofuncs}
	\end{equation}
	which is simply true. Importantly, there isn't really a way to take a holomorphic function $X\to\CC$ and ``push it'' through $\varphi$ to a holomorphic function $Y\to\CC$.

	Lastly, the local ring condition is saying that a germ $f\in\OO_{Y,\varphi(x)}$ will vanish at $\varphi(x)$ will pull back via \autoref{eq:pullbackholofuncs} to a germ in $\OO_{X,x}$ which vanishes at $x$. Again, this is simply true.
\end{enumerate}
Here are some quick checks on locally ringed spaces.
\begin{lemma}
	All locally ringed spaces equipped with the defined morphisms makes a category.
\end{lemma}
\begin{proof}
	Here is the extra data we need to define.
	\begin{itemize}
		\item Identity: given a locally ringed space $(X,\OO_X)$, we define $\id_{(X,\OO_X)}$ as given by the continuous map ${\id_X}\colon X\to X$ and sheaf morphism ${\id_{\OO_X}}\colon\OO_X\to\OO_X$. (Notably, ${(\id_X)_*\OO_X}$ is the same as $\OO_X$ by \autoref{lem:directimagefunctor}.) Checking stalks, we see that any $x\in X$ has
		\[\arraycolsep=1.4pt\begin{array}{ccccc}
			\OO_{X,x} &\stackrel{\id_{\OO_X,x}}\to& ((\id_{\OO_X})_*\OO_X)_x &\to& \OO_{X,x} \\
			{[(U,s)]} &\mapsto& [(U,s)] &\mapsto& [(U,s)] 
		\end{array}\]
		is the identity and hence a map of local rings.
		\item Composition: given two morphisms $(\varphi,\varphi^\sharp)\colon(X,\OO_X)\to(Y,\OO_Y)$ and $(\psi,\psi^\sharp)\colon(Y,\OO_Y)\to(Z,\OO_Z)$, we define the composition as having the continuous map $\psi\circ\varphi\colon X\to Y$ and sheaf morphism
		\[\OO_Z\stackrel{\psi^\sharp}\to\psi_*\OO_Y\stackrel{\psi_*\varphi^\sharp}\to\psi_*\varphi_*\OO_X.\]
		Notably, $\psi_*\varphi_*\OO_X=(\psi\circ\varphi)_*\OO_X$ by \autoref{rem:directimagefunctor}, so at least all of our data look correct.

		Checking stalks, fix $x\in X$ and $[(U,s)]\in\mf m_{Z,\psi(\varphi(z))}$. Because $(\varphi,\varphi^\sharp)$ and $(\psi,\psi^\sharp)$ are morphisms of locally ringed spaces, we see that $[(\psi^{-1}U,\psi^\sharp_Uz)]\in\mf m_{Y,\varphi(z)}$, so
		\[\left[((\psi\circ\varphi)^{-1}U,(\psi_*\varphi^\sharp\circ\psi^\sharp)_Us)\right]=\left[(\varphi^{-1}\psi^{-1}U,\varphi^\sharp_{\psi^{-1}U}\psi^\sharp_Us)\right]\in\mf m_{X,x},\]
		which finishes the check.
	\end{itemize}
	We have the following coherence checks.
	\begin{itemize}
		\item Identity: given a morphism $(\varphi,\varphi^\sharp)\colon(X,\OO_X)\to(Y,\OO_Y)$, we compute
		\[(\varphi,\varphi^\sharp)\circ\id_{(X,\OO_X)}=\left(\varphi\circ{\id_X},\varphi_*{\id_{\OO_X}}\circ\varphi^\sharp\right)=\left(\varphi\circ{\id_X},{\id_{\varphi_*\OO_X}}\circ\varphi^\sharp\right)=(\varphi,\varphi^\sharp),\]
		and
		\[{\id_{Y,\OO_Y}}\circ(\varphi,\varphi^\sharp)=\left({\id_Y}\circ\varphi,({\id_Y})_*\varphi^\sharp\circ{\id_{\OO_Y}}\right)=\left({\id_Y}\circ\varphi,\varphi^\sharp\circ{\id_{\OO_Y}}\right)=(\varphi,\varphi^\sharp).\]
		\item Associativity: given morphisms $(\alpha,\alpha^\sharp)\colon(A,\OO_A)\to(B,\OO_B)$ and $(\beta,\beta^\sharp)\colon(B,\OO_B)\to(C,\OO_C)$ and $(\gamma,\gamma^\sharp)\colon(C,\OO_C)\to(D,\OO_D)$, we compute
		\begin{align*}
			(\gamma,\gamma^\sharp)\circ\big((\beta,\beta^\sharp)\circ(\alpha,\alpha^\sharp)\big) &= (\gamma,\gamma^\sharp)\circ(\beta\circ\alpha,\beta_*\alpha^\sharp\circ\beta^\sharp) \\
			&= (\gamma\circ\beta\circ\alpha,\gamma_*\beta_*\alpha^\sharp\circ\gamma_*\beta^\sharp\circ\gamma^\sharp) \\
			&= (\gamma\circ\beta,\gamma_*\beta^\sharp\circ\gamma^\sharp)\circ(\alpha,\alpha^\sharp) \\
			&= \big((\gamma,\gamma^\sharp)\circ(\beta,\beta^\sharp)\big)\circ(\alpha,\alpha^\sharp),
		\end{align*}
		finishing.
		\qedhere
	\end{itemize}
\end{proof}
Thus, an isomorphism of locally ringed spaces is, of course, an isomorphism in the category. This carries a lot of data, so it will be helpful to have a shorter version of the data to carry around.
\begin{lemma} \label{lem:betterlocaliso}
	A morphism of ringed spaces $(\varphi,\varphi^\sharp)\colon(X,\OO_X)\to(Y,\OO_Y)$ is an isomorphism if and only if $\varphi$ is a homeomorphism and $\varphi^\sharp$ is an isomorphism of sheaves.
\end{lemma}
\begin{proof}
	Note that $(\varphi,\varphi^\sharp)$ is a morphism of locally ringed spaces already because any $x\in X$ has
	\[\OO_{Y,\varphi(x)}\stackrel{\varphi^\sharp_{f(x)}}\to\]
	is a string of isomorphisms: the former is an isomorphism because $\varphi^\sharp$ is, and the last is an isomorphism by \autoref{rem:naturalmapisiso}. Thus, this is a map of local rings for free.

	We now construct the inverse for $(\varphi,\varphi^\sharp)$. Let $\psi\colon Y\to X$ be the inverse continuous map for $\varphi$. Also, for each $V\subseteq\OO_Y$, define the morphism $\psi^\sharp_V\colon\OO_Y(V)\to\psi_*\OO_X(V)$ as the inverse of the morphism
	\[\varphi^\sharp_{\varphi(V)}\colon\OO_X(\varphi(V))\to\varphi_*\OO_Y(\varphi(V))\]
	which makes sense because $\psi^{-1}(V)=\varphi(V)$ and $\varphi^{-1}(\varphi(V))=V$. To check that $\psi^\sharp$ assembles into a sheaf morphism, we note that open subsets $V'\subseteq V\subseteq Y$ make the left diagram below
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXE9PX1koVikiXSxbMSwwLCJcXHBzaV8qXFxPT19YKFYpIl0sWzAsMSwiXFxPT19ZKFYnKSJdLFsxLDEsIlxccHNpXypcXE9PX1goVicpIl0sWzMsMCwiXFx2YXJwaGlfKlxcT09fWShcXHZhcnBoaShWKSkiXSxbNCwwLCJcXE9PX1goXFx2YXJwaGkoVikpIl0sWzMsMSwiXFx2YXJwaGlfKlxcT09fWShcXHZhcnBoaShWJykpIl0sWzQsMSwiXFxPT19YKFxcdmFycGhpKFYnKSkiXSxbMCwxLCJcXHBzaV5cXHNoYXJwX1YiXSxbMiwzLCJcXHBzaV5cXHNoYXJwX3tWJ30iXSxbMCwyLCJcXG9we3Jlc31fe1YsVid9IiwyXSxbMSwzLCJcXG9we3Jlc31fe1YsVid9Il0sWzUsNCwiXFx2YXJwaGleXFxzaGFycF97XFx2YXJwaGkoVil9IiwyXSxbNyw2LCJcXHZhcnBoaV5cXHNoYXJwX3tcXHZhcnBoaShWJyl9IiwyXSxbNCw2LCJcXG9we3Jlc31fe1xcdmFycGhpKFYpLFxcdmFycGhpKFYnKX0iLDJdLFs1LDcsIlxcb3B7cmVzfV97XFx2YXJwaGkoViksXFx2YXJwaGkoVicpfSJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\OO_Y(V)} & {\psi_*\OO_X(V)} && {\varphi_*\OO_Y(\varphi(V))} & {\OO_X(\varphi(V))} \\
		{\OO_Y(V')} & {\psi_*\OO_X(V')} && {\varphi_*\OO_Y(\varphi(V'))} & {\OO_X(\varphi(V'))}
		\arrow["{\psi^\sharp_V}", from=1-1, to=1-2]
		\arrow["{\psi^\sharp_{V'}}", from=2-1, to=2-2]
		\arrow["{\op{res}_{V,V'}}"', from=1-1, to=2-1]
		\arrow["{\op{res}_{V,V'}}", from=1-2, to=2-2]
		\arrow["{\varphi^\sharp_{\varphi(V)}}"', from=1-5, to=1-4]
		\arrow["{\varphi^\sharp_{\varphi(V')}}"', from=2-5, to=2-4]
		\arrow["{\op{res}_{\varphi(V),\varphi(V')}}"', from=1-4, to=2-4]
		\arrow["{\op{res}_{\varphi(V),\varphi(V')}}", from=1-5, to=2-5]
	\end{tikzcd}\]
	commute because it is the same as the one on the right. Additionally, we can quickly check that we have a morphism of locally ringed spaces; by \autoref{rem:naturalmapisiso}, we are actually given that any $x\in X$ has
	\[\OO_{Y,\varphi(x)}\to(\varphi_*\OO_X)_{\varphi(x)}\simeq\OO_{X,x}\]
	is a map of local rings. Inverting this map, we see that any $y\in Y$ has
	\[\OO_{X,\psi(y)}\to(\psi_*\OO_Y)_{\psi(y)}\simeq\OO_{Y,y}\]
	is also a map of local rings.

	It remains to see that $(\psi,\psi^\sharp)$ is actually the inverse of $(\varphi,\varphi^\sharp)$. On one side, we see that
	\[(\varphi,\varphi^\sharp)\circ(\psi,\psi^\sharp)=(\varphi\circ\psi,\varphi_*\psi^\sharp\circ\varphi^\sharp).\]
	Now, $\varphi\circ\psi=\id_Y$ by definition of $\psi$, and for any $U\subseteq X$, we note $\psi^\sharp_{\varphi^{-1}(U)}=(\varphi^\sharp_U)^{-1}$ by definition of $\psi^\sharp$. So the above is indeed $\id_{(Y,\OO_Y)}$. The other side inverse check is entirely symmetric.
\end{proof}
For schemes, we will be very interested in special (open) subsets of the underlying topological space. The following lemma will be of use.
\begin{lemma} \label{lem:restrictmorphism}
	Fix a morphism $(\varphi,\varphi^\sharp)\colon(X,\OO_X)\to(Y,\OO_Y)$ of locally ringed spaces. Then, for any open subset $U\subseteq Y$, $\varphi$ will restrict to a morphism of locally ringed spaces
	\[(\varphi,\varphi^\sharp)|_U\colon\left(\varphi^{-1}(U),\OO_X|_{\varphi^{-1}U}\right)\to(U,\OO_Y|_U).\]
	In particular, if $(\varphi,\varphi^\sharp)$ is an isomorphism, then $(\varphi,\varphi^\sharp)|_U$ is an isomorphism.
\end{lemma}
\begin{proof}
	We will define $(\varphi,\varphi^\sharp)_U$ by hand. We set $\psi\colon\varphi^{-1}(U)\to U$ to just be $\varphi|_{\varphi^{-1}(U)}$, which is continuous by restriction. Additionally, for any open subset $V\subseteq U$, we define
	\[\psi^\sharp_V\colon\underbrace{\OO_Y|_U(V)}_{\OO_Y(V)}\to\underbrace{\psi_*(\OO_X|_{\varphi^{-1}U})(V)}_{\OO_X(\psi^{-1}(V))}\]
	as just $\varphi^\sharp_V$, which makes sense because $\OO_X(\psi^{-1}(V))=\OO_X(\varphi^{-1}(V))=\varphi_*\OO_X(V)$. To see that $\psi^\sharp$ assembles into a morphism of sheaves, we see that any $V'\subseteq V\subseteq U$ makes the left diagram of
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXE9PX1l8X1UoVikiXSxbMSwwLCJcXHBzaV8qKFxcT09fWHxfe1xcdmFycGhpXnstMX1VfSkoVikiXSxbMCwxLCJcXE9PX1l8X1UoVicpIl0sWzEsMSwiXFxwc2lfKihcXE9PX1h8X3tcXHZhcnBoaV57LTF9VX0pKFYpIl0sWzMsMCwiXFxPT19ZKFYpIl0sWzMsMSwiXFxPT19ZKFYnKSJdLFs0LDAsIlxcdmFycGhpXypcXE9PX1goVikiXSxbNCwxLCJcXHZhcnBoaV8qXFxPT19YKFYnKSJdLFswLDIsIlxcb3B7cmVzfV97VixWJ30iLDJdLFsxLDMsIlxcb3B7cmVzfV97VixWJ30iXSxbMCwxLCJcXHBzaV5cXHNoYXJwX1YiXSxbMiwzLCJcXHBzaV5cXHNoYXJwX3tWJ30iXSxbNCw2LCJcXHZhcnBoaV5cXHNoYXJwX1YiXSxbNSw3LCJcXHZhcnBoaV5cXHNoYXJwX3tWJ30iXSxbNCw1LCJcXG9we3Jlc31fe1YsVid9IiwyXSxbNiw3LCJcXG9we3Jlc31fe1YsVid9Il1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\OO_Y|_U(V)} & {\psi_*(\OO_X|_{\varphi^{-1}U})(V)} && {\OO_Y(V)} & {\varphi_*\OO_X(V)} \\
		{\OO_Y|_U(V')} & {\psi_*(\OO_X|_{\varphi^{-1}U})(V)} && {\OO_Y(V')} & {\varphi_*\OO_X(V')}
		\arrow["{\op{res}_{V,V'}}"', from=1-1, to=2-1]
		\arrow["{\op{res}_{V,V'}}", from=1-2, to=2-2]
		\arrow["{\psi^\sharp_V}", from=1-1, to=1-2]
		\arrow["{\psi^\sharp_{V'}}", from=2-1, to=2-2]
		\arrow["{\varphi^\sharp_V}", from=1-4, to=1-5]
		\arrow["{\varphi^\sharp_{V'}}", from=2-4, to=2-5]
		\arrow["{\op{res}_{V,V'}}"', from=1-4, to=2-4]
		\arrow["{\op{res}_{V,V'}}", from=1-5, to=2-5]
	\end{tikzcd}\]
	commutes because it is the same as the right diagram. Continuing, $(\psi,\psi^\sharp)$ is a morphism of locally ringed spaces because any $x\in\varphi^{-1}(U)$ makes the diagram
	% https://q.uiver.app/?q=WzAsMTAsWzAsMCwiKFxcT09fWXxfVSlfe1xccHNpKHgpfSJdLFswLDEsIlxcT09fe1ksXFx2YXJwaGkoeCl9Il0sWzEsMCwiXFxsZWZ0KFxccHNpXyooXFxPT19YfF97XFx2YXJwaGleey0xfShVKX0pXFxyaWdodClfe1xccHNpKHgpfSJdLFsyLDAsIihcXE9PX1h8X3tcXHZhcnBoaV57LTF9KFUpfSlfeCJdLFsyLDEsIlxcT09fe1gseH0iXSxbMSwxLCIoXFx2YXJwaGlfKlxcT09fWClfe1xcdmFycGhpKHgpfSJdLFszLDAsIlsoVixzKV0iXSxbNCwwLCJcXHBzaV5cXHNoYXJwX1Yocyl8X3giXSxbMywxLCJbKFYscyldIl0sWzQsMSwiXFx2YXJwaGleXFxzaGFycF9WKHMpfF94Il0sWzAsMV0sWzAsMiwiXFxwc2leXFxzaGFycF97XFxwc2koeCl9Il0sWzEsNSwiXFx2YXJwaGleXFxzaGFycF97XFx2YXJwaGkoeCl9Il0sWzIsM10sWzUsNF0sWzMsNF0sWzYsOCwiIiwxLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNyw5LCIiLDEseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs2LDcsIiIsMSx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbOCw5LCIiLDEseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{(\OO_Y|_U)_{\psi(x)}} & {\left(\psi_*(\OO_X|_{\varphi^{-1}(U)})\right)_{\psi(x)}} & {(\OO_X|_{\varphi^{-1}(U)})_x} & {[(V,s)]} & {\psi^\sharp_V(s)|_x} \\
		{\OO_{Y,\varphi(x)}} & {(\varphi_*\OO_X)_{\varphi(x)}} & {\OO_{X,x}} & {[(V,s)]} & {\varphi^\sharp_V(s)|_x}
		\arrow[from=1-1, to=2-1]
		\arrow["{\psi^\sharp_{\psi(x)}}", from=1-1, to=1-2]
		\arrow["{\varphi^\sharp_{\varphi(x)}}", from=2-1, to=2-2]
		\arrow[from=1-2, to=1-3]
		\arrow[from=2-2, to=2-3]
		\arrow[from=1-3, to=2-3]
		\arrow[Rightarrow, no head, from=1-4, to=2-4]
		\arrow[Rightarrow, no head, from=1-5, to=2-5]
		\arrow[maps to, from=1-4, to=1-5]
		\arrow[maps to, from=2-4, to=2-5]
	\end{tikzcd}\]
	commute, where the vertical morphisms are the isomorphisms of \autoref{lem:invimagestalk}. In particular, the top composite is a map of local rings because the bottom one is.

	It remains to show that $(\varphi,\varphi^\sharp)$ being an isomorphism forces $(\psi,\psi^\sharp)$ is an isomorphism. Well, to see that $\psi\colon\varphi^{-1}(U)\to U$ is a homeomorphism, note that $\psi$ is an injective, continuous, open map as inherited from $\varphi$, and $\psi$ is surjective onto $U$ by construction. Additionally, $\psi^\sharp$ is an isomorphism because its components morphisms come from $\varphi^\sharp$, which are all isomorphisms. Thus, we are done by \autoref{lem:betterlocaliso}.
\end{proof}

\subsection{\texorpdfstring{$K$}{ K}-points}
The morphism of a locally ringed space contains a lot of data, so it will be helpful to see all this data go to use. Here's an example.
\begin{definition}[Residue field]
	Fix a locally ringed space $(X,\OO_X)$. Given a point $x\in X$, define $\mf m_x\subseteq\OO_{X,x}$ to be the unique maximal ideal of $\OO_{X,x}$. Then the \textit{residue field} of $x$ is $k(x)\coloneqq\OO_{X,x}/\mf m_x$.
\end{definition}
\begin{exe}
	Fix a locally ringed space $(X,\OO_X)$ and a field $K$. Then the data of a morphism of locally ringed spaces $(\varphi,\varphi^\sharp)\colon(\Spec K,\OO_{\Spec K})\to(X,\OO_X)$ can be equivalently presented as a point $p\in X$ equipped with an inclusion $\iota\colon k(p)\to K$.
\end{exe}
Intuitively, we are saying that morphisms from the affine scheme over $K$ correspond to ``$K$-points of $X$,'' for a suitable definition of $K$-points.
\begin{proof}
	Let $M$ be the set of morphisms $(\varphi,\varphi^\sharp)\colon(\Spec K,\OO_{\Spec K})\to(X,\OO)$, and let $P$ be the set of ordered pairs $(p,\iota)$ where $p\in X$ is a point and $\iota\colon k(p)\into K$ is an embedding. We exhibit a bijection between $M$ and $P$. Here are the maps.
	\begin{itemize}
		\item We exhibit a map $\alpha\colon M\to P$. Well, given a morphism $(\varphi,\varphi^\sharp)\colon(\Spec K,\OO_{\Spec K})\to(X,\OO)$, we have an underlying continuous map $\varphi\colon\Spec K\to X$ and sheaf morphism $\varphi^\sharp\colon\OO\to\varphi_*\OO_{\Spec K}$.
		
		Now, $(0)\in\Spec K$, so we {set $p\coloneqq\varphi((0))$}. Then {$\varphi^\sharp$ will provide a map}
		\[\OO_p\stackrel{\varphi^\sharp_p}\to(\varphi_*\OO_{\Spec K})_{p}\to\OO_{\Spec K,(0)}\cong K_{(0)}=K.\]
		This is supposed to be a map of local rings, so the pre-image of the maximal ideal $(0)\subseteq K$ is supposed to equal $\mf m_p$, so we actually induce an embedding $\iota\colon\OO_p/\mf m_p\into K$. Thus, we set $\alpha((\varphi,\varphi^\sharp))=(p,\iota)$.

		\item We exhibit a map $\beta\colon P\to M$. We are provided with a point $p\in X$ and an inclusion $\OO_p/\mf m_p\to K$. Here is the defining data.
		\begin{itemize}
			\item Define $\varphi\colon\Spec K\to X$ by {$\varphi((0))\coloneqq p$}. To see that this continuous, note any open subset $U\subseteq X$ containing $p$ have $\varphi^{-1}(U)=\{(0)\}=\Spec K$, which is open. Otherwise, the open subset $U\subseteq X$ does not contain $p$, so $\varphi^{-1}(U)=\emp$, which is still open.
			\item Given an open subset $U\subseteq X$, we define $\varphi^\sharp_U\colon\OO(U)\to\varphi_*\OO_{\Spec K}(U)$. If $U$ does not contain $p$, then
			\[\varphi_*\OO_{\Spec K}(U)=\OO_{\Spec K}\left(\varphi^{-1}(U)\right)=\OO_{\Spec K}(\emp)=0,\]
			so we set $\varphi^\sharp_U$ to be the zero map. Otherwise, when $U$ contains $p$, we see
			\[\varphi_*\OO_{\Spec K}(U)=\OO_{\Spec K}\left(\varphi^{-1}(U)\right)=\OO_{\Spec K}(\Spec K)=K,\]
			so we need to exhibit a map $\varphi^\sharp_U\colon\OO(U)\to K$. For this, we use the composite map
			\[\arraycolsep=1.4pt\begin{array}{ccccccc}
				\OO(U) &\to& \OO_p &\to& \OO_p/\mf m_p &\stackrel\iota\to& K \\
				s &\mapsto& s|_p &\mapsto& (s|_p+\mf m_p) &\mapsto& \iota(s|_p+\mf m_p)
			\end{array}\]
			as our $\varphi^\sharp_U$.
		\end{itemize}
		We quickly check that $\varphi^\sharp$ assembles into a map of sheaves. Fix open sets $U'\subseteq U$, and we want the diagram
		% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXE9PKFUpIl0sWzAsMSwiXFxPTyhVJykiXSxbMSwwLCJcXHZhcnBoaV8qXFxPT197XFxTcGVjIEt9KFUpIl0sWzEsMSwiXFx2YXJwaGlfKlxcT09fe1xcU3BlYyBLfShVJykiXSxbMCwyLCJcXHZhcnBoaV5cXHNoYXJwX1UiXSxbMCwxLCJcXG9we3Jlc31fe1UsVSd9IiwyXSxbMSwzLCJcXHZhcnBoaV5cXHNoYXJwX3tVJ30iXSxbMiwzLCJcXG9we3Jlc31fe1UsVSd9Il1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\begin{equation}
			\begin{tikzcd}
				{\OO(U)} & {\varphi_*\OO_{\Spec K}(U)} \\
				{\OO(U')} & {\varphi_*\OO_{\Spec K}(U')}
				\arrow["{\varphi^\sharp_U}", from=1-1, to=1-2]
				\arrow["{\op{res}_{U,U'}}"', from=1-1, to=2-1]
				\arrow["{\varphi^\sharp_{U'}}", from=2-1, to=2-2]
				\arrow["{\op{res}_{U,U'}}", from=1-2, to=2-2]
			\end{tikzcd} \label{eq:definingbetadiagram}
		\end{equation}
		to commute. We have two cases.
		\begin{itemize}
			\item If $p\notin U'$, then $\varphi_*\OO_{\Spec K}(U')=0$, so \autoref{eq:definingbetadiagram} commutes for free.
			\item If $p\in U'$, then $p\in U$ as well, so \autoref{eq:definingbetadiagram} becomes the diagram
			% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXE9PKFUpIl0sWzAsMSwiXFxPTyhVJykiXSxbMSwwLCJLIl0sWzEsMSwiSyJdLFszLDAsInMiXSxbNCwwLCJcXGlvdGEoc3xfcCtcXG1mIG1fcCkiXSxbMywxLCJzfF97VSd9Il0sWzQsMSwiXFxpb3RhKHN8X3ArXFxtZiBtX3ApIl0sWzAsMiwiXFx2YXJwaGleXFxzaGFycF9VIl0sWzAsMSwiXFxvcHtyZXN9X3tVLFUnfSIsMl0sWzEsMywiXFx2YXJwaGleXFxzaGFycF97VSd9Il0sWzIsMywiXFxvcHtyZXN9X3tVLFUnfSJdLFs0LDYsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw1LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzUsNywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs2LDcsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}
				{\OO(U)} & K && s & {\iota(s|_p+\mf m_p)} \\
				{\OO(U')} & K && {s|_{U'}} & {\iota(s|_p+\mf m_p)}
				\arrow["{\varphi^\sharp_U}", from=1-1, to=1-2]
				\arrow["{\op{res}_{U,U'}}"', from=1-1, to=2-1]
				\arrow["{\varphi^\sharp_{U'}}", from=2-1, to=2-2]
				\arrow["{\op{res}_{U,U'}}", from=1-2, to=2-2]
				\arrow[maps to, from=1-4, to=2-4]
				\arrow[maps to, from=1-4, to=1-5]
				\arrow[maps to, from=1-5, to=2-5]
				\arrow[maps to, from=2-4, to=2-5]
			\end{tikzcd}\]
			which does indeed commute.
		\end{itemize}
		Next we check that $(\varphi,\varphi^\sharp)$ assembles into a morphism of locally ringed spaces. For this we have to check that, for any $\mf p\in\Spec K$, the composite
		\[\OO_{\varphi(\mf p)} \stackrel{\varphi^\sharp_p}\to (\varphi_*\OO_{\Spec K})_{\varphi(\mf p)} \to (\OO_{\Spec K})_\mf p\]
		is a map of local rings. Notably, the only point we have to check this is on $\mf p=(0)$ because $\Spec K=\{(0)\}$, and $\varphi((0))=p$, so we are checking that
		\[\arraycolsep=1.4pt\begin{array}{cccccccccc}
			\OO_{p} &\stackrel{\varphi^\sharp_p}\to& (\varphi_*\OO_{\Spec K})_{p} &\to& (\OO_{\Spec K})_0 \\
			{[(U,s)]} &\mapsto& \big[(U,\iota(s|_p+\mf m_p))\big] &\mapsto& \big[(\varphi^{-1}(U),\iota(s|_p+\mf m_p))\big]
		\end{array}\]
		is a map of local rings. Notably, $\varphi^{-1}(U)=\{(0)\}=\Spec K=D(1)$, so we can chain the above composite with the isomorphism $(\OO_{\Spec K})_0\cong K_{(0)}=K$, which will send $[(D(1),\overline s)]$ to $\overline s$. So we are showing that
		\[\arraycolsep=1.4pt\begin{array}{ccc}
			\OO_{p} &\to& K \\
			{[(U,s)]} &\mapsto& \iota(s|_p+\mf m_p)
		\end{array}\]
		is a map of local rings. (Namely, isomorphisms are maps of local rings, so we can ``unchain'' the above map with the previous isomorphisms to recover the needed map of local rings.) Well, the pre-image of the maximal ideal $(0)\subseteq K$ consists of sections $s_p\in\OO_p$ such that $\iota(s_p+\mf m_p)=0$; because $\iota$ is injective, we see that this is equivalent to $s_p\in\mf m_p$.
		
		So indeed, the pre-image of the maximal ideal $(0)$ is $\mf m_p$, verifying that we have a map of local rings. As such, we may define $\beta((p,\iota))\coloneqq(\varphi,\varphi^\sharp)$.
	\end{itemize}
	We now have to show that $\alpha$ and $\beta$ are inverses.
	\begin{itemize}
		\item Fix some $(p,\iota)\in P$. We show that $(\alpha\circ\beta)((p,\iota))=(p,\iota)$. Set $(\varphi,\varphi^\sharp)\coloneqq\beta((p,\iota))$, and we need to compute $\alpha((\varphi,\varphi^\sharp))$. To start, by construction, we see
		\[\varphi((0))=p,\]
		as it should be. To solve for $\iota$, we note that above we tracked through the map
		\[\arraycolsep=1.4pt\begin{array}{cccccccccc}
			\OO_{p} &\stackrel{\varphi^\sharp_p}\to& (\varphi_*\OO_{\Spec K})_{p} &\to& (\OO_{\Spec K})_0 &\cong& K_{(0)} &=& K \\
			{[(U,s)]} &\mapsto& \big[(U,\iota(s|_p+\mf m_p))\big] &\mapsto& \big[(\varphi^{-1}(U),\iota(s|_p+\mf m_p))\big] &\mapsto&  & & \iota(s|_p+\mf m_p)
		\end{array}\]
		as having kernel $\mf m_p$, so the induced map $\OO_p/\mf m_p\to K$ is just $(s_p+\mf m_p)\mapsto\iota(s_p+\mf m_p)$. Thus, this map induced by $\alpha((\varphi,\varphi^\sharp))$ is exactly $\iota$, as needed.
		\item Fix some $(\varphi,\varphi^\sharp)\in M$. We show that $(\beta\circ\alpha)((\varphi,\varphi^\sharp))=(\varphi,\varphi^\sharp)$. Set $(p,\iota)\coloneqq\alpha((\varphi,\varphi^\sharp))$ and $(\psi,\psi^\sharp)\coloneqq\beta((p,\iota))$, and we will show $(\psi,\psi^\sharp)=(\varphi,\varphi^\sharp)$. By construction, we see $\psi((0))=p$, so we get $\psi=\varphi$ immediately.

		To show $\psi^\sharp=\varphi^\sharp$, we need to show that $\psi^\sharp_U=\varphi^\sharp_U$ as functions $\OO(U)\to\varphi_*\OO_{\Spec K}(U)$ for each open $U\subseteq X$. We have two cases.
		\begin{itemize}
			\item If $p\notin U$, then $\varphi_*\OO_{\Spec K}(U)=\OO_{\Spec K}\left(\varphi^{-1}(U)\right)=\OO_{\Spec K}(\emp)=0$, so $\psi^\sharp_U$ and $\varphi^\sharp_U$ must both be the zero map because $0$ is terminal.
			\item Otherwise, we have $p\in U$; note that $\varphi^\sharp_U,\psi^\sharp_U\colon\OO(U)\to K$ now. By definition, $\psi^\sharp_U$ sends a section $s\in\OO(U)$ to $\iota(s|_p+\mf m_p)$; by definition, $\iota$ sends some $s|_p+\mf m_p$ down the composite
			\[\arraycolsep=1.4pt\begin{array}{ccccccccc}
				\OO_p &\stackrel{\varphi^\sharp_p}\to& (\varphi_*\OO_{\Spec K})_{p} &\to& \OO_{\Spec K,(0)} &\cong& K_{(0)} &=& K \\
				{[(U,s)]} &\mapsto& \big[(U,\varphi^\sharp_U(s))\big] &\mapsto& \big[(\varphi^{-1}(U),\varphi^\sharp_U(s))\big] &\mapsto& & & \varphi^\sharp_U(s)
			\end{array}\]
			which verifies that $\psi^\sharp_U$ is sending $s\in\OO(U)$ all the way to $\varphi^\sharp_U(s)$.
		\end{itemize}
		From the above, it follows that $\psi^\sharp_U=\varphi^\sharp_U$, which finishes this last check.
		\qedhere
	\end{itemize}
\end{proof}
\begin{remark}
	There is a similar story one can tell for $K[\varepsilon]/(\varepsilon^2)$, where we can see that we will also want to keep track of some differential information from the $\varepsilon$.
\end{remark}

\subsection{Schemes}
We finally arrive at the definition of a scheme.
\begin{definition}[Scheme] \nirindex{Affine open subscheme}
	A \textit{scheme} is a ringed space $(X,\mc O_X)$ such that, for each $x\in X$, there is an open set $U\subseteq X$ containing $x$ such that the restriction
	\[(U,\mc O_X|_U)\]
	is isomorphic (as a locally ringed space) to an affine scheme $(\Spec A,\OO_{\Spec A})$. We call the $(U,\mc O_X|_U)$ an \textit{affine open subscheme} of $(X,\OO_X)$.
\end{definition}
Here are some quick facts about this definition.
\begin{lemma} \label{lem:openbasescheme}
	Fix a ring $A$ and a distinguished open set $D(f)\subseteq\Spec A$. Then
	\[(A_f,\OO_{\Spec A_f})\cong(D(f),\OO_{\Spec A}|_{D(f)}).\]
\end{lemma}
\begin{proof}
	The underlying homeomorphism is provided by \autoref{exe:distinguishedisaffine}; namely, set $\psi\coloneqq D(f)\to\Spec A_f$ by $\psi\colon\mf p\mapsto\mf pA_f$, which we showed is a homeomorphism. By \autoref{lem:betterlocaliso}, it suffices to exhibit a sheaf isomorphism
	\[\psi^\sharp\colon\OO_{\Spec A_f}\to\psi_*\OO_{\Spec A}|_{D(f)}.\]
	By \autoref{lem:sheafonabasefunctor}, it suffices provide a sheaf isomorphism on the distinguished base. Well, given a distinguished basis set $D(a/f^m)\subseteq\Spec A_f$, we showed in \autoref{exe:distinguishedisaffine} that $\psi^{-1}(D(a/f^m))=D(a)\subseteq D(f)$, so we define
	\[\psi^\sharp_{D(a/f^m)}\colon\OO_{\Spec A_f}\left(D(a/f^m)\right)\to\OO_{\Spec A}\left(\psi^{-1}(D(a))\right)\]
	as the string of isomorphisms
	\[\OO_{\Spec A_f}\left(D(a/f^m)\right)=\OO_{\Spec A_f}\left(D(a)\right)\simeq A_{f,a}\simeq A_a\simeq\OO_{\Spec A}(D(a)),\]
	where $A_{f,a}\simeq A_a$ because $D(a)\subseteq D(f)$. In particular, this assembles into a morphism of sheaves on a base because, for $D(a/f^m)\subseteq D(b/f^n)$, the diagram
	% https://q.uiver.app/?q=WzAsMTAsWzAsMCwiXFxPT197XFxTcGVjIEFfZn1cXGxlZnQoRChhL2ZebSlcXHJpZ2h0KSJdLFswLDEsIlxcT09fe1xcU3BlYyBBX2Z9XFxsZWZ0KEQoYi9mXm4pXFxyaWdodCkiXSxbMSwwLCJcXE9PX3tcXFNwZWMgQV9mfVxcbGVmdChEKGEpXFxyaWdodCkiXSxbMSwxLCJcXE9PX3tcXFNwZWMgQV9mfVxcbGVmdChEKGIpXFxyaWdodCkiXSxbMiwwLCJBX3tmLGF9Il0sWzIsMSwiQV97ZixifSJdLFszLDAsIkFfYSJdLFszLDEsIkFfYiJdLFs0LDAsIlxcT09fe1xcU3BlYyBBfShEKGEpKSJdLFs0LDEsIlxcT09fe1xcU3BlYyBBfShEKGIpKSJdLFswLDIsIiIsMCx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzEsMywiIiwwLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMCwxLCJcXG9we3Jlc30iLDJdLFsyLDMsIlxcb3B7cmVzfSIsMl0sWzIsNCwiXFxzaW1lcSIsMyx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6Im5vbmUifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFszLDUsIlxcc2ltZXEiLDMseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNCw2LCJcXHNpbWVxIiwzLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzUsNywiXFxzaW1lcSIsMyx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6Im5vbmUifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs2LDgsIlxcc2ltZXEiLDMseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNyw5LCJcXHNpbWVxIiwzLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzgsOSwiXFxvcHtyZXN9IiwyXV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}[column sep=tiny]
		{\OO_{\Spec A_f}\left(D(a/f^m)\right)} & {\OO_{\Spec A_f}\left(D(a)\right)} & {A_{f,a}} & {A_a} & {\OO_{\Spec A}(D(a))} \\
		{\OO_{\Spec A_f}\left(D(b/f^n)\right)} & {\OO_{\Spec A_f}\left(D(b)\right)} & {A_{f,b}} & {A_b} & {\OO_{\Spec A}(D(b))}
		\arrow[Rightarrow, no head, from=1-1, to=1-2]
		\arrow[Rightarrow, no head, from=2-1, to=2-2]
		\arrow["{\op{res}}"', from=1-1, to=2-1]
		\arrow["{\op{res}}"', from=1-2, to=2-2]
		\arrow["\simeq"{marking}, draw=none, from=1-2, to=1-3]
		\arrow["\simeq"{marking}, draw=none, from=2-2, to=2-3]
		\arrow["\simeq"{marking}, draw=none, from=1-3, to=1-4]
		\arrow["\simeq"{marking}, draw=none, from=2-3, to=2-4]
		\arrow["\simeq"{marking}, draw=none, from=1-4, to=1-5]
		\arrow["\simeq"{marking}, draw=none, from=2-4, to=2-5]
		\arrow["{\op{res}}"', from=1-5, to=2-5]
	\end{tikzcd}\]
	because all the maps are just localization maps in various orders. In particular, all elements in the top row can be written in the form $s/a^m$ for some $s\in A$ and $m\in\NN$, which makes all maps on the top the identity. Then transporting this element to the bottom row, all elements become exactly $s/a^m$, so the diagram is indeed commuting.
\end{proof}
\begin{cor}
	Fix a scheme $(X,\OO_X)$. Then any open subset $U\subseteq X$ induces an open subscheme $(U,\OO_X|_U)$.
\end{cor}
\begin{proof}
	The affine case follows from \autoref{lem:openbasescheme}. The general case follows by reducing to an affine open cover.

	To see this explicitly, fix some $p\in U$. We need to find an open subset $U_p\subseteq U$ such that $(U_p,\OO_X|_U|_{U_p})$ is an affine open subscheme of $X$; quickly, note we will have $\OO_X|_U|_{U_p}=\OO_X|_{U_p}$, which is clear on the level of open sets, and the restriction maps are just induced.

	Because $X$ is a scheme, we can find some affine open subset $V_p\subseteq X$ containing $p$, so find our isomorphism
	\[(\varphi,\varphi^\sharp)\colon(V_p,\OO_X|_{V_p})\cong(\Spec B_p,\OO_{\Spec B_p}).\]
	Now, $U\cap V_p\subseteq V_p$ is an open subset, so $\varphi(U)\subseteq\Spec B_p$ is still an open subset. Thus, we can find an element $D(f)\subseteq\varphi(U)$ of the distinguished base containing $\varphi(p)$. Setting $U_p\coloneqq\varphi^{-1}(D(f))$ (which is still open), we have the chain of isomorphisms
	\[(U_p,\OO_X|_{U_p})\stackrel{(\varphi,\varphi^\sharp)|_{D(f)}}\cong(D(f),\OO_{\Spec B_p}|_{D(f)})\cong(\Spec(B_p)_f,\OO_{\Spec(B_p)_f}).\]
	Namely, the first isomorphism is from \autoref{lem:restrictmorphism}, and the second isomorphism is from \autoref{lem:openbasescheme}.
\end{proof}

\subsection{Geometry Is Opposite Algebra}
Here is the fun part of our definition of morphisms for locally ringed spaces.
\begin{proposition} \label{prop:geoisoppalg}
	The functors
	\[\arraycolsep=1.4pt\begin{array}{ccc}
		\mathrm{Rings}\opp &\simeq& \mathrm{AffSch} \\
		A &\mapsto& (\Spec A,\OO_{\Spec A}) \\
		\OO_X(X) &\mapsfrom& (X,\OO_X)
	\end{array}\]
	define an equivalence of categories.
\end{proposition}
\begin{proof}
	For brevity, let $\OO_A$ denote the structure sheaf of a ring $A$. Now, the leftward map is essentially surjective by definition of an affine scheme, so the main point is that we have to show
	\[\op{Mor}_{\mathrm{AffSch}}\left((\Spec B,\OO_B),(\Spec A,\OO_A)\right)\cong\op{Hom}_{\mathrm{Ring}}(A,B).\]
	We define the left and right maps separately.
	\begin{itemize}
		\item In one direction, suppose we have a ring homomorphism $f^\sharp\colon A\to B$, and we need to recover a morphism of affine schemes. We already have a continuous map $f\coloneqq\Spec f^\sharp$ going $\Spec B\to\Spec A$.
	
		Additionally, we can extend $f^\sharp$ to be a sheaf morphism $f^\sharp\colon\OO_A\to f_*\OO_B$. It is enough to define this morphism on a base: pick up some open $D(s)\subseteq\Spec A$ so that $\OO_A(D(s))=A_s$. It follows
		\[f_*\OO_B(D(s))=\OO_B\left(f^{-1}(D(s))\right)=\OO_B(D(f^\sharp s))=B_{f^\sharp(s)},\]
		so there is a natural map $f^\sharp(D(s))\colon A_s\to B_{f^\sharp(s)}$. From here, it's not hard to check that this gives a morphism of sheaves on a base.

		Lastly, we need to check that we actually have a morphism of locally ringed spaces. Well, given $\mf p\in\Spec B$, the stalk map turns out to be
		\[f^\sharp_{f(\mf p)}\colon A_{f(\mf p)}\to B_\mf p,\]
		which we can see to be a local ring homomorphism by passing through the maximal ideal $\mf m_{A,f(\mf p)}$ by hand.

		For notation, we define $\Spec f^\sharp$ to be this morphism of local rings $(f,f^\sharp)$.

		\item In the other direction, suppose we have a morphism of affine schemes $(f,f^\sharp)$. Then $f^\sharp$ as a morphism of locally ringed spaces can take global sections to recover a ring homomorphism.
	\end{itemize}
	To finish the proof, we have to show that the composition of our two maps is the identity.
	\begin{itemize}
		\item Starting with a ring homomorphism, extending it to a morphism of affine schemes, and then restricting it back to a ring homomorphism will overall unsurprisingly do nothing.
		\item Suppose we start with $(f,f^\sharp)\colon(\Spec B,\OO_B)\to(\Spec A,\OO_A)$ as a morphism of affine schemes. Taking global sections gives
		\[f^\sharp_{\Spec A}\colon A\to B.\]
		Define $\varphi\coloneqq f^\sharp_{\Spec A}$. We want to show that $\Spec\varphi=(f,f^\sharp)$. Note we are starting with
		\[\varphi\colon\OO_A(\Spec A)\to\OO_B(\Spec B).\]
		Now, fix $\mf p\in\Spec B$ going to some $f(\mf p)\in\Spec A$. Taking stalks everywhere, we see that the diagram
		% https://q.uiver.app/?q=WzAsNCxbMCwwLCJBIl0sWzAsMSwiQV97ZihcXG1mIHApfSJdLFsxLDEsIkJfXFxtZiBwIl0sWzEsMCwiQiJdLFswLDMsIlxcdmFycGhpIl0sWzEsMiwiZl5cXHNoYXJwX3tmKFxcbWYgcCl9Il0sWzAsMV0sWzMsMl1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			A & B \\
			{A_{f(\mf p)}} & {B_\mf p}
			\arrow["\varphi", from=1-1, to=1-2]
			\arrow["{f^\sharp_{f(\mf p)}}", from=2-1, to=2-2]
			\arrow[from=1-1, to=2-1]
			\arrow[from=1-2, to=2-2]
		\end{tikzcd}\]
		commutes. In particular, we see that $\varphi^{-1}(\mf p)\subseteq f(\mf p)$ by tracking units through the bottom map. On the other hand, $f^\sharp_{f(\mf p)}$ was assumed to be a local ring homomorphism, so actually $\varphi^{-1}(\mf p)=f(\mf p)$ follows. Thus, $\Spec\varphi\colon\Spec B\to\Spec A$ matches with our continuous map $f$!

		It remains to show that $f^\sharp$ agrees with $\Spec\varphi$ as a morphism of sheaves. Well, it suffices to check that these agree on stalks by \autoref{prop:stalkmorphism}. To begin, we note that $\varphi$ on stalks looks like $\varphi^\sharp_{f(\mf p)}$ making the bottom arrow of the diagram
		% https://q.uiver.app/?q=WzAsNCxbMCwwLCJBIl0sWzEsMCwiQiJdLFswLDEsIkFfe2YoXFxtZiBwKX0iXSxbMSwxLCJCX1xcbWYgcCJdLFswLDJdLFswLDEsIlxcdmFycGhpIl0sWzEsM10sWzIsMywiIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			A & B \\
			{A_{f(\mf p)}} & {B_\mf p}
			\arrow[from=1-1, to=2-1]
			\arrow["\varphi", from=1-1, to=1-2]
			\arrow[from=1-2, to=2-2]
			\arrow[dashed, from=2-1, to=2-2]
		\end{tikzcd}\]
		commute. But we can also put $f^\sharp_{f(\mf p)}$ here even though this arrow is unique by the universal property of localization. This finishes this check.
		\qedhere
	\end{itemize}
\end{proof}
\begin{remark}
	In some sense, \autoref{prop:geoisoppalg} is intended to be fact-checking: at the end of the day, we really just want the categorical equivalence and don't care much for its proof.
\end{remark}
We will quickly provide an example that says that we really do need to pay attention to morphisms of locally ringed spaces.
\begin{nex}
	Consider ring homomorphism $\ZZ_p\to\QQ_p$. However, $\Spec\ZZ_p=\{(0),(p)\}$ while $\Spec\QQ_p=\{(0)\}$. From the natural embedding $\iota\colon\ZZ_p\to\QQ_p$, we get a map sending $(0)\mapsto(0)$, and it will not be possible to get a ring homomorphism to send $(0)$ to $(p)$ because this forces $\QQ_p$ to have torsion. Nonetheless, one can upgrade sending $(0)\mapsto(p)$ to a full morphism of sheaves even though it will not be a morphism of locally ringed spaces.
\end{nex}

\subsection{Scheme Examples}
Schemes have a lot of data. Let's try to make it more concrete; we'll be satisfied with just two examples today. We won't be very rigorous because we haven't defined gluing yet.
\begin{remark}
	Today, we are only gluing two things together at a time because we don't want to worry about the ``cocycle condition'' for gluing.
\end{remark}
Our first example is the projective line. Here is the image of our affine cover.
\begin{center}
	\begin{asy}
		unitsize(1.7cm);
		draw(arc((0,0),1,100,360+80));
		draw(arc((0,0),1.2,-80,260));
	\end{asy}
\end{center}
Here is the rigorization of our affine cover.
\begin{ex}[Projective line]
	Let $R$ be a ring. Then we can glue two copies of $\AA^1_R$ (which is $\Spec R[x]$) as subrings of $\Spec R[x,x^{-1}]$. Then we can identify our copies $\Spec R[x,x^{-1}]$ and $\Spec R[y,y^{-1}]$ by sending $x\mapsto y^{-1}$.
\end{ex}
To be rigorous, one should also define our full sheaf on this topological space; this comes from the homework problem explaining how to glue together sheaves.

Here is the image for our next example.
\begin{center}
	\begin{asy}
		unitsize(1cm);
		draw((0,0)--(2,0));
		fill(circle((1,0),0.1), white);
		dot((1,0.1));
		dot((1,-0.1));
	\end{asy}
\end{center}
Here is the rigorization.
\begin{example}[Doubled origin]
	Let $R$ be a ring. Then we can glue two copies of $\AA^1_R$ (which is $\Spec R[x]$) as subrings of $\Spec R[x,x^{-1}]$. Then we can identify our copies $\Spec R[x,x^{-1}]$ and $\Spec R[y,y^{-1}]$ by sending $x\mapsto y$.
\end{example}
\begin{remark}
	Later on, we will add certain adjectives (namely, ``separated'') which disallow the above scheme.
\end{remark}
For our last example, we return to elliptic curves.
\begin{example}
	We build the elliptic curve carved out by $Y^2Z=X^3-Z^3$. Our two affine patches are
	\[\Spec\frac{k[x,y]}{\left(y^2-x^3+1\right)}\qquad\text{and}\qquad\Spec\frac{k[x,z]}{\left(z-x^3+z^3\right)}.\]
	To glue these together, we identify
	\[\Spec\frac{k[x,y,y^{-1}]}{\left(y^2-x^3+1\right)}\qquad\text{and}\qquad\Spec\frac{k[x,z,z^{-1}]}{\left(z-x^3+z^3\right)}\]
	by sending $x\mapsto x/z$ and $y\mapsto z^{-1}$.
\end{example}

\end{document}