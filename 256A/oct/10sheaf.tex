% !TEX root = ../notes.tex

\documentclass[../notes.tex]{subfiles}

\begin{document}

\section{October 10}

We now shift gears to talk about quasicoherent sheaves.

\subsection{\texorpdfstring{$\OO_X$}{OX}-modules}
Fix a ringed space $(X,\OO_X)$. We have the following definition.
\begin{warn}
	The term ``premodule'' is non-standard. It is more common to refer to a presheaf of $\OO_X$-modules.
\end{warn}
\begin{definition}[{$\OO_X$-premodule}] \nirindex{OX-premodule@$\OO_X$-premodule}
	Fix a ringed space $(X,\OO_X)$. Then an \textit{$\mathcal O_X$-premodule} is a presheaf of abelian groups $\mc F$ on $X$ with a sheaf morphism for scalar multiplication $\cdot\colon\OO_X\times\mc F\to\mc F$ making $\mc F(U)$ an $\mathcal O_X(U)$-module for each open $U\subseteq X$. Namely, given open subsets $V\subseteq U\subseteq X$, the following diagram commutes.
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXE9PX1goVSlcXHRpbWVzXFxtYyBGKFUpIl0sWzAsMSwiXFxPT19YKFYpXFx0aW1lc1xcbWMgRihWKSJdLFsxLDAsIlxcbWMgRihVKSJdLFsxLDEsIlxcbWMgRihWKSJdLFswLDEsIntcXG9we3Jlc31fe1UsVn19XFx0aW1lc1xcb3B7cmVzfV97VSxWfSIsMl0sWzIsMywiXFxvcHtyZXN9X3tVLFZ9Il0sWzAsMiwiXFxjZG90X1UiXSxbMSwzLCJcXGNkb3RfViJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\OO_X(U)\times\mc F(U)} & {\mc F(U)} \\
		{\OO_X(V)\times\mc F(V)} & {\mc F(V)}
		\arrow["{{\op{res}_{U,V}}\times\op{res}_{U,V}}"', from=1-1, to=2-1]
		\arrow["{\op{res}_{U,V}}", from=1-2, to=2-2]
		\arrow["{\cdot_U}", from=1-1, to=1-2]
		\arrow["{\cdot_V}", from=2-1, to=2-2]
	\end{tikzcd}\]
\end{definition}
\begin{defihelper}[{$\OO_X$-module}] \nirindex{OX-module@$\OO_X$-module}
	Fix a ringed space $(X,\OO_X)$. Then an \textit{$\mathcal O_X$-module} is an $\mathcal O_X$-premodule which is also a sheaf.
\end{defihelper}
Quickly, note that we are in fact allowed to write down $\OO_X\times\mc F$ as a sheaf thanks to \autoref{cor:sheafprod}.
\begin{example}
	Given any ringed space $(X,\OO_X)$, we may assign $\mc F(U)\coloneqq0$ for any $U\subseteq X$, giving $0$ the trivial action.
\end{example}
\begin{remark}
	Here's how to think about this definition: for each open $U\subseteq X$, we have a morphism $\OO_X(U)\times\mc F(U)\to\mc F(U)$, which is the map endowing $\mc F(U)$ with $\OO_X(U)$-module structure. However, we should remember the various sheaf things floating around, so we make the action respect restriction.
\end{remark}
Let's quickly see our definitions in action.
\begin{lemma} \label{lem:stalk-is-stalk-mod}
	Fix a ringed space $(X,\OO_X)$ and an $\mathcal O_X$-premodule $\mc F$. For any $p\in X$, we can make $\mc F_p$ naturally into an $\mathcal O_{X,p}$-module.
\end{lemma}
\begin{proof}
	Given germs $[(V,r)]\in\OO_{X,p}$ and $[(U,f)]\in\mc F_p$ where $p\in U\cap V$, we simply define
	\[[(V,r)]\cdot[(U,f)]\coloneqq[(U\cap V,r|_{U\cap V}\cdot f|_{U\cap V})].\]
	Here are our checks.
	\begin{itemize}
		\item Well-defined: if $[(V,r)]=[(V',r')]$ and $[(U,f)]=[(U',f')]$, then we may find $V''\subseteq V\cap V'$ and $U''\subseteq U\cap U'$ such that $r|_{V''}=r'|_{V''}$ and $f|_{U''}=f'|_{U''}$. So we compute
		\begin{align*}
			[(V,r)]\cdot[(U,f)] &= [(U\cap V,r|_{U\cap V}\cdot f|_{U\cap V})] \\
			&\stackrel*= [(U''\cap V'',(r|_{U\cap V}\cdot f|_{U\cap V})|_{U''\cap V''})] \\
			&= [(U''\cap V'',r|_{U''\cap V''}\cdot f|_{U''\cap V''})] \\
			&= [(U''\cap V'',r'|_{U''\cap V''}\cdot f'|_{U''\cap V''})] \\
			&\stackrel*= [(U''\cap V'',(r'|_{U'\cap V'}\cdot f'|_{U'\cap V'})|_{U''\cap V''})] \\
			&= [(U'\cap V',r'|_{U'\cap V'}\cdot f'|_{U'\cap V'})] \\
			&= [(V',r')]\cdot[(U',f')],
		\end{align*}
		where the $\stackrel*=$ were using the fact that $\mc F$ is an $\mathcal O_X$-premodule.
		\item Identity: note that $[(X,1)]$ is the identity of $\mc OO_{X,p}$, so we note $[(X,1)]\cdot[(U,f)]=[(U,f)]$.
		\item Associativity: given $[(V_1,r_1)],[(V_2,r_2)]\in\mc O_{X,p}$ and some $[(U,f)]\in\mc F_p$, we begin by restricting everything to $W\coloneqq V_1\cap V_2\cap U$ (which still contains $p$) so that the germs we're looking at look like $[(W,r_1),[(W,r_2)]\in\OO_{X,p}$ and $[(W,f)]\in\mc F_p$. Then
		\[[(W,r_1)]\cdot([(W,r_2)]\cdot[(W,f)])=[(W,r_1)]\cdot[(W,r_2f)]=[(W,r_1r_2f)]=[(W,r_1r_2)]\cdot[(W,f)].\]
		\item Distributivity: given $[(V_1,r_1)],[(V_2,r_2)]\in\OO_{X,p}$ and $[(U_1,f_1)],[(U_2,f_2)]\in\mc F_p$, we begin by restricting everything to $W\coloneqq V_1\cap V_2\cap U_1\cap U_2$ so that the germs we're looking at look like $[(W,r_1)],[(W,r_2)]\in\OO_{X,p}$ and $[(W,f_1)],[(W,f_2)]\in\mc F_p$. Then
		\begin{align*}
			&\phantom{{}={}}([(W,r_1)]+[(W,r_2)])\cdot([(W,f_1)]+[(W,f_2)]) \\
			&= [(W,r_1+r_2)]\cdot[(W,f_1+f_2)] \\
			&= [(W,(r_1+r_2)(f_1+f_2))] \\
			&= [(W,r_1f_1+r_1f_2+r_2f_1+r_2f_2)] \\
			&= [(W,r_1f_1)]+[(W,r_1f_2)]+[(W,r_2f_1)]+[(W,r_2f_2)] \\
			&= [(W,r_1)]\cdot[(W,f_1)]+[(W,r_1)]\cdot[(W,f_2)]+[(W,r_2)]\cdot[(W,f_1)]+[(W,r_2)]\cdot[(W,f_2)].
		\end{align*}
	\end{itemize}
	The above checks finish.
\end{proof}
Having defined our objects, we should define our morphisms.
\begin{defihelper}[{Morphism of $\OO_X$-premodules}]
	Fix a ringed space $(X,\OO_X)$. As usual, we will define a morphism $\varphi\colon\mc F\to\mc G$ of $\OO_X$-premodules as a morphism of the underlying (pre)sheaves making the diagram following diagram commute.
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXE9PX1hcXHRpbWVzXFxtYyBGIl0sWzAsMSwiXFxPT19YXFx0aW1lc1xcbWMgRyJdLFsxLDAsIlxcbWMgRiJdLFsxLDEsIlxcbWMgRyJdLFswLDIsIlxcY2RvdF9cXG1jIEYiXSxbMSwzLCJcXGNkb3RfXFxtYyBHIl0sWzAsMSwiKHtcXGlkX3tcXE9PX1h9fSxcXHZhcnBoaSkiLDJdLFsyLDMsIlxcdmFycGhpIl1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\OO_X\times\mc F} & {\mc F} \\
		{\OO_X\times\mc G} & {\mc G}
		\arrow["{\cdot_\mc F}", from=1-1, to=1-2]
		\arrow["{\cdot_\mc G}", from=2-1, to=2-2]
		\arrow["{({\id_{\OO_X}},\varphi)}"', from=1-1, to=2-1]
		\arrow["\varphi", from=1-2, to=2-2]
	\end{tikzcd}\]
	Composition is still just composition of the morphisms of sheaves. As usual, morphism of $\OO_X$-modules is just a morphism of the underlying $\OO_X$-premodules.
\end{defihelper}
\begin{remark}
	Because (pre)sheaf morphisms are determined by their action on open subsets, checking that a (pre)sheaf morphism is a morphism of $\OO_X$-(pre)modules amounts to checking that the following diagram commutes for any open subset $U\subseteq X$.
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXE9PX1goVSlcXHRpbWVzXFxtYyBGKFUpIl0sWzAsMSwiXFxPT19YKFUpXFx0aW1lc1xcbWMgRyhVKSJdLFsxLDAsIlxcbWMgRihVKSJdLFsxLDEsIlxcbWMgRyhVKSJdLFswLDIsIlxcY2RvdF9cXG1jIEYiXSxbMSwzLCJcXGNkb3RfXFxtYyBHIl0sWzAsMSwiKHtcXGlkX3tcXE9PX1goVSl9fSxcXHZhcnBoaV9VKSIsMl0sWzIsMywiXFx2YXJwaGlfVSJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\OO_X(U)\times\mc F(U)} & {\mc F(U)} \\
		{\OO_X(U)\times\mc G(U)} & {\mc G(U)}
		\arrow["{\cdot_\mc F}", from=1-1, to=1-2]
		\arrow["{\cdot_\mc G}", from=2-1, to=2-2]
		\arrow["{({\id_{\OO_X(U)}},\varphi_U)}"', from=1-1, to=2-1]
		\arrow["{\varphi_U}", from=1-2, to=2-2]
	\end{tikzcd}\]
	Namely, we require $\varphi_U(rf)=r\varphi_U(f)$ for any $r\in\OO_X(U)$ and $f\in\mc F(U)$.
\end{remark}
Let's check that our definitions make sense.
\begin{lemma}
	Fix a ringed space $(X,\OO_X)$. We have defined a category of $\OO_X$-modules, denoted $\mathrm{Mod}_{\OO_X}$ as a subcategory of sheaves on $X$.
\end{lemma}
\begin{proof}
	We have to check that the identity is a morphism of $\OO_X$-modules, as is the composition of two morphisms of $\OO_X$-modules. For the identity, we see that the diagram
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXE9PX1goVSlcXHRpbWVzXFxtYyBGKFUpIl0sWzAsMSwiXFxPT19YKFUpXFx0aW1lc1xcbWMgRyhVKSJdLFsxLDAsIlxcbWMgRihVKSJdLFsxLDEsIlxcbWMgRyhVKSJdLFsyLDAsIihyLGYpIl0sWzIsMSwiKHIsZikiXSxbMywwLCJyZiJdLFszLDEsInJmIl0sWzAsMiwiXFxjZG90X1xcbWMgRiJdLFsxLDMsIlxcY2RvdF9cXG1jIEciXSxbMCwxLCIoe1xcaWRfe1xcT09fWChVKX19LChcXGlkX1xcbWMgRilfVSkiLDJdLFsyLDMsIih7XFxpZF9cXG1jIEZ9KV9VIl0sWzQsNiwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs2LDcsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw1LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzUsNywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\OO_X(U)\times\mc F(U)} & {\mc F(U)} & {(r,f)} & rf \\
		{\OO_X(U)\times\mc G(U)} & {\mc G(U)} & {(r,f)} & rf
		\arrow["{\cdot_\mc F}", from=1-1, to=1-2]
		\arrow["{\cdot_\mc G}", from=2-1, to=2-2]
		\arrow["{({\id_{\OO_X(U)}},(\id_\mc F)_U)}"', from=1-1, to=2-1]
		\arrow["{({\id_\mc F})_U}", from=1-2, to=2-2]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
		\arrow[maps to, from=1-3, to=2-3]
		\arrow[maps to, from=2-3, to=2-4]
	\end{tikzcd}\]
	commutes for any $\OO_X$-module $\mc F$, where $\id_\mc F$ has been inherited from $\mathrm{Sh}_X$. For composition, fix morphisms $\varphi\colon\mc F\to\mc G$ and $\psi\colon\mc G\to\mc H$ of $\OO_X$-modules. Then $\psi\circ\varphi$ (defined as the composition in $\mathrm{Sh}_X$) needs to be a morphism of $\OO_X$-modules. Well, for any open $U\subseteq X$ and $r\in\OO_X(U)$ and $f\in\mc F(U)$, we see
	\[(\psi\circ\varphi)_U(rf)=\psi_U(\varphi_U(rf))=\psi_U(r\varphi_U(f))=r\psi_U\varphi_U(f)=r(\psi\circ\varphi)_U(f),\]
	which is what we wanted.
\end{proof}
As usual, we will want a more concrete way to understand isomorphisms.
\begin{lemma} \label{lem:better-ox-mod-iso}
	Fix a ringed space $(X,\OO_X)$. A morphism $\varphi\colon\mc F\to\mc G$ is an isomorphism of $\OO_X$-modules if and only if it is a morphism of $\OO_X$-modules and also a (pre)sheaf isomorphism.
\end{lemma}
\begin{proof}
	Certainly an isomorphism of $\OO_X$-modules is an $\mathcal O_X$-module homomorphism and also a sheaf isomorphism. Indeed, pick up the inverse morphism $\psi\colon\mc G\to\mc F$, and we see $\varphi\circ\psi={\id_\mc G}$ and $\psi\circ\varphi={\id_\mc F}$ by how identities are defined in $\mathrm{Mod}_{\OO_X}$.

	Conversely, fix a morphism of $\OO_X$-modules $\varphi\colon\mc F\to\mc G$ which is a sheaf isomorphism; let $\psi\colon\mc G\to\mc F$ be the inverse sheaf morphism. We need to show that $\psi$ is an $\mathcal O_X$-module morphism. Well, for any open subset $U\subseteq X$, we note that any $g\in\mc G(U)$ can be written as $\varphi_U(f)$ for some $f\in\mc F(U)$, so any $r\in\OO_X(U)$ has
	\[\psi_U(rg)=\psi_U(r\varphi_U(f))=\psi_U(\varphi_U(rf))=rf=r\psi_U(\varphi_U(f))=r\psi_U(g),\]
	which is what we wanted.
\end{proof}
As expected, we note that taking stalks remains functorial.
\begin{lemma} \label{lem:ox-mod-stalk-morphism}
	Fix a ringed space $(X,\OO_X)$ and a morphism $\varphi\colon\mc F\to\mc G$ of $\OO_X$-premodules. Then any $p\in X$ induces a natural map $\varphi_p\colon\mc F_p\to\mc G_p$ of $\OO_{X,p}$-premodules.
\end{lemma}
\begin{proof}
	Note that \autoref{prop:stalkmorphism} at least gives us some map $\varphi_p\colon\mc F_p\to\mc G_p$ by $\varphi_p([(U,f)])=[(U,\varphi_Uf)]$. To see that this a morphism of $\OO_{X,p}$-modules, we note that any $[(V,r)]\in\OO_{X,p}$ and $[(U,f)]\in\mc F_p$ may first everything to $W\coloneqq U\cap V$ so that we're looking at the germs $[(W,r)]$ and $[(W,f)]$. Then we compute
	\begin{align*}
		[(W,r)]\cdot\varphi_p([(W,f)]) &= [(V,r)]\cdot[(W,\varphi_Wf)] \\
		&= [(W,r\cdot\varphi_Uf)] \\
		&= [(W,\varphi_U(rf))] \\
		&= \varphi_p([(W,rf)]) \\
		&= \varphi_p([(W,r)]\cdot[(W,f)]),
	\end{align*}
	where we have used the fact that $\varphi_U$ is an $\mathcal O_X(U)$-premodule morphism.
\end{proof}
\begin{remark}
	Because we simply defined $\varphi_p$ the same way it is defined for presheaves, the computation of \autoref{rem:stalkfunctor} can be directly copied to show that taking stalks is functorial. Namely, the identity and functoriality checks do not change at all.
\end{remark}

\subsection{\texorpdfstring{$\mathrm{Mod}_{\OO_X}$}{ Mod-OX} Is Additive}
While we're here, we might as well check that our category is additive. This is mostly inherited from \autoref{cor:sheavesadditive}. Here's our zero.
\begin{lemma} \label{lem:zero-module}
	Fix a ringed space $(X,\OO_X)$. Then the zero sheaf $\mc Z$ on $X$ from \autoref{cor:zerosheaf} is the zero object in the category of $\OO_X$-modules.
\end{lemma}
\begin{proof}
	To begin, we note that $\mc Z(U)=0$ is always naturally an $\mathcal O_X(U)$-module, and we define our scalar multiplication accordingly. This assembles into an $\mathcal O_X$-module by setting open subsets $V\subseteq U\subseteq X$ and noting that
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXE9PX1goVSlcXHRpbWVzXFxtYyBaKFUpIl0sWzAsMSwiXFxPT19YKFYpXFx0aW1lc1xcbWMgWihWKSJdLFsxLDAsIlxcbWMgWihVKSJdLFsxLDEsIlxcbWMgWihWKSJdLFsyLDAsIihyLDApIl0sWzIsMSwiKHJ8X1YsMCkiXSxbMywwLCIwIl0sWzMsMSwiMCJdLFswLDEsIntcXG9we3Jlc31fe1UsVn19XFx0aW1lc1xcb3B7cmVzfV97VSxWfSIsMl0sWzIsMywiXFxvcHtyZXN9X3tVLFZ9Il0sWzAsMiwiXFxjZG90X1UiXSxbMSwzLCJcXGNkb3RfViJdLFs0LDYsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNiw3LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzQsNSwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs1LDcsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\OO_X(U)\times\mc Z(U)} & {\mc Z(U)} & {(r,0)} & 0 \\
		{\OO_X(V)\times\mc Z(V)} & {\mc Z(V)} & {(r|_V,0)} & 0
		\arrow["{{\op{res}_{U,V}}\times\op{res}_{U,V}}"', from=1-1, to=2-1]
		\arrow["{\op{res}_{U,V}}", from=1-2, to=2-2]
		\arrow["{\cdot_U}", from=1-1, to=1-2]
		\arrow["{\cdot_V}", from=2-1, to=2-2]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
		\arrow[maps to, from=1-3, to=2-3]
		\arrow[maps to, from=2-3, to=2-4]
	\end{tikzcd}\]
	commutes.

	It remains to show the universal property. Fix an $\mathcal O_X$-module $\mc F$. We need to show that there are unique morphisms of $\OO_X$-modules $\mc F\to\mc Z$ and $\mc Z\to\mc F$. From \autoref{cor:zerosheaf}, we know there is already at most one sheaf morphism in each direction, so there is at most one morphism of $\OO_X$-modules.

	Thus, we just need to show existence.
	\begin{itemize}
		\item Initial: we know from \autoref{cor:zerosheaf} that the zero maps $\varphi_U\colon\mc Z(U)\to\mc F(U)$ assemble into a sheaf map. To see that these assemble into a morphism of $\OO_X$-modules, we pick up any $r\in\OO_X(U)$ and $0\in\mc Z(U)$ and note that
		\[\varphi_U(r\cdot0)=\varphi_U(0)=0=r\cdot0=r\varphi_U(0).\]
		\item Terminal: we know from \autoref{cor:zerosheaf} that the zero maps $\psi_U\colon\mc Z(U)\to\mc F(U)$ assemble into a sheaf map. To see that these assemble into a morphism of $\OO_X$-modules, we pick up any $r\in\OO_X(U)$ and $f\in\mc F(U)$ and note that
		\[\psi_U(r\cdot f)=\psi_U(f)=0=r\cdot0=r\psi_U(f),\]
		which is what we wanted.
		\qedhere
	\end{itemize}
\end{proof}
Here's our addition structure.
\begin{lemma} \label{lem:ox-mod-is-ab-enriched}
	Fix a ringed space $(X,\OO_X)$ and $\OO_X$-modules $\mc F$ and $\mc G$. Then the set of $\OO_X$-morphisms $\mc F\to\mc G$ is a subgroup of the sheaf morphisms $\mc F\to\mc G$. In particular, $\op{Mor}_{\OO_X}(\mc F,\mc G)$ is an abelian group, where composition distributes over addition.
\end{lemma}
\begin{proof}
	We use the subgroup test. There are two checks.
	\begin{itemize}
		\item The subset of $\OO_X$-module morphisms is certainly nonempty because we have a morphism of $\OO_X$-modules given by the composition of the zero maps $\mc F\to\mc Z\to\mc G$ by \autoref{lem:zero-module}.
		\item We need to show that two morphisms $\varphi,\psi\colon\mc F\to\mc G$ of $\OO_X$-morphisms have $(\varphi+-\psi)\colon\mc F\to\mc G$ a morphism of $\OO_X$-modules.

		Well, we pick up an open subset $U\subseteq X$ and some $r\in\OO_X(U)$ and $f\in\mc F(U)$ to check
		\[(\varphi+-\psi)_U(rf)=\varphi_U(rf)+(-\psi)_U(rf)=\varphi_U(rf)+-\psi_U(rf)=r(\varphi_U(f)+-\psi_U(f))=r(\varphi+-\psi)_U(f),\]
		which is what we wanted.
	\end{itemize}
	We now note that the last sentence here follows from \autoref{lem:addmorphisms}. Indeed, we are abelian because we are a subgroup of an abelian group, and composition still distributes over addition because composition and addition have not changed.
\end{proof}
\begin{remark}
	From \autoref{lem:addmorphisms}, we see that our zero morphism $\mc F\to\mc G$ is indeed $\mc F\to\mc Z\to\mc G$. Namely, we want the morphism sending everything to $0$ automatically.
\end{remark}
\begin{lemma}
	Fix a ringed space $(X,\OO_X)$ and $\OO_X$-modules $\{\mc F_\alpha\}_{\alpha\in\lambda}$. The product sheaf $\mc F\coloneqq\prod_{\alpha\in\lambda}\mc F_\alpha$ is naturally an $\mathcal O_X$-module.
\end{lemma}
\begin{proof}
	We define our scalar multiplication $\cdot\colon\OO_X\times\mc F\to\mc F$ at any open subset $U\subseteq X$ by $r\cdot(f_\alpha)_\alpha\coloneqq(r\cdot f_\alpha)_\alpha$ for any $r\in\OO_X(U)$ and $(f_\alpha)_\alpha\in\mc F(U)$. To see that this makes an $\mathcal O_X$-module, we check that the diagram
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXE9PX1goVSlcXHRpbWVzXFxtYyBGKFUpIl0sWzAsMSwiXFxPT19YKFYpXFx0aW1lc1xcbWMgRihWKSJdLFsxLDAsIlxcbWMgRihVKSJdLFsxLDEsIlxcbWMgRihVKSJdLFsyLDAsIihyLChmX1xcYWxwaGEpX1xcYWxwaGEpIl0sWzIsMSwiKHJ8X1YsKGZfXFxhbHBoYSlfXFxhbHBoYXxfVikiXSxbMywwLCIocmZfXFxhbHBoYSlfXFxhbHBoYSJdLFszLDEsIihyfF9WXFxjZG90IGZfXFxhbHBoYXxfVilfXFxhbHBoYXxfVj0ocmZfXFxhbHBoYSlfXFxhbHBoYXxfViJdLFswLDIsIlxcY2RvdF9cXG1jIEYiXSxbMSwzLCJcXGNkb3RfXFxtYyBHIl0sWzAsMSwie1xcb3B7cmVzfV97VSxWfX1cXHRpbWVzXFxvcHtyZXN9X3tVLFZ9IiwyXSxbMiwzLCJ7XFxvcHtyZXN9X3tVLFZ9fSJdLFs0LDYsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNiw3LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzQsNSwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs1LDcsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\OO_X(U)\times\mc F(U)} & {\mc F(U)} & {(r,(f_\alpha)_\alpha)} & {(rf_\alpha)_\alpha} \\
		{\OO_X(V)\times\mc F(V)} & {\mc F(U)} & {(r|_V,(f_\alpha)_\alpha|_V)} & {(r|_V\cdot f_\alpha|_V)_\alpha|_V=(rf_\alpha)_\alpha|_V}
		\arrow["{\cdot_\mc F}", from=1-1, to=1-2]
		\arrow["{\cdot_\mc G}", from=2-1, to=2-2]
		\arrow["{{\op{res}_{U,V}}\times\op{res}_{U,V}}"', from=1-1, to=2-1]
		\arrow["{{\op{res}_{U,V}}}", from=1-2, to=2-2]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
		\arrow[maps to, from=1-3, to=2-3]
		\arrow[maps to, from=2-3, to=2-4]
	\end{tikzcd}\]
	commutes, where in the bottom-right we have used the fact that the $\mc F_\alpha$ are $\OO_X$-modules, meaning $r|_V\cdot f_\alpha|_V=(rf_\alpha)|_V$.
\end{proof}
\begin{lemma} \label{lem:ox-products}
	Fix a ringed space $(X,\OO_X)$ and $\OO_X$-modules $\{\mc F_\alpha\}_{\alpha\in\lambda}$, and let $\mc F\coloneqq\prod_{\alpha\in\lambda}\mc F_\alpha$ be the product sheaf. Then $\mc F$ is also the product in the category of $\OO_X$-modules.
\end{lemma}
\begin{proof}
	We will use the same projection morphisms $\pi_\alpha\colon\mc F\to\mc F_\alpha$ from \autoref{cor:sheafprod}. To check that they are morphisms of $\OO_X$-modules, we fix some $\beta\in\lambda$ and note that the diagram
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXE9PX1goVSlcXHRpbWVzXFxtYyBGKFUpIl0sWzAsMSwiXFxPT19YKFUpXFx0aW1lc1xcbWMgRl9cXGJldGEoVSkiXSxbMSwwLCJcXG1jIEYoVSkiXSxbMSwxLCJcXG1jIEZfXFxiZXRhKFUpIl0sWzIsMCwiKHIsKGZfXFxhbHBoYSlfXFxhbHBoYSkiXSxbMywwLCIocmZfXFxhbHBoYSlfXFxhbHBoYSJdLFsyLDEsIihyLGZfXFxiZXRhKSJdLFszLDEsIihyZl9cXGJldGEpIl0sWzAsMiwiXFxjZG90X1xcbWMgRiJdLFsxLDMsIlxcY2RvdF97XFxtYyBGX1xcYmV0YX0iXSxbMCwxLCIoe1xcaWRfe1xcT09fWChVKX19LChcXHBpX1xcYmV0YSlfVSkiLDJdLFsyLDMsIihcXHBpX1xcYmV0YSlfVSJdLFs0LDVdLFs1LDddLFs0LDZdLFs2LDddXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\OO_X(U)\times\mc F(U)} & {\mc F(U)} & {(r,(f_\alpha)_\alpha)} & {(rf_\alpha)_\alpha} \\
		{\OO_X(U)\times\mc F_\beta(U)} & {\mc F_\beta(U)} & {(r,f_\beta)} & {(rf_\beta)}
		\arrow["{\cdot_\mc F}", from=1-1, to=1-2]
		\arrow["{\cdot_{\mc F_\beta}}", from=2-1, to=2-2]
		\arrow["{({\id_{\OO_X(U)}},(\pi_\beta)_U)}"', from=1-1, to=2-1]
		\arrow["{(\pi_\beta)_U}", from=1-2, to=2-2]
		\arrow[from=1-3, to=1-4]
		\arrow[from=1-4, to=2-4]
		\arrow[from=1-3, to=2-3]
		\arrow[from=2-3, to=2-4]
	\end{tikzcd}\]
	commutes.

	We now check the universal property. Fix some $\OO_X$-module $\mc G$ with morphisms $\varphi_\alpha\colon\mc G\to\mc F_\alpha$. We need to show that there is a unique morphism $\varphi\colon\mc G\to\mc F_\alpha$ of $\OO_X$-modules such that $\varphi_\alpha=\pi_\alpha\circ\varphi$ for each $\alpha$.
	
	Well, we know there is a unique sheaf morphism by \autoref{cor:sheafprod}, so there is certainly at most morphism of $\OO_X$-modules. To show that the morphism exists, we set
	\[\varphi_U(g)\coloneqq((\varphi_\alpha)_Ug)_\alpha\in\mc F(U)\]
	for any open $U\subseteq X$ and $g\in\mc G(U)$. As checked in \autoref{cor:sheafprod}, this assembles into a morphism of our sheaves $\varphi\colon\mc G\to\mc F$ such that $\varphi_\alpha=\pi_\alpha\circ\varphi$ for each $\alpha$, so we just have to check that this is a morphism of $\OO_X$-modules. Well, for any open $U\subseteq X$ and $r\in\OO_X(U)$ and $g\in\mc G(U)$, we check
	\[\varphi_U(rg)=((\varphi_\alpha)_U(rg))_\alpha=(r(\varphi_\alpha)_U(g))_\alpha=r((\varphi_\alpha)_U(g))_\alpha=r\varphi_U(g),\]
	finishing.
\end{proof}
\begin{corollary} \label{cor:ox-mod-additive}
	Fix a ringed space $(X,\OO_X)$. The category of $\OO_X$-modules is additive.
\end{corollary}
\begin{proof}
	Combine \autoref{lem:ox-mod-is-ab-enriched}, \autoref{lem:zero-module}, and \autoref{lem:ox-products}.
\end{proof}

\subsection{Kernels for \texorpdfstring{$\OO_X$}{OX}-modules}
As usual, kernels are easier than cokernels for sheafification reasons. We will avoid discussing sheafification of $\OO_X$-modules for a little while longer.
\begin{proposition} \label{prop:ox-mod-ker}
	Fix a ringed space $(X,\OO_X)$ and a morphism $\varphi\colon\mc F\to\mc G$ of $\OO_X$-modules. Then the kernel $\ker\varphi$ of $\varphi$ viewed as a (pre)sheaf is the kernel in the category of $\OO_X$-modules.
\end{proposition}
\begin{proof}
	Quickly, we recall that
	\[(\ker\varphi)(U)\coloneqq\ker\varphi_U\subseteq\mc F(U),\]
	where the restrictions maps are induced by $\mc F$.
	
	To make $\ker\varphi$ into an $\mathcal O_X$-module, we will give it the action inherited from $\mc F$: given some open $U\subseteq X$, some $r\in\OO_X(U)$, and some $f\in\ker\varphi_U\subseteq\mc F(U)$, we set $r\cdot f$ to be the $r\cdot f$ from the action of $\OO_X(U)$ on $\mc F(U)$. To see that this is well-defined, we note
	\[\varphi_U(r\cdot f)=r\cdot\varphi_U(f)=r\cdot0=0\]
	because $\varphi$ is a morphism of $\OO_X$-modules. Thus, $r\cdot f\in\ker\varphi_U$, making our action okay. We also note that $U'\subseteq U\subseteq X$ makes the diagram
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXE9PX1goVSlcXHRpbWVzKFxca2VyXFx2YXJwaGkpKFUpIl0sWzAsMSwiXFxPT19YKFUnKVxcdGltZXMoXFxrZXJcXHZhcnBoaSkoVScpIl0sWzEsMCwiKFxca2VyXFx2YXJwaGkpKFUpIl0sWzEsMSwiKFxca2VyXFx2YXJwaGkpKFUnKSJdLFsyLDAsIihyLGYpIl0sWzMsMCwiclxcY2RvdCBmIl0sWzIsMSwiKHJ8X3tVJ30sZnxfe1UnfSkiXSxbMywxLCIoclxcY2RvdCBmKXxfe1UnfSJdLFswLDJdLFsyLDMsIlxcb3B7cmVzfV97VSxVJ30iXSxbMCwxLCJ7XFxvcHtyZXN9X3tVLFUnfX1cXHRpbWVze1xcb3B7cmVzfV97VSxVJ319IiwyXSxbMSwzXSxbNCw2LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzYsNywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs0LDUsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNSw3LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\OO_X(U)\times(\ker\varphi)(U)} & {(\ker\varphi)(U)} & {(r,f)} & {r\cdot f} \\
		{\OO_X(U')\times(\ker\varphi)(U')} & {(\ker\varphi)(U')} & {(r|_{U'},f|_{U'})} & {(r\cdot f)|_{U'}}
		\arrow[from=1-1, to=1-2]
		\arrow["{\op{res}_{U,U'}}", from=1-2, to=2-2]
		\arrow["{{\op{res}_{U,U'}}\times{\op{res}_{U,U'}}}"', from=1-1, to=2-1]
		\arrow[from=2-1, to=2-2]
		\arrow[maps to, from=1-3, to=2-3]
		\arrow[maps to, from=2-3, to=2-4]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
	\end{tikzcd}\]
	commute, as inherited from $\mc F$, so $\ker\varphi$ is indeed an $\mathcal O_X$-module.

	It remains to show the universal property. Let $\iota\colon\ker\varphi\to\mc F$ be the canonical morphism; note that $\iota$ is an $\mathcal O_X$-module morphism because $\iota(rf)=rf=r\iota(f)$ for any $r\in\OO_X(U)$ and $f\in\mc F(U)$ at any open $U\subseteq X$. Now, given some morphism $\psi\colon\mc H\to\mc F$ of $\OO_X$-modules such that $\varphi\circ\psi=0$, we need to show that there is a unique map $\overline\psi\colon\mc H\to\ker\varphi$ making the diagram
	% https://q.uiver.app/?q=WzAsNSxbMSwyLCJcXG1jIEYiXSxbMiwyLCJcXG1jIEciXSxbMiwxLCJcXG1jIFoiXSxbMCwwLCJcXG1jIEgiXSxbMSwxLCJcXGtlclxcdmFycGhpIl0sWzAsMSwiXFx2YXJwaGkiXSxbNCwwLCJcXGlvdGEiXSxbNCwyXSxbMiwxXSxbMyw0LCJcXG92ZXJsaW5lXFxwc2kiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMywyLCIiLDIseyJjdXJ2ZSI6LTJ9XSxbMywwLCJcXHBzaSIsMix7ImN1cnZlIjoyfV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\begin{equation}
		\begin{tikzcd}
			{\mc H} \\
			& \ker\varphi & {\mc Z} \\
			& {\mc F} & {\mc G}
			\arrow["\varphi", from=3-2, to=3-3]
			\arrow["\iota", from=2-2, to=3-2]
			\arrow[from=2-2, to=2-3]
			\arrow[from=2-3, to=3-3]
			\arrow["\overline\psi"{description}, dashed, from=1-1, to=2-2]
			\arrow[curve={height=-12pt}, from=1-1, to=2-3]
			\arrow["\psi"', curve={height=12pt}, from=1-1, to=3-2]
		\end{tikzcd} \label{eq:ox-mod-ker}
	\end{equation}
	commute. Note that uniqueness follows directly from \autoref{lem:sheafker}. It remains to show existence. Well, \autoref{lem:sheafker} has told us that we may set
	\[\overline\psi_U(h)\coloneqq\psi_U(h)\]
	for any open $U\subseteq X$ and section $h\in\OO_X(U)$ to define a well-defined sheaf morphism $\overline\psi\colon\mc H\to\ker\varphi$ making \autoref{eq:ox-mod-ker} commute as sheaves.

	Thus, it roughly remains to show $\overline\psi$ defines a morphism of $\OO_X$-modules. Well, for any open $U\subseteq X$ and sections $r\in\OO_X(U)$ and $h\in\mc H(U)$, we see
	\[\overline\psi_U(rh)=\psi_U(rh)=r\cdot\psi_U(h)=r\cdot\overline\psi_U(h).\]
	So we see that $\overline\psi_U$ is a morphism of $\OO_X$-modules, and \autoref{eq:ox-mod-ker} now commutes in the category of $\OO_X$-modules because composition of morphisms of $\OO_X$-modules is the same as the composition of the underlying sheaf morphisms.
\end{proof}
\begin{corollary} \label{cor:mono-ox-mod}
	Fix a ringed space $(X,\OO_X)$ and a morphism $\varphi\colon\mc F\to\mc G$ of $\OO_X$-modules. The following are equivalent.
	\begin{listalph}
		\item $\varphi$ is monic in the category of sheaves.
		\item $\varphi$ is monic in the category of $\OO_X$-modules.
	\end{listalph}
\end{corollary}
\begin{proof}
	By \autoref{lem:moniciszeroker}, we see that $\varphi$ is monic in the category of $\OO_X$-modules if and only if $\ker\varphi$ vanishes. However, the kernel of $\varphi$ is the same in the category of sheaves as in the category of $\OO_X$-modules by \autoref{prop:ox-mod-ker}, so $\ker\varphi$ vanishing is equivalent to $\varphi$ being monic in the category of sheaves by \autoref{lem:moniciszeroker}.
\end{proof}

\subsection{Sheafification for \texorpdfstring{$\OO_X$}{OX}-modules}
In order to deal with cokernels (and colimits in general), we will want to understand how to use sheafification with $\OO_X$-modules. Here are the relevant result.
\begin{lemma} \label{lem:sheafification-is-ox-mod}
	Fix a ringed space $(X,\OO_X)$. Fix a $\OO_X$-premodule $\mc F$.
	\begin{listalph}
		\item We can make $\mc F\sh$ naturally into an $\mathcal O_X$-module.
		\item The sheafification map $\op{sh}\colon\mc F\to\mc F\sh$ can be made into an $\mathcal O_X$-premodule morphism.
	\end{listalph}
\end{lemma}
\begin{proof}
	We show the parts in order. Observe that we will have to use the construction of sheafification of \autoref{lem:sheafification-exists}.
	\begin{listalph}
		\item Given an open subset $U\subseteq X$, recall
		\[\mc F\sh(U)\coloneqq\Bigg\{(f_p)_{p\in U}\in\prod_{p\in U}\mc F_p:(f_p)_{p\in U}\text{ is a compatible system of germs}\Bigg\}\]
		with the obvious restriction maps.
		
		To give $\mc F\sh(U)$ an $\mathcal O_X(U)$-module structure, we note that any $p\in U$ can precompose the action map $\OO_{X,p}\to\op{Aut}(\mc F_p)$ with the restriction $\OO_X(U)\to\OO_{X,p}$ to give an action of $\OO_X(U)$ on each stalk $\mc F_p$ by $r\cdot f_p\coloneqq r|_p\cdot f_p$. Taking the product of these action morphisms, we get a morphism
		\[\OO_X(U)\to\prod_{p\in U}\op{Aut}(\mc F_p)\subseteq\op{Aut}\Bigg(\prod_{p\in U}\mc F_p\Bigg)\]
		(this action is just defining the arbitrary product of some modules), so we have made $\prod_{p\in U}\mc F_p$ into an $\mathcal O_X(U)$-module, where the scalar multiplication is by $r\cdot(f_p)_{p\in U}=(r|_p\cdot f_p)_{p\in U}$.

		We now claim that $\mc F\sh(U)\subseteq\prod_{p\in U}\mc F_p$ is an $\mathcal O_X(U)$-submodule. Certainly we have a subgroup (after all, $\mc F\sh(U)$ assembles into a sheaf valued in abelian groups), so we just need to be preserved by the $\OO_X(U)$-action. Well, suppose $(f_p)_{p\in U}$ is a system of compatible germs so that each $p\in U$ has some open $U_p\subseteq U$ (contained in $U$ after suitable restriction) containing $p$ with a lift $\widetilde f_p\in\mc F(U_p)$ such that $\widetilde f_p|_q=f_q$ for each $q\in U$.

		Now, for any $r\in\OO_X(U)$, the construction of the $\OO_X$-action gives
		\[(r|_{U_p}\cdot\widetilde f_p)|_q=r|_q\cdot\widetilde f_p|_q=r|_q\cdot f_q\]
		for any $q\in U_p$, for any $p\in U$. Thus, $r|_{U_p}\cdot\widetilde f_p\in\mc F(U_p)$ witnesses that $r\cdot(f_p)_{p\in U}=(r|_p\cdot f_p)_{p\in U}$ is a system of compatible of germs.

		Thus, we have made each $\mc F\sh(U)$ into an $\mathcal O_X(U)$-module. To make $\mc F\sh$ into an $\mathcal O_X$-module, we need to check that any $V\subseteq U$ makes the diagram
		% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXE9PX1goVSlcXHRpbWVzXFxtYyBGXFxzaChVKSJdLFswLDEsIlxcT09fWChWKVxcdGltZXNcXG1jIEZcXHNoKFYpIl0sWzEsMCwiXFxtYyBGXFxzaChVKSJdLFsxLDEsIlxcbWMgRlxcc2goVikiXSxbMiwwLCIociwoZl9wKV97cFxcaW4gVX0pIl0sWzMsMCwiKHJ8X3BcXGNkb3QgZl9wKV9wIl0sWzMsMSwiKHJ8X3BcXGNkb3QgZl9wKV97cFxcaW4gVn0iXSxbMiwxLCIocnxfViwoZl9wKV97cFxcaW4gVn0pIl0sWzAsMl0sWzIsMywiXFxvcHtyZXN9X3tVLFZ9Il0sWzAsMSwiXFxvcHtyZXN9X3tVLFZ9XFx0aW1lc1xcb3B7cmVzfV97VSxWfSIsMl0sWzEsM10sWzQsNSwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs1LDYsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw3LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzcsNiwiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\OO_X(U)\times\mc F\sh(U)} & {\mc F\sh(U)} & {(r,(f_p)_{p\in U})} & {(r|_p\cdot f_p)_p} \\
			{\OO_X(V)\times\mc F\sh(V)} & {\mc F\sh(V)} & {(r|_V,(f_p)_{p\in V})} & {(r|_p\cdot f_p)_{p\in V}}
			\arrow[from=1-1, to=1-2]
			\arrow["{\op{res}_{U,V}}", from=1-2, to=2-2]
			\arrow["{\op{res}_{U,V}\times\op{res}_{U,V}}"', from=1-1, to=2-1]
			\arrow[from=2-1, to=2-2]
			\arrow[maps to, from=1-3, to=1-4]
			\arrow[maps to, from=1-4, to=2-4]
			\arrow[maps to, from=1-3, to=2-3]
			\arrow[maps to, from=2-3, to=2-4]
		\end{tikzcd}\]
		commute.

		\item We now check that the sheafification map $\op{sh}\colon\mc F\to\mc F\sh$ is a morphism of $\OO_X$-premodules. Well, \autoref{lem:sheafification-exists} already tells us that this map is a sheaf morphism, so we just need to check that we preserve the $\OO_X$ structure. For this, we see that any open $U\subseteq X$ makes
		% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXE9PX1goVSlcXHRpbWVzXFxtYyBGKFUpIl0sWzAsMSwiXFxPT19YKFUpXFx0aW1lc1xcbWMgRlxcc2goVSkiXSxbMSwwLCJcXG1jIEYoVSkiXSxbMSwxLCJcXG1jIEZcXHNoKFUpIl0sWzIsMCwiKHIsZikiXSxbMywwLCJyZiJdLFsyLDEsIihyLChmfF9wKV97cFxcaW4gVX0pIl0sWzMsMSwiKHJ8X3BcXGNkb3QgZnxfcClfe3BcXGluIFV9Il0sWzAsMl0sWzIsMywiXFxvcHtzaH1fVSJdLFswLDEsIihcXGlkX3tcXE9PX1goVSl9LHtcXG9we3NofV9VfSkiLDJdLFsxLDNdLFs0LDUsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNSw3LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzQsNiwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs2LDcsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\OO_X(U)\times\mc F(U)} & {\mc F(U)} & {(r,f)} & rf \\
			{\OO_X(U)\times\mc F\sh(U)} & {\mc F\sh(U)} & {(r,(f|_p)_{p\in U})} & {(r|_p\cdot f|_p)_{p\in U}}
			\arrow[from=1-1, to=1-2]
			\arrow["{\op{sh}_U}", from=1-2, to=2-2]
			\arrow["{(\id_{\OO_X(U)},{\op{sh}_U})}"', from=1-1, to=2-1]
			\arrow[from=2-1, to=2-2]
			\arrow[maps to, from=1-3, to=1-4]
			\arrow[maps to, from=1-4, to=2-4]
			\arrow[maps to, from=1-3, to=2-3]
			\arrow[maps to, from=2-3, to=2-4]
		\end{tikzcd}\]
		commute. Namely, we have $(rf)|_p=r|_p\cdot f|_p$ in the above computation from the construction of the action of $\OO_{X,p}$ on $\mc F_p$ from \autoref{lem:stalk-is-stalk-mod}.
		\qedhere
	\end{listalph}
\end{proof}
\begin{remark} \label{rem:sheafification-stalks-ox-mod}
	As above, the sheafification map $\op{sh}\colon\mc F\to\mc F\sh$ is a morphism of $\OO_X$-premodules, so \autoref{lem:ox-mod-stalk-morphism} assures us that $\op{sh}_p\colon\mc F_p\to\mc F\sh_p$ is a morphism of $\OO_{X,p}$-modules at each $p\in U$. But \autoref{prop:sheafificationstalk} now assures us that this morphism is an isomorphism on the level of abelian groups, so $\op{sh}_p$ is a full isomorphism of $\mc O_{X,p}$-modules.
\end{remark}
Now here is the universal property.
\begin{proposition} \label{prop:sheafification-ox-mod}
	Fix a ringed space $(X,\OO_X)$ and an $\mathcal O_X$-premodule $\mc F$. Further, let $\op{sh}\colon\mc F\to\mc F\sh$ be the sheafification map. Then for any $\OO_X$-module $\mc G$ and $\OO_X$-premodule morphism $\varphi\colon\mc F\to\mc G$, there is a unique $\OO_X$-module morphism $\varphi\sh\colon\mc F\sh\to\mc G$ such that $\varphi=\varphi\sh\circ\op{sh}$.
\end{proposition}
\begin{proof}
	Before doing anything, we note that the statements make sense because $\mc F\sh$ is an $\mathcal O_X$-module by \autoref{lem:sheafification-is-ox-mod}.

	Because $\OO_X$-module morphisms are already sheaf morphisms, \autoref{lem:sheafification-exists} tells us that there is at most one sheaf morphism $\varphi\sh\colon\mc F\sh\to\mc G$ and thus at most one $\OO_X$-module morphism such that $\varphi=\varphi\sh\circ\op{sh}$.

	For existence, we note that \autoref{lem:sheafification-exists} promises some sheaf morphism $\varphi\sh\colon\mc F\sh\to\mc G$ such that $\varphi=\varphi\sh\circ\op{sh}$, which we upgrade into an $\mathcal O_X$-module morphism. Indeed, we show in \autoref{lem:sheafification-exists} that $(\varphi_p(f_p))_{p\in U}$ is a compatible system of germs for compatible system of germs $(f_p)_{p\in U}\in\mc F\sh(U)$, which lets us uniquely define $\varphi\sh_U((f_p)_{p\in U})$ by having
	\[\varphi\sh_U((f_p)_{p\in U})|_q=\varphi_q(f_q)\]
	for any $q\in U$. Namely, we know that this is well-defined and produces a sheaf morphism.

	It remains to check that $\varphi\sh$ is in fact a morphism of $\OO_X$-modules. For this, we see that any open $U\subseteq X$ and sections $r\in\OO_X(U)$ and $(f_p)_{p\in U}\in\mc F\sh(U)$ will have at $q$ the equalities
	\[\big(r\cdot\varphi\sh_U((f_p)_{p\in U})\big)|_q=r|_q\cdot\varphi\sh_U((f_p)_{p\in U})|_q=r|_q\cdot\varphi_q(f_q)\stackrel*=\varphi_q(r|_q\cdot f_q),\]
	where we have used \autoref{lem:ox-mod-stalk-morphism} at $\stackrel*=$. On the other hand, $\varphi\sh_U(r\cdot(f_p)_{p\in U})=\varphi\sh_U((r|_p\cdot f_p)_{p\in U})$ is defined to be $\varphi_q(r|_q\cdot f_q)$ at $q$, so we are done.
\end{proof}

\subsection{Cokernels for \texorpdfstring{$\OO_X$}{OX}-modules}
Now that we have sheafification, we can discuss cokernels. We begin with $\OO_X$-premodules.
\begin{lemma} \label{lem:coker-ox-premod}
	Fix a ringed space $(X,\OO_X)$ and a morphism $\varphi\colon\mc F\to\mc G$ of $\OO_X$-premodules. Then the cokernel presheaf $\coker\pre\varphi$ of $\varphi$ viewed as a presheaf is the cokernel in the category of $\OO_X$-premodules.
\end{lemma}
\begin{proof}
	As usual, the main point is to give $\coker\pre\varphi$ an $\mathcal O_X$-premodule structure; in particular, note that we already have a presheaf by \autoref{lem:presheafcoker}. Well, given open $U\subseteq X$, we begin by noting that $\im\varphi_U\subseteq\mc G(U)$ is an $\mathcal O_X(U)$-submodule of $\mc G(U)$: given $\varphi_U(f)\in\im\varphi_U$ and $r\in\OO_X(U)$, we see
	\[r\cdot\varphi_U(f)=\varphi_U(rf)\in\im\varphi_U.\]
	Thus, $\im\varphi_U$ has a $\OO_X(U)$-action by restricting from $\mc G(U)$, so we can give $\coker\varphi_U=\mc G(U)/\im\varphi_U$ a quotient module action. Explicitly, $r\in\OO_X(U)$ and $[g]\in\coker\varphi_U$, we have
	\[r\cdot[g]=[rg].\]
	Note further that these maps assemble into making an $\mathcal O_X$-module by noting that any $V\subseteq U$ makes the diagram
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXE9PX1goVSlcXHRpbWVzXFxjb2tlclxcdmFycGhpX1UiXSxbMCwxLCJcXE9PX1goVilcXHRpbWVzXFxjb2tlclxcdmFycGhpX1YiXSxbMSwwLCJcXGNva2VyXFx2YXJwaGlfVSJdLFsxLDEsIlxcY29rZXJcXHZhcnBoaV9WIl0sWzIsMCwiKHIsW2ddKSJdLFszLDAsIltyZ10iXSxbMiwxLCIocnxfVixbZ3xfVl0pIl0sWzMsMSwiWyhyZyl8X1ZdIl0sWzAsMl0sWzIsMywiXFxvcHtyZXN9X3tVLFZ9Il0sWzAsMSwiXFxvcHtyZXN9X3tVLFZ9XFx0aW1lc1xcb3B7cmVzfV97VSxWfSIsMl0sWzEsM10sWzQsNSwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs1LDcsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw2LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzYsNywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\OO_X(U)\times\coker\varphi_U} & {\coker\varphi_U} & {(r,[g])} & {[rg]} \\
		{\OO_X(V)\times\coker\varphi_V} & {\coker\varphi_V} & {(r|_V,[g|_V])} & {[(rg)|_V]}
		\arrow[from=1-1, to=1-2]
		\arrow["{\op{res}_{U,V}}", from=1-2, to=2-2]
		\arrow["{\op{res}_{U,V}\times\op{res}_{U,V}}"', from=1-1, to=2-1]
		\arrow[from=2-1, to=2-2]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
		\arrow[maps to, from=1-3, to=2-3]
		\arrow[maps to, from=2-3, to=2-4]
	\end{tikzcd}\]
	commute. As an additional sanity check, we note that the projection map $\pi\colon\mc G\to\coker\pre\varphi$ constructed in \autoref{lem:presheafcoker} is a morphism of $\OO_X$-premodules: certainly we have a presheaf morphism, and we have a $\OO_X$-premodule morphism because any open $U\subseteq X$ makes the diagram
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXE9PX1goVSlcXHRpbWVzXFxtYyBHKFUpIl0sWzAsMSwiXFxPT19YKFUpXFx0aW1lc1xcY29rZXJcXHZhcnBoaV9VIl0sWzEsMSwiXFxjb2tlclxcdmFycGhpX1UiXSxbMSwwLCJcXG1jIEcoVSkiXSxbMiwwLCIocixnKSJdLFszLDAsInJnIl0sWzMsMSwiW3JnXSJdLFsyLDEsIihyLFtnXSkiXSxbMCwzXSxbMSwyXSxbMCwxLCIoXFxpZF97XFxPT19YKFUpfSxcXHBpX1UpIiwyXSxbMywyLCJcXHBpX1UiXSxbNCw1LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzUsNiwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs3LDYsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw3LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\OO_X(U)\times\mc G(U)} & {\mc G(U)} & {(r,g)} & rg \\
		{\OO_X(U)\times\coker\varphi_U} & {\coker\varphi_U} & {(r,[g])} & {[rg]}
		\arrow[from=1-1, to=1-2]
		\arrow[from=2-1, to=2-2]
		\arrow["{(\id_{\OO_X(U)},\pi_U)}"', from=1-1, to=2-1]
		\arrow["{\pi_U}", from=1-2, to=2-2]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
		\arrow[maps to, from=2-3, to=2-4]
		\arrow[maps to, from=1-3, to=2-3]
	\end{tikzcd}\]
	commute.

	We now show the universal property. Fix an $\mathcal O_X$-premodule $\mc H$ with a map $\psi\colon\mc G\to\mc H$ such that $\psi\circ\varphi=0$. Then we need a unique map $\overline\psi\colon\coker\pre\varphi\to\mc H$ making the diagram
	% https://q.uiver.app/?q=WzAsNSxbMCwwLCJcXG1jIEYiXSxbMSwwLCJcXG1jIEciXSxbMCwxLCJcXG1jIFoiXSxbMSwxLCJcXGNva2VyXFxwcmVcXHZhcnBoaSJdLFsyLDIsIlxcbWMgSCJdLFswLDEsIlxcdmFycGhpIl0sWzAsMl0sWzIsM10sWzEsMywiXFxwaSIsMl0sWzIsNCwiIiwwLHsiY3VydmUiOjJ9XSxbMSw0LCJcXHBzaSIsMCx7ImN1cnZlIjotMn1dLFszLDQsIlxcb3ZlcmxpbmVcXHBzaSIsMSx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc F} & {\mc G} \\
		{\mc Z} & \coker\pre\varphi \\
		&& {\mc H}
		\arrow["\varphi", from=1-1, to=1-2]
		\arrow[from=1-1, to=2-1]
		\arrow[from=2-1, to=2-2]
		\arrow["\pi"', from=1-2, to=2-2]
		\arrow[curve={height=12pt}, from=2-1, to=3-3]
		\arrow["\psi", curve={height=-12pt}, from=1-2, to=3-3]
		\arrow["\overline\psi"{description}, dashed, from=2-2, to=3-3]
	\end{tikzcd}\]
	commute. Note that \autoref{lem:presheafcoker} promises that there is at most one presheaf morphism $\overline\psi$ making this diagram commute, so we at least have uniqueness of an $\mathcal O_X$-premodule morphism making the diagram commute.

	It remains to show existence. Well, \autoref{lem:presheafcoker} does promise that setting
	\[\overline\psi_U([g])\coloneqq\psi_U(g)\]
	for any $g\in\mc G(U)$ will assemble into a well-defined presheaf morphism $\overline\psi\colon\coker\pre\varphi\to\mc H$ such that $\psi=\overline\psi\circ\pi$. It remains to show that $\overline\psi$ is a morphism of $\OO_X$-premodules, for which we note that any open $U\subseteq X$ makes the diagram
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXE9PX1goVSlcXHRpbWVzXFxjb2tlclxcdmFycGhpX1UiXSxbMCwxLCJcXE9PX1goVSlcXHRpbWVzXFxtYyBIKFUpIl0sWzEsMSwiXFxtYyBIKFUpIl0sWzEsMCwiXFxjb2tlclxcdmFycGhpX1UiXSxbMiwwLCIocixbZ10pIl0sWzMsMCwiW3JnXSJdLFsyLDEsIihyLFxccHNpX1UoZykpIl0sWzMsMSwiclxccHNpX1UoZyk9XFxwc2lfVShyZykiXSxbMCwxLCIoXFxpZF97XFxPT19YKFUpfSxcXG92ZXJsaW5lXFxwc2lfVSkiLDJdLFszLDIsIlxcb3ZlcmxpbmVcXHBzaV9VIl0sWzAsM10sWzEsMl0sWzQsNiwiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs2LDcsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw1LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzUsNywiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\OO_X(U)\times\coker\varphi_U} & {\coker\varphi_U} & {(r,[g])} & {[rg]} \\
		{\OO_X(U)\times\mc H(U)} & {\mc H(U)} & {(r,\psi_U(g))} & {r\psi_U(g)=\psi_U(rg)}
		\arrow["{(\id_{\OO_X(U)},\overline\psi_U)}"', from=1-1, to=2-1]
		\arrow["{\overline\psi_U}", from=1-2, to=2-2]
		\arrow[from=1-1, to=1-2]
		\arrow[from=2-1, to=2-2]
		\arrow[maps to, from=1-3, to=2-3]
		\arrow[maps to, from=2-3, to=2-4]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
	\end{tikzcd}\]
	commutes, where we are using the fact that $\psi$ is already a morphism of $\OO_X$-premodules.
\end{proof}
And now we apply sheafification.
\begin{prop} \label{prop:ox-mod-coker}
	Fix a ringed space $(X,\OO_X)$ and a morphism $\varphi\colon\mc F\to\mc G$ of $\OO_X$-modules. Then the cokernel sheaf $\coker\varphi$ of $\varphi$ viewed as a presheaf is the cokernel in the category of $\OO_X$-modules.
\end{prop}
\begin{proof}
	As in \autoref{lem:sheafcoker}, we let $\pi\pre\colon\mc G\to\coker\pre\varphi$ denote the projection map and $\op{sh}\colon\coker\pre\varphi\to\coker\varphi$ be the sheafification map.
	
	Now, we define $\pi\coloneqq\op{sh}\circ\pi\pre$ to be the canonical projection $\coker\varphi\to\mc G$. Note that $\op{sh}$ and $\pi\pre$ are both morphisms of $\OO_X$-premodules by \autoref{lem:sheafification-is-ox-mod} and \autoref{lem:coker-ox-premod}, respectively, so $\pi$ is also a morphism of $\OO_X$-premodules and thus a morphism of $\OO_X$-modules because $\mc G$ and $\coker\varphi$ are both sheaves.

	It remains to verify the universal property. Fix an $\mathcal O_X$-module $\mc H$ with a map $\psi\colon\mc G\to\mc H$ such that $\psi\circ\varphi$. Then we need a unique morphism $\overline\psi\colon\coker\varphi\to\mc H$ of $\OO_X$-modules making the diagram
	% https://q.uiver.app/?q=WzAsNSxbMCwwLCJcXG1jIEYiXSxbMSwwLCJcXG1jIEciXSxbMCwxLCJcXG1jIFoiXSxbMSwxLCJcXGNva2VyXFx2YXJwaGkiXSxbMiwyLCJcXG1jIEgiXSxbMCwxLCJcXHZhcnBoaSJdLFswLDJdLFsyLDNdLFsxLDMsIlxccGkiLDJdLFsyLDQsIiIsMCx7ImN1cnZlIjoyfV0sWzEsNCwiXFxwc2kiLDAseyJjdXJ2ZSI6LTJ9XSxbMyw0LCJcXG92ZXJsaW5lXFxwc2kiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc F} & {\mc G} \\
		{\mc Z} & \coker\varphi \\
		&& {\mc H}
		\arrow["\varphi", from=1-1, to=1-2]
		\arrow[from=1-1, to=2-1]
		\arrow[from=2-1, to=2-2]
		\arrow["\pi"', from=1-2, to=2-2]
		\arrow[curve={height=12pt}, from=2-1, to=3-3]
		\arrow["\psi", curve={height=-12pt}, from=1-2, to=3-3]
		\arrow["\overline\psi"{description}, dashed, from=2-2, to=3-3]
	\end{tikzcd}\]
	commute. Well, \autoref{lem:sheafcoker} assures us that there is at most one sheaf morphism making this diagram commute, so there is at most one morphism of $\OO_X$-modules making this diagram.

	For existence, we note that \autoref{lem:coker-ox-premod} promises a morphism $\overline\psi\pre\colon\coker\pre\varphi\to\mc H$ of $\OO_X$-premodules such that
	\[\psi=\overline\psi\pre\circ\pi\pre.\]
	However, $\mc H$ is a sheaf, so \autoref{prop:sheafification-ox-mod} assures us that there is a morphism $\overline\psi\colon\coker\varphi\to\mc H$ of $\OO_X$-modules such that $\overline\psi\pre=\overline\psi\circ\op{sh}$. Thus,
	\[\psi=\overline\psi\pre\circ\pi\pre=\overline\psi\circ\op{sh}\circ\pi\pre=\overline\psi\circ\pi,\]
	which is what we wanted.
\end{proof}
\begin{corollary}
	Fix a ringed space $(X,\OO_X)$ and a morphism $\varphi\colon\mc F\to\mc G$ of $\OO_X$-modules. The following are equivalent.
	\begin{listalph}
		\item $\varphi$ is epic in the category of sheaves.
		\item $\varphi$ is epic in the category of $\OO_X$-modules.
	\end{listalph}
\end{corollary}
\begin{proof}
	This is similar to \autoref{cor:mono-ox-mod}. By \autoref{lem:epiiszerocoker}, we see that $\varphi$ is epic in the category of $\OO_X$-modules if and only if $\coker\varphi$ vanishes. However, the cokernel of $\varphi$ is the same in the category of sheaves as in the category of $\OO_X$-modules by \autoref{prop:ox-mod-coker}, so $\coker\varphi$ vanishing is equivalent to $\varphi$ being monic in the category of sheaves by \autoref{lem:epiiszerocoker}.
\end{proof}

\subsection{\texorpdfstring{$\mathrm{Mod}_{\OO_X}$}{ Mod-OX} Is Abelian}
Because we can, we will go ahead and show that $\mathrm{Mod}_{\OO_X}$ is abelian. We have two more checks.
\begin{lemma} \label{lem:ox-mod-kercoker}
	Fix a ringed space $(X,\OO_X)$ and a monic morphism $\varphi\colon\mc F\to\mc G$ of $\OO_X$-modules. Then actually $\varphi\colon\mc F\to\mc G$ makes $\mc F$ the kernel of the cokernel $\pi\colon\mc G\to\coker\varphi$.
\end{lemma}
\begin{proof}
	By \autoref{lem:kercoker}, we know that the map $\varphi\colon\mc F\to\mc G$ identifies $\mc F$ as $\ker\pi$ in the category of sheaves. Now, by \autoref{prop:ox-mod-ker}, we see that $\ker\pi$ in the category of sheaves is the same as in the category of $\OO_X$-modules, so we conclude that $\varphi\colon\mc F\to\mc G$ remains a kernel in the category of $\OO_X$-modules.

	To be more explicit, we note that the universal property of the kernel $\ker\pi$ promises a unique sheaf morphism $\overline\varphi$ making the diagram
	% https://q.uiver.app/?q=WzAsNSxbMiwxLCJcXG1jIEciXSxbMiwyLCJcXGNva2VyXFxwaSJdLFsxLDIsIlxcbWMgWiJdLFswLDAsIlxcbWMgRiJdLFsxLDEsIlxca2VyXFxwaSJdLFswLDEsIlxccGkiXSxbNCwwLCJcXGlvdGEiXSxbNCwyXSxbMiwxXSxbMyw0LCJcXG92ZXJsaW5lXFx2YXJwaGkiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMywwLCJcXHZhcnBoaSIsMCx7ImN1cnZlIjotMn1dLFszLDIsIiIsMSx7ImN1cnZlIjoyfV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc F} \\
		& \ker\pi & {\mc G} \\
		& {\mc Z} & \coker\pi
		\arrow["\pi", from=2-3, to=3-3]
		\arrow["\iota", from=2-2, to=2-3]
		\arrow[from=2-2, to=3-2]
		\arrow[from=3-2, to=3-3]
		\arrow["\overline\varphi"{description}, dashed, from=1-1, to=2-2]
		\arrow["\varphi", curve={height=-12pt}, from=1-1, to=2-3]
		\arrow[curve={height=12pt}, from=1-1, to=3-2]
	\end{tikzcd}\]
	commute. In fact, by \autoref{lem:kercoker}, we see that $\overline\varphi$ is in fact a sheaf isomorphism because $\mc F$ is also a kernel for $\pi$, so we get to apply the usual universal property arguments.
	
	But because $\varphi$ is a morphism of $\OO_X$-modules, we see that $\overline\varphi$ is also an $\mathcal O_X$-module isomorphism by \autoref{lem:better-ox-mod-iso}. As such, $\overline\varphi\colon\mc F\cong\ker\pi$ as $\OO_X$-modules, which makes $\mc F$ into a kernel of $\pi$ in the category of $\OO_X$-modules, where the needed inclusion map is $\iota\circ\overline\varphi=\varphi$.
\end{proof}
\begin{lemma} \label{lem:ox-mod-cokerker}
	Fix a ringed space $(X,\OO_X)$ and an epic morphism $\varphi\colon\mc F\to\mc G$ of $\OO_X$-modules. Then actually $\varphi\colon\mc F\to\mc G$ makes $\mc G$ the cokernel of the kernel $\iota\colon\ker\varphi\to\mc F$.
\end{lemma}
\begin{proof}
	This is very similar to the previous proof. By \autoref{lem:cokerker}, we know that the map $\varphi\colon\mc F\to\mc G$ identifies $\mc G$ as $\coker\iota$ in the category of sheaves. Now, by \autoref{prop:ox-mod-coker}, we see that $\coker\iota$ in the category of sheaves is the same as in the category of $\OO_X$-modules, so we conclude that $\varphi\colon\mc F\to\mc G$ remains a kernel in the category of $\OO_X$-modules.

	To be more explicit, we note that the universal property of the kernel $\coker\iota$ promises a unique sheaf morphism $\overline\varphi$ making the diagram
	% https://q.uiver.app/?q=WzAsNSxbMiwyLCJcXG1jIEciXSxbMSwxLCJcXGNva2VyXFxpb3RhIl0sWzAsMCwiXFxrZXJcXHZhcnBoaSJdLFsxLDAsIlxcbWMgRiJdLFswLDEsIlxcbWMgWiJdLFszLDEsIlxccGkiLDJdLFsyLDMsIlxcaW90YSJdLFsyLDRdLFs0LDFdLFszLDAsIlxcdmFycGhpIiwwLHsiY3VydmUiOi0yfV0sWzQsMCwiIiwyLHsiY3VydmUiOjJ9XSxbMSwwLCJcXG92ZXJsaW5lXFx2YXJwaGkiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		\ker\varphi & {\mc F} \\
		{\mc Z} & \coker\iota \\
		&& {\mc G}
		\arrow["\pi"', from=1-2, to=2-2]
		\arrow["\iota", from=1-1, to=1-2]
		\arrow[from=1-1, to=2-1]
		\arrow[from=2-1, to=2-2]
		\arrow["\varphi", curve={height=-12pt}, from=1-2, to=3-3]
		\arrow[curve={height=12pt}, from=2-1, to=3-3]
		\arrow["\overline\varphi"{description}, dashed, from=2-2, to=3-3]
	\end{tikzcd}\]
	commute. In fact, by \autoref{lem:kercoker}, we see that $\overline\varphi$ is in fact a sheaf isomorphism because $\mc G$ is also a cokernel for $\iota$, so we get to apply the usual universal property arguments.
	
	But because $\varphi$ is a morphism of $\OO_X$-modules, we see that $\overline\varphi$ is also an $\mathcal O_X$-module isomorphism by \autoref{lem:better-ox-mod-iso}. As such, $\overline\varphi\colon\coker\iota\cong\coker\varphi$ as $\OO_X$-modules, which makes $\mc G$ into a cokernel of $\iota$ in the category of $\OO_X$-modules, where the needed inclusion map is $\overline\varphi\circ\pi=\varphi$.
\end{proof}
\begin{theorem} \label{thm:ox-mod-is-abelian}
	Fix a ringed space $(X,\OO_X)$. Then the category of $\OO_X$-modules is abelian.
\end{theorem}
\begin{proof}
	The category is additive by \autoref{cor:ox-mod-additive}. We have kernels by \autoref{prop:ox-mod-ker} and cokernels by \autoref{prop:ox-mod-coker}, and they cohere appropriately by \autoref{lem:ox-mod-kercoker} and \autoref{lem:ox-mod-cokerker}.
\end{proof}
Now that our category is abelian, we can discuss exactness.
\begin{cor} \label{cor:exactness-for-ox-mod}
	Fix a ringed space $(X,\OO_X)$. Then a sequence of $\OO_X$-modules
	\[\mc F\stackrel\alpha\to\mc G\stackrel\beta\to\mc H\]
	is exact at $\mc G$ in the category of $\OO_X$-modules if and only if it is exact at $\mc G$ in the category of sheaves of abelian groups.
\end{cor}
\begin{proof}
	The complex is exact at $\mc G$ if and only if the image map $\mc F\to\coker\ker\alpha$ serves as a kernel of the map $\mc G\to\mc H$. However, cokernels and kernels are the exact same in the category of $\OO_X$-modules as in the category of sheaves of abelian groups, as discussed in \autoref{prop:ox-mod-ker} and \autoref{prop:ox-mod-coker}, so these two exactness are equivalent.
\end{proof}

\subsection{Direct Sums}
We will want to be able to discuss ``free $\OO_X$-modules'' and relatives later on, so for these we must discuss direct sums.
\begin{lemma} \label{lem:direct-sum-ox-premod}
	Fix a ringed space $(X,\OO_X)$ and some collection $\{\mc F_\alpha\}_{\alpha\in\lambda}$ of $\OO_X$-premodules. Then the data
	\[\mc F(U)\coloneqq\bigoplus_{\alpha\in\lambda}\mc F_\alpha(U)\]
	assembles into an $\mathcal O_X$-premodule. Further, the natural inclusions $\iota_\alpha\colon\mc F_\alpha\to\mc F$ are $\OO_X$-premodule morphisms.
\end{lemma}
\begin{proof}
	Note that each $\mc F_\alpha(U)$ is an $\mathcal O_X(U)$-module, so taking the direct sum of modules tells us that
	\[\mc F(U)\coloneqq\bigoplus_{\alpha\in\lambda}\mc F_\alpha(U)\]
	remains an $\mathcal O_X(U)$-module as a submodule of the product $\prod_{\alpha\in\lambda}\mc F_\alpha(U)$.

	To see that we form a presheaf, fix some open $U\subseteq X$. Then we define our restriction maps for any $(f_\alpha)_{\alpha\in\lambda}\in\mc F(U)$ and $V\subseteq U$ by
	\[(f_\alpha)_{\alpha\in\lambda}|_V\coloneqq(f_\alpha|_V)_{\alpha\in\lambda}.\]
	Here are our checks.
	\begin{itemize}
		\item Well-defined: note that $f_\alpha=0$ for all but finitely many $\alpha$, so $f_\alpha|_V$ still vanishes for all but finitely many $\alpha$, so we do indeed have $(f_\alpha|_V)_{\alpha\in\lambda}\in\mc F(V)$.
		\item Identity: if $U=V$, we see $(f_\alpha)_\alpha|_V=(f_\alpha|_V)_\alpha=(f_\alpha)_\alpha$.
		\item Functoriality: if $W\subseteq V\subseteq U$, then $(f_\alpha)_\alpha|_V|_W=(f_\alpha|_V|_W)_\alpha=(f_\alpha|_W)_\alpha=(f_\alpha)_\alpha|_W$.
		\item $\OO_X$-module: if $r\in\OO_X(U)$ and $(f_\alpha)_\alpha\in\mc F(U)$, then any $V\subseteq U$ will give
		\[\big(r\cdot(f_\alpha)_{\alpha\in\lambda}\big)|_V=(rf_\alpha)_{\alpha\in\lambda}|_V=\big((rf_\alpha)|_V\big)_{\alpha\in\lambda}=\big(r|_V\cdot f_\alpha|_V\big)_{\alpha\in\lambda}=r|_V\cdot(f_\alpha)_{\alpha\in\lambda}|_V.\]
	\end{itemize}
	The above checks complete the construction of $\mc F$.

	It remains to discuss the inclusions $\iota_\beta\colon\mc F_\beta\to\mc F$ for some fixed $\beta\in\lambda$. Well, for any open $U\subseteq X$, we note that we have a map
	\[\mc F_\beta(U)\to\bigoplus_{\alpha\in\lambda}\mc F_\alpha(U)\]
	induced by the direct sum in the category of $\OO_X(U)$-modules as $f\mapsto(1_{\alpha=\beta}f)_{\alpha\in\lambda}$. This is a morphism of presheaves because any open $V\subseteq U$ and $f\in\mc F_\beta(U)$ give
	\[(\iota_\beta)_U(f)|_V=(1_{\alpha=\beta}f)_{\alpha\in\lambda}|_V=(1_{\alpha=\beta}f|_V)_{\alpha\in\lambda}=(\iota_\beta)_V(f|_V).\]
	And this is a morphism of $\OO_X$-premodules because any $r\in\OO_X(U)$ and $f\in\mc F_\beta(U)$ will give
	\[r\iota_\beta(f)=r\cdot(1_{\alpha=\beta}f)_{\alpha\in\lambda}=(1_{\alpha=\beta}\cdot rf)_{\alpha\in\lambda}=\iota_\beta(rf).\]
	This finishes.
\end{proof}

Because we used sheafification, we will want to understand direct sums at stalks.
\begin{lemma}
	Fix a ringed space $(X,\OO_X)$ and some collection $\{\mc F_\alpha\}_{\alpha\in\lambda}$ of $\OO_X$-modules, and let $\mc F$ be their direct sum. Then there are natural inclusions $\iota_\alpha\colon\mc F_\alpha\to\mc F$ yielding the isomorphism of $\OO_{X,p}$-modules
	\[\bigoplus_{\alpha\in\lambda}\mc F_{\alpha,p}\to\mc F_p\]
	at each point $p\in X$.
\end{lemma}
\begin{proof}
	To begin, we use \autoref{lem:direct-sum-ox-premod} to define an $\mathcal O_X$-premodule by
	\[\mc F\pre(U)\coloneqq\bigoplus_{\alpha\in\lambda}\mc F_\alpha(U),\]
	and we let $\op{sh}\colon\mc F\pre\to\mc F$ be the sheafification map. Further, we let $\iota_\alpha\pre\colon\mc F_\alpha\to\mc F\pre$ be the inclusions of \autoref{lem:direct-sum-ox-premod}, which lets us set $\iota_\alpha\coloneqq{\op{sh}}\circ\iota_\alpha\pre$.

	Thus, taking stalks, we have induced morphisms $\iota_{\alpha,p}\colon\mc F_{\alpha,p}\to\mc F_p$ of $\OO_{X,p}$-modules at each $p$.
	Namely, $(\iota_\alpha\pre)_p$ is a morphism of $\OO_{X,p}$-modules by \autoref{lem:ox-mod-stalk-morphism},
	and $\op{sh}_p$ is an isomorphism of $\OO_{X,p}$-modules by \autoref{rem:sheafification-stalks-ox-mod}.
	So using the direct sum in the category of $\OO_{X,p}$-modules, we get a morphism
	\[\bigoplus_{\alpha\in\lambda}\mc F_{\alpha,p}\stackrel\iota\to\mc F\pre_{\alpha,p}\stackrel{\op{sh}_p}\to\mc F_p.\]
	In particular, it remains to show that the left morphism here is an isomorphism. It's already a morphism of $\OO_{X,p}$-modules, so we really just need to show bijectivity.
	\begin{itemize}
		\item Injective: suppose that we have a collection of germs $g_\alpha\coloneqq[(V_\alpha,f_\alpha)]\in\mc F_{\alpha,p}$ which makes an element of $\bigoplus_{\alpha\in\lambda}\mc F_{\alpha,p}$ going to $0$ under $\iota$. To begin, we note that all but finitely many of the $g_\alpha\in\mc F_{\alpha,p}$ are allowed to be nonzero, so define
		\[V\coloneqq\bigcap_{\substack{\alpha\in\lambda\\g_\alpha\ne0}}V_\alpha,\]
		which is still contains $p$ and remains open as the finite union of opens. Now, we restrict all the $[(V_\alpha,f_\alpha)]$ to $V$, where we see that $g_\alpha=0$ means that $[(V_\alpha,f_\alpha])=[(V,0)]$, so we may now just assume that $f_\alpha=0$ for all but finitely many $\alpha$.

		In total, we unravel our definitions to give
		\[0=\iota\big((g_\alpha)_{\alpha\in\lambda}\big)=\sum_{\beta\in\lambda}\iota_{\beta,p}\pre([(V,f_\beta)])=\sum_{\beta\in\lambda}[(V,\iota_{\beta,V}\pre f_\beta)]=[(V,(f_\alpha)_{\alpha\in\lambda})],\]
		where these sums are legal because they are (in practice) finite with only finitely many nonzero terms. Thus, we are told that there is some open $W\subseteq V$ containing $p$ such that
		\[(f_\alpha)_{\alpha\in\lambda}|_W=0,\]
		which now forces $f_\alpha|_W=0$ for each $\alpha$, so $[(V,f_\alpha)]=0$ for each $\alpha$, so our original tuple of germs $(g_\alpha)_\alpha$ also vanishes.

		\item Surjective: Fix a germ $[(V,(f_\alpha)_\alpha)]\in\mc F\pre_p$. Notably, only finitely many of the $f_\alpha$ are nonzero, so we can expand
		\[[(V,(f_\alpha)_\alpha)]=\sum_{\beta\in\lambda}[(V,(1_{\alpha=\beta}f_\alpha)_\alpha)]=\sum_{\beta\in\lambda}[(V,\iota_{\beta,V}f_\beta)]=\sum_{\alpha\in\lambda}\iota_{\beta,p}([(V,f_\beta)])=\iota\big(([(V,f_\alpha)])_{\alpha\in\lambda}\big),\]
		which is the needed element in the pre-image.
		\qedhere
	\end{itemize}
\end{proof}

\subsection{Tensor Products}
The tensor product is an important enough notion for modules that we will also want for our $\OO_X$-modules. For example, the tensor product will behave well with modules which are locally $\OO_X$.
\begin{lemma}
	Fix a ringed space $(X,\OO_X)$ and two $\OO_X$-premodules $\mc F$ and $\mc G$. Then the data of
	\[\mc T(U)\coloneqq\mc F(U)\otimes_{\OO_X(U)}\mc G(U)\]
	assembles into an $\mathcal O_X$-premodule.
\end{lemma}
\begin{proof}
	To begin, we note that $\mc F(U)$ and $\mc G(U)$ are both $\OO_X(U)$-modules, so the tensor product at least makes sense and endows $\mc T(U)$ with an $\mathcal O_X(U)$-action. To define our restriction maps, we claim that opens $V\subseteq U$ make the map
	\[\arraycolsep=1.4pt\begin{array}{cccc}
		\mc F(U)\times\mc G(U) &\to& \mc F(V)\otimes_{\OO_X(V)}\mc G(V) \\
		(f,g) &\mapsto&(f|_V)\otimes(g|_V)
	\end{array}\]
	$\OO_X(U)$-bilinear: indeed, for $f_1,f_2\in\mc F(U)$ and $g_1,g_2\in\mc G(U)$ and $r_1,r_2,s_1,s_2\in\OO_X(U)$, we compute
	\begin{align*}
		&\phantom{{}={}}(r_1f_1+r_2f_2)|_V\otimes(s_1g_1+s_2g_2)|_V \\
		&= (r_1|V\cdot f_1|_V+r_2|_V\cdot f_2|_V)\otimes(s_1|_V\cdot g_1|_V+s_2|_V\cdot g_2|_V) \\
		&= (r_1s_1)|_V\cdot(f_1|_V\otimes g_1|_V)+(r_1s_2)|_V\cdot(f_1|_V\otimes g_2|_V) \\
		&\qquad+(r_2s_1)|_V\cdot(f_2|_V\otimes g_1|_V)+(r_2s_2)|_V\cdot(f_2|_V\otimes g_2|_V),
	\end{align*}
	where we have used the fact that restriction is a morphism of $\OO_X(V)$-modules and a ring homomorphism $\OO_X(U)\to\OO_X(V)$.

	Thus, we induce a restriction map $\op{res}_{U,V}\colon\mc T(U)\to\mc T(V)$ by extending $f\otimes g\mapsto(f|_V)\otimes(g|_V)$. To see that this assembles into an $\mathcal O_X$-premodule, we check that any opens $V\subseteq U$ makes
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXE9PX1goVSlcXHRpbWVzXFxtYyBUKFUpIl0sWzEsMCwiXFxtYyBUKFUpIl0sWzAsMSwiXFxPT19YKFYpXFx0aW1lc1xcbWMgVChWKSJdLFsxLDEsIlxcbWMgVChWKSJdLFsyLDAsIihyLGZcXG90aW1lcyBnKSJdLFszLDAsInIoZlxcb3RpbWVzIGcpIl0sWzIsMSwiKHJ8X1YsZnxfVlxcb3RpbWVzIGd8X1YpIl0sWzMsMSwicnxfVihmfF9WXFxvdGltZXMgZ3xfVikiXSxbMCwxXSxbMSwzLCJcXG9we3Jlc31fe1UsVn0iXSxbMCwyLCIoXFxvcHtyZXN9X3tVLFZ9LFxcb3B7cmVzfV97VSxWfSkiLDJdLFsyLDNdLFs0LDUsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNSw3LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzQsNiwiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs2LDcsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\OO_X(U)\times\mc T(U)} & {\mc T(U)} & {(r,f\otimes g)} & {r(f\otimes g)} \\
		{\OO_X(V)\times\mc T(V)} & {\mc T(V)} & {(r|_V,f|_V\otimes g|_V)} & {r|_V(f|_V\otimes g|_V)}
		\arrow[from=1-1, to=1-2]
		\arrow["{\op{res}_{U,V}}", from=1-2, to=2-2]
		\arrow["{(\op{res}_{U,V},\op{res}_{U,V})}"', from=1-1, to=2-1]
		\arrow[from=2-1, to=2-2]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
		\arrow[maps to, from=1-3, to=2-3]
		\arrow[maps to, from=2-3, to=2-4]
	\end{tikzcd}\]
	commute, which follows by extending the computation in the right square additively.
\end{proof}
So we have the following definition.
\begin{definition}[Tensor product module]
	Fix a ringed space $(X,\OO_X)$ and some $\OO_X$-modules $\mc F$ and $\mc G$. Then the \textit{tensor product module} $\mc F\otimes\mc G$ is the sheafification of the $\OO_X$-premodule coming from the data
	\[U\mapsto\mc F(U)\otimes_{\OO_X(U)}\mc G(U).\]
\end{definition}

\subsection{Sheaf Theory for Modules}
Let's give some more sheaf-theoretic constructions. As usual, the direct image is good.
\begin{lemma}
	Fix a morphism $f\colon(X,\OO_X)\to(Y,\OO_Y)$ of ringed spaces. If $\mc F$ is an $\mathcal O_X$-module, then $f_*\mc F$ is naturally an $\mathcal O_Y$-module.
\end{lemma}
\begin{proof}
	The point is to use the sheaf morphism $f^\sharp\colon\OO_Y\to f_*\OO_X$ to define our $\OO_Y$-action. Indeed, for an open subset $U\subseteq Y$, we need to define an action of $\OO_Y(U)$ on $f_*\mc F(U)=\mc F(f^{-1}U)$. Well, we have a ring map
	\[f^\sharp_U\colon\OO_Y(U)\to \OO_X\left(f^{-1}U\right),\]
	so the action homomorphism $\OO_X\left(f^{-1}U\right)\to\op{Aut}\left(\mc F(f^{-1}U)\right)$ can be pre-composed with $f^\sharp$ to exhibit an action homomorphism $\OO_Y(U)\to\op{Aut}(f_*\mc F(U))$. Explicitly, our action will send $r\in\OO_Y(U)$ and $m\in f_*\mc F(U)$ to $r\cdot m\coloneqq f^\sharp_U(r)\cdot m$.

	It remains to see that this creates an $\mathcal O_Y$-module. Well, given open subsets $V\subseteq U\subseteq X$, some $r\in\OO_Y(U)$ and some $m\in f_*\mc F(U)$, we compute
	\begin{align*}
		(r\cdot m)|_V &= (f^\sharp_U(r)\cdot m)|_{V} \\
		&= f^\sharp_U(r)|_V\cdot m|_V \\
		&= f^\sharp_V(r)\cdot m|_V,
	\end{align*}
	which is what we wanted.
\end{proof}
Going the other way requires some care. In particular, we won't want to just look at $f^{-1}\mc F$ to pull back because it's not clear how to give the sheaf an $\mathcal O_X$-module give an $\mathcal O_Y$-action.
\begin{definition}[Direct image module]
	Fix a morphism $f\colon(X,\OO_X)\to(Y,\OO_Y)$ of ringed spaces. If $\mc F$ is an $\mathcal O_X$-module, then $f_*\OO_X$ remains an $\mathcal O_X$-module, so the \textit{direct image module} $f_*\mc F$ will become an $\mathcal O_Y$-module through $f^\sharp\colon\OO_Y\to f_*\OO_X$.
\end{definition}
However, pullback sheaves do change from being ``just'' $f^{-1}\mc F$. Nonetheless, let's pick up some facts about $f^{-1}$.
\begin{lemma} \label{lem:ox-res-functorial}
	Fix a ringed space $(X,\OO_X)$. Then, for any open $U\subseteq X$, the restriction taking an $\mathcal O_X$-module $\mc F$ to $\mc F|_U$ defines the actions of a functor $\cdot|_U\colon\mathrm{Mod}_{\OO_X}\to\mathrm{Mod}_{\OO_X|_U}$ on objects.
\end{lemma}
\begin{proof}
	We already have a functor $\mathrm{Sh}_X\to\mathrm{Sh}_{U}$ by \autoref{lem:inv-image-is-functor}, using the inclusion $U\into X$. Thus, we just need to check that all the mappings preserve $\OO_X$-structure.
	\begin{itemize}
		\item Given an $\mathcal O_X$-module $\mc F$, we give $\mc F|_U$ the structure of an $\mathcal O_X|_U$-module. Well, for any open $V\subseteq U$, we note that $\mc F|_U=\mc F(V)$ already has the structure of an $\mathcal O_X(V)=\OO_X|_U(V)$-module. To check that this gives $\mathcal O_X$-module, we pick up $f\in\mc F|_U(V)$ and $r\in\OO_X(V)$ and note that any $V'\subseteq V$ will have
		\[(rf)|_{V'}=r|_{V'}\cdot f|_{V'}.\]
		\item Given a morphism of $\OO_X$-modules $\varphi\colon\mc F\to\mc G$, we need to show that $\varphi|_U\colon\mc F|_U\to\mc G|_U$ is a morphism of $\OO_X$-modules. Well, we already have a sheaf morphism. Then for any open $V\subseteq U$ and $f\in\mc F|_U(V)$, we compute
		\[(\varphi|_U)_V(rf)=\varphi_V(rf)=r\varphi_V(f)=r(\varphi|_U)_V(f).\]
	\end{itemize}
	We now note that our functoriality checks are in fact included in \autoref{lem:inv-image-is-functor}, by our definitions, so we are done.
\end{proof}
Now here is our pullback module.
\begin{definition}[Pullback module]
	Given an $\mathcal O_Y$-module $\mc G$, we see $f^{-1}\mc G$ is an $f^{-1}\OO_Y$-module. To make this an $\mathcal O_X$-module, we would like to use the morphism $f^\flat\colon f^{-1}\OO_Y\to\OO_X$, but this only makes $\OO_X$ into an $f^{-1}\OO_Y$-module, so we define
	\[f^*\mc G\coloneqq f^{-1}\mc G\otimes_{f^{-1}\OO_Y}\OO_X\]
	to be the \textit{pullback module} $\OO_X$-module.
\end{definition}
\begin{remark}
	Analogously to \autoref{prop:invdiradjunction}, we have the adjunction
	\[\op{Hom}_{\OO_X}(f^*\mc G,\mc F)\simeq\op{Hom}_{\OO_Y}(\mc G,f_*\mc F).\]
	I do not expect to use this neither result nor $f^*$, so I will not run any checks.
\end{remark}
\begin{example}
	Given a ring map $\varphi\colon B\to A$, we induce a scheme map $f\colon\Spec A\to\Spec B$. Now, there is a functor from $A$-modules $M$ to $\OO_X$-modules $\widetilde M$. Then we see that we can send such a module $\widetilde M$ back to a $B$-module as $f_*(\widetilde M)=\widetilde M$ by taking global sections and using $\varphi$, and we can send a $B$-module $N$ to $f^*(\widetilde N)=\widetilde{N\otimes_BA}$ given the obvious $A$-module structure.
\end{example}

\subsection{Sheaves from Modules}
% \begin{warn}
% 	As we get closer to thinking about sheaves of modules as vector bundles, I will more aggressively adopt the notation $\Gamma(U,\mc F)$ to mean $\mc F(U)$.
% \end{warn}
To make the above example precise, we need to define $\widetilde M$ as an $\mathcal O_{\Spec A}$-module.
\begin{lemma} \label{lem:get-ox-mod-from-mod}
	Fix an affine scheme $X$, and set $A\coloneqq\OO_X(X)$. Given an $A$-module $M$, the data given by
	\[\widetilde M(X_f)\coloneqq S(D(f))^{-1}M\simeq M\otimes_A\OO_X(X_f)\]
	for $f\in A$ will assemble into a sheaf on the base and thus an $\mathcal O_X$-module.
\end{lemma}
\begin{remark} \label{rem:concrete-associated-module}
	The isomorphism $S(D(f))^{-1}A\simeq A_f$ of \autoref{rem:eval-structure-sheaf-on-base} tells us that
	\[\arraycolsep=1.4pt\begin{array}{ccccccccc}
		\widetilde M(X_f) &=& S(D(f))^{-1}M &\simeq&  M\otimes_A\OO_X(X_f)^{-1}A &\simeq& M\otimes_AA_f &\simeq& M_f \\
		&& m/g &\mapsto& m\otimes1/g &\mapsto& m\otimes g^{-1} &\mapsto& g^{-1}m
	\end{array}\]
	so that the naturality of these isomorphisms means that we tend to think of $\widetilde M(X_f)$ as just $M_f$ in practice.
\end{remark}
\begin{proof}
	Recall that $S(D(f))=\{g\in A:V(\{g\})\subseteq(\Spec A)\setminus D(f)\}$, which are the functions on $A$ which do not vanish on $D(f)$. Thus, $D(f')\subseteq D(f)$ implies $S(D(f))\subseteq S(D(f'))$, so we induce a natural localization map
	\[\op{res}_{D(f),D(f')}\colon S(D(f))^{-1}M\to S(D(f'))^{-1}M.\]
	To see that we've made a sheaf on the base, reread the proof of \autoref{lem:check-structure-sheaf} and replace all the numerators from elements of $A$ to elements of $M$. We won't write this out proof here because it really is just a matter of changing all the variable names.

	Thus, we have induced a sheaf on the base, which extends uniquely to a sheaf by \autoref{prop:sheaffrombase}. It remains to show that $\widetilde M$ is an $\mathcal O_X$-module. To begin, we need to define our action $\cdot\colon\OO_X\times\widetilde M\to\widetilde M$. By \autoref{lem:morphismonbase}, it suffices to exhibit a morphism of sheaves on the base, for which we need to give morphisms
	\[\OO_X(X_f)\times\widetilde M(X_f)\to\widetilde M(X_f).\]
	Well, we just have to note that $\OO_X(X_f)$ has a natural action on $\widetilde M(X_f)\simeq M\otimes_A\OO_X(X_f)$ by multiplying on the right coordinate. Translating this back over to $S(D(f))^{-1}M$, our natural action takes $a/g\in\OO_X(X_f)\simeq S(D(f))^{-1}A$ and $m/h\in\widetilde M(D(f))$ and spits out $a/g\cdot m/h=(am)/(gh)$.

	To see that we assemble into a morphism of sheaves on the base, we fix distinguished open sets $D(f')\subseteq D(f)$ and note that the diagram
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXE9PX1goRChmKSlcXHRpbWVzXFxHYW1tYShEKGYpLFxcd2lkZXRpbGRlIE0pIl0sWzAsMSwiXFxPT19YKEQoZicpKVxcdGltZXNcXEdhbW1hKEQoZicpLFxcd2lkZXRpbGRlIE0pIl0sWzEsMCwiXFxHYW1tYShEKGYpLFxcd2lkZXRpbGRlIE0pIl0sWzEsMSwiXFxHYW1tYShEKGYnKSxcXHdpZGV0aWxkZSBNKSJdLFsyLDAsIihhL2csbS9oKSJdLFsyLDEsIihhL2csbS9oKSJdLFszLDAsIihhbSkvKGdoKSJdLFszLDEsIihhbSkvKGdoKSJdLFswLDJdLFsyLDNdLFswLDFdLFsxLDNdLFs0LDUsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw2LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzYsNywiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs1LDcsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\OO_X(X_f)\times\widetilde M(X_f)} & {\widetilde M(X_f)} & {(a/g,m/h)} & {(am)/(gh)} \\
		{\OO_X(X_f)\times\widetilde M(D(f'))} & {\widetilde M(X_f)} & {(a/g,m/h)} & {(am)/(gh)}
		\arrow[from=1-1, to=1-2]
		\arrow[from=1-2, to=2-2]
		\arrow[from=1-1, to=2-1]
		\arrow[from=2-1, to=2-2]
		\arrow[maps to, from=1-3, to=2-3]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
		\arrow[maps to, from=2-3, to=2-4]
	\end{tikzcd}\]
	commutes. So we have induced a scalar multiplication which is a sheaf morphism, so we have made an $\mathcal O_X$-module.
\end{proof}
Let's codify our notation.
\begin{notation}
	Fix an affine scheme $X$, and set $A\coloneqq\OO_X(X)$. Given an $A$-module $M$, we define the $\OO_X$-module $\widetilde M$ from the sheaf on the distinguished base defined by
	\[\widetilde M(X_f)\coloneqq S(D(f))^{-1}M,\]
	with the usual restrictions. Note we ran our checks in \autoref{lem:get-ox-mod-from-mod}.
\end{notation}
\begin{example}
	From the above example, we can pass $A$ through to see that $\widetilde A\simeq\OO_X$ is an $\mathcal O_X$-module. Indeed, let $\varphi\colon X\cong\Spec A$ be the canonical isomorphism from \autoref{cor:the-affine-iso}. Then, for each affine open subscheme $X_f\subseteq X$, we see
	\[\widetilde A(X_f)=S(D(f))^{-1}A=\OO_{\Spec A}(D(f))\stackrel{\varphi^\sharp_{D(f)}}\cong\OO_X(X_f)\]
	by definition of $\varphi^\sharp$. Notably, this is functorial in $X_f$ because $\varphi^\sharp$ is.
\end{example}
Here is a quick sanity check.
\begin{lemma} \label{lem:stalk-of-gotten-ox-mod}
	Fix an affine scheme $X$, and set $A\coloneqq\OO_X(X)$. Let $\varphi\colon X\to\Spec A$ be the canonical isomorphism. Given an $A$-module $M$ and a point $x\in X$, we have a natural isomorphism $M_{\varphi(x)}\simeq\widetilde M_{x}$.
\end{lemma}
\begin{proof}
	We imitate the proof of \autoref{lem:affinestalk}. We begin by exhibiting the natural map $\alpha\colon M_{\varphi(x)}\to\widetilde M_x$. Well, if $f\notin\varphi(x)$, then we see $\varphi(x)\in D(f)$, so $x\in X_f$ by construction of $\varphi$. Thus, we induce a map
	\[\alpha\colon m/f\mapsto\left[\left(X_f,\frac mf\right)\right].\]
	Here are the checks on $\alpha$.
	\begin{itemize}
		\item Well-defined: if $m/f=m'/f'$ in $M_{\varphi(x)}$ for $f,f'\in\varphi(x)$, then there exists $f''\notin\varphi(x)$ such that $f''f'm=f''fm'$. Thus, in $\widetilde M(X_{f''})$, we see that
		\[\frac mf=\frac{m'}{f'}\]
		because $f''\in S(D(f''))$. Thus, we see that
		\[\left[\left(X_f,\frac mf\right)\right]=\left[\left(X_{f''},\frac mf\right)\right]=\left[\left(X_{f''},\frac {m'}{f'}\right)\right]=\left[\left(X_{f'},\frac {m'}{f'}\right)\right].\]
		\item Injective: suppose $[(X_f,m/f)]=[(X_{f'},m'/f')]$ in $\widetilde M_x$. Using the distinguished base, we are promised $X_{f''}$ such that $\frac mf=\frac{m'}{f'}$ in $\widetilde M(X_{f''})$, which means that there is some $g\in S(D(f''))$ such that
		\[gf'm=gfm'.\]
		Notably, $g\in\varphi(x)$ would imply that $f''\in\varphi(x)$, which is false, so we must have $g\notin\varphi(x)$. Thus, $\frac mf=\frac{m'}{f'}$ in $M_{\varphi(x)}$.
		\item Surjective: using the distinguished base, we can write any germ in $\widetilde M_{\varphi(x)}$ in the form $[(X_f,m/g)]$ where $x\notin X_f$ and $g\in S(D(f))$. Notably, $x\notin X_f$, then $\varphi(x)\notin D(f)$ by the construction of $\varphi$, so $f\notin\varphi(x)$.
		
		Further, because $g\in S(D(f))$, then it follows again that $g\notin\varphi(x)$, so $\varphi(x)\in D(g)$, so $x\in X_g$ as usual, and we note that $g\in S(D(f))$ implies that $D(g)\subseteq D(f)$, so $X_g\subseteq X_f$ by construction of $\varphi$. The point of all this is that we can restrict $m/g$ to $X_g\subseteq X_f$ as
		\[[(X_f,m/g)]=[(X_g,m/g)]=\alpha(m/g),\]
		which is what we wanted.
		\qedhere
	\end{itemize}
\end{proof}
\begin{remark}
	The above proof shows that $\widetilde M_x$ has the natural structure of an $\mathcal O_{X,x}$-module from $M_{\varphi(x)}$.
\end{remark}

\subsection{Geometry Is Opposite Algebra, Again}
As in \autoref{thm:geoisoppalg}, we are going to build towards the following result.
\begin{theorem}
	Fix an affine scheme $X$, and set $A\coloneqq\OO_X(X)$. The functor from $A$-modules to $\OO_X$-modules taking $M$ to $\widetilde M$ is exact and fully faithful. This equivalence also respects $\oplus$ and $\otimes$.
\end{theorem}
\begin{proof}[Sketch]
	Exactness is checked at stalks. Being fully faithful is approximately as hard as \autoref{thm:geoisoppalg}, where the same machinery approximately works.
\end{proof}
In particular, just as before, there is an adjunction lying in the background. Before doing anything, let's run the usual checks. Here are our functors.
\begin{lemma} \label{lem:ox-mod-tilde}
	Fix an affine scheme $X$, and set $A\coloneqq\OO_X(X)$. The map sending an $A$-module $M$ to an $\mathcal O_X$-module $\widetilde M$ defines the action of a functor $\widetilde\cdot\colon\mathrm{Mod}_A\to\mathrm{Mod}_{\OO_X}$ on objects.
\end{lemma}
\begin{proof}
	Fix an $A$-module homomorphism $\varphi\colon M\to N$, and we need to exhibit the corresponding $\OO_X$-module morphism $\widetilde\varphi\colon\widetilde M\to\widetilde N$. Well, by \autoref{lem:morphismonbase}, it suffices to exhibit a morphism on the distinguished base. For this, we define the map $\widetilde\varphi$ on some $X_f\subseteq X$ by the diagram
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXHdpZGV0aWxkZSBNKEQoZikpIl0sWzAsMSwiXFx3aWRldGlsZGUgTihEKGYpKSJdLFsxLDEsIk5cXG90aW1lc19BUyhEKGYpKV57LTF9QSJdLFsxLDAsIk1cXG90aW1lc19BUyhEKGYpKV57LTF9QSJdLFsyLDAsIm0vZyJdLFszLDAsIm1cXG90aW1lczEvZyJdLFszLDEsIlxcdmFycGhpKG0pXFxvdGltZXMxL2ciXSxbMiwxLCJcXHZhcnBoaShtKS9nIl0sWzAsMSwiXFx3aWRldGlsZGVcXHZhcnBoaV97RChmKX0iLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMCwzLCJcXHNpbWVxIiwzLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzEsMiwiXFxzaW1lcSIsMyx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6Im5vbmUifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFszLDJdLFs0LDUsIiIsMyx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNSw2LCIiLDMseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzQsNywiIiwzLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9LCJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbNyw2LCIiLDMseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\widetilde M(X_f)} & {M\otimes_AS(D(f))^{-1}A} & {m/g} & {m\otimes1/g} \\
		{\widetilde N(X_f)} & {N\otimes_AS(D(f))^{-1}A} & {\varphi(m)/g} & {\varphi(m)\otimes1/g}
		\arrow["{\widetilde\varphi_{D(f)}}"', dashed, from=1-1, to=2-1]
		\arrow["\simeq"{marking}, draw=none, from=1-1, to=1-2]
		\arrow["\simeq"{marking}, draw=none, from=2-1, to=2-2]
		\arrow[from=1-2, to=2-2]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
		\arrow[dashed, maps to, from=1-3, to=2-3]
		\arrow[maps to, from=2-3, to=2-4]
	\end{tikzcd}\]
	where we note that the map on the right is a homomorphism because it's just $\varphi\otimes_AS(D(f))^{-1}A$. To show that this assembles into a morphism of sheaves on the base, suppose $D(f')\subseteq D(f)\subseteq X$, and we note that the diagram
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXHdpZGV0aWxkZSBNKEQoZikpIl0sWzEsMCwiXFx3aWRldGlsZGUgTihEKGYpKSJdLFswLDEsIlxcd2lkZXRpbGRlIE0oRChmJykpIl0sWzEsMSwiXFx3aWRldGlsZGUgTihEKGYnKSkiXSxbMywwLCJtL2ciXSxbNCwwLCJcXHZhcnBoaShtKS9nIl0sWzMsMSwibS9nIl0sWzQsMSwiXFx2YXJwaGkobSkvZyJdLFswLDEsIlxcd2lkZXRpbGRlXFx2YXJwaGlfe0QoZil9Il0sWzIsMywiXFx3aWRldGlsZGVcXHZhcnBoaV97RChmJyl9Il0sWzAsMiwiXFxvcHtyZXN9X3tEKGYpLEQoZicpfSIsMl0sWzEsMywiXFxvcHtyZXN9X3tEKGYpLEQoZicpfSJdLFs0LDUsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNSw3LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzQsNiwiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs2LDcsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\widetilde M(X_f)} & {\widetilde N(X_f)} && {m/g} & {\varphi(m)/g} \\
		{\widetilde M(X_{f'})} & {\widetilde N(X_{f'})} && {m/g} & {\varphi(m)/g}
		\arrow["{\widetilde\varphi_{X_f}}", from=1-1, to=1-2]
		\arrow["{\widetilde\varphi_{X_{f'}}}", from=2-1, to=2-2]
		\arrow["{\op{res}_{X_f,X_{f'}}}"', from=1-1, to=2-1]
		\arrow["{\op{res}_{X_f,X_{f'}}}", from=1-2, to=2-2]
		\arrow[maps to, from=1-4, to=1-5]
		\arrow[maps to, from=1-5, to=2-5]
		\arrow[maps to, from=1-4, to=2-4]
		\arrow[maps to, from=2-4, to=2-5]
	\end{tikzcd}\]
	commutes. Lastly, to see that we have created a morphism of $\OO_X$-modules, we check that the diagram
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXE9PX1goWF9mKVxcdGltZXNcXHdpZGV0aWxkZSBNKFhfZikiXSxbMSwwLCJcXHdpZGV0aWxkZSBNKFhfZikiXSxbMCwxLCJcXE9PX1goWF9mKVxcdGltZXNcXHdpZGV0aWxkZSBOKFhfZikiXSxbMSwxLCJcXHdpZGV0aWxkZSBOKFhfZikiXSxbMywwLCIoYS9nLG0vaCkiXSxbNCwwLCIoYW0pLyhnaCkiXSxbMywxLCIoYS9nLFxcdmFycGhpKG0pL2gpIl0sWzQsMSwiXFx2YXJwaGkoYW0pLyhnaCkiXSxbMCwxXSxbMiwzXSxbMCwyLCJ7XFxpZF97XFxPT19YKFhfZil9fVxcdGltZXNcXHdpZGV0aWxkZVxcdmFycGhpX3tYX2Z9IiwyXSxbMSwzLCJcXHZhcnBoaV97WF9mfSJdLFs0LDUsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNSw3LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzQsNiwiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs2LDcsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\OO_X(X_f)\times\widetilde M(X_f)} & {\widetilde M(X_f)} && {(a/g,m/h)} & {(am)/(gh)} \\
		{\OO_X(X_f)\times\widetilde N(X_f)} & {\widetilde N(X_f)} && {(a/g,\varphi(m)/h)} & {\varphi(am)/(gh)}
		\arrow[from=1-1, to=1-2]
		\arrow[from=2-1, to=2-2]
		\arrow["{{\id_{\OO_X(X_f)}}\times\widetilde\varphi_{X_f}}"', from=1-1, to=2-1]
		\arrow["{\varphi_{X_f}}", from=1-2, to=2-2]
		\arrow[maps to, from=1-4, to=1-5]
		\arrow[maps to, from=1-5, to=2-5]
		\arrow[maps to, from=1-4, to=2-4]
		\arrow[maps to, from=2-4, to=2-5]
	\end{tikzcd}\]
	commutes.

	We now check the functoriality axioms.
	\begin{itemize}
		\item Identity: we need to show $\widetilde{\id_M}=\id_{\widetilde M}$. As usual, \autoref{lem:morphismonbase} tells us that we may check this on the distinguished base. Then, for any $m/g\in\widetilde M(X_f)$, we compute
		\[(\widetilde{\id_M})_{X_f}(m/g)=\id_M(m)/g=m/g=\id_{\widetilde M(X_f)}(m/g)=(\id_{\widetilde M})_{\widetilde M(X_f)}(m/g).\]
		\item Functoriality: fix morphism $\varphi\colon M_1\to M_2$ and $\psi\colon M_2\to M_3$, and we want to show that $\widetilde{\psi\circ\varphi}=\widetilde\psi\circ\widetilde\varphi$. By \autoref{lem:morphismonbase}, we may check this on the distinguished base. Well, for any $m/g\in\widetilde M_1(X_f)$, we compute
		\begin{align*}
			(\widetilde{\psi\circ\varphi})_{X_f}(m/g) &= (\psi\circ\varphi)(m)/g \\
			&= \psi(\varphi(m))/g \\
			&= \widetilde\psi_{X_f}((\varphi(m))/g) \\
			&= (\widetilde\psi_{X_f}\circ\widetilde\varphi_{X_f})(m/g) \\
			&= (\widetilde\psi\circ\widetilde\varphi)_{X_f}(m/g),
		\end{align*}
		which is what wanted.
		\qedhere
	\end{itemize}
\end{proof}
\begin{lemma} \label{lem:ox-gamma}
	Fix a ringed space $(X,\OO_X)$, and set $A\coloneqq\OO_X(X)$. Then, given an open subset $U\subseteq X$ the map sending an $\mathcal O_X$-module $\mc F$ to $\mc F(U)$ defines the action of a functor $\mathrm{Mod}_{\OO_X}\to\mathrm{Mod}_{\OO_X(U)}$ on objects. If $U=X$, we call this functor $\Gamma$.
\end{lemma}
\begin{proof}
	To define our functor on morphisms, we will just send $\varphi\colon\mc F\to\mc G$ to the morphism $\varphi_U\colon\mc F(U)\to\mc G(U)$. Notably, $\varphi_U$ is a morphism of $\OO_X(U)$-modules by definition of an $\mathcal O_X$-module homomorphism.

	We now check our functoriality axioms.
	\begin{itemize}
		\item Identity: note that $\id_{\mc F}\colon\mc F\to\mc F$ gets sent to the identity map $(\id_{\mc F})_U\colon\mc F(U)\to\mc F(U)$ by definition of this identity map.
		\item Functoriality: given $\varphi\colon\mc F\to\mc G$ and $\psi\colon\mc G\to\mc H$, we note $(\psi\circ\varphi)_U=\psi_U\circ\varphi_U$ by definition of our composition.
		\qedhere
	\end{itemize}
\end{proof}
Next up we exhibit some natural maps.
\begin{lemma} \label{lem:geo-opp-alg-2-map}
	Fix an affine scheme $X$, and set $A\coloneqq\OO_X(X)$. We exhibit a natural transformation $\varepsilon_\bullet\colon\widetilde\cdot\circ\Gamma\Rightarrow\id_{\mathrm{Mod}_{\OO_X}}$.
\end{lemma}
\begin{proof}
	Fix an $\mathcal O_X$-module $\mc F$ so that we want to exhibit a map $\varepsilon_{\mc F}\colon\widetilde{\mc F(X)}\to\mc F$. As usual, \autoref{lem:morphismonbase} lets us define this morphism on the distinguished base. To begin, we acknowledge that we are looking for a map of $\OO_X(X_f)$-modules
	\[S(D(f))^{-1}\mc F(X)\to\mc F(X_f).\]
	Well, we will simply define this map by
	\[(\varepsilon_{\mc F})_{X_f}\colon\frac sg\mapsto\frac1g(s|_{X_f}),\]
	where the right-hand makes sense because $\mc F(X_f)$ is an $\mathcal O_X(X_f)$-module. Here are the checks.
	\begin{itemize}
		\item Well-defined: if $s_1/g_1=s_2/g_2$, then there is some $g\in S(D(f))$ such that $gg_2s_1=gg_1s_2$, so the fact $\mc F$ is an $\mathcal O_X$-module tells us
		\[gg_2|_{X_f}\cdot s_1|_{X_f}=gg_1|_{X_f}\cdot s_2|_{X_f}\]
		which rearranges into $\frac1{g_1}(s_1|_{X_f})=\frac1{g_2}(s_2|_{X_f})$.
		\item Homomorphic: given $a/g,a'/g'\in S(D(f))^{-1}A$ and $m/h,m'/h'\in S(D(f))^{-1}A$, we compute
		\begin{align*}
			(\varepsilon_{\mc F})_{X_f}\left(\frac ag\cdot\frac mh+\frac{a'}{g'}\frac{m'}{h'}\right) &= (\varepsilon_{\mc F})_{X_f}\left(\frac{g'h'am+gha'm'}{ghg'h'}\right) \\
			&= \frac1{ghg'h'}(g'h'am|_{X_f}+gha'm'|_{X_f}) \\
			&= \frac ag\cdot\frac1{h}(m|_{X_f})+\frac{a'}{g'}\cdot\frac1{h'}(m'|_{X_f}) \\
			&= \frac ag\cdot(\varepsilon_{\mc F})_{X_f}(m/h)+\frac{a'}{g'}\cdot(\varepsilon_{\mc F})_{X_f}(m'/h').
		\end{align*}
		\item Morphism of sheaves on a base: given $X_{f'}\subseteq X_f$, we see that the diagram
		% https://q.uiver.app/?q=WzAsOCxbMCwwLCJTKEQoZikpXnstMX1cXG1jIEYoWCkiXSxbMCwxLCJTKEQoZicpKV57LTF9XFxtYyBGKFgpIl0sWzEsMCwiXFxtYyBGKEQoZikpIl0sWzEsMSwiXFxtYyBGKEQoZicpKSJdLFszLDAsIm0vZyJdLFs0LDAsIlxcZnJhYzFnbXxfe0QoZil9Il0sWzMsMSwibXxfe0QoZicpfS9nIl0sWzQsMSwiXFxmcmFjMWdtfF97RChmJyl9Il0sWzAsMiwiXFx2YXJlcHNpbG9uX1xcbWMgRiJdLFsxLDMsIlxcdmFyZXBzaWxvbl9cXG1jIEYiXSxbMCwxLCJcXG9we3Jlc31fe0QoZiksRChmJyl9IiwyXSxbMiwzLCJcXG9we3Jlc31fe0QoZiksRChmJyl9Il0sWzQsNSwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs1LDcsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw2LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzYsNywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{S(D(f))^{-1}\mc F(X)} & {\mc F(X_f)} && {m/g} & {\frac1gm|_{X_f}} \\
			{S(D(f'))^{-1}\mc F(X)} & {\mc F(X_{f'})} && {m|_{X_{f'}}/g} & {\frac1gm|_{X_{f'}}}
			\arrow["{\varepsilon_\mc F}", from=1-1, to=1-2]
			\arrow["{\varepsilon_\mc F}", from=2-1, to=2-2]
			\arrow["{\op{res}_{X_f,X_{f'}}}"', from=1-1, to=2-1]
			\arrow["{\op{res}_{X_f,X_{f'}}}", from=1-2, to=2-2]
			\arrow[maps to, from=1-4, to=1-5]
			\arrow[maps to, from=1-5, to=2-5]
			\arrow[maps to, from=1-4, to=2-4]
			\arrow[maps to, from=2-4, to=2-5]
		\end{tikzcd}\]
		commutes.
	\end{itemize}
	Thus, we have defined a morphism of our sheaves. To define a morphism of $\OO_X$-modules, we need to check that the left diagram of
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXE9PX1hcXHRpbWVzXFx3aWRldGlsZGV7XFxtYyBGKFgpfSJdLFswLDEsIlxcT09fWFxcdGltZXNcXG1jIEYiXSxbMSwwLCJcXHdpZGV0aWxkZXtcXG1jIEYoWCl9Il0sWzEsMSwiXFxtYyBGIl0sWzIsMCwiKGEsbS9nKSJdLFszLDAsIihhbSkvZyJdLFsyLDEsIihhLFxcZnJhYzFnbXxfe0QoZil9KSJdLFszLDEsIlxcZnJhYzFnKGFtfF97RChmKX0pIl0sWzAsMSwiKFxcaWRfe1xcT09fWH0sXFx2YXJlcHNpbG9uX3tcXG1jIEZ9KSIsMl0sWzIsMywiXFx2YXJlcHNpbG9uX3tcXG1jIEZ9Il0sWzAsMl0sWzEsM10sWzQsNSwiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs1LDcsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw2LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzYsNywiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\OO_X\times\widetilde{\mc F(X)}} & {\widetilde{\mc F(X)}} & {(a/h,m/g)} & {(am)/(gh)} \\
		{\OO_X\times\mc F} & {\mc F} & {(a/h,\frac1gm|_{X_f})} & {\frac1{gh}(am|_{X_f})}
		\arrow["{(\id_{\OO_X},\varepsilon_{\mc F})}"', from=1-1, to=2-1]
		\arrow["{\varepsilon_{\mc F}}", from=1-2, to=2-2]
		\arrow[from=1-1, to=1-2]
		\arrow[from=2-1, to=2-2]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
		\arrow[maps to, from=1-3, to=2-3]
		\arrow[maps to, from=2-3, to=2-4]
	\end{tikzcd}\]
	commutes; as usual, we can check the distinguished base by \autoref{lem:morphismonbase}, which is what we've done on the right.

	We now note that $\varepsilon$ is a natural transformation. Fix a morphism $\varphi\colon\mc F\to\mc G$ of $\OO_X$-modules. Then we need the leftmost diagram of
	% https://q.uiver.app/?q=WzAsMTIsWzAsMSwiXFxtYyBGIl0sWzEsMSwiXFxtYyBHIl0sWzAsMCwiXFx3aWRldGlsZGV7XFxtYyBGKFgpfSJdLFsxLDAsIlxcd2lkZXRpbGRle1xcbWMgRyhYKX0iXSxbMiwwLCJcXHdpZGV0aWxkZXtcXG1jIEYoWCl9KFhfZikiXSxbMywwLCJcXHdpZGV0aWxkZXtcXG1jIEcoWCl9KFhfZikiXSxbMiwxLCJcXG1jIEYoWF9mKSJdLFszLDEsIlxcbWMgRyhYX2YpIl0sWzQsMCwiXFxmcmFjIG1nIl0sWzQsMSwiXFxmcmFjMWcobXxfe1hfZn0pIl0sWzUsMSwiXFxmcmFjMWdcXHZhcnBoaV97WF9mfShtfF97WF9mfSkiXSxbNSwwLCJcXGZyYWN7XFx2YXJwaGlfWChtKX1nIl0sWzAsMSwiXFx2YXJwaGkiXSxbMiwzLCJcXHdpZGV0aWxkZXtcXHZhcnBoaV9YfSJdLFsyLDAsIlxcdmFyZXBzaWxvbl9cXG1jIEYiLDJdLFszLDEsIlxcdmFyZXBzaWxvbl9cXG1jIEciLDJdLFs0LDUsIihcXHdpZGV0aWxkZXtcXHZhcnBoaV9YfSlfe1hfZn0iXSxbNiw3LCJcXHZhcnBoaV97WF9mfSJdLFs0LDYsIihcXHZhcmVwc2lsb25fXFxtYyBGKV97WF9mfSIsMl0sWzUsNywiKFxcdmFyZXBzaWxvbl9cXG1jIEcpX3tYX2Z9IiwyXSxbOCwxMSwiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFsxMSwxMCwiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs4LDksIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbOSwxMCwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\widetilde{\mc F(X)}} & {\widetilde{\mc G(X)}} & {\widetilde{\mc F(X)}(X_f)} & {\widetilde{\mc G(X)}(X_f)} & {\frac mg} & {\frac{\varphi_X(m)}g} \\
		{\mc F} & {\mc G} & {\mc F(X_f)} & {\mc G(X_f)} & {\frac1g(m|_{X_f})} & {\frac1g\varphi_{X_f}(m|_{X_f})}
		\arrow["\varphi", from=2-1, to=2-2]
		\arrow["{\widetilde{\varphi_X}}", from=1-1, to=1-2]
		\arrow["{\varepsilon_\mc F}"', from=1-1, to=2-1]
		\arrow["{\varepsilon_\mc G}"', from=1-2, to=2-2]
		\arrow["{(\widetilde{\varphi_X})_{X_f}}", from=1-3, to=1-4]
		\arrow["{\varphi_{X_f}}", from=2-3, to=2-4]
		\arrow["{(\varepsilon_\mc F)_{X_f}}"', from=1-3, to=2-3]
		\arrow["{(\varepsilon_\mc G)_{X_f}}"', from=1-4, to=2-4]
		\arrow[maps to, from=1-5, to=1-6]
		\arrow[maps to, from=1-6, to=2-6]
		\arrow[maps to, from=1-5, to=2-5]
		\arrow[maps to, from=2-5, to=2-6]
	\end{tikzcd}\]
	to commute, for which it suffices by \autoref{lem:morphismonbase} to check on the distinguished base $\{X_f\}_{f\in\OO_X(X)}$, which is described on the right two squares.
\end{proof}
\begin{remark} \label{rem:natural-quasicoherent-map-is-iso}
	If $\mc F=\widetilde M$ for an $A$-module $M$, then $\varepsilon_\mc F=\id_\mc F$. Indeed, by \autoref{lem:morphismonbase}, it suffices to check this on the distinguished base. Well, for any $X_f\subseteq X$ and $m/g\in\widetilde M(X_f)$, we note
	\[(\varepsilon_\mc F)_{X_f}(m/g)=\frac1g(m|_{X_f})=m/g=({\id_\mc F})_{X_f}(m/g).\]
\end{remark}
\begin{theorem} \label{thm:ox-mod-adjunction}
	Fix an affine scheme $X$, and set $A\coloneqq\OO_X(X)$. Then the functors $\widetilde\cdot$ and $\Gamma$ are adjoint. In other words, there is a natural isomorphism
	\[\begin{array}{ccc}
		\op{Hom}_{\OO_X}(\widetilde M,\mc F) &\simeq& \op{Hom}_A(M,\mc F(X)) \\
		\varphi &\mapsto& \varphi_X \\
		\varepsilon_\mc F\circ\widetilde f &\mapsfrom& f
	\end{array}\]
	for any $A$-module $M$ and $\OO_X$-module $\mc F$. Here $\varepsilon_\bullet$ is from \autoref{lem:geo-opp-alg-2-map}.
\end{theorem}
\begin{proof}
	Quickly, note that $\varphi_X\colon\widetilde M(X)\to\mc F(X)$ is indeed a map $M\to\mc F(X)$ because $\widetilde M(X)=\widetilde M(1)=M$.
	
	Now, as in \autoref{thm:biggeoisalgopp}, naturality will follow pretty quickly once we have our bijection. We now check that these are inverses; fix an $A$-module $M$ and $\OO_X$-module $\mc F$.
	\begin{itemize}
		\item Begin with $\varphi\colon\widetilde M\to\mc F$; we need to show that
		\[\varphi=\varepsilon_\mc F\circ\widetilde{\varphi_X}\]
		as morphisms $\widetilde M\to\mc F$.

		By \autoref{lem:morphismonbase}, it suffices to show this equality on the distinguished base, so fix some $X_a\subseteq X$, and we want to show
		\[\varphi_{X_a}\stackrel?=(\varepsilon_\mc F)_{X_a}\circ(\widetilde\varphi_X)_{X_a}.\]
		Well, for any $m/b\in\widetilde M(X_a)=S(D(a))^{-1}M$, we compute
		\begin{align*}
			\big((\varepsilon_\mc F)_{X_a}\circ(\widetilde\varphi_X)_{X_a}\big)(m/b) &= (\varepsilon_\mc F)_{X_a}(\varphi_X(m)/b) \\
			&= \frac1b(\varphi_X(m)|_{X_a}) \\
			&= \frac1b\varphi_{X_a}(m) \\
			&= \varphi_{X_a}(m/b).
		\end{align*}

		\item Begin with $f\colon M\to\mc F(X)$; we need to show that $f=(\varepsilon_\mc F\circ\widetilde f)_X$ as morphisms $M\to\mc F(X)$. Well,
		\[(\varepsilon_\mc F\circ\widetilde f)_X=(\varepsilon_\mc F)_{X_1}\circ\widetilde f_{X_1}={\id_{\mc F}}\circ f=f.\]
	\end{itemize}
	And here are our naturality checks.
	\begin{itemize}
		\item Fix an $A$-module homomorphism $g\colon M\to N$. Then the following diagram commutes.
		% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXG9we0hvbX1fe1xcT09fWH0oXFx3aWRldGlsZGUgTixcXG1jIEYpIl0sWzEsMCwiXFxvcHtIb219X0EoTixcXG1jIEYoWCkpIl0sWzAsMSwiXFxvcHtIb219X3tcXE9PX1h9KFxcd2lkZXRpbGRlIE0sXFxtYyBGKSJdLFsxLDEsIlxcb3B7SG9tfV9BKE0sXFxtYyBGKFgpKSJdLFszLDAsImYiXSxbMywxLCJmXFxjaXJjIGciXSxbMiwwLCJcXHZhcmVwc2lsb25fXFxtYyBGXFxjaXJjXFx3aWRldGlsZGUgZiJdLFsyLDEsIlxcdmFyZXBzaWxvblxcY2lyY1xcd2lkZXRpbGRle2ZcXGNpcmMgZ30iXSxbMCwxLCJcXHNpbWVxIiwzLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzEsMywiLVxcY2lyYyBnIl0sWzAsMiwiLVxcY2lyY1xcd2lkZXRpbGRlIGciXSxbMiwzLCJcXHNpbWVxIiwxLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzQsNiwiIiwxLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs0LDUsIiIsMSx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNSw3LCIiLDEseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzYsNywiIiwxLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\op{Hom}_{\OO_X}(\widetilde N,\mc F)} & {\op{Hom}_A(N,\mc F(X))} & {\varepsilon_\mc F\circ\widetilde f} & f \\
			{\op{Hom}_{\OO_X}(\widetilde M,\mc F)} & {\op{Hom}_A(M,\mc F(X))} & {\varepsilon\circ\widetilde{f\circ g}} & {f\circ g}
			\arrow["\simeq"{marking}, draw=none, from=1-1, to=1-2]
			\arrow["{-\circ g}", from=1-2, to=2-2]
			\arrow["{-\circ\widetilde g}", from=1-1, to=2-1]
			\arrow["\simeq"{description}, draw=none, from=2-1, to=2-2]
			\arrow[maps to, from=1-4, to=1-3]
			\arrow[maps to, from=1-4, to=2-4]
			\arrow[maps to, from=2-4, to=2-3]
			\arrow[maps to, from=1-3, to=2-3]
		\end{tikzcd}\]
		\item Fix an $\mathcal O_X$-module homomorphism $\psi\circ\mc F\to\mc G$. Then the following diagram commutes.
		% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXG9we0hvbX1fe1xcT09fWH0oXFx3aWRldGlsZGUgTSxcXG1jIEYpIl0sWzEsMCwiXFxvcHtIb219X0EoTSxcXG1jIEYoWCkpIl0sWzAsMSwiXFxvcHtIb219X3tcXE9PX1h9KFxcd2lkZXRpbGRlIE0sXFxtYyBHKSJdLFsxLDEsIlxcb3B7SG9tfV9BKE0sXFxtYyBHKFgpKSJdLFsyLDAsIlxcdmFycGhpIl0sWzIsMSwiXFxwc2lcXGNpcmNcXHZhcnBoaSJdLFszLDAsIlxcdmFycGhpX1giXSxbMywxLCIoXFxwc2lcXGNpcmNcXHZhcnBoaSlfWCJdLFswLDEsIlxcc2ltZXEiLDMseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMSwzLCJcXHBzaV9YXFxjaXJjLSJdLFswLDIsIlxccHNpXFxjaXJjLSJdLFsyLDMsIlxcc2ltZXEiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNCw2LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzYsNywiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs1LDcsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw1LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\op{Hom}_{\OO_X}(\widetilde M,\mc F)} & {\op{Hom}_A(M,\mc F(X))} & \varphi & {\varphi_X} \\
			{\op{Hom}_{\OO_X}(\widetilde M,\mc G)} & {\op{Hom}_A(M,\mc G(X))} & \psi\circ\varphi & {(\psi\circ\varphi)_X}
			\arrow["\simeq"{marking}, draw=none, from=1-1, to=1-2]
			\arrow["{\psi_X\circ-}", from=1-2, to=2-2]
			\arrow["{\psi\circ-}", from=1-1, to=2-1]
			\arrow["\simeq"{description}, draw=none, from=2-1, to=2-2]
			\arrow[maps to, from=1-3, to=1-4]
			\arrow[maps to, from=1-4, to=2-4]
			\arrow[maps to, from=2-3, to=2-4]
			\arrow[maps to, from=1-3, to=2-3]
		\end{tikzcd}\]
	\end{itemize}
	The above checks finish our check that we have an adjunction.
\end{proof}
\begin{corollary}
	Fix an affine scheme $X$, and set $A\coloneqq\OO_X(X)$. Then the functor $\widetilde\cdot\colon\mathrm{Mod}_A\to\mathrm{Mod}_{\OO_X}$ is fully faithful.
\end{corollary}
\begin{proof}
	Given $A$-modules $M$ and $N$, we need to show
	\[\widetilde\cdot\colon\op{Hom}_A(M,N)\to\op{Hom}_{\OO_X}(\widetilde M,\widetilde N)\]
	is a bijection. The point is to use \autoref{thm:ox-mod-adjunction} with $\mc F$ to set $\widetilde N$. Technically, we are told that the map
	\[f\mapsto\varepsilon_{\widetilde N}\circ\widetilde f\]
	is a bijection, but \autoref{rem:natural-quasicoherent-map-is-iso} tells us that $\varepsilon_{\widetilde N}={\id_{\widetilde N}}$, so this bijection really is just $f\mapsto\widetilde f$.
\end{proof}
\begin{corollary} \label{cor:the-quasicoherent-iso}
	Fix an affine scheme $X$, and set $A\coloneqq\OO_X(X)$. Given an $\mathcal O_X$-module $\mc F$, there exists an $A$-moodule $M$ such that $\mc F\cong\widetilde M$ if and only if the map $\varepsilon_\mc F\colon\widetilde{\mc F(X)}\to\mc F$ of \autoref{lem:geo-opp-alg-2-map} is an isomorphism.
\end{corollary}
\begin{proof}
	If the map $\varepsilon_\mc F$ is an isomorphism, then take $M\coloneqq\mc F(X)$, and the needed isomorphism is just $\varepsilon_\mc F$.

	In the other direction, suppose that we have an isomorphism $\varphi\colon\widetilde M\cong\mc F$. Then \autoref{thm:ox-mod-adjunction} tells us that
	\[\varphi=\varepsilon_\mc F\circ\widetilde{\varphi_X}.\]
	Now, $\varphi$ is an isomorphism, so $\varphi_X$ is an isomorphism by functoriality of $\Gamma$ in \autoref{lem:ox-gamma}. Thus, $\widetilde{\varphi_X}$ is still an isomorphism by functoriality of $\widetilde\cdot$ in \autoref{lem:ox-mod-tilde}. Thus, we can write
	\[\varepsilon_\mc F=\varphi\circ\widetilde{\varphi_X}^{-1},\]
	so $\varepsilon_\mc F$ is the composite of isomorphisms and therefore an isomorphism.
\end{proof}
\begin{corollary} \label{cor:restrict-associated-ox-module}
	Fix an affine scheme $X$, and set $A\coloneqq\OO_X(X)$. Given an $A$-module $M$ and a distinguished open subscheme $X_f\subseteq X$, the morphism $\varepsilon_{\widetilde M|_{X_f}}$ is an isomorphism.
\end{corollary}
\begin{proof}
	By the functoriality of extending a sheaf on a base from \autoref{lem:sheafonabasefunctor}, it suffices to show that $\varepsilon_{\widetilde M|_{X_f}}$ is an isomorphism on the distinguished base of $X_f$. Noting that $\OO_X(X_f)\simeq A_f$ through the canonical isomorphism $\varphi\colon\Spec A\cong X$, we can write an element of $\OO_X(X_f)$ as $a/f^n$ for some $a\in A$ and $n\in\NN$, from which we note
	\[(X_f)_{a/f^n}=\{\varphi(\mf p)\in X:f\notin\mf p,a/f^n\notin\mf pA_f\}=\{\varphi(\mf p):af\notin\mf p\}=X_{af},\]
	so our distinguished open subschemes look like $X_{af}$ for $a\in A$.

	Thus, we are showing that
	\[(\varepsilon_{\widetilde M_{X_f}})_{X_{af}}\colon\underbrace{\widetilde{\widetilde M(X_f)}(X_{af})}_{S(D(af))^{-1}\widetilde M(X_f)}\to\underbrace{\widetilde M(X_{af})}_{S(D(af))^{-1}M}\]
	is an isomorphism for each $a\in A$; by construction, this morphism sends $m/g$ to $\frac1g(m/1)=\frac11m/g$. Namely, we see that $S(D(af))^{-1}\widetilde M(X_f)=S(D(af))^{-1}S(D(f))^{-1}M\simeq S(D(af))^{-1}M$ by sending $m/g$ to $(m/g)/1$ because $D(ag)\supseteq D(f)$, which is this map.
\end{proof}
\begin{corollary} \label{cor:epsilon-restriction-functoriality}
	Fix an affine scheme $X$, and set $A\coloneqq\OO_X(X)$. Given an $\mathcal O_X$-module $\mc F$ and some distinguished open subscheme $X_f\subseteq X$, the following diagram commutes.
	% https://q.uiver.app/?q=WzAsNCxbMiwxLCJcXG1jIEZ8X3tYX2Z9Il0sWzIsMCwiXFx3aWRldGlsZGV7XFxtYyBGKFhfZil9Il0sWzAsMSwiXFx3aWRldGlsZGV7XFxtYyBGKFgpfXxfe1hfZn0iXSxbMCwwLCJcXHdpZGV0aWxkZXtcXHdpZGV0aWxkZXtcXG1jIEYoWCl9KFhfZil9Il0sWzEsMCwiXFx2YXJlcHNpbG9uX3tcXG1jIEZ8X3tYX2Z9fSJdLFsyLDAsIlxcdmFyZXBzaWxvbl97XFxtYyBGfXxfe1hfZn0iXSxbMywyLCJcXHZhcmVwc2lsb25fe1xcd2lkZXRpbGRle1xcbWMgRihYKX18X3tYX2Z9fSIsMl0sWzMsMSwiXFx3aWRldGlsZGV7XFx2YXJlcHNpbG9uX3tcXG1jIEZ9KFhfZil9Il1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\widetilde{\widetilde{\mc F(X)}(X_f)}} && {\widetilde{\mc F(X_f)}} \\
		{\widetilde{\mc F(X)}|_{X_f}} && {\mc F|_{X_f}}
		\arrow["{\varepsilon_{\mc F|_{X_f}}}", from=1-3, to=2-3]
		\arrow["{\varepsilon_{\mc F}|_{X_f}}", from=2-1, to=2-3]
		\arrow["{\varepsilon_{\widetilde{\mc F(X)}|_{X_f}}}"', from=1-1, to=2-1]
		\arrow["{\widetilde{\varepsilon_{\mc F}(X_f)}}", from=1-1, to=1-3]
	\end{tikzcd}\]
\end{corollary}
\begin{proof}
	By the functoriality of extending a sheaf on a base from \autoref{lem:sheafonabasefunctor}, it suffices to check this on the distinguished base. As we saw in the previous corollary, the distinguished base on $X_f$ consists of $X_{af}$ for various $a\in A$.

	Thus, for some $X_{af}$, we check that the square
	% https://q.uiver.app/?q=WzAsOCxbMiwxLCJcXG1jIEYoWF97YWZ9KSJdLFsyLDAsIlxcd2lkZXRpbGRle1xcbWMgRihYX2YpfShYX3thZn0pIl0sWzAsMSwiXFx3aWRldGlsZGV7XFxtYyBGKFgpfShYX3thZn0pIl0sWzAsMCwiXFx3aWRldGlsZGV7XFx3aWRldGlsZGV7XFxtYyBGKFgpfShYX2YpfShYX3thZn0pIl0sWzMsMCwiXFxmcmFjIGJ7KGFmKV5ufVxcbGVmdChcXGZyYWN7YX17Zl5tfVxcY2RvdCB4XFxyaWdodCkiXSxbNCwwLCJcXGZyYWMgYnsoYWYpXm59XFxsZWZ0KFxcZnJhY3theH17Zl5tfVxccmlnaHQpIl0sWzQsMSwiXFxmcmFje2FieH17KGFmKV5uZl5tfSJdLFszLDEsIlxcZnJhY3tiXFxsZWZ0KFxcZnJhY3thfXtmXm19XFxjZG90IHhcXHJpZ2h0KX17KGFmKV5ufSJdLFsxLDAsIlxcdmFyZXBzaWxvbl97XFxtYyBGfF97WF9mfX0iXSxbMiwwLCJcXHZhcmVwc2lsb25fe1xcbWMgRn18X3tYX2Z9Il0sWzMsMiwiXFx2YXJlcHNpbG9uX3tcXHdpZGV0aWxkZXtcXG1jIEYoWCl9fF97WF9mfX0iLDJdLFszLDEsIlxcd2lkZXRpbGRle1xcdmFyZXBzaWxvbl97XFxtYyBGfShYX2YpfSJdLFs0LDcsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNyw2LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzUsNiwiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs0LDUsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\widetilde{\widetilde{\mc F(X)}(X_f)}(X_{af})} && {\widetilde{\mc F(X_f)}(X_{af})} & {\frac b{(af)^n}\left(\frac{c}{f^m}\cdot x\right)} & {\frac b{(af)^n}\left(\frac{cx}{f^m}\right)} \\
		{\widetilde{\mc F(X)}(X_{af})} && {\mc F(X_{af})} & {\frac{b\left(\frac{c}{f^m}\cdot x\right)}{(af)^n}} & {\frac{bcx}{(af)^nf^m}}
		\arrow["{\varepsilon_{\mc F|_{X_f}}}", from=1-3, to=2-3]
		\arrow["{\varepsilon_{\mc F}|_{X_f}}", from=2-1, to=2-3]
		\arrow["{\varepsilon_{\widetilde{\mc F(X)}|_{X_f}}}"', from=1-1, to=2-1]
		\arrow["{\widetilde{\varepsilon_{\mc F}(X_f)}}", from=1-1, to=1-3]
		\arrow[maps to, from=1-4, to=2-4]
		\arrow[maps to, from=2-4, to=2-5]
		\arrow[maps to, from=1-5, to=2-5]
		\arrow[maps to, from=1-4, to=1-5]
	\end{tikzcd}\]
	commutes by expanding out all the definitions. At a high level, all of our definitions have ``essentially'' been identities, so there's not much to worry about here.
\end{proof}

\subsection{Extending Geometry Is Opposite Algebra, Again}
We are going to want more properties of the functor $\widetilde\cdot\colon\mathrm{Mod}_A\to\mathrm{Mod}_{\OO_X}$, where $X$ is an affine scheme and $A=\OO_X(X)$. Here is exactness.
\begin{lemma} \label{lem:stalks-of-gotten-mod-functorial}
	Fix an affine scheme $X$, and set $A\coloneqq\OO_X(X)$. Let $\varphi\colon X\cong\Spec A$ be the canonical isomorphism. For an $A$-module homomorphism $f\colon M\to N$, the diagram
	% https://q.uiver.app/?q=WzAsNCxbMCwxLCJcXHdpZGV0aWxkZSBNX3giXSxbMSwxLCJcXHdpZGV0aWxkZSBOX3giXSxbMCwwLCJNX3tcXHZhcnBoaSh4KX0iXSxbMSwwLCJOX3tcXHZhcnBoaSh4KX0iXSxbMCwxLCJcXHdpZGV0aWxkZSBmX3giXSxbMiwzLCJmX3tcXHZhcnBoaSh4KX0iXSxbMiwwXSxbMywxXV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{M_{\varphi(x)}} & {N_{\varphi(x)}} \\
		{\widetilde M_x} & {\widetilde N_x}
		\arrow["{\widetilde f_x}", from=2-1, to=2-2]
		\arrow["{f_{\varphi(x)}}", from=1-1, to=1-2]
		\arrow[from=1-1, to=2-1]
		\arrow[from=1-2, to=2-2]
	\end{tikzcd}\]
	commutes, where the vertical morphisms are the isomorphisms of \autoref{lem:stalk-of-gotten-ox-mod}, and $f_{\varphi(x)}$ is the localized map induced map $M_{\varphi(x)}\simeq M\otimes_AA_{\varphi(x)}$.
\end{lemma}
\begin{proof}
	We simply compute that
	% https://q.uiver.app/?q=WzAsOCxbMCwxLCJcXHdpZGV0aWxkZSBNX3giXSxbMSwxLCJcXHdpZGV0aWxkZSBOX3giXSxbMCwwLCJNX3tcXHZhcnBoaSh4KX0iXSxbMSwwLCJOX3tcXHZhcnBoaSh4KX0iXSxbMiwwLCJtL2EiXSxbMywwLCJmKG0pL2EiXSxbMiwxLCJbKFhfYSxtL2EpXSJdLFszLDEsIlsoWF9hLGYobSkvYSldIl0sWzAsMSwiXFx3aWRldGlsZGUgZl94Il0sWzIsMywiZl97XFx2YXJwaGkoeCl9Il0sWzIsMF0sWzMsMV0sWzQsNSwiIiwxLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs1LDcsIiIsMSx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw2LCIiLDEseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzYsNywiIiwxLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{M_{\varphi(x)}} & {N_{\varphi(x)}} & {m/a} & {f(m)/a} \\
		{\widetilde M_x} & {\widetilde N_x} & {[(X_a,m/a)]} & {[(X_a,f(m)/a)]}
		\arrow["{\widetilde f_x}", from=2-1, to=2-2]
		\arrow["{f_{\varphi(x)}}", from=1-1, to=1-2]
		\arrow[from=1-1, to=2-1]
		\arrow[from=1-2, to=2-2]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
		\arrow[maps to, from=1-3, to=2-3]
		\arrow[maps to, from=2-3, to=2-4]
	\end{tikzcd}\]
	from the construction of $\widetilde f$.
\end{proof}
\begin{proposition} \label{prop:tilde-is-exact}
	Fix an affine scheme $X$, and set $A\coloneqq\OO_X(X)$. Then the functor $\widetilde\cdot\colon\mathrm{Mod}_A\to\mathrm{Mod}_{\OO_X}$ of \autoref{lem:ox-mod-tilde} is exact.
\end{proposition}
\begin{proof}
	Let $\varphi\colon X\cong\Spec A$ be the canonical isomorphism. Fix an exact sequence of $A$-modules named
	\[0\to M'\stackrel f\to M\stackrel g\to M''\to 0.\]
	Because localization is an exact functor on $A$-modules (\cite[Proposition~2.5]{eisenbud-comm-alg}), we note that
	\begin{equation}
		0\to M'_\mf p\stackrel{f_\mf p}\to M_\mf p\stackrel{g_\mf p}\to M''_\mf p\to0 \label{eq:exact-on-mod-a}
	\end{equation}
	is a short exact sequence for any prime $\mf p\in\Spec A$. Thus, for any $x$, we draw the diagram
	% https://q.uiver.app/?q=WzAsMTAsWzAsMSwiMCJdLFsxLDEsIlxcd2lkZXRpbGRlIE1feCciXSxbMSwwLCJNX3tcXHZhcnBoaSh4KX0nIl0sWzIsMSwiXFx3aWRldGlsZGUgTV94Il0sWzMsMSwiXFx3aWRldGlsZGUgTV94JyciXSxbMiwwLCJNX3tcXHZhcnBoaSh4KX0iXSxbMywwLCJNX3tcXHZhcnBoaSh4KX0nJyJdLFswLDAsIjAiXSxbNCwwLCIwIl0sWzQsMSwiMCJdLFs3LDJdLFsyLDUsImZfe1xcdmFycGhpKHgpfSJdLFs1LDYsImdfe1xcdmFycGhpKHgpfSJdLFs2LDhdLFswLDFdLFsxLDMsIlxcd2lkZXRpbGRlIGZfeCJdLFszLDQsIlxcd2lkZXRpbGRlIGdfeCJdLFs0LDldLFsyLDFdLFs1LDNdLFs2LDRdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		0 & {M_{\varphi(x)}'} & {M_{\varphi(x)}} & {M_{\varphi(x)}''} & 0 \\
		0 & {\widetilde M_x'} & {\widetilde M_x} & {\widetilde M_x''} & 0
		\arrow[from=1-1, to=1-2]
		\arrow["{f_{\varphi(x)}}", from=1-2, to=1-3]
		\arrow["{g_{\varphi(x)}}", from=1-3, to=1-4]
		\arrow[from=1-4, to=1-5]
		\arrow[from=2-1, to=2-2]
		\arrow["{\widetilde f_x}", from=2-2, to=2-3]
		\arrow["{\widetilde g_x}", from=2-3, to=2-4]
		\arrow[from=2-4, to=2-5]
		\arrow[from=1-2, to=2-2]
		\arrow[from=1-3, to=2-3]
		\arrow[from=1-4, to=2-4]
	\end{tikzcd}\]
	where the vertical morphisms are the isomorphisms of \autoref{lem:stalk-of-gotten-ox-mod}. Notably, each square commutes by \autoref{lem:stalks-of-gotten-mod-functorial}, and the top row is an instance of the exact sequence \autoref{eq:exact-on-mod-a}, so the bottom row is also exact.

	Thus, the sequence
	\[0\to\widetilde M'\stackrel{\widetilde f}\to\widetilde M\stackrel{\widetilde g}\to\widetilde M''\to0\]
	is exact at the stalk over any $x\in X$, so this is exact by \autoref{prop:stalk-exact-by-stalks}.
\end{proof}

\subsection{Quasicoherent Sheaves}
We are now ready to define quasicoherent sheaves.
\begin{definition}[Quasicoherent sheaf]
	Fix a scheme $(X,\OO_X)$. An $\mathcal O_X$-module $\mc F$ is \textit{quasicoherent} if and only if $X$ has an affine open cover $\{U_\alpha\}_{\alpha\in\lambda}$ such that $\mc F|_{U_\alpha}\cong\widetilde{M_\alpha}$ for some $\OO_X(U_\alpha)$-module $M_\alpha$.
\end{definition}
As usual, we note that it's annoying that we only have an affine open cover because we would like to have $\mc F|_U\cong\widetilde M$ for some $\OO_X(U)$-module $M$ at any affine open subscheme $U\subseteq X$.

Well, here's the appropriate application of the Affine communication lemma.
% \begin{lemma}
% 	Fix a ringed space $(X,\OO_X)$ and an $\mathcal O_X$-module $\mc F$. Then for any open cover $\{U_\alpha\}_{\alpha\in\lambda}$ of an open subscheme $U\subseteq X$, the sequence
% 	\[\arraycolsep=1.4pt\begin{array}{ccccccccc}
% 		0 &\to& \mc F(U) &\to& \displaystyle\prod_{\alpha\in\lambda}\mc F(U_\alpha) &\to& \displaystyle\prod_{\alpha,\beta\in\lambda}\mc F(U_\alpha\cap U_\beta) \\
% 		&&& f &\mapsto& (f|_{U_\alpha})_{\alpha\in\lambda} \\
% 		&&&&& (f_\alpha)_{\alpha\in\lambda} &\mapsto& (f_\alpha|_{U_\alpha\cap U_\beta}-f_\beta|_{U_\alpha\cap U_\beta})_{\alpha,\beta\in\lambda}
% 	\end{array}\]
% 	is an exact sequence of $\OO_X(U)$-modules.
% \end{lemma}
% \begin{proof}
% 	We already showed exactness back in \autoref{lem:sheaf-by-left-es}. To show that these are morphisms of $\OO_X(U)$-modules, we first give some $f\in\mc F(V)$ with $V\subseteq U$ an action by $r\in\OO_X(U)$ by $r\cdot f\coloneqq r|_V\cdot f$. We can see that this defines a module action because we are just using the pre-composition
% 	\[\OO_X(U)\to\OO_X(V)\to\op{Aut}(\mc F(U))\]
% 	to define our action. Then the products become $\OO_X(U)$-modules as products of $\OO_X(U)$-modules.
% 	We now show that the map $\alpha\colon\mc F(U)\to\prod_{\alpha\in\lambda}\mc F(U_\alpha)$ is a morphism of $\OO_X(U)$-modules. Well, given $f\in\mc F(U)$ and $r\in\OO_X(U)$, we see
% 	\[\alpha(rf)=((rf)|_{U_\alpha})_\alpha=(r|_{U_\alpha}\cdot f|_{U_\alpha})_{\alpha}=r\cdot(f|_{U_\alpha})_{\alpha}.\]
% 	Similarly, to show that the map $\beta\colon\prod_{\alpha\in\lambda}\mc F(U_\alpha)\to\prod_{\alpha,\beta\in\lambda}\mc F(U_\alpha\cap U_\beta)$, we pick up $(f_\alpha)_{\alpha\in\lambda}\in\prod_{\alpha\in\lambda}\mc F(U_\alpha)$ and check
% 	\begin{align*}
% 		\beta(r\cdot(f_\alpha)_\alpha) &= \beta((r|_{U_\alpha}\cdot f_\alpha)_\alpha) \\
% 		&= \big((r|_{U_\alpha}\cdot f_\alpha)|_{U_\alpha\cap U_\beta}-(r|_{U_\beta}\cdot f_\beta)|_{U_\alpha\cap U_\beta}\big)_{\alpha,\beta} \\
% 		&= \big(r|_{U_\alpha\cap U_\beta}\cdot(f_\alpha|_{U_\alpha\cap U_\beta}-f_\beta|_{U_\alpha\cap U_\beta})\big)_{\alpha,\beta} \\
% 		&= r\cdot\beta((f_\alpha)_\alpha).
% 	\end{align*}
% 	This finishes.
% \end{proof}
\begin{lemma} \label{lem:better-quasicoherent}
	Fix a quasicoherent sheaf $\mc F$ on a scheme $X$. Then, for any affine open subscheme $U\subseteq X$, there is an $\mathcal O_X(U)$-module $M$ such that $\mc F|_U\cong\widetilde M$.
\end{lemma}
\begin{proof}
	We apply \autoref{lem:affine-comm}; call an affine open subscheme $U\subseteq X$ ``respectful'' if and only if there is an $\mathcal O_X(U)$-module $M$ such that $\mc F|_U\cong\widetilde M$. Because $\mc F$ is quasicoherent, we are given that there is an open cover of respectful affine open subschemes of $X$, so it remains to check conditions (i) and (ii).
	\begin{listroman}
		\item We are given a respectful affine open subscheme $U$ and some $f\in\OO_X(U)$ and would like to show that $U_f$ is respectful. Well, by \autoref{cor:the-quasicoherent-iso}, we are given that $\varepsilon_{\mc F|_U}\colon\widetilde{\mc F(U)}\to\mc F|_U$ is an isomorphism of $\OO_U$-modules. In particular, by \autoref{cor:epsilon-restriction-functoriality}, we conclude
		% https://q.uiver.app/?q=WzAsNCxbMiwxLCJcXG1jIEZ8X3tVX2Z9Il0sWzIsMCwiXFx3aWRldGlsZGV7XFxtYyBGKFVfZil9Il0sWzAsMSwiXFx3aWRldGlsZGV7XFxtYyBGKFUpfSJdLFswLDAsIlxcd2lkZXRpbGRle1xcd2lkZXRpbGRle1xcbWMgRihVKX0oVV9mKX0iXSxbMSwwLCJcXHZhcmVwc2lsb25fe1xcbWMgRnxfe1VfZn19Il0sWzIsMCwiXFx2YXJlcHNpbG9uX3tcXG1jIEZ8X1V9fF97VV9mfSJdLFszLDEsIlxcd2lkZXRpbGRle1xcdmFyZXBzaWxvbl97XFxtYyBGfF9VfShVX2YpfSJdLFszLDIsIlxcdmFyZXBzaWxvbl97XFx3aWRldGlsZGV7XFxtYyBGKFUpfXxfe1VfZn19IiwyXV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\widetilde{\widetilde{\mc F(U)}(U_f)}} && {\widetilde{\mc F(U_f)}} \\
			{\widetilde{\mc F(U)}|_{U_f}} && {\mc F|_{U_f}}
			\arrow["{\varepsilon_{\mc F|_{U_f}}}", from=1-3, to=2-3]
			\arrow["{\varepsilon_{\mc F|_U}|_{U_f}}", from=2-1, to=2-3]
			\arrow["{\widetilde{\varepsilon_{\mc F|_U}(U_f)}}", from=1-1, to=1-3]
			\arrow["{\varepsilon_{\widetilde{\mc F(U)}|_{U_f}}}"', from=1-1, to=2-1]
		\end{tikzcd}\]
		commutes. The left arrow is an isomorphism by \autoref{cor:restrict-associated-ox-module}. The top arrow is an isomorphism by functoriality of taking sections and $\widetilde\cdot$ from \autoref{lem:ox-mod-tilde} because $\varepsilon_{\mc F|_U}$ is an isomorphism and using functoriality of restriction from \autoref{lem:ox-res-functorial}. Lastly, the bottom arrow is an isomorphism functoriality of restriction in \autoref{lem:ox-res-functorial}, so we conclude that $\varepsilon_{\mc F}|_{U_f}$ is also an isomorphism. We conclude that $U_f$ is respectful.

		\item We are given an affine open subscheme $U$ and some $\{f_1,\ldots,f_n\}$ so that the $U_{f_i}$ cover $U$ and are respectful, and we need to show that $U$ is respectful. By \autoref{cor:the-quasicoherent-iso}, we see that all the $\varepsilon_{\mc F|_{U_{f_i}}}$ are isomorphisms, so we use \autoref{cor:epsilon-restriction-functoriality} to conclude that the diagram
		% https://q.uiver.app/?q=WzAsNCxbMiwxLCJcXG1jIEZ8X3tVX2Z9Il0sWzIsMCwiXFx3aWRldGlsZGV7XFxtYyBGKFVfZil9Il0sWzAsMSwiXFx3aWRldGlsZGV7XFxtYyBGKFUpfSJdLFswLDAsIlxcd2lkZXRpbGRle1xcd2lkZXRpbGRle1xcbWMgRihVKX0oVV9mKX0iXSxbMSwwLCJcXHZhcmVwc2lsb25fe1xcbWMgRnxfe1VfZn19Il0sWzIsMCwiXFx2YXJlcHNpbG9uX3tcXG1jIEZ8X1V9fF97VV9mfSJdLFszLDEsIlxcd2lkZXRpbGRle1xcdmFyZXBzaWxvbl97XFxtYyBGfF9VfShVX2YpfSJdLFszLDIsIlxcdmFyZXBzaWxvbl97XFx3aWRldGlsZGV7XFxtYyBGKFUpfXxfe1VfZn19IiwyXV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\widetilde{\widetilde{\mc F(U)}(U_f)}} && {\widetilde{\mc F(U_f)}} \\
			{\widetilde{\mc F(U)}|_{U_f}} && {\mc F|_{U_f}}
			\arrow["{\varepsilon_{\mc F|_{U_f}}}", from=1-3, to=2-3]
			\arrow["{\varepsilon_{\mc F|_U}|_{U_f}}", from=2-1, to=2-3]
			\arrow["{\widetilde{\varepsilon_{\mc F|_U}(U_f)}}", from=1-1, to=1-3]
			\arrow["{\varepsilon_{\widetilde{\mc F(U)}|_{U_f}}}"', from=1-1, to=2-1]
		\end{tikzcd}\]
		commutes for each $f\in\{f_1,\ldots,f_n\}$. Notably, now the right arrow is an isomorphism because each $U_f$ is respectful (by \autoref{cor:the-quasicoherent-iso}). The left arrow is an isomorphism by \autoref{cor:restrict-associated-ox-module}. The top arrow is an isomorphism because each $U_{f}$ is respectful, noting that $\varepsilon_{\mc F|_U}(U_f)=\varepsilon_{\mc F|_{U_f}}(U_f)$, so $\varepsilon_{\mc F|_{U_f}}$ is an isomorphism by \autoref{cor:the-quasicoherent-iso}, so functoriality from \autoref{lem:ox-gamma} and \autoref{lem:ox-mod-tilde} finishes.
		
		Thus, we conclude that the bottom arrow $\varepsilon_{\mc F|_U}|_{U_{f}}$ is an isomorphism for each $f\in\{f_1,\ldots,f_n\}$. Noting that the $U_{f_i}$ form a cover of $U$, we are essentially done.

		Indeed, it remains to show that $\varepsilon_{\mc F|_U}$ is actually an isomorphism of $\OO_X$-modules. Certainly this is a morphism of $\OO_X$-modules by construction, so \autoref{lem:better-ox-mod-iso} says that we just have to check we have an isomorphism of sheaves. Well, by \autoref{prop:isoonstalks}, it suffices to check that we are an isomorphism at stalks, for which it suffices to check that we are an isomorphism at stalks as sheaves of just abelian groups.
		
		For this, pick some $p\in U$ and find some $i$ with $p\in U_{f_i}$, and we note the naturality of \autoref{lem:invimagestalk} gives the commutative diagram
		% https://q.uiver.app/?q=WzAsOCxbMCwwLCIoXFxtYyBGfF9VKV9wIl0sWzEsMCwiKFxcd2lkZXRpbGRle1xcbWMgRihVKX0pX3AiXSxbMCwxLCIoXFxtYyBGfF97VV97Zl9pfX0pX3AiXSxbMSwxLCIoXFx3aWRldGlsZGV7XFxtYyBGKFUpfXxfe1Vfe2ZfaX19KV9wIl0sWzIsMCwiWyhWLHMpXSJdLFszLDAsIlsoViwoXFx2YXJlcHNpbG9uX3tcXG1jIEZ8X1V9KV9WcyldIl0sWzIsMSwiWyhWXFxjYXAgVV97Zl9pfSxzfF97VV97Zl9pfX0pXSJdLFszLDEsIlsoVlxcY2FwIFVfe2ZfaX0sKFxcdmFyZXBzaWxvbl97XFxtYyBGfF9VfSlfe1ZcXGNhcCBVX3tmX2l9fXMpXSJdLFswLDEsIihcXHZhcmVwc2lsb25fe1xcbWMgRnxfVX0pX3AiXSxbMiwzLCIoXFx2YXJlcHNpbG9uX3tcXG1jIEZ9fF97VV97Zl9pfX0pX3AiXSxbMCwyXSxbMSwzXSxbNCw1LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzUsNywiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs0LDYsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNiw3LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{(\mc F|_U)_p} & {(\widetilde{\mc F(U)})_p} & {[(V,s)]} & {[(V,(\varepsilon_{\mc F|_U})_Vs)]} \\
			{(\mc F|_{U_{f_i}})_p} & {(\widetilde{\mc F(U)}|_{U_{f_i}})_p} & {[(V\cap U_{f_i},s|_{U_{f_i}})]} & {[(V\cap U_{f_i},(\varepsilon_{\mc F|_U})_{V\cap U_{f_i}}s)]}
			\arrow["{(\varepsilon_{\mc F|_U})_p}", from=1-1, to=1-2]
			\arrow["{(\varepsilon_{\mc F}|_{U_{f_i}})_p}", from=2-1, to=2-2]
			\arrow[from=1-1, to=2-1]
			\arrow[from=1-2, to=2-2]
			\arrow[maps to, from=1-3, to=1-4]
			\arrow[maps to, from=1-4, to=2-4]
			\arrow[maps to, from=1-3, to=2-3]
			\arrow[maps to, from=2-3, to=2-4]
		\end{tikzcd}\]
		where we note that the vertical morphisms are isomorphisms. Thus, because all the $(\varepsilon_{\mc F}|_{U_{f_i}})_p$ are isomorphisms by \autoref{prop:isoonstalks}, we conclude that $(\varepsilon_{\mc F}|_{U_{f}})_p$ are isomorphisms by \autoref{prop:isoonstalks} again. This finishes.
		\qedhere
	\end{listroman}
\end{proof}
\begin{corollary}
	Fix an affine scheme $X$, and set $A\coloneqq\OO_X(X)$. An $\mathcal O_X$-module $\mc F$ is quasicoherent if and only if there exists an $A$-module $M$ such that $\mc F\cong\widetilde M$.
\end{corollary}
\begin{proof}
	If $\mc F\cong\widetilde M$, then the affine open cover $\{X\}$ of $X$ shows that $\mc F$ is quasicoherent. Conversely, if $X$ is quasicoherent, then the fact that $X$ is an affine open subscheme of $X$ implies that $\mc F=\mc F|_X\cong\widetilde M$ for some $A$-module $M$ by \autoref{lem:better-quasicoherent}.
\end{proof}
\begin{corollary} \label{cor:restriction-is-quasicoherent}
	Fix a scheme $X$ and a quasicoherent sheaf $\mc F$ of $X$. For any open subscheme $U\subseteq X$, we see $\mc F|_U$ is a quasicoherent sheaf on $U$.
\end{corollary}
\begin{proof}
	For any affine open subscheme $V\subseteq U$, we note that $V$ is also an affine open subscheme of $X$, so there is an $\mathcal O_V(V)$-module $M$ such that $\mc F|_V\cong\widetilde M$. So we are done upon choosing any affine open cover for $U$.
\end{proof}
% Using \autoref{lem:affine-comm}, it is equivalent to saying that $\mc F|_U\simeq\widetilde M$ for some $\OO_X(U)$-module $M$, for any affine open subscheme $U\subseteq X$.

% Namely, for (i), has to show that $\mc F|_U\simeq\widetilde M$ implies that $\mc F|_{U_f}\simeq\widetilde{M_f}$ for some $f\in\OO_X(U)$, which is by construction of $\widetilde M$. For (ii), one has to show that if $A\coloneqq\OO_X(U)$ is generated by some $f_i$ with $\mc F|_{U_{f_i}}\simeq\widetilde{M_i}$ where $M_i$ is an $A_{f_i}$-module gluing together to $\widetilde M$. Well, one just has to check that $\mc F$ is isomorphic to the kernel of the natural map
% \[\prod_i\widetilde{M_i}\to\prod_{i,j}M_{ij}.\]

\end{document}