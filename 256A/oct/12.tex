% !TEX root = ../notes.tex

\documentclass[../notes.tex]{subfiles}

\begin{document}

\section{October 12}

We continue our discussion of quasicoherent sheaves.

\subsection{Quasicoherent Sheaves via Modules}
It will turn out that many of our sheaf-theoretic constructions will not actually need to think about sheaves very much to define. To get a taste for how this will work, we start with the kernel.
\begin{lemma} \label{lem:affine-kernel-is-quasicoherent}
	Fix an affine scheme $X$ and a morphism $\varphi\colon\mc F\to\mc G$ of quasicoherent sheaves. Then $\ker\varphi\simeq\widetilde{\ker\varphi_X}$.
\end{lemma}
\begin{proof}
	As usual, by \autoref{lem:sheafonabasefunctor}, it suffices to exhibit an isomorphism of sheaves on the distinguished base. From \autoref{cor:the-quasicoherent-iso}, let $\varepsilon_\mc F\colon\widetilde{\mc F(X)}\to\mc F$ and $\varepsilon_\mc G\colon\widetilde{\mc G(X)}\to\mc G$ be the canonical isomorphisms.
	
	Now, for any $f\in\OO_X(X_f)$, we note that we have the exact sequences
	% https://q.uiver.app/?q=WzAsOCxbMiwwLCJcXG1jIEYoWF9mKSJdLFszLDAsIlxcbWMgRyhYX2YpIl0sWzEsMCwiXFxrZXJcXHZhcnBoaV97WF9mfSJdLFswLDAsIjAiXSxbMiwxLCJcXG1jIEYoWClfZiJdLFszLDEsIlxcbWMgRyhYKV9mIl0sWzAsMSwiMCJdLFsxLDEsIihcXGtlclxcdmFycGhpX1gpX2YiXSxbMCwxLCJcXHZhcnBoaV97WF9mfSJdLFsyLDBdLFszLDJdLFswLDQsIlxcdmFyZXBzaWxvbl97WF9mfV5cXG1jIEYiXSxbMSw1LCJcXHZhcmVwc2lsb25eXFxtYyBHX3tYX2Z9Il0sWzQsNSwiKFxcdmFycGhpX1gpX2YiLDJdLFs2LDddLFs3LDRdLFsyLDcsIiIsMSx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		0 & {\ker\varphi_{X_f}} & {\mc F(X_f)} & {\mc G(X_f)} \\
		0 & {(\ker\varphi_X)_f} & {\mc F(X)_f} & {\mc G(X)_f}
		\arrow["{\varphi_{X_f}}", from=1-3, to=1-4]
		\arrow[from=1-2, to=1-3]
		\arrow[from=1-1, to=1-2]
		\arrow["{(\varepsilon_\mc F)_{X_f}}", from=1-3, to=2-3]
		\arrow["{(\varepsilon_\mc G)_{X_f}}", from=1-4, to=2-4]
		\arrow["{(\varphi_X)_f}"', from=2-3, to=2-4]
		\arrow[from=2-1, to=2-2]
		\arrow[from=2-2, to=2-3]
		\arrow[dashed, from=1-2, to=2-2]
	\end{tikzcd}\]
	where the bottom row is exact because localization is an exact functor. Note that the right square commutes by \autoref{lem:geo-opp-alg-2-map}, and the two vertical maps are isomorphisms by construction of the $\varepsilon$s.
	
	Thus, we see from abstract nonsense that $(\varepsilon_\mc F)_{X_f}$ restricts to an isomorphism $\varepsilon_{X_f}\colon\ker\varphi_{X_f}\to(\ker\varphi_X)_f$. To check functoriality on these isomorphisms, just suppose that $X_g\subseteq X_f$ and note that
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXGtlclxcdmFycGhpX3tYX2Z9Il0sWzAsMSwiXFxrZXJcXHZhcnBoaV97WF9nfSJdLFsxLDAsIihcXGtlclxcdmFycGhpX1gpX2YiXSxbMSwxLCIoXFxrZXJcXHZhcnBoaV9YKV9nIl0sWzIsMCwiXFxmcmFjIG1oIl0sWzIsMSwiXFxmcmFje219aCJdLFszLDAsIlxcZnJhYyAxaChtfF97WF9mfSkiXSxbMywxLCJcXGZyYWMgMWgobXxfe1hfZ30pIl0sWzAsMiwiXFx2YXJlcHNpbG9uX3tYX2Z9Il0sWzEsMywiXFx2YXJlcHNpbG9uX3tYX2d9Il0sWzAsMSwiXFxvcHtyZXN9IiwyXSxbMiwzLCJcXG9we3Jlc30iXSxbNCw1LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzUsNywiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs0LDYsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNiw3LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\ker\varphi_{X_f}} & {(\ker\varphi_X)_f} & {\frac mh} & {\frac 1h(m|_{X_f})} \\
		{\ker\varphi_{X_g}} & {(\ker\varphi_X)_g} & {\frac{m}h} & {\frac 1h(m|_{X_g})}
		\arrow["{\varepsilon_{X_f}}", from=1-1, to=1-2]
		\arrow["{\varepsilon_{X_g}}", from=2-1, to=2-2]
		\arrow["{\op{res}}"', from=1-1, to=2-1]
		\arrow["{\op{res}}", from=1-2, to=2-2]
		\arrow[maps to, from=1-3, to=2-3]
		\arrow[maps to, from=2-3, to=2-4]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
	\end{tikzcd}\]
	commutes, identical as in \autoref{lem:geo-opp-alg-2-map}. So this isomorphism follows.
\end{proof}
\begin{corollary} \label{cor:ker-is-quasicoherent}
	Fix a scheme $X$ and a morphism $\varphi\colon\mc F\to\mc G$ of quasicoherent sheaves on $X$. Then $\ker\varphi$ is a quasicoherent sheaf.
\end{corollary}
\begin{proof}
	Fix some affine open cover $\mc U$ of $X$, and let $U$ be any affine open subscheme in $\mc U$. Using \autoref{lem:affine-kernel-is-quasicoherent}, we note that the morphism $\varphi|_U\colon\mc F|_U\to\mc G|_U$ of quasicoherent sheaves (note $\mc F|_U$ and $\mc G|_U$ are quasicoherent by \autoref{cor:restriction-is-quasicoherent}) tells us that $\ker(\varphi|_U)\cong\widetilde K$ for some $\OO_X(U)$-module $K$. However, for any open $V\subseteq U$ has
	\[(\ker\varphi|_U)(V)=\ker(\varphi|_U)_V=\ker\varphi_V=(\ker\varphi)(V)=(\ker\varphi)|_U(V).\]
	The restriction maps also match up by construction, so we have actually shown that $(\ker\varphi)|_U\cong\widetilde K$.
\end{proof}
While we're here, we might as well address products.
\begin{lemma} \label{lem:affine-product-is-quasicoherent}
	Fix an affine scheme $X$ and quasicoherent sheaves $\mc F$ and $\mc G$ on $X$. Set $M\coloneqq\mc F(X)$ and $N\coloneqq\mc G(X)$. Then $\mc F\times\mc G\simeq\widetilde{M\times N}$.
\end{lemma}
\begin{proof}
	We begin with the standard set-up. By \autoref{lem:sheafonabasefunctor}, it suffices to exhibit an isomorphism of sheaves on the distinguished base. From \autoref{cor:the-quasicoherent-iso}, let $\varepsilon_\mc F\colon\widetilde{M}\to\mc F$ and $\varepsilon_\mc G\colon\widetilde{N}\to\mc G$ be the canonical isomorphisms.

	Now, for each $f\in\OO_X(X)$, we see that we have isomorphisms $(\varepsilon_\mc F)_{X_f}\colon M_f\to\mc F(X_f)$ and $(\varepsilon_\mc G)_{X_f}\colon N_f\to\mc G(X_f)$. As such, we note that $(M\times N)_f\simeq M_f\times N_f$ by $\frac{(m,n)}g\mapsto\left(\frac mg,\frac ng\right)$.\footnote{The inverse map is $\left(\frac mg,\frac nh\right)\mapsto\frac{(hm,gn)}{gh}$. We won't say more because this is ``just'' commutative algebra.} Thus, we have an isomorphism
	\[\arraycolsep=1.4pt\begin{array}{cccccccccc}
		\widetilde{M\times N}(X_f) &=& (M\times N)_f &\simeq&  M_f\times N_f &\simeq& \mc F(X_f)\times\mc G(X_f) &=& (\mc F\times\mc G)(X_f) \\
		&& \frac 1g(m,n) &\mapsto& (\frac mg,\frac ng) &\mapsto& \left(\frac1g(m|_{X_f}),\frac1g(n|_{X_f})\right)
	\end{array}\]
	which we name $\varepsilon_{X_f}$. To see that $\varepsilon_{X_f}$ assembles into an isomorphism of sheaves on the distinguished base, we note that $X_g\subseteq X_f$ makes
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXHdpZGV0aWxkZXtNXFx0aW1lcyBOfShYX2YpIl0sWzEsMCwiKFxcbWMgRlxcdGltZXNcXG1jIEcpKFhfZikiXSxbMCwxLCJcXHdpZGV0aWxkZXtNXFx0aW1lcyBOfShYX2cpIl0sWzEsMSwiKFxcbWMgRlxcdGltZXNcXG1jIEcpKFhfZykiXSxbMiwwLCJcXGZyYWMxaChtLG4pIl0sWzIsMSwiXFxmcmFjMWgobSxuKSJdLFszLDAsIihcXGZyYWMgbWgsXFxmcmFjIG5oKSJdLFszLDEsIihcXGZyYWMgbWgsXFxmcmFjIG5oKSJdLFswLDIsIlxcb3B7cmVzfSIsMl0sWzEsMywiXFxvcHtyZXN9Il0sWzAsMSwiXFx2YXJlcHNpbG9uX3tYX2Z9Il0sWzIsMywiXFx2YXJlcHNpbG9uX3tYX2d9Il0sWzQsNiwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs2LDcsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw1LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzUsNywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\widetilde{M\times N}(X_f)} & {(\mc F\times\mc G)(X_f)} & {\frac1h(m,n)} & {\left(\frac mh,\frac nh\right)} \\
		{\widetilde{M\times N}(X_g)} & {(\mc F\times\mc G)(X_g)} & {\frac1h(m,n)} & {\left(\frac mh,\frac nh\right)}
		\arrow["{\op{res}}"', from=1-1, to=2-1]
		\arrow["{\op{res}}", from=1-2, to=2-2]
		\arrow["{\varepsilon_{X_f}}", from=1-1, to=1-2]
		\arrow["{\varepsilon_{X_g}}", from=2-1, to=2-2]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
		\arrow[maps to, from=1-3, to=2-3]
		\arrow[maps to, from=2-3, to=2-4]
	\end{tikzcd}\]
	commute. This finishes.
\end{proof}
\begin{cor} \label{cor:prod-is-quasicoherent}
	Fix a scheme $X$ and quasicoherent sheaves $\mc F$ and $\mc G$ on $X$. Then $\mc F\times\mc G$ is quasicoherent.
\end{cor}
\begin{proof}
	As before, fix some affine open cover $\mc U$ of $X$, and let $U$ be any affine open subscheme in $\mc U$. We show $(\mc F\times\mc G)|_U\simeq\widetilde P$ for some $\OO_X(U)$-module $P$. Well, we note that any open $V\subseteq U$ gives
	\[(\mc F\times\mc G)|_U(V)=\mc F(V)\times\mc G(V)=(\mc F|_U\times\mc G|_U)(V),\]
	so upon noting that restriction maps also match, we have $(\mc F\times\mc G)|_U=\mc F|_U\times\mc G|_U$. However, $\mc F|_U\times\mc G|_U$ is a product of quasicoherent sheaves (by \autoref{cor:restriction-is-quasicoherent}) on the affine scheme $U$, which is quasicoherent by \autoref{lem:affine-product-is-quasicoherent}.
\end{proof}

\subsection{Quasicoherent Sheaves Without Sheafification}
Now that we've seen some quasicoherent sheaves with no sheafification, let's add a little sheafification to the mix. We start with a technical lemma.
\begin{lemma} \label{lem:sheafify-from-presheaf-on-base}
	Fix a topological space $X$ and a sheaf $\mc F$ and a presheaf $\mc G$. Given a morphism $\varphi\colon\mc F\to\mc G$ which is an isomorphism on a base $\mc B$ for the topology on $X$, we have $\mc F\cong\mc G\sh$.
\end{lemma}
\begin{proof}
	Let $\op{sh}\colon\mc G\to\mc G\sh$. Unsurprisingly, we claim that ${\op{sh}}\circ\varphi$ is the desired isomorphism. By \autoref{prop:isoonstalks}, it suffices to check that this is an isomorphism on stalks. Well, for any $p\in X$, we see that $\op{sh}_p$ is already an isomorphism by \autoref{prop:sheafificationstalk}, so we need to show that $\varphi_p$ is an isomorphism on stalks.

	Well, using \autoref{lem:stalkbybase}, we note that the diagram
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXG1jIEZfcCJdLFsxLDAsIlxcY29saW1pdFxcbWMgRihCKSJdLFsxLDEsIlxcY29saW1pdFxcbWMgRyhCKSJdLFswLDEsIlxcbWMgR19wIl0sWzIsMCwiWyhWLGYpXSJdLFsyLDEsIlsoVixcXHZhcnBoaV9WZildIl0sWzMsMCwiWyhCLGZ8X0IpXSJdLFszLDEsIlsoQixcXHZhcnBoaV9CKGZ8X0IpKV0iXSxbMCwxLCJcXHNpbWVxIiwzLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzEsMiwiXFxjb2xpbWl0XFx2YXJwaGlfQiJdLFswLDMsIlxcdmFycGhpX3AiLDJdLFszLDIsIlxcc2ltZXEiLDMseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNCw2LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzYsNywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs0LDUsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNSw3LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc F_p} & {\colimit\mc F(B)} & {[(V,f)]} & {[(B,f|_B)]} \\
		{\mc G_p} & {\colimit\mc G(B)} & {[(V,\varphi_Vf)]} & {[(B,\varphi_B(f|_B))]}
		\arrow["\simeq"{marking}, draw=none, from=1-1, to=1-2]
		\arrow["{\colimit\varphi_B}", from=1-2, to=2-2]
		\arrow["{\varphi_p}"', from=1-1, to=2-1]
		\arrow["\simeq"{marking}, draw=none, from=2-1, to=2-2]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
		\arrow[maps to, from=1-3, to=2-3]
		\arrow[maps to, from=2-3, to=2-4]
	\end{tikzcd}\]
	commutes, where $B\in\mc B$ is some basis element in $V$ containing $p$. Thus, we note that the horizontal arrows are isomorphisms by \autoref{lem:stalkbybase}, and the right arrow is an isomorphism because each $\varphi_B$ is an isomorphism by hypothesis. Thus, the left arrow is an isomorphism, which is what we wanted.
\end{proof}
And here is the cokernel.
\begin{lemma} \label{lem:affine-cokernel-is-quasicoherent}
	Fix an affine scheme $X$ and a morphism $\varphi\colon\mc F\to\mc G$ of quasicoherent sheaves. Then $\widetilde{\coker\varphi_X}\simeq\coker\varphi$.
\end{lemma}
\begin{proof}
	By \autoref{lem:sheafify-from-presheaf-on-base}, it suffices to show that an exhibit a natural isomorphism $\widetilde{\coker\varphi_X}\simeq\coker\pre\varphi$ of (pre)sheaves on the distinguished base. From \autoref{cor:the-quasicoherent-iso}, let $\varepsilon_\mc F\colon\widetilde{\mc F(X)}\to\mc F$ and $\varepsilon_\mc G\colon\widetilde{\mc G(X)}\to\mc G$ be the canonical isomorphisms.

	Now, for any $f\in\OO_X(X_f)$, we note that we have the exact sequences
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXG1jIEYoWF9mKSJdLFsxLDAsIlxcbWMgRyhYX2YpIl0sWzAsMSwiXFxtYyBGKFgpX2YiXSxbMSwxLCJcXG1jIEcoWClfZiJdLFsyLDAsIlxcY29rZXJcXHZhcnBoaV9Ye19mfSJdLFsyLDEsIihcXGNva2VyXFx2YXJwaGlfWClfZiJdLFszLDEsIjAiXSxbMywwLCIwIl0sWzAsMSwiXFx2YXJwaGlfe1hfZn0iXSxbMiwzLCIoXFx2YXJwaGlfWClfZiIsMl0sWzAsMiwiKFxcdmFyZXBzaWxvbl9cXG1jIEYpX3tYX2Z9IiwyXSxbMSwzLCIoXFx2YXJlcHNpbG9uX1xcbWMgRilfe1hfZn0iLDJdLFsxLDRdLFs0LDddLFszLDVdLFs1LDZdLFs0LDUsIiIsMSx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc F(X_f)} & {\mc G(X_f)} & {\coker\varphi_X{_f}} & 0 \\
		{\mc F(X)_f} & {\mc G(X)_f} & {(\coker\varphi_X)_f} & 0
		\arrow["{\varphi_{X_f}}", from=1-1, to=1-2]
		\arrow["{(\varphi_X)_f}"', from=2-1, to=2-2]
		\arrow["{(\varepsilon_\mc F)_{X_f}}"', from=1-1, to=2-1]
		\arrow["{(\varepsilon_\mc F)_{X_f}}"', from=1-2, to=2-2]
		\arrow[from=1-2, to=1-3]
		\arrow[from=1-3, to=1-4]
		\arrow[from=2-2, to=2-3]
		\arrow[from=2-3, to=2-4]
		\arrow[dashed, from=1-3, to=2-3]
	\end{tikzcd}\]
	where the bottom row is exact because localization is an exact functor. In particular, the left square commutes by \autoref{lem:geo-opp-alg-2-map}, and the two vertical maps are isomorphisms by construction of the $\varepsilon$s.

	Thus, abstract nonsense tells us $(\varepsilon_\mc G)_{X_f}$ can take quotients to yield an isomorphism $\varepsilon_{X_f}\colon\coker\varphi_{X_f}\to(\coker\varphi_X)_f$. For functoriality, we suppose $X_g\subseteq X_f$ and note that
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXGNva2VyXFx2YXJwaGlfe1hfZn0iXSxbMCwxLCJcXGNva2VyXFx2YXJwaGlfe1hfZ30iXSxbMSwwLCIoXFxjb2tlclxcdmFycGhpX1gpX2YiXSxbMSwxLCIoXFxjb2tlclxcdmFycGhpX1gpX2ciXSxbMiwwLCJcXGxlZnRbXFxmcmFjIG1oXFxyaWdodF0iXSxbMywwLCJcXGZyYWMxaFttfF97WF9mfV0iXSxbMywxLCJcXGZyYWMxaFttfF97WF9nfV0iXSxbMiwxLCJcXGxlZnRbXFxmcmFjIG1oXFxyaWdodF0iXSxbMCwxLCJcXG9we3Jlc30iLDJdLFsyLDMsIlxcb3B7cmVzfSJdLFswLDIsIlxcdmFyZXBzaWxvbl97WF9mfSJdLFsxLDMsIlxcdmFyZXBzaWxvbl97WF9nfSJdLFs0LDUsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNSw2LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzQsNywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs3LDYsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\coker\varphi_{X_f}} & {(\coker\varphi_X)_f} & {\left[\frac mh\right]} & {\frac1h[m|_{X_f}]} \\
		{\coker\varphi_{X_g}} & {(\coker\varphi_X)_g} & {\left[\frac mh\right]} & {\frac1h[m|_{X_g}]}
		\arrow["{\op{res}}"', from=1-1, to=2-1]
		\arrow["{\op{res}}", from=1-2, to=2-2]
		\arrow["{\varepsilon_{X_f}}", from=1-1, to=1-2]
		\arrow["{\varepsilon_{X_g}}", from=2-1, to=2-2]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
		\arrow[maps to, from=1-3, to=2-3]
		\arrow[maps to, from=2-3, to=2-4]
	\end{tikzcd}\]
	commutes, exactly as in \autoref{lem:geo-opp-alg-2-map}. Thus, we have exhibited a natural isomorphism $\coker\pre\varphi\simeq\widetilde{\coker\varphi_X}$ of presheaves on the distinguished base. Inverting and noting that being isomorphic to a sheaf on a base forces both of these to be a sheaf on the base finishes by \autoref{lem:sheafify-from-presheaf-on-base}.
\end{proof}
\begin{cor} \label{cor:coker-is-quasicoherent}
	Fix a scheme $X$ and a morphism $\varphi\colon\mc F\to\mc G$ of quasicoherent sheaves on $X$. Then $\coker\varphi$ is a quasicoherent sheaf.
\end{cor}
\begin{proof}
	As before, fix some affine open cover $\mc U$ of $X$, and let $U$ be any affine open subscheme in $\mc U$. Restricting preserves being quasicoherent by \autoref{cor:restriction-is-quasicoherent}, so we note that $\varphi|_U\colon\mc F|_U\to\mc G|_U$ is a morphism of quasicoherent sheaves on the affine scheme $U$, so \autoref{lem:affine-cokernel-is-quasicoherent} tells us that $\coker(\varphi|_U)\simeq\widetilde C$ for some $\OO_U(U)$-module $C$.

	But now we note \autoref{lem:restrict-sheafify} tells us
	\[(\coker\varphi)|_U=(\coker\pre\varphi)\sh|_U\simeq((\coker\pre\varphi)|_U)\sh.\]
	Now, for each open $V\subseteq U$, we note $(\coker\pre\varphi)|_U(V)=\coker\varphi_V$, so $(\coker\pre\varphi)|_U=\coker\pre(\varphi|_U)$ upon noting that the restriction maps also align. So we see that
	\[(\coker\varphi)|_U\simeq(\coker\pre(\varphi|_U))\sh=\coker(\varphi|_U)\simeq\widetilde C.\]
	This finishes.
\end{proof}
We will also want access to direct sums and tensor products.
\begin{lemma} \label{lem:affine-sum-is-quasicoherent}
	Fix an affine scheme $X$ and quasicoherent sheaves $\{\mc F_\alpha\}_{\alpha\in\lambda}$. Setting $M_\alpha\coloneqq\mc F_\alpha(X)$ and $M\coloneqq\bigoplus_{\alpha\in\lambda}M_\alpha$, we have
	\[\bigoplus_{\alpha\in\lambda}\mc F_\alpha\simeq\widetilde M.\]
\end{lemma}
\begin{proof}
	Define $\mc F$ to be the direct sum ``presheaf'' so that
	\[\mc F(U)=\bigoplus_{\alpha\in\lambda}\mc F_\alpha(U)\]
	for each open $U\subseteq X$. We would like to show that $\widetilde M\simeq\mc F\sh$, for which we use \autoref{lem:sheafify-from-presheaf-on-base} to note that it suffices to exhibit an isomorphism of (pre)sheaves on the distinguished base. From \autoref{cor:the-quasicoherent-iso}, let $\varepsilon_\alpha\colon\widetilde{M_\alpha}\to\mc F_\alpha$ denote the canonical isomorphisms. Additionally, set $A\coloneqq\OO_X(X)$.

	Now, for any $f\in\OO_X(X_f)$, we have the isomorphisms
	\[\arraycolsep=1.4pt\begin{array}{cccccccccc}
		\widetilde M(X_f) &=& M_f &\simeq& \left(\bigoplus_{\alpha\in\lambda}M_\alpha\right)\otimes_AA_f &\stackrel*\simeq& \bigoplus_{\alpha\in\lambda}(M_\alpha\otimes_AA_f) &\simeq& \bigoplus_{\alpha\in\lambda}(M_\alpha)_f \\
		&& \frac1g(m_\alpha)_\alpha &\mapsto& (m_\alpha)_\alpha\otimes\frac1g &\mapsto& \left(m_\alpha\otimes\frac1g\right)_\alpha &\mapsto& \left(\frac{m_\alpha}g\right)_\alpha
	\end{array}\]
	where $\stackrel*\simeq$ is by noting that direct sums commute with localization. Explicitly, the inverse is by $(m_\alpha\otimes\frac{a_\alpha}{f^{n_\alpha}})\mapsto(f^{\max\{n_\alpha\}-n_\alpha}m_\alpha)_\alpha\otimes\frac1{f^{\max\{n_\alpha\}}}$, where $\max\{n_\alpha\}$ is a legal thing to write down because only finitely many of the $m_\alpha\otimes\frac{a_\alpha}{f^{n_\alpha}}$ are nonzero, so we may set $n_\alpha=0$ whenever the term is zero.

	We now call the above isomorphism $\varepsilon_{X_f}$. It remains to check funtoriality: suppose $X_g\subseteq X_f$, and we check that
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXHdpZGV0aWxkZSBNKFhfZikiXSxbMCwxLCJcXHdpZGV0aWxkZSBNKFhfZykiXSxbMSwwLCJcXG1jIEYoWF9mKSJdLFsxLDEsIlxcbWMgRihYX2cpIl0sWzIsMCwiXFxmcmFjMWgobV9cXGFscGhhKV9cXGFscGhhIl0sWzIsMSwiXFxmcmFjMWgobV9cXGFscGhhKV9cXGFscGhhIl0sWzMsMCwiXFxsZWZ0KFxcZnJhY3ttX1xcYWxwaGF9aFxccmlnaHQpX1xcYWxwaGEiXSxbMywxLCJcXGxlZnQoXFxmcmFje21fXFxhbHBoYX1oXFxyaWdodClfXFxhbHBoYSJdLFswLDEsIlxcb3B7cmVzfSIsMl0sWzIsMywiXFxvcHtyZXN9Il0sWzAsMiwiXFx2YXJlcHNpbG9uX3tYX2Z9Il0sWzEsMywiXFx2YXJlcHNpbG9uX3tYX2d9Il0sWzQsNSwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs1LDcsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw2LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzYsNywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\widetilde M(X_f)} & {\mc F(X_f)} & {\frac1h(m_\alpha)_\alpha} & {\left(\frac{m_\alpha}h\right)_\alpha} \\
		{\widetilde M(X_g)} & {\mc F(X_g)} & {\frac1h(m_\alpha)_\alpha} & {\left(\frac{m_\alpha}h\right)_\alpha}
		\arrow["{\op{res}}"', from=1-1, to=2-1]
		\arrow["{\op{res}}", from=1-2, to=2-2]
		\arrow["{\varepsilon_{X_f}}", from=1-1, to=1-2]
		\arrow["{\varepsilon_{X_g}}", from=2-1, to=2-2]
		\arrow[maps to, from=1-3, to=2-3]
		\arrow[maps to, from=2-3, to=2-4]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
	\end{tikzcd}\]
	commutes, which finishes by \autoref{lem:sheafify-from-presheaf-on-base}.
\end{proof}
\begin{cor}
	Fix a scheme $X$ and quasicoherent sheaves $\{\mc F_\alpha\}_{\alpha\in\lambda}$. Then $\bigoplus_{\alpha\in\lambda}\mc F_\alpha$ is a quasicoherent sheaf.
\end{cor}
\begin{proof}
	Let $\mc F$ be the direct sum ``presheaf'' so that
	\[\mc F(V)\coloneqq\bigoplus_{\alpha\in\lambda}\mc F_\alpha(V)\]
	for any open $V\subseteq U$ so that we want to show $\mc F\sh$ is quasicoherent. As usual, fix some affine open cover $\mc U$ of $X$, and let $U$ be any affine open subscheme in $\mc U$.

	As is typical, the main point is to show that restriction commutes with direct sums. Indeed, we note that any open $V\subseteq U$ gives
	\[\mc F|_U(V)=\mc F(V)=\bigoplus_{\alpha\in\lambda}\mc F_\alpha(V)=\bigoplus_{\alpha\in\lambda}\mc F_\alpha|_U(V),\]
	so $\mc F|_U$ matches the direct sum presheaf of the $\mc F_\alpha|_U$ on open sets, and of course the restriction maps match up because they are just term-wise restrictions. Taking sheafification, we see
	\[(\mc F|_U)\sh\simeq\bigoplus_{\alpha\in\lambda}\mc F_\alpha|_U.\]
	The sheaves $\mc F_\alpha|_U$ are quasicoherent sheaves (by \autoref{cor:restriction-is-quasicoherent}) on the affine scheme $U$, so \autoref{lem:affine-sum-is-quasicoherent} promises us an $\mathcal O_X(U)$-module $M$ such that
	\[(\mc F|_U)\sh\simeq\bigoplus_{\alpha\in\lambda}\mc F_\alpha|_U\simeq\widetilde M,\]
	which finishes because then $\mc F\sh|_U\simeq(\mc F|_U)\sh$ by \autoref{lem:restrict-sheafify}.
\end{proof}
\begin{lemma} \label{lem:affine-tensor-is-quasicoherent}
	Fix an affine scheme $X$ and quasicoherent sheaves $\mc F$ and $\mc G$. Setting $M\coloneqq\mc F(X)$ and $N\coloneqq\mc G(X)$ and $A\coloneqq\OO_X(X)$, we have $\mc F\otimes\mc G\simeq\widetilde{M\otimes_AN}$.
\end{lemma}
\begin{proof}
	As should be expected by now, we define $\mc H$ to be the tensor product ``presheaf'' by
	\[\mc H(U)\coloneqq\mc F(U)\otimes_{\OO_X(U)}\mc G(U)\]
	for each open $U\subseteq X$. We would like to show $\widetilde{M\otimes N}\simeq\mc H\sh$, for which we use \autoref{lem:sheafify-from-presheaf-on-base} to note that it suffices to exhibit this isomorphism on the distinguished base. Let $\varepsilon_\mc F\colon\widetilde M\to\mc F$ and $\varepsilon_\mc G\colon\widetilde N\to\mc G$ be the isomorphisms of \autoref{cor:the-quasicoherent-iso}.

	Now, for $f\in\OO_X(X)$, note that we have isomorphisms
	\[\arraycolsep=1.4pt\begin{array}{ccccccccc}
		\widetilde{M\otimes_AN}(X_f) &=& (M\otimes_AN)_f &\simeq& (M\otimes_AN)\otimes_AA_f &\stackrel*\simeq& (M\otimes_AA_f)\otimes_{A_f}(N\otimes_AA_f) &\simeq& M_f\otimes_{A_f}N_f \\
		&& \frac{m\otimes n}g &\mapsto& (m\otimes n)\otimes\frac1g &\mapsto& (m\otimes\frac11)\otimes(n\otimes\frac1g) &\mapsto& \frac m1\otimes\frac ng
	\end{array}\]
	where $\stackrel*\simeq$ is just a property of the tensor product.\footnote{Namely, if $M$ and $N$ are $R$-modules, and $S$ is an $R$-algebra, then $(M\otimes_RS)\otimes_S(N\otimes_RS)\simeq M\otimes_R(S\otimes_S(S\otimes_RN))\simeq M\otimes_R(S\otimes_SS)\otimes_RN\simeq M\otimes_RS\otimes_RN$.} Label the above isomorphism $\varepsilon_{X_f}$. To finish, we check functoriality: if $X_g\subseteq X_f$, then we check that
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXHdpZGV0aWxkZXtNXFxvdGltZXNfQU59KFhfZikiXSxbMCwxLCJcXHdpZGV0aWxkZXtNXFxvdGltZXNfQU59KFhfZykiXSxbMSwwLCJcXG1jIEgoWF9mKSJdLFsxLDEsIlxcbWMgSChYX2cpIl0sWzIsMCwiXFxmcmFje21cXG90aW1lcyBufWgiXSxbMiwxLCJcXGZyYWN7bVxcb3RpbWVzIG59aCJdLFszLDAsIlxcZnJhYyBtMVxcb3RpbWVzXFxmcmFjIG5oIl0sWzMsMSwiXFxmcmFjIG0xXFxvdGltZXNcXGZyYWMgbmgiXSxbMCwxLCJcXG9we3Jlc30iLDJdLFsyLDMsIlxcb3B7cmVzfSJdLFswLDIsIlxcdmFyZXBzaWxvbl97WF9mfSJdLFsxLDMsIlxcdmFyZXBzaWxvbl97WF9nfSJdLFs0LDYsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw1LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzUsNywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs2LDcsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\widetilde{M\otimes_AN}(X_f)} & {\mc H(X_f)} & {\frac{m\otimes n}h} & {\frac m1\otimes\frac nh} \\
		{\widetilde{M\otimes_AN}(X_g)} & {\mc H(X_g)} & {\frac{m\otimes n}h} & {\frac m1\otimes\frac nh}
		\arrow["{\op{res}}"', from=1-1, to=2-1]
		\arrow["{\op{res}}", from=1-2, to=2-2]
		\arrow["{\varepsilon_{X_f}}", from=1-1, to=1-2]
		\arrow["{\varepsilon_{X_g}}", from=2-1, to=2-2]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-3, to=2-3]
		\arrow[maps to, from=2-3, to=2-4]
		\arrow[maps to, from=1-4, to=2-4]
	\end{tikzcd}\]
	commutes, which finishes by \autoref{lem:sheafify-from-presheaf-on-base}.
\end{proof}
\begin{cor}
	Fix a scheme $X$ and quasicoherent sheaves $\mc F$ and $\mc G$ on $X$. Then $\mc F\otimes\mc G$ is a quasicoherent sheaf on $X$.
\end{cor}
\begin{proof}
	Let $\mc H$ be the tensor product ``presheaf'' defined by
	\[\mc H(U)\coloneqq\mc F(U)\otimes_{\OO_X(U)}\mc G(U)\]
	for any open $U\subseteq X$ so that we want to show $\mc H\sh$ is quasicoherent. As usual, fix some affine open cover $\mc U$ of $X$, and let $U$ be any affine open subscheme in $\mc U$.

	As is typical, the main point is to show that restriction commutes with tensor products. Indeed, we note that any open $V\subseteq U$ gives
	\[\mc H|_U(V)=\mc H(V)=\mc F(V)\otimes_{\OO_X(V)}\mc G(V)=\mc F|_U\otimes_{\OO_X|_U(V)}\mc G|_U(V),\]
	so $\mc H|_U$ matches the tensor product presheaf of $\mc F|_U$ and $\mc G|_U$ on open sets, and of course the restriction maps match up because they are just term-wise restrictions. Taking sheafification, we see
	\[(\mc H|_U)\sh\simeq(\mc F|_U)\otimes(\mc G|_U).\]
	We are now in the home stretch. The sheaves $\mc F|_U$ and $\mc G|_U$ are quasicoherent sheaves (by \autoref{cor:restriction-is-quasicoherent}) on the affine scheme $U$, so \autoref{lem:affine-tensor-is-quasicoherent} promises us an $\mathcal O_X(U)$-module $M$ such that
	\[(\mc H|_U)\sh\simeq(\mc F|_U)\otimes(\mc G|_U)\simeq\widetilde M,\]
	which finishes because now $\mc H\sh|_U\simeq(\mc H|_U)\sh$ by \autoref{lem:restrict-sheafify}.
\end{proof}

\subsection{The Category of Quasicoherent Sheaves}
It turns out that, by breaking down a quasicoherent sheaf to a sheaf on a base, one can fully determine a quasicoherent sheaf based off of the data of what it does on affine open subschemes and the restriction maps coming from distinguished open subschemes. Thus, we have the following.
\begin{lemma} \label{lem:localize-is-good}
	Fix a scheme $X$. An $\mathcal O_X$-module $\mc F$ is quasicoherent if and only if any distinguished open subscheme $U_f$ of an affine open subscheme $U\subseteq X$ has the induced map
	\[\mc F(U)_f\to\mc F(U_f)\]
	coming from restriction an isomorphism.
\end{lemma}
\begin{proof}
	Fix any affine open subscheme $U\subseteq X$. We show that $\mc F|_U\cong\widetilde M$ for $M=\mc F(U)$ if and only if the morphisms
	\[\arraycolsep=1.4pt\begin{array}{cccc}
		\op{res}_f\colon& \mc F(U)_f &\to& \mc F(U_f) \\
		& s/f^n &\mapsto& f|_{U_f}^{-n}\cdot s|_{U_f}
	\end{array}\]
	are isomorphisms for any $f\in\OO_X(U)$. To see that this morphism is a well-defined morphism of $\OO_X(U_f)$-modules (here, $\mc F(U)_f$ has the action of $\OO_X(U_f)$ through the isomorphism $\OO_X(U)_f\simeq\OO_X(U_f)$ by \autoref{cor:the-affine-iso}), we note that this is the morphism
	\[\varepsilon_{U_f}\colon\underbrace{\widetilde{\mc F(U)}(U_f)}_{\simeq\mc F(U)_f}\to\mc F(U_f),\]
	from \autoref{lem:geo-opp-alg-2-map}; here, $\widetilde{\mc F(U)}(U_f)\simeq\mc F(U)_f$ by \autoref{rem:concrete-associated-module}. Indeed, tracking $\varepsilon$ through, we see that it sends $s/g$ to $g^{-1}\cdot s|_{U_f}$, which is precisely $\op{res}_f$.
	
	We now proceed with the proof. We have two directions.
	\begin{itemize}
		\item Suppose that $\mc F|_U\cong\widetilde M$ for some $\OO_X(U)$-module $M$. Then \autoref{cor:the-quasicoherent-iso} promises the canonical morphism $\varepsilon\colon\widetilde{\mc F(U)}\to\mc F|_U$ is an isomorphism because $U$ is an affine scheme.
		
		Thus, by \autoref{prop:isoonstalks} each $\varepsilon_{U_f}$ is an isomorphism of abelian groups, and it is already a morphism of $\OO_X(U_f)$-morphisms, so in fact $\varepsilon_{U_f}$ is an isomorphism of $\OO_{U_f}$-modules. This finishes.

		\item Conversely, suppose that each $\varepsilon_{U_f}$ is an isomorphism for each $f\in\OO_X(U)$; we show that $\varepsilon$ is an isomorphism of $\OO_X|_U$-modules. Certainly it is a morphism of $\OO_X|_U$-modules by construction of $\varepsilon$, so it remains to show that $\varepsilon$ is an isomorphism of sheaves by \autoref{lem:better-ox-mod-iso}.

		Well, each $\varepsilon_{U_f}$ is an isomorphism of sheaves for each $f\in\OO_X(U)$, so we assemble into an isomorphism on the distinguished base. Thus, by functoriality of extending a sheaf on the base from \autoref{lem:sheafonabasefunctor}, we conclude that $\varepsilon$ is in total a sheaf isomorphism. This finishes.
		\qedhere
	\end{itemize}
\end{proof}
% Thus, we note the following.
% \begin{lemma} \label{lem:localize-is-good}
% 	Fix a quasicompact and quasiseparated scheme $X$. Then the natural maps $\mc F(X)_f\to\mc F(X_f)$ are isomorphisms.
% \end{lemma}
% \begin{proof}
% 	Similar to the case for schemes.
% \end{proof}
% Anyway, let's see an example.
% \begin{ex}
% 	We see that the sheaf of nilpotents $\mc N$ of a scheme $X$ is quasicoherent. Run the above checks.
% \end{ex}
% More generally, we have the following.
This test for quasicoherent sheaves is useful, but ultimately have done most of our work with them already. We now pick up some solitary results.
\begin{theorem} \label{thm:qcoh-is-abelian}
	Fix a scheme $X$. The category of quasicoherent sheaves on $X$ is abelian.
\end{theorem}
\begin{proof}
	Most of this inherited directly from \autoref{thm:ox-mod-is-abelian}. Here are the additivity checks.
	\begin{itemize}
		\item Because our category is a full subcategory of the category of $\OO_X$-modules, we see that $\op{Mor}(\mc F,\mc G)$ is already an abelian group with the necessary composition distributions for free.
		\item We show that we have products; this essentially follows directly from \autoref{cor:prod-is-quasicoherent} and nothing that we live in a full subcategory. We will show this proof in detail once because it's just a matter of saying all the words out loud.
		
		Fix quasicoherent sheaves $\mc F$ and $\mc G$, and we claim that the quasicoherent sheaf $\mc F\times\mc G$ (quasicoherent by \autoref{cor:prod-is-quasicoherent}) with the $\OO_X$-module projections $\pi_\mc F\colon\mc F\times\mc G\to\mc F$ and $\pi_\mc G\colon\mc F\times\mc G\to\mc G$. To check that this data gives the universal property, pick up a quasicoherent sheaf $\mc H$ with maps $\psi_\mc F\colon\mc H\to\mc F$ and $\psi_\mc G\colon\mc H\to\mc G$, and we need a unique morphism $\psi\colon\mc H\to\mc F\times\mc G$ making the diagram
		% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXG1jIEgiXSxbMSwxLCJcXG1jIEZcXHRpbWVzXFxtYyBHIl0sWzIsMSwiXFxtYyBGIl0sWzEsMiwiXFxtYyBHIl0sWzAsMSwiXFxwc2kiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMCwyLCJcXHBzaV9cXG1jIEYiLDAseyJjdXJ2ZSI6LTJ9XSxbMCwzLCJcXHBzaV9cXG1jIEciLDIseyJjdXJ2ZSI6Mn1dLFsxLDIsIlxccGlfXFxtYyBGIiwyXSxbMSwzLCJcXHBpX1xcbWMgRyJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\mc H} \\
			& {\mc F\times\mc G} & {\mc F} \\
			& {\mc G}
			\arrow["\psi"{description}, dashed, from=1-1, to=2-2]
			\arrow["{\psi_\mc F}", curve={height=-12pt}, from=1-1, to=2-3]
			\arrow["{\psi_\mc G}"', curve={height=12pt}, from=1-1, to=3-2]
			\arrow["{\pi_\mc F}"', from=2-2, to=2-3]
			\arrow["{\pi_\mc G}", from=2-2, to=3-2]
		\end{tikzcd}\]
		commute. Well such a morphism exists uniquely in the category of $\OO_X$-modules, so because we're in a full subcategory, this morphism still exists uniquely in the category of quasicoherent sheaves.
		\item The zero $\OO_X$-module $\mc Z$ is quasicoherent: for any affine open subscheme $U\subseteq X$, we see that $\mc Z|_U\simeq\widetilde0$ because any $f\in\OO_X(U)$ has
		\[\mc Z(X_f)=0=0_f=\widetilde0(X_f),\]
		where we are using \autoref{lem:sheafonabasefunctor} to check this isomorphism on the distinguished base. Of course, our restriction maps match up because everything is $0$, where there is only one morphism to $0$ anyway.

		To show the universal property is essentially the same as we just did for products. Namely, for any quasicoherent sheaf $\mc F$, there are unique $\OO_X$-module morphisms $\mc F\to\mc Z$ and $\mc Z\to\mc F$, and these morphisms will still exist and stay unique in the category of quasicoherent sheaves.
	\end{itemize}
	Here are our abelian checks.
	\begin{itemize}
		\item We show kernels and cokernels exist. Now, given a morphism $\varphi\colon\mc F\to\mc G$, we note that the kernel map $\ker\varphi\to\mc F$ and cokernel map $\mc G\to\coker\varphi$ in the category of $\OO_X$-modules remains the kernel and cokernel maps in the category of quasicoherent sheaves because these are quasicoherent sheaves by \autoref{cor:ker-is-quasicoherent} and \autoref{cor:coker-is-quasicoherent} and because we are a full subcategory with the same zero object.
		
		Checking this in detail is a matter of saying the universal property out loud to immediately reduce to the category of $\OO_X$-modules, as we showed for products.
		\item Fix an epic morphism $\varphi\colon\mc F\to\mc G$. Then the map $\varphi\colon\mc F\to\mc G$ is the cokernel of the kernel map $\iota\colon\ker\varphi\to\mc F$ in the category of $\OO_X$-modules by \autoref{lem:ox-mod-kercoker}.
		
		However, as usual, saying the universal property out loud tells us that (because $\ker\varphi$ is quasicoherent by \autoref{cor:ker-is-quasicoherent}), $\varphi\colon\mc F\to\mc G$ remains the cokernel of the kernel map $\iota\colon\ker\varphi\to\mc F$ in the category of quasicoherent sheaves.

		\item Fix a monic morphism $\varphi\colon\mc F\to\mc G$. Then the map $\varphi\colon\mc F\to\mc G$ is the kernel of the cokernel map $\pi\colon\mc G\to\coker\varphi$ in the category of $\OO_X$-modules by \autoref{lem:ox-mod-cokerker}.
		
		However, as usual, saying the universal property out loud tells us that (because $\coker\varphi$ is quasicoherent by \autoref{cor:coker-is-quasicoherent}), $\varphi\colon\mc F\to\mc G$ remains the kernel of the cokernel map $\pi\colon\mc G\to\coker\varphi$ in the category of quasicoherent sheaves.
	\end{itemize}
	The above checks complete the proof.
\end{proof}
As usual, we now discuss exactness.
\begin{cor} \label{cor:exactness-for-quasicoherent}
	Fix a scheme $X$. Then a sequence of quasicoherent sheaves
	\[\mc F\stackrel\alpha\to\mc G\stackrel\beta\to\mc H\]
	is exact at $\mc G$ in the category of quasicoherent if and only if it is exact at $\mc G$ in the category of sheaves of $\OO_X$-modules.
\end{cor}
\begin{proof}
	The complex is exact at $\mc G$ if and only if the image map $\mc F\to\coker\ker\alpha$ serves as a kernel of the map $\mc G\to\mc H$. However, cokernels and kernels are the exact same in the category of quasicoherent sheaves as in the category of $\OO_X$-modules, as discussed in the proof of \autoref{thm:qcoh-is-abelian} (due to \autoref{cor:ker-is-quasicoherent} and \autoref{cor:coker-is-quasicoherent}), so these two exactness are equivalent.
\end{proof}

\subsection{Short Exact Sequences for Quasicoherent Sheaves}
Let's just start with the main attraction.
\begin{proposition} \label{prop:quasicoherent-is-acyclic}
	Fix an affine scheme $X$ with an exact sequence of $\OO_X$-modules
	\[0\to\mc F'\to\mc F\to\mc F''\to0.\]
	If $\mc F'$ is quasicoherent, then
	\[0\to\mc F'(X)\to\mc F(X)\to\mc F''(X)\to0\]
	is also exact.
\end{proposition}
\begin{proof}
	For brevity, set $A\coloneqq\OO_X(X)$. Label our short exact sequence as
	\[0\to\mc F'\stackrel\iota\to\mc F\stackrel\pi\to\mc F''\to0.\]
	\autoref{prop:section-is-left-exact} tells us that any open $U\subseteq X$ has
	\begin{equation}
		0\to\mc F'(U)\stackrel{\iota_U}\to\mc F(U)\stackrel{\pi_U}\to\mc F''(U) \label{eq:sectionles}
	\end{equation}
	exact, so we merely have to show that $\pi_X$ is surjective. As such, pick up some $s''\in\mc F''(X)$ which we want to exhibit as being in the image of $\pi_X$. We proceed in steps; for brevity, we will denote $X_f$ by $D(f)$ for $f\in A$.
	\begin{enumerate}
		\item We take pre-images of $s''$ locally.
		
		For each $p\in X$, we see that $\pi_p\colon\mc F_p\to\mc F''_p$ is surjective by \autoref{lem:surjonstalks}, so we can find some germ $[(U_p,s_p)]\in\mc F_p$ which goes to $s''|_p\in\mc F''_p$. As such, there is some open subset $V_p\subseteq U_p$ containing $p$ such that $\pi_{V_p}(s_p|_{V_p})=\pi_X(t_p)|_{V_p}=s''|_{V_p}$, and using the distinguished base, we find $g_p\in A$ with $D(g_p)\subseteq V_p$ containing $p$ so that
		\[\pi_{D(g_p)}(s_p|_{D(g_p)})=s''|_{D(g_p)}\]
		still.
		
		However, we now see that $\{D(g_p)\}_{p\in X}$ is an open cover for $X$, so we reduce to it a finite open cover $\{D(g_i)\}_{i=1}^N$ with corresponding sections $s_i\in\OO_X(D(g_i))$ (which are restricted from the $t_p$) where $\pi_{D(g_i)}(s_i)=s''|_{D(g_i)}$.

		\item We extend the local pre-images. For each $i$, we can find $t_i\in\mc F(X)$ such that $\pi_X(t_i)=g_i^{n_i}s''$ for some nonnegative integer $n_i$. For brevity, set $g\coloneqq g_i$ and $s\coloneqq s_i$ so that $\pi_{D(g)}(s)=s''|_{D(g)}$.

		The idea is to try to glue together the sections $\{s_i\}_{i=1}^n$, but we must be careful because they don't actually need to match on the nose. What we do know is that any $j$ has
		\[\pi_{D(g_{j_1}g_{j_2})}(s|_{D(gg_j)})=\pi_{D(g)}(s|_{D(g)})|_{D(gg_j)}=s''|_{D(gg_j)}=\pi_{D(g_j)}(s_j|_{D(g_j)})|_{D(gg_j)}=\pi_{D(gg_j)}(s_j|_{D(gg_j)}),\]
		so $s|_{D(gg_j)}-s_j|_{D(gg_j)}$ lives in $\ker\pi_{D(gg_j)}$. However, by exactness of \autoref{eq:sectionles}, we are promised some $s'_j\in\mc F'(D(gg_j))$ such that
		\[\iota_{D(gg_j)}(s'_j)=s|_{D(gg_j)}-s_j|_{D(gg_j)}.\]
		But now \autoref{lem:localize-is-good} tells us that we can write $s'_j=\frac{t'_j}{g^{n_j}}$ for some $t'_j\in\mc F(D(g_j))$. By letting $n$ denote the maximum of all the $n_j$ and adjusting the $t'_j$ as needed, we may write $s'_j=t'_j/g^n$ for the same nonnegative integer $n$. Namely,
		\[g^ns|_{D(gg_j)}=g^ns_j|_{D(gg_j)}+\iota_{D(gg_j)}(t'_j).\]
		As such, for any $j$, we have
		\[\pi_{D(g_j)}\left(g^ns_j+\iota_{D(g_j)}(t'_j|_{D(g_j)})\right)=g^ns''|_{D(g_j)}+0.\]
		To glue these together, we need to go back to $\mc F'$ another time. We see that any $j_1$ and $j_2$ give
		\begin{align*}
			g^ns''|_{D(g_{j_1}g_{j_2})} &= \pi_{D(g_{j_1}g_{j_2})}\left(\left(g^ns_{j_1}+\iota_{D(g_{j_1})}(t'_{j_1}|_{D(g_{j_1})})\right)|_{D(g_{j_1}g_{j_2})}\right) \\
			g^ns''|_{D(g_{j_1}g_{j_2})} &= \pi_{D(g_{j_1}g_{j_2})}\left(\left(g^ns_{j_2}+\iota_{D(g_{j_2})}(t'_{j_2}|_{D(g_{j_2})})\right)|_{D(g_{j_1}g_{j_2})}\right),
		\end{align*}
		implying
		\[\iota_{D(g_{j_1}g_{j_2})}(s_{j_1j_2}')=\left(g^ns_{j_1}+\iota_{D(g_{j_1})}(t'_{j_1}|_{D(g_{j_1})})\right)|_{D(g_{j_1}g_{j_2})}-\left(g^ns_{j_2}+\iota_{D(g_{j_2})}(t'_{j_2}|_{D(g_{j_2})})\right)|_{D(g_{j_1}g_{j_2})}\]
		for some $s_{j_1j_2}'\in\mc F'(D(g_{j_1}g_{j_2}))$. However, we note from the construction of the $t'_\bullet$s that
		\[\iota_{D(gg_{j_1}g_{j_2})}(s_{j_1j_2}'|_{D(gg_{j_1}g_{j_2})})=g^ns|_{D(gg_{j_1}g_{j_2})}-g^ns|_{D(gg_{j_1}g_{j_2})}=0,\]
		so because $\iota_{D(gg_{j_1}g_{j_2})}$ is injective by \autoref{prop:injonstalks}, we see
		\[s_{j_1j_2}'|_{D(gg_{j_1}g_{j_2})}=0.\]
		Thus, using \autoref{lem:localize-is-good}, we see that $g^{m_{j_1j_2}}s_{j_1j_2}'=0$ for some nonnegative integer $m_{j_1j_2}$. Letting $m$ be the maximum of all the $m_{j_1j_2}$, we see that
		\begin{align*}
			\left(g^{n+m}s_{j_1}+\iota_{D(g_{j_1})}(g^mt'_{j_1}|_{D(g_{j_1})})\right)|_{D(g_{j_1}g_{j_2})}-\left(g^{n+m}s_{j_2}+\iota_{D(g_{j_2})}(g^mt'_{j_2}|_{D(g_{j_2})})\right)|_{D(g_{j_1}g_{j_2})}
		\end{align*}
		equals $\iota_{D(g_ig_j)}(g^ms_{j_1j_2})=0$.
		
		Finally, we may glue the sections $t_j\coloneqq g^{n+m}s_{j}+\iota_{D(g_{j})}(g^mt'_{j}|_{D(g_{j})})$ together to a global section $t\in\mc F(X)$, which has
		\begin{align*}
			\pi_X(t)|_{D(g_j)} &= \pi_{D(g_j)}(t|_{D(g_j)}) \\
			&= \pi_{D(g_j)}(t_j) \\
			&= \pi_{D(g_j)}\left(g^{n+m}s_{j}+\iota_{D(g_{j})}(g^mt'_{j}|_{D(g_{j})})\right) \\
			&= g^{n+m}\pi_{D(g_j)}\left(s_{j}\right) \\
			&= g^{n+m}s''|_{D(g_j)}.
		\end{align*}
		Thus, $\pi_X(t)=g^{n+m}s''$ follows.

		\item We now glue our extended pre-images. Use the previous step, we find global sections $t_i\in\mc F(X)$ such that $\pi_X(t_i)=g^{n_i}s''$ for some nonnegative integer $n_i$.

		Now, we see
		\[X=\bigcup_{i=1}^ND(g_i)=\bigcup_{i=1}^ND\left(g_i^{n_i}\right),\]
		so the $D\left(g_i^{n_i}\right)$ fully cover $X$. As such, by \autoref{rem:topological-affine-comm-ii}, we see that $A=\left(g_1^{n_1},\ldots,g_N^{n_N}\right)$, so we can write
		\[1=\sum_{i=1}^Na_ig_i^{n_i}\]
		for some $a_i\in A$. We now set
		\[s\coloneqq\sum_{i=1}^Na_it_i\]
		so that
		\[\pi_X(s)=\sum_{i=1}^Na_i\pi_X(t_i)=\sum_{i=1}^Na_ig_i^{n_i}s''=s'',\]
		which is what we wanted.
		\qedhere
	\end{enumerate}
\end{proof}
\begin{cor} \label{cor:quasicoherent-is-acyclic}
	Fix a scheme $X$ with an exact sequence of $\OO_X$-modules
	\[0\to\mc F'\to\mc F\to\mc F''\to0.\]
	If $\mc F'$ is quasicoherent, then
	\[0\to\mc F'(U)\to\mc F(U)\to\mc F''(U)\to0\]
	is also exact for any affine open subscheme $U\subseteq X$.
\end{cor}
\begin{proof}
	Label our short exact sequence as
	\[0\to\mc F'\stackrel\alpha\to\mc F\stackrel\beta\to\mc F''\to0.\]
	By \autoref{cor:exactness-for-ox-mod}, it is also exact in the category of sheaves of abelian groups on $X$. Using \autoref{lem:restriction-is-exact}, we see that
	\[0\to\mc F'|_U\stackrel{\alpha|_U}\to\mc F|_U\stackrel{\beta|_U}\to\mc F''|_U\to0\]
	is also exact in the category of sheaves of abelian groups on $U$, so unwinding with \autoref{cor:exactness-for-ox-mod}, this is also exact in the category of $\OO_X$-modules.

	We are now ready to apply \autoref{prop:quasicoherent-is-acyclic}. Note $\mc F'|_U$ is still quasicoherent by \autoref{cor:restriction-is-quasicoherent}, so \autoref{prop:quasicoherent-is-acyclic} tells us that
	\[0\to\mc F'(U)\to\mc F(U)\to\mc F''(U)\to0\]
	is exact, which is what we wanted.
\end{proof}
\begin{remark}
	\autoref{cor:quasicoherent-is-acyclic} tells us that (later in life) quasicoherent sheaves are going to have trivial cohomology on affine open subschemes.
\end{remark}
As another consequence of our understanding of exactness, we have the following.
\begin{cor}
	Fix a scheme $X$. Given an exact sequence
	\[0\to\mc F'\to\mc F\to\mc F''\to0\]
	of $\OO_X$-modules, if $\mc F'$ and $\mc F''$ are quasicoherent, then the third is also quasicoherent.
\end{cor}
\begin{proof}
	As usual, let $\mc U$ be any affine open cover of $X$. For any $U\in\mc U$, we find an $\mathcal O_X(U)$-module $M$ such that $\mc F|_U\simeq\widetilde M$.

	Label our short exact sequence by
	\[0\to\mc F'\stackrel{\alpha}\to\mc F\stackrel\beta\to\mc F''\to0.\]
	As in \autoref{cor:quasicoherent-is-acyclic}, we note that \autoref{cor:exactness-for-ox-mod} tells us that the above is also exact in the category of sheaves of abelian groups on $X$. Thus, \autoref{lem:restriction-is-exact} tells us that
	\[0\to\mc F'|_U\stackrel{\alpha|_U}\to\mc F|_U\stackrel{\beta|_U}\to\mc F''|_U\to0\]
	is also exact in the category of sheaves of abelian groups on $U$ and thus in the category of $\OO_U$-modules by \autoref{cor:exactness-for-ox-mod}.

	Now, set $M'\coloneqq\mc F'(U)$ and $M\coloneqq\mc F(U)$ and $M''\coloneqq\mc F''(U)$ so that \autoref{cor:the-quasicoherent-iso} grants us canonical morphisms $\varepsilon'\colon\widetilde{M'}\to\mc F'$ and $\varepsilon\colon\widetilde M\to\mc F$ and $\varepsilon''\colon\widetilde{M''}\to\mc F''$. Quickly, note that
	\[0\to M'\stackrel{\alpha_U}\to M\stackrel{\beta_U}\to M''\to0\]
	is exact by \autoref{prop:quasicoherent-is-acyclic} because $\mc F'$ is quasicoherent. As such, \autoref{prop:tilde-is-exact} tells us that
	\[0\to\widetilde{M'}\stackrel{\widetilde{\alpha_U}}\to\widetilde M\stackrel{\widetilde{\beta_U}}\to\widetilde{M''}\to0\]
	is exact.
	
	Combining, \autoref{lem:geo-opp-alg-2-map} gives us the commutative diagram
	% https://q.uiver.app/?q=WzAsMTAsWzAsMSwiMCJdLFsxLDEsIlxcbWMgRid8X1UiXSxbMiwxLCJcXG1jIEZ8X1UiXSxbMywxLCJcXG1jIEYnJ3xfVSJdLFs0LDEsIjAiXSxbMCwwLCIwIl0sWzEsMCwiXFx3aWRldGlsZGV7TSd9Il0sWzIsMCwiXFx3aWRldGlsZGUgTSJdLFszLDAsIlxcd2lkZXRpbGRle00nJ30iXSxbNCwwLCIwIl0sWzAsMV0sWzEsMiwiXFxhbHBoYXxfVSJdLFsyLDMsIlxcYmV0YXxfVSJdLFszLDRdLFs1LDZdLFs2LDcsIlxcd2lkZXRpbGRle1xcYWxwaGFfVX0iXSxbNyw4LCJcXHdpZGV0aWxkZXtcXGJldGFfVX0iXSxbOCw5XSxbNiwxLCJcXHZhcmVwc2lsb24nIiwyXSxbNywyLCJcXHZhcmVwc2lsb24iLDJdLFs4LDMsIlxcdmFyZXBzaWxvbicnIl1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		0 & {\widetilde{M'}} & {\widetilde M} & {\widetilde{M''}} & 0 \\
		0 & {\mc F'|_U} & {\mc F|_U} & {\mc F''|_U} & 0
		\arrow[from=2-1, to=2-2]
		\arrow["{\alpha|_U}", from=2-2, to=2-3]
		\arrow["{\beta|_U}", from=2-3, to=2-4]
		\arrow[from=2-4, to=2-5]
		\arrow[from=1-1, to=1-2]
		\arrow["{\widetilde{\alpha_U}}", from=1-2, to=1-3]
		\arrow["{\widetilde{\beta_U}}", from=1-3, to=1-4]
		\arrow[from=1-4, to=1-5]
		\arrow["{\varepsilon'}"', from=1-2, to=2-2]
		\arrow["\varepsilon"', from=1-3, to=2-3]
		\arrow["{\varepsilon''}", from=1-4, to=2-4]
	\end{tikzcd}\]
	with exact rows, as shown above. But $\varepsilon'$ and $\varepsilon''$ are isomorphisms because $\mc F'$ and $\mc F''$ are quasicoherent, so the Snake lemma (or alternatively, the Five lemma) tells us that $\varepsilon$ must be an isomorphism as well. This finishes.
\end{proof}
% \begin{lemma}
% 	Here are some remarks about the category of quasicoherent sheaves $\mathrm{Qcoh}_X$.
% 	\begin{listalph}
% 		\item The category $\mathrm{Qcoh}_X$ is an abelian category.
% 		\item Given an exact sequence
% 		\[0\to\mc F'\to\mc F\to\mc F''\to0\]
% 		then $\mc F'$ and $\mc F''$ being quasicoherent implies that $\mc F$ is quasicoherent.
% 	\end{listalph}
% \end{lemma}
% \begin{proof}
% 	Here we go.
% 	\begin{listalph}
% 		\item The point is to check everything on affine open subschemes. Namely, everything is local, so take $X=\Spec A$. To check that we're abelian, given a morphism $\pi\colon\mc F\to\mc G$ of quasicoherent sheaves, which will correspond to a map of modules $\pi^\sharp\colon M\to N$. We define the kernel as $\widetilde{\ker\pi^\sharp}$ and the kernel as $\widetilde{\coker\pi^\sharp}$. Lastly, we define $\mc F\otimes\mc G\coloneqq\widetilde{M\otimes N}$.
% 	\end{listalph}
% 	To prove (b), we have the following lemma.
% 	\begin{lemma} \label{lem:quasicoh-is-acyclic}
% 		Fix an affine scheme $X$ with $\OO_X$-modules $\mc F_1,\mc F_2,\mc F_3$. Then if $\mc F_1$ is quasicoherent, and
% 		\[0\to\mc F_1\to\mc F_2\to\mc F_3\to0\]
% 		is exact, then
% 		\[0\to\mc F_1(X)\to\mc F_2(X)\to\mc F_3(X)\to0\]
% 		is exact.
% 	\end{lemma}
% 	Setting $M_i\coloneqq\mc F_i(X)$, note that the lemma will finish by pure category theory because it forces the middle arrow of
% 	% https://q.uiver.app/?q=WzAsMTAsWzAsMCwiMCJdLFsxLDAsIlxcd2lkZXRpbGRle01fMX0iXSxbMiwwLCJcXHdpZGV0aWxkZSBNXzIiXSxbMywwLCJcXHdpZGV0aWxkZSBNXzMiXSxbNCwwLCIwIl0sWzAsMSwiMCJdLFsxLDEsIlxcbWMgRl8xIl0sWzIsMSwiXFxtYyBGXzIiXSxbMywxLCJcXG1jIEZfMyJdLFs0LDEsIjAiXSxbMCwxXSxbMSwyXSxbMiwzXSxbMyw0XSxbNSw2XSxbNiw3XSxbNyw4XSxbOCw5XSxbMSw2XSxbMyw4XSxbMiw3LCIiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
% 	\[\begin{tikzcd}
% 		0 & {\widetilde{M_1}} & {\widetilde M_2} & {\widetilde M_3} & 0 \\
% 		0 & {\mc F_1} & {\mc F_2} & {\mc F_3} & 0
% 		\arrow[from=1-1, to=1-2]
% 		\arrow[from=1-2, to=1-3]
% 		\arrow[from=1-3, to=1-4]
% 		\arrow[from=1-4, to=1-5]
% 		\arrow[from=2-1, to=2-2]
% 		\arrow[from=2-2, to=2-3]
% 		\arrow[from=2-3, to=2-4]
% 		\arrow[from=2-4, to=2-5]
% 		\arrow[from=1-2, to=2-2]
% 		\arrow[from=1-4, to=2-4]
% 		\arrow[dashed, from=1-3, to=2-3]
% 	\end{tikzcd}\]
% 	is still an isomorphism.
% \end{proof}

\subsection{Sheaf Theory for Quasicoherent Sheaves}
Here are some sheaf-theoretic ways to build quasicoherent sheaves.
\begin{lemma}
	Fix a scheme morphism $f\colon X\to Y$. If $\mc G$ is a quasicoherent sheaf on $Y$, then $f^*\mc G$ is a quasicoherent sheaf on $X$.
\end{lemma}
\begin{proof}
	Reduce to the affine case, as usual. Namely, the result is local on $X$, so we may show this on an affine open cover of $X$. For this, we give $Y$ an affine open cover, pull this back to $X$, and the affine open cover on $X$ we want is going to come from the affine open covers of the pre-images. Now everything is an affine problem.
\end{proof}
\begin{lemma} \label{lem:push-forward-quasicoherent}
	Fix a quasicompact and quasiseparated scheme morphism $f\colon X\to Y$. If $\mc F$ is a quasicoherent sheaf on $X$, then $f_*\mc F$ is a quasicoherent sheaf on $Y$.
\end{lemma}
\begin{proof}
	As usual, the question is local on $Y$, so we may assume that $Y$ is affine. Thus, $f$ being quasicompact and quasiseparated forces $X$ to be quasicompact and quasiseparated. In particular, it follows that we can give $X$ a finite affine open cover $\{U_i\}_{i=1}^n$ where each of the intersections $U_i\cap U_j$ have finite affine open covers $\{U_{ijk}\}_{k=1}^{n_{ij}}$.

	Now, all the maps $f|_{U_i}$ and $f|_{U_{ij}}$ are morphisms of affine schemes, so $(f|_{U_i})_*(\mc F|_{U_i})$ will all be quasicoherent sheaves on $Y$ because morphisms between affine schemes are all affine. Thus, we think that we can build $f_*\mc F$ by hand! Namely, we see that $f_*\mc F=\mc F(f^{-1}V)$ fits into the exact sequence
	\[0\to\prod_i\mc F(f^{-1}V\cap U_i)\to\prod_{i,j,k}\mc F(f^{-1}V\cap V_{ijk})\]
	by using the sheaf condition. Lifting this to the level of sheaves, we see
	\[0\to f_*\mc F\to\prod_i(f|_{U_i})_*(\mc F|_{U_i})\to\prod_{i,j,k}\]
	is exact, so the morphism on the left is a kernel of morphisms of quasicoherent sheaves and is therefore a quasicoherent sheaf.
\end{proof}

\subsection{Closed Embeddings}
Given a sheaf $\mc F$ on $x$, recall from long ago that we defined $\op{Supp}\mc F\coloneqq\{x\in X:\mc F_x\ne0\}$. Now, here is our result.
\begin{definition}[Ideal sheaf]
	Fix a scheme $X$. An \textit{ideal sheaf} $\mc I$ is an $\mathcal O_X$-module which is a subsheaf of $\OO_X$. Categorically, an ideal sheaf is an embedding of $\OO_X$-modules $\iota\colon\mc I\into\OO_X$.
\end{definition}
\begin{proposition} \label{prop:closed-embedding-from-qc-ideal}
	Fix a scheme $X$. Then there is a contravariant equivalence of categories between closed subschemes of $X$ and quasicoherent ideal sheaves.
\end{proposition}
We take a moment to define the named categories, though we will not check formally that they are in fact a category. The category of closed subschemes of $X$ has objects which are closed embeddings $f\colon Y\to X$. A morphism from the closed embedding $f_1\colon Y_1\to X$ to the closed embedding $f_2\colon Y_2\to X$ is a morphism $g\colon Y_1\to Y_2$ making the diagram
% https://q.uiver.app/?q=WzAsNCxbMCwwLCJZXzEiXSxbMCwxLCJZXzIiXSxbMSwwLCJYIl0sWzEsMSwiWCJdLFswLDIsImZfMSIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzEsMywiZl8yIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XSxbMiwzLCIiLDEseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFswLDEsImciLDJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
\[\begin{tikzcd}
	{Y_1} & X \\
	{Y_2} & X
	\arrow["{f_1}", hook, from=1-1, to=1-2]
	\arrow["{f_2}", hook, from=2-1, to=2-2]
	\arrow[Rightarrow, no head, from=1-2, to=2-2]
	\arrow["g"', from=1-1, to=2-1]
\end{tikzcd}\]
commute; for example, $\id_{Y}$ is a morphism given some closed embedding $f\colon Y\into X$. In other words, we are considering the subcategory of schemes under $X$ consisting of closed subschemes.

Analogously, the category of quasicoherent ideal sheaves has objects which are injections $\iota\colon\mc I\into\OO_X$ of quasicoherent ideal sheaves. A morphism from the quasicoherent ideal sheaf $\iota_1\colon\mc I_1\into\OO_X$ to $\iota_2\colon\mc I_2\into\OO_X$ is a morphism $\varphi\colon\mc I_1\to\mc I_2$ making the diagram
% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXG1jIElfMSJdLFswLDEsIlxcbWMgSV8yIl0sWzEsMCwiXFxPT19YIl0sWzEsMSwiXFxPT19YIl0sWzAsMiwiXFxpb3RhXzEiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFsxLDMsIlxcaW90YV8yIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XSxbMCwxLCJcXHZhcnBoaSIsMl0sWzIsMywiIiwxLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
\[\begin{tikzcd}
	{\mc I_1} & {\OO_X} \\
	{\mc I_2} & {\OO_X}
	\arrow["{\iota_1}", hook, from=1-1, to=1-2]
	\arrow["{\iota_2}", hook, from=2-1, to=2-2]
	\arrow["\varphi"', from=1-1, to=2-1]
	\arrow[Rightarrow, no head, from=1-2, to=2-2]
\end{tikzcd}\]
commute; for example, $\id_\mc I$ is a morphism given some injection $\iota\colon\mc I\into\OO_X$. Again, this is essentially the subcategory of quasicoherent ideal sheaves under $\OO_X$ consisting of injections.

We now divide the proof into a series of steps. Given a scheme $X$, we call the category of closed subschemes $\mathrm{CldSch}$ and the category of quasicoherent ideal sheaves $\mathrm{QCohIdl}$.
\begin{lemma}
	Fix a scheme $X$. We describe our functor $K\colon\mathrm{CldSch}\to\mathrm{QCohIdl}\opp$. (Here, $K$ stands for ``kernel.'')
\end{lemma}
\begin{proof}
	Here is our data.
	\begin{itemize}
		\item On objects, pick up a closed embedding $f\colon Y\to X$, we note that we have a map $f^\sharp\colon\OO_X\to f_*\OO_Y$ of sheaves. Now, note that $f$ is quasicompact by \autoref{ex:closed-is-qc} and separated by \autoref{ex:mono-is-sep} and hence quasiseparated by \autoref{lem:mainqslemma} because the diagonal morphism is closed and hence quasicompact (by \autoref{ex:closed-is-qc} again).

		Thus, $f_*\OO_Y$ is a quasicoherent sheaf on $X$ by \autoref{lem:push-forward-quasicoherent}. We also note that $f^\sharp_U$ is a morphism of rings for each open $U\subseteq X$, so $f^\sharp$ is a morphism of $\OO_X$-modules, which we can see directly because
		% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXE9PX1goVSlcXHRpbWVzXFxPT19YKFUpIl0sWzAsMSwiXFxPT19YKFUpXFx0aW1lcyBmXypcXE9PX1koVSkiXSxbMSwwLCJcXE9PX1goVSkiXSxbMSwxLCJmXypcXE9PX1koVSkiXSxbMiwwLCIocixtKSJdLFsyLDEsIihyLGZeXFxzaGFycF9VKG0pKSJdLFszLDAsInJtIl0sWzMsMSwiZl5cXHNoYXJwX1Uocm0pIl0sWzAsMSwie1xcaWRfe1xcT09fWH0oVSl9XFx0aW1lcyBmXlxcc2hhcnBfVSIsMl0sWzIsMywiZl5cXHNoYXJwX1UiXSxbMCwyXSxbMSwzXSxbNCw2LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzYsNywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs1LDcsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw1LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\OO_X(U)\times\OO_X(U)} & {\OO_X(U)} & {(r,m)} & rm \\
			{\OO_X(U)\times f_*\OO_Y(U)} & {f_*\OO_Y(U)} & {(r,f^\sharp_U(m))} & {f^\sharp_U(rm)}
			\arrow["{{\id_{\OO_X}(U)}\times f^\sharp_U}"', from=1-1, to=2-1]
			\arrow["{f^\sharp_U}", from=1-2, to=2-2]
			\arrow[from=1-1, to=1-2]
			\arrow[from=2-1, to=2-2]
			\arrow[maps to, from=1-3, to=1-4]
			\arrow[maps to, from=1-4, to=2-4]
			\arrow[maps to, from=2-3, to=2-4]
			\arrow[maps to, from=1-3, to=2-3]
		\end{tikzcd}\]
		commutes. Thus, $f^\sharp\colon\OO_X\to f_*\OO_Y$ is a morphism of quasicoherent sheaves, so $\ker f^\sharp$ is a quasicoherent sheaf by \autoref{cor:ker-is-quasicoherent}, and it is an ideal sheaf with the given inclusion $\ker f^\sharp\to\OO_X$ of $\OO_X$-modules by
		\[(\ker f^\sharp)(U)=\ker f^\sharp_U\subseteq\OO_X(U).\]
		Namely, this map is injective on open sets and thus monic by \autoref{prop:injonstalks}, and we checked that the map is a map of $\OO_X$-modules in \autoref{prop:ox-mod-ker}. As such, we define $K(Y)\coloneqq\ker f^\sharp$.

		\item On morphisms, suppose that we have a morphism $g\colon Y_1\to Y_2$ of the closed embeddings $f_1\colon Y_1\to X$ and $f_2\colon Y_2\to X$, meaning that the diagram
		% https://q.uiver.app/?q=WzAsMyxbMSwwLCJYIl0sWzAsMCwiWV8xIl0sWzAsMSwiWV8yIl0sWzEsMCwiZl8xIl0sWzIsMCwiZl8yIiwyXSxbMSwyLCJnIiwyXV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		% https://q.uiver.app/?q=WzAsNCxbMSwwLCJYIl0sWzAsMCwiWV8xIl0sWzAsMSwiWV8yIl0sWzEsMSwiWCJdLFsxLDAsImZfMSJdLFsxLDIsImciLDJdLFsyLDMsImZfMiJdLFswLDMsIiIsMSx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{Y_1} & X \\
			{Y_2} & X
			\arrow["{f_1}", from=1-1, to=1-2]
			\arrow["g"', from=1-1, to=2-1]
			\arrow["{f_2}", from=2-1, to=2-2]
			\arrow[Rightarrow, no head, from=1-2, to=2-2]
		\end{tikzcd}\]
		commutes. On sheaves, we get the commutative diagram
		% https://q.uiver.app/?q=WzAsOCxbMiwwLCJcXE9PX1giXSxbMywwLCIoZl8yKV8qXFxPT197WV8yfSJdLFsyLDEsIlxcT09fWCJdLFszLDEsIihmXzEpXypcXE9PX3tZXzF9Il0sWzAsMCwiMCJdLFswLDEsIjAiXSxbMSwwLCJcXGtlciBmXzJeXFxzaGFycCJdLFsxLDEsIlxca2VyIGZfMV5cXHNoYXJwIl0sWzAsMSwiZl8yXlxcc2hhcnAiXSxbMiwzLCJmXzFeXFxzaGFycCJdLFswLDIsIiIsMSx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzEsMywiKGZfMilfKmdeXFxzaGFycCJdLFs1LDddLFs3LDJdLFs0LDZdLFs2LDBdLFs2LDcsIksoZykiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			0 & {\ker f_2^\sharp} & {\OO_X} & {(f_2)_*\OO_{Y_2}} \\
			0 & {\ker f_1^\sharp} & {\OO_X} & {(f_1)_*\OO_{Y_1}}
			\arrow["{f_2^\sharp}", from=1-3, to=1-4]
			\arrow["{f_1^\sharp}", from=2-3, to=2-4]
			\arrow[Rightarrow, no head, from=1-3, to=2-3]
			\arrow["{(f_2)_*g^\sharp}", from=1-4, to=2-4]
			\arrow[from=2-1, to=2-2]
			\arrow[from=2-2, to=2-3]
			\arrow[from=1-1, to=1-2]
			\arrow[from=1-2, to=1-3]
			\arrow["{K(g)}"', dashed, from=1-2, to=2-2]
		\end{tikzcd}\]
		of solid arrows, where the rows are exact by reasoning in an abelian category. Now, something like the Snake lemma will induce the map of kernels, which uniquely makes the diagram commute; explicitly, this map on some open $U\subseteq X$ just follows the identity $\OO_X(U)\to\OO_X(U)$, which does take elements of $(\ker f_2^\sharp)(U)$ to $(\ker f_1^\sharp)(U)$ by the commutativity of the right square. Of course, this is the only map making the diagram commute.

		We now run functoriality checks.
		\begin{itemize}
			\item For the identity functoriality check, note the identity map of the closed subscheme $f\colon Y\to X$ has the diagram
			% https://q.uiver.app/?q=WzAsOCxbMiwwLCJcXE9PX1giXSxbMywwLCJmXypcXE9PX1kiXSxbMiwxLCJcXE9PX1giXSxbMywxLCJmXypcXE9PX1kiXSxbMCwwLCIwIl0sWzAsMSwiMCJdLFsxLDAsIlxca2VyIGZeXFxzaGFycCJdLFsxLDEsIlxca2VyIGZeXFxzaGFycCJdLFswLDEsImZeXFxzaGFycCJdLFsyLDMsImZeXFxzaGFycCJdLFswLDIsIiIsMSx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzEsMywiZl8qZ15cXHNoYXJwIl0sWzUsN10sWzcsMl0sWzQsNl0sWzYsMF0sWzYsNywiXFxpZF97XFxrZXIgZl5cXHNoYXJwfSIsMl1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}
				0 & {\ker f^\sharp} & {\OO_X} & {f_*\OO_Y} \\
				0 & {\ker f^\sharp} & {\OO_X} & {f_*\OO_Y}
				\arrow["{f^\sharp}", from=1-3, to=1-4]
				\arrow["{f^\sharp}", from=2-3, to=2-4]
				\arrow[Rightarrow, no head, from=1-3, to=2-3]
				\arrow["{f_*g^\sharp}", from=1-4, to=2-4]
				\arrow[from=2-1, to=2-2]
				\arrow[from=2-2, to=2-3]
				\arrow[from=1-1, to=1-2]
				\arrow[from=1-2, to=1-3]
				\arrow["{\id_{\ker f^\sharp}}"', from=1-2, to=2-2]
			\end{tikzcd}\]
			commuting, so $K({\id_Y})=\id_{\ker f^\sharp}$.
	
			\item For the composition functoriality check, we pick up morphisms $g_1\colon Y_1\to Y_2$ and $g_2\colon Y_2\to Y_3$ of closed subschemes $f_1\colon Y_1\to X$ and $f_2\colon Y_2\to X$ and $f_3\colon Y_3\to X$. Then we build the large diagram
			% https://q.uiver.app/?q=WzAsMTIsWzIsMCwiXFxPT19YIl0sWzMsMCwiKGZfMylfKlxcT09fWSJdLFsyLDEsIlxcT09fWCJdLFszLDEsIihmXzIpXypcXE9PX1kiXSxbMCwwLCIwIl0sWzAsMSwiMCJdLFsxLDAsIlxca2VyIGZfM15cXHNoYXJwIl0sWzEsMSwiXFxrZXIgZl8yXlxcc2hhcnAiXSxbMiwyLCJcXE9PX1giXSxbMywyLCIoZl8xKV8qXFxPT19ZIl0sWzEsMiwiXFxrZXIgZl8xXlxcc2hhcnAiXSxbMCwyLCIwIl0sWzAsMSwiZl8zXlxcc2hhcnAiXSxbMiwzLCJmXzJeXFxzaGFycCJdLFswLDIsIiIsMSx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzEsMywiKGZfMylfKmdfMl5cXHNoYXJwIiwyXSxbNSw3XSxbNywyXSxbNCw2XSxbNiwwXSxbOCw5LCJmXzFeXFxzaGFycCJdLFszLDksIihmXzIpXypnXzFeXFxzaGFycCIsMl0sWzcsMTAsIksoZ18xKSJdLFsyLDgsIiIsMCx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzEwLDhdLFsxMSwxMF0sWzYsMTAsIksoZ18yXFxjaXJjIGdfMSkiLDIseyJsYWJlbF9wb3NpdGlvbiI6MjAsIm9mZnNldCI6MiwiY3VydmUiOjN9XSxbMSw5LCIoZl8zKV8qKGdfMlxcY2lyYyBnXzEpXlxcc2hhcnAiLDAseyJsYWJlbF9wb3NpdGlvbiI6MjAsIm9mZnNldCI6LTIsImN1cnZlIjotM31dLFs2LDcsIksoZ18yKSJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}
				0 & {\ker f_3^\sharp} & {\OO_X} & {(f_3)_*\OO_Y} \\
				0 & {\ker f_2^\sharp} & {\OO_X} & {(f_2)_*\OO_Y} \\
				0 & {\ker f_1^\sharp} & {\OO_X} & {(f_1)_*\OO_Y}
				\arrow["{f_3^\sharp}", from=1-3, to=1-4]
				\arrow["{f_2^\sharp}", from=2-3, to=2-4]
				\arrow[Rightarrow, no head, from=1-3, to=2-3]
				\arrow["{(f_3)_*g_2^\sharp}"', from=1-4, to=2-4]
				\arrow[from=2-1, to=2-2]
				\arrow[from=2-2, to=2-3]
				\arrow[from=1-1, to=1-2]
				\arrow[from=1-2, to=1-3]
				\arrow["{f_1^\sharp}", from=3-3, to=3-4]
				\arrow["{(f_2)_*g_1^\sharp}"', from=2-4, to=3-4]
				\arrow["{K(g_1)}", from=2-2, to=3-2]
				\arrow[Rightarrow, no head, from=2-3, to=3-3]
				\arrow[from=3-2, to=3-3]
				\arrow[from=3-1, to=3-2]
				\arrow["{K(g_2\circ g_1)}"'{pos=0.2}, shift right=2, curve={height=18pt}, from=1-2, to=3-2]
				\arrow["{(f_3)_*(g_2\circ g_1)^\sharp}"{pos=0.2}, shift left=2, curve={height=-18pt}, from=1-4, to=3-4]
				\arrow["{K(g_2)}", from=1-2, to=2-2]
			\end{tikzcd}\]
			which tells us that $K(g_2\circ g_1)$ and $K(g_1)\circ K(g_2)$ both make the outer-left $2\times1$ rectangle commute, so the uniqueness of this map forces $K(g_2\circ g_1)=K(g_1)\circ K(g_2)$.
		\end{itemize}
		As an aside, we note that $K(g)\colon K(Y_2)\to K(Y_1)$ is always injective by the Snake lemma.
		\qedhere
	\end{itemize}
\end{proof}
\begin{lemma} \label{lem:ideal-to-subscheme}
	Fix a scheme $X$. We describe our functor $S\colon\mathrm{QCohIdl}\to\mathrm{CldSch}$. (Here, $S$ stands for ``support.'')
\end{lemma}
\begin{proof}
	This is a little more involved because it requires constructing a scheme and scheme morphisms. Because I don't want to drive myself completely insane, I will omit some of the more annoying checks.
	\begin{itemize}
		\item On objects, pick up a quasicoherent ideal sheaf $\iota\colon\mc I\into\OO_X$. Then we need to construct a closed scheme $S(\mc I)\into X$, which we will call $Y$. We do this in steps.
		\begin{enumerate}
			\item On topological spaces, we define
			\[Y\coloneqq\{x\in X:(\coker\iota)_x\ne0\}\stackrel*=\{x\in X:\coker\iota_x\},\]
			where $\stackrel*=$ is by \autoref{lem:cokerstalk}, and we give $Y$ the subspace topology. Because we gave $Y$ the subspace topology on $X$, we get a natural embedding $f\colon Y\to X$ of topological spaces, which is a homeomorphism onto its image (because the image is just $Y$).
	
			\item Now, for each open $U\subseteq X$, we note that $\im\iota_U$ is an $\mathcal O_X(U)$-submodule of $\OO_X(U)$ and therefore an ideal of $\OO_X(U)$, so we may give $(\coker\pre\iota)(U)=\OO_X(U)/\mc I(U)$ a ring structure in addition to its structure as an $\mathcal O_X(U)$-module. We note that $\coker\pre\iota$ makes a perfectly fine presheaf of rings. Indeed, for open sets $V\subseteq U$, we need $(\coker\pre\iota)(U)\to(\coker\pre\iota)(V)$ to be a map of rings.
			\begin{itemize}
				\item Additivity follows from being a map of abelian groups.
				\item Multiplicativity follows from being a map of $\OO_X$-premodules: note $r,s\in\OO_X(U)$ has
				\begin{align*}
					((r+\mc I(U))|_V)\cdot((s+\mc I(U))|_V) &= r|_V\cdot(s+\mc I(U))|_V \\
					&= (r\cdot(s+\mc I(U)))|_V \\
					&= \big((r+\mc I(U))\cdot(s+\mc I(U))\big)|_V,
				\end{align*}
				where $r|_V\cdot(s|_V)$ refers to the $\OO_X(V)$-action on $\OO_X(V)/\mc I(V)$, and similar for $r\cdot(s+\mc I(U))$.
				\item Let $1$ denote the identity in $\OO_X(U)$. Then $1+\mc I(U)$ is the identity in $\OO_X(U)$, and it restricts to $1|_V+\mc I(U)$ in $\OO_X(V)$, which is the identity in $\OO_X(V)$ because $1|_V$ is the identity in $\OO_X(V)$ because $\OO_X(U)\to\OO_X(V)$ is already a map of rings.
			\end{itemize}
			Now, we note that the stalks in the category of presheaves of abelian groups and the category of rings will both be the same (up to an application of the forgetful functor) because the restrictions are the same, which we can see directly from the construction as being pairs $[(U,s)]$. As such, tracking through sheafification as just compatible stalks, $\coker\iota$ is a perfectly legitimate sheaf of rings on $X$, and it doesn't matter if we view it as a sheaf of rings or of abelian groups (or even as an $\mathcal O_X$-module).
	
			\item We now take a moment to check that $Y\subseteq X$ is closed; we show
			\[X\setminus Y=\{x\in X:(\coker\iota)_x=0\}\]
			is open. Indeed, note $\coker\iota$ is a sheaf of rings, so $(\coker\iota)_x$ is a ring, and the ring will vanish if and only if its identity is zero. Letting $1\in(\coker\iota)(X)$ denote the identity for now, the fact that restriction maps are all ring maps tells us that $1|_U\in(\coker\iota)(U)$ is also the identity. As such, $[(X,1)]$ is the identity of $(\coker\iota)_x$, which we can see because
			\[[(U,r)]\cdot[(X,1)]=[(U,r)]\cdot[(U,1|_U)]=[(U,r\cdot1|_U)]=[(U,r)]\]
			for each $[(U,r)]\in(\coker\iota)_x$. Thus, $(\coker\iota)_x$ vanishes if and only if $1|_x=0$. However, this is a stalk, so $(\coker\iota)_x=0$ means there is some open neighborhood $U_x\subseteq X$ such that $1|_{U_x}=0$, from which it follows that $y\in U_x$ has $1|_y=1|_{U_x}|_y=0$ as well. Thus,
			\[X\setminus Y=\bigcup_{\substack{x\in X\\(\coker\iota)_x=0}}\{x\}\subseteq\bigcup_{\substack{x\in X\\(\coker\iota)_x=0}}U_x\subseteq X\setminus Y,\]
			so $X\setminus Y$ is a union of open sets and therefore open.
	
			\item We now define $\OO_Y\coloneqq f^{-1}(\coker\iota)$; namely, $\coker\iota$ is a sheaf of rings on $X$, so $f^{-1}(\coker\iota)$ is a sheaf of rings on $Y$, so $(Y,\OO_Y)$ is now a ringed space. At stalks, \autoref{lem:invimagestalk} and \autoref{lem:cokerstalk} tells us
			\[\left(f^{-1}(\coker\iota)\right)_y\simeq(\coker\iota)_{f(y)}=(\coker\iota)_y\simeq(\coker\pre\iota)_y\simeq\coker\iota_y,\]
			where the first and second isomorphisms are isomorphisms of rings and the last isomorphism is of $\OO_{X,y}$-modules. But we see that the identities of $(\coker\pre\iota)_y$ and $\coker\iota_y$ are both germs of the identity of $\OO_X(X)$ by tracking through our structures,\footnote{I am too annoyed by this proof to write this out.} implying that the last isomorphism is also of rings. (Namely, multiplicativity follows because the multiplication structure is induced by the module structure.)

			However, $\coker\iota_y$ is a local ring as the quotient of the local ring $\OO_{X,y}$. Indeed, $\coker\iota_y\simeq(\coker\iota)_y$ is nonzero because $y\in Y$, and the nonzero quotients of local rings remain local rings; namely, the unique maximal ideal of $\coker\iota_y$ is the image of $\mf m_{X,y}$. Thus, $(Y,\OO_Y)$ is actually a locally ringed space.

			\item Quickly, for two open subschemes $U,V\subseteq X$ with $U\cap Y=V\cap Y$, we claim that $(\coker\iota)(U)\simeq(\coker\iota)(V)$. Note that it suffices to show $(\coker\iota)(U)\simeq(\coker\iota)(U\cap V)$ and $(\coker\iota)(U\cap V)\simeq(\coker\iota)(V)$, so we may reduce to the case where $V\subseteq U$ by replacing $V$ with $V\cap U$.

			As such, in one direction we have a restriction map $(\coker\iota)(U)\to(\coker\iota)(V)$, which we want to show is an isomorphism. It suffices to exhibit an inverse morphism on the level of sets. Well, given some $r\in(\coker\iota)(V)$, we note that any $p\in(V\setminus Y)$ has
			\[r|_p\in(\coker\iota)_p,\]
			but $(\coker\iota)_p=0$ because $p\notin Y$, so $r|_p=0$ there. Thus, $r|_{V\setminus Y}=0$, so we can glue the sections $r\in(\coker\iota)(V)$ and $0\in(\coker\iota)(U\setminus Y)$ to a uniquely defined section $\widetilde r\in(\coker\iota)(U)$. (Notably, $V\setminus Y$ is open because $Y$ is closed!)

			We now run our inverse checks. By construction, we note that any $r\in(\coker\iota)(V)$ has $\widetilde r|_p=r|_p$ for each $p\in V$, so $\widetilde r|_V=r$. In the other direction, we need to show $\widetilde{s|_V}=s$ for any $s\in(\coker\iota)(U)$. Well, for $p\in U\cap Y=V\cap Y$, we see
			\[\widetilde{s|_V}|_p=s|_V|_p=s|_p\]
			by construction of $\widetilde{\cdot}$. On the other hand, for $p\in U\setminus Y$, we see $(\coker\iota)_p=0$, so $\widetilde{s|_V}|_p=0=s|_p$. It follows that $\widetilde{s|_V}=s$.

			\item Now, for open subschemes $U\subseteq X$, we claim that $\OO_Y(U\cap Y)\simeq(\coker\iota)(U)$. Indeed, we know
			\[f^{-1,\op{pre}}(\coker\iota)(U\cap Y)=\colimit_{V\supseteq U\cap Y}(\coker\iota)(V).\]
			However, we note that we can restrict any $V$ with $V\supseteq U\cap Y$ to $V\cap U$ so that $(V\cap U)\cap Y=U\cap Y$. Adjusting the colimit, we may write
			\[f^{-1,\op{pre}}(\coker\iota)(U\cap Y)=\colimit_{V\cap Y=U\cap Y}(\coker\iota)(V),\]
			but now each $(\coker\iota)(V)$ is canonically isomorphic to $(\coker\iota)(U)$ (by restrictions!) by the previous step. Thus, because the colimit is also made of restrictions, we see that $f^{-1,\op{pre}}(\coker\iota)(U\cap Y)\simeq(\coker\iota)(U)$ follows.

			To finish, we claim that the data $(U\cap Y)\mapsto(\coker\iota)(U)$ assembles into a sheaf on $Y$, meaning that the last step of sheafification actually doesn't do anything. Note that our restriction maps use $V\cap Y\subseteq U\cap Y$ to map
			\[(\coker\iota)(U)\stackrel{\op{res}}\to(\coker\iota)(U\cap V)\simeq(\coker\iota)(V).\]
			By the naturality of $\simeq$ and the fact that $\coker\iota$ is a sheaf already, we already know our data assembles into a presheaf on the base. Thus, we just have to check that we form a sheaf on the base. For this, fix some collection of open subschemes $\{U_\alpha\}_{\alpha\in\lambda}$ so that the $\{Y\cap U_\alpha\}_{\alpha\in\lambda}$ cover some $U\cap Y$. Note that we may assume $U\coloneqq\bigcup_{\alpha\in\lambda}U_\alpha$ because we already know
			\[U\cap Y=\bigcup_{\alpha\in\lambda}U_\alpha.\]
			In particular, $U_\alpha\subseteq U$ for each $\alpha$. Here are our checks; they follow directly from $\coker\iota$ being a sheaf.
			\begin{itemize}
				\item Identity: given $f,g\in(\coker\iota)(U)$, we are given that $f|_{U_\alpha}=g|_{U_\alpha}$ for each $\alpha$. Thus, for each $p\in U\cap Y$, we see $p\in U_\alpha$ for some $\alpha$, so $f|_p=g|_p$. Conversely, if $p\notin Y$, then $f|_p=0=g|_p$ because $(\coker\iota)_p=0$. Thus, $f=g$ follows.
				\item Gluability: suppose we have $f_\alpha\in(\coker\iota)(U_\alpha)$ for each $\alpha$ such that
				\[f_\alpha|_{U_\alpha\cap U_\beta}=f_\beta|_{U_\alpha\cap U_\beta}\]
				for each $\alpha$ and $\beta$. Then we are granted $f\in(\coker\iota)(U)$ such that $f|_{U_\alpha}=f_\alpha$ for each $\alpha$ because $(\coker\iota)$ is a sheaf.
			\end{itemize}
			
			\item For any affine open subscheme $U\subseteq X$, we note that $(\coker\iota)(U)\simeq\OO_X(U)/\mc I(U)$ by \autoref{cor:quasicoherent-is-acyclic}. As such, we set $A\coloneqq\OO_X(U)$ and $I\coloneqq\mc I(U)$ and claim that the canonical morphism
			\[\varepsilon\colon(Y\cap U,\OO_Y|_{Y\cap U})\to(\Spec A/I,\OO_{\Spec A/I})\]
			of \autoref{cor:the-affine-iso} is an isomorphism of locally ringed spaces. By \autoref{lem:betterlocaliso}, we have two checks. Let $\varepsilon_U\colon U\to\Spec A$ be the corresponding canonical morphism.
			\begin{itemize}
				\item On topological spaces, we claim that $\varepsilon\colon(Y\cap U)\to(\Spec A/I)$ is the restriction of $\varepsilon_U$ to a $Y\cap U$, where we are identifying $\Spec A/I$ with its image $V(I)\subseteq\Spec A$ via \autoref{exe:closedaffinesubscheme}. Because $\varepsilon_U$ is already homeomorphism, this will imply that $\varepsilon$ is also a homeomorphism.

				In one direction, we show $\varepsilon(p)=\varepsilon_U(p)$. Well, we are sending a point $p\in Y\cap U$ to the kernel of the composite
				\[(A/I)\simeq(\coker\iota)(U)\to(\coker\iota)_p\onto(\coker\iota)_p/\mf m_p.\]
				However, we note that $(\coker\iota)_p\simeq\coker\iota_p$ by \autoref{lem:cokerstalk}, so we're looking at a quotient of $\OO_{X,p}$. But $\OO_{X,p}$ only has a single maximal ideal, so the only quotient of $\OO_{X,p}$ which is a field is $\OO_{X,p}/\mf m_p$; namely, the canonical projection $\OO_{X,p}\to(\coker\iota)_p$ is inducing an isomorphism $\OO_{X,p}/\mf m_p\to(\coker\iota)_p/\mf m_p$, so we are sending $p\in Y\cap U$ to the kernel of the composite
				\[(A/I)\to(\coker\iota)(U)\to\OO_{X,p}/\mf m_p.\]
				Now, $(\coker\iota)(U)\simeq\coker\iota_U$ by \autoref{lem:affine-cokernel-is-quasicoherent}, so we can just compose our quotient maps in one go as asking for the kernel of
				\[(A/I)\to\OO_{X,p}/\mf m_p.\]
				To finish, when we identify $\Spec A/I$ with $V(I)\subseteq\Spec A$, we are identifying the kernel of the above map with the kernel of the map
				\[A\to\OO_{X,p}/\mf m_p,\]
				which is indeed exactly $\varepsilon_U(p)$.

				In the other direction, we need to show that $\varepsilon$ surjects onto $V(I)$. Well, for any $\mf p\in V(I)$, we need a point $p\in Y\cap U$ such that $\mf p$ is the kernel of the map
				\[A\to\OO_{X,p}/\mf m_p.\]
				Because $\varepsilon_U$ is bijective, there is certainly some $p\in U$ such that $\mf p$ is the kernel of the above map. It remains to show that $p\in Y$. Well, $\mf p\in V(I)$ means that we can factor out our map as
				\[A\to A/I\simeq(\coker\iota)(U)\to\OO_{X,p}/\mf m_p,\]
				where the $\simeq$ is by \autoref{lem:affine-cokernel-is-quasicoherent}. However, by \autoref{lem:cokerstalk}, taking stalks commutes with the canonical projection, so this is the same as the map
				\[A\to A/I\to(\coker\iota)(U)\to(\coker\iota)_p/\mf m_p,\]
				so it follows that $(\coker\iota)_p\ne0$, so $p\in Y$ follows.

				\item On sheaves, we note that $\varepsilon$ on the distinguished base looks like the composite
				\[\OO_Y(U\cap Y)_f=\OO_{\Spec A/I}(D(f))\to\left(\varepsilon_*\OO_{Y\cap U}\right)(D(f))=\OO_Y((Y\cap U)_f),\]
				by sending an element of $\OO_Y(U\cap Y)_f$ to its appropriate restriction. However, $(Y\cap U)_f=Y\cap U_f$ by definition, so $\OO_Y(Y\cap U_f)\simeq(\coker\iota)(U_f)$ as shown above. Continuing, we note
				\[\OO_Y(U\cap Y)_f=(\coker\iota)(U)_f\simeq(\coker\iota)(U_f)\]
				by \autoref{lem:localize-is-good} by taking the appropriate restriction. This is what we wanted.
			\end{itemize}
			We conclude that $(Y\cap U,\OO_Y|_{Y\cap U})$ is affine, so $Y$ is in fact a scheme.

			\item To finish, we finish defining our closed embedding $f\colon Y\to X$. As such, it remains to give a map $f^\sharp\colon\OO_X\to f_*\OO_Y$ of sheaves on $X$. Well, we are looking for a sheaf map $\OO_X\to f_*f^{-1}(\coker\iota)$, so we define $f^\sharp$ as the composite
			\[\OO_X(U)\to(\coker\iota)(U)\simeq\OO_Y(U\cap Y),\]
			where the last isomorphism was provided above; the naturality of these maps was essentially checked above.
			
			We note that this map is surjective on stalks because the canonical projection $\OO_X\to\coker\iota$ is surjective on stalks by \autoref{lem:cokerstalk}. Additionally, we note that $p\in Y$ makes the map $\OO_{X,p}\to(\coker\iota)_p$ a quotient map of local rings, which is in fact a map of local rings. Thus, we have described a closed embedding of schemes.

			It will be helpful to describe this map affine-locally: well, for each affine open $U\subseteq X$, exactness of \autoref{lem:affine-cokernel-is-quasicoherent} tells us that the map $\OO_X(U)\to(\coker\iota)(U)$ is essentially the projection map $\OO_X(U)\to\coker\iota_U$.
		\end{enumerate}
		\item On morphisms, pick up a morphism $\varphi\colon\mc I_1\to\mc I_2$ of quasicoherent ideal sheaves $\iota_1\colon\mc I_1\to\OO_X$ and $\iota_2\colon\mc I_2\to\OO_X$. We need to exhibit a morphism $S(\varphi)\colon S(\iota_2)\to S(\iota_1)$. For brevity, define $S(\iota_\bullet)$ to be the closed embedding $f_\bullet\colon Y_\bullet\into X$. As usual, describing a scheme morphism requires a large amount of data.
		\begin{itemize}
			\item On topological spaces, we note that $Y_1$ and $Y_2$ are literally subsets of $X$, so we claim that $Y_2\subseteq Y_1$, which will induce our continuous map $g\colon Y_2\to Y_1$. Well, we note that there is an induced map $\overline\varphi\colon(\coker\iota_1)\to(\coker\iota_2)$ in the diagram
			% https://q.uiver.app/?q=WzAsMTAsWzAsMCwiMCJdLFsxLDAsIlxcbWMgSV8xIl0sWzIsMCwiXFxPT19YIl0sWzMsMCwiXFxjb2tlclxcaW90YV8xIl0sWzQsMCwiMCJdLFswLDEsIjAiXSxbMSwxLCJcXG1jIElfMiJdLFsyLDEsIlxcT09fWCJdLFszLDEsIlxcY29rZXJcXGlvdGFfMiJdLFs0LDEsIjAiXSxbMCwxXSxbMSwyXSxbMiwzXSxbMyw0XSxbNSw2XSxbNiw3XSxbNyw4XSxbOCw5XSxbMiw3LCIiLDEseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsxLDYsIlxcdmFycGhpIiwyXSxbMyw4LCJcXG92ZXJsaW5lXFx2YXJwaGkiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}
				0 & {\mc I_1} & {\OO_X} & {\coker\iota_1} & 0 \\
				0 & {\mc I_2} & {\OO_X} & {\coker\iota_2} & 0
				\arrow[from=1-1, to=1-2]
				\arrow[from=1-2, to=1-3]
				\arrow[from=1-3, to=1-4]
				\arrow[from=1-4, to=1-5]
				\arrow[from=2-1, to=2-2]
				\arrow[from=2-2, to=2-3]
				\arrow[from=2-3, to=2-4]
				\arrow[from=2-4, to=2-5]
				\arrow[Rightarrow, no head, from=1-3, to=2-3]
				\arrow["\varphi"', from=1-2, to=2-2]
				\arrow["\overline\varphi"', dashed, from=1-4, to=2-4]
			\end{tikzcd}\]
			because we're in an abelian category. Now, the middle morphism is surjective, so $\overline\varphi$ is also surjective by the Snake lemma. Thus, we note $p\notin Y_1$ implies $(\coker\iota_1)_p=0$, so the surjectivity of $\overline\varphi$ forces $(\coker\iota_2)_p=0$, so $p\notin Y_2$. Taking the contrapositive, we see $Y_2\subseteq Y_1$, which is what we wanted.

			\item On sheaves, we need a map $\OO_{Y_1}\to g_*\OO_{Y_2}$. Well, for some open $U\subseteq Y_1$, lift it to some open $V\subseteq X$, and we see that we're looking for a map
			\[\OO_{Y_1}(V\cap Y_1)\to\OO_{Y_2}(V\cap Y_2).\]
			However, as we showed above, this is the same as looking for a map
			\[(\coker\iota_1)(V)\to(\coker\iota_2)(V),\]
			for which we just use $\overline\varphi_V$. To see that this is a map of sheaves, we see that $\overline\varphi$ is already natural in $V$, so having $V'\cap Y_1\subseteq V\cap Y_1$ makes the left square in
			% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXE9PX3tZXzF9KFZcXGNhcCBZXzEpIl0sWzEsMCwiXFxPT197WV8yfShWXFxjYXAgWV8yKSJdLFswLDEsIlxcT09fe1lfMX0oVidcXGNhcCBZXzEpIl0sWzEsMSwiXFxPT197WV8yfShWJ1xcY2FwIFlfMikiXSxbMiwwLCIoXFxjb2tlclxcaW90YV8xKShWKSJdLFszLDAsIihcXGNva2VyXFxpb3RhXzIpKFYpIl0sWzIsMSwiKFxcY29rZXJcXGlvdGFfMSkoVicpIl0sWzMsMSwiKFxcY29rZXJcXGlvdGFfMikoVicpIl0sWzAsMSwiXFxvdmVybGluZVxcdmFycGhpX1YiXSxbMiwzLCJcXG92ZXJsaW5lXFx2YXJwaGlfe1YnfSJdLFs0LDUsIlxcb3ZlcmxpbmVcXHZhcnBoaV9WIl0sWzYsNywiXFxvdmVybGluZVxcdmFycGhpX3tWJ30iXSxbNCw2LCJcXG9we3Jlc30iLDJdLFs1LDcsIlxcb3B7cmVzfSJdLFsxLDMsIlxcb3B7cmVzfSJdLFswLDIsIlxcb3B7cmVzfSIsMl1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}
				{\OO_{Y_1}(V\cap Y_1)} & {\OO_{Y_2}(V\cap Y_2)} & {(\coker\iota_1)(V)} & {(\coker\iota_2)(V)} \\
				{\OO_{Y_1}(V'\cap Y_1)} & {\OO_{Y_2}(V'\cap Y_2)} & {(\coker\iota_1)(V')} & {(\coker\iota_2)(V')}
				\arrow["{\overline\varphi_V}", from=1-1, to=1-2]
				\arrow["{\overline\varphi_{V'}}", from=2-1, to=2-2]
				\arrow["{\overline\varphi_V}", from=1-3, to=1-4]
				\arrow["{\overline\varphi_{V'}}", from=2-3, to=2-4]
				\arrow["{\op{res}}"', from=1-3, to=2-3]
				\arrow["{\op{res}}", from=1-4, to=2-4]
				\arrow["{\op{res}}", from=1-2, to=2-2]
				\arrow["{\op{res}}"', from=1-1, to=2-1]
			\end{tikzcd}\]
			commute because the right square also commutes. Now, to see that $\overline\varphi$ also behaves on local rings, we note that $p\in Y_2$ builds a diagram
			% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXE9PX3tYLHB9Il0sWzEsMCwiKFxcY29rZXJcXGlvdGFfMSlfcCJdLFswLDEsIlxcT09fe1gscH0iXSxbMSwxLCIoXFxjb2tlclxcaW90YV8yKV9wIl0sWzAsMV0sWzEsMywiXFxvdmVybGluZVxcdmFycGhpX3AiXSxbMCwyLCIiLDIseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsyLDNdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}
				{\OO_{X,p}} & {(\coker\iota_1)_p} \\
				{\OO_{X,p}} & {(\coker\iota_2)_p}
				\arrow[from=1-1, to=1-2]
				\arrow["{\overline\varphi_p}", from=1-2, to=2-2]
				\arrow[Rightarrow, no head, from=1-1, to=2-1]
				\arrow[from=2-1, to=2-2]
			\end{tikzcd}\]
			so that the right map is a map of local rings because it is the quotient of the identity map on the right.
			\item We need the diagram
			% https://q.uiver.app/?q=WzAsNCxbMCwwLCJZXzEiXSxbMSwwLCJYIl0sWzAsMSwiWV8yIl0sWzEsMSwiWCJdLFswLDEsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzIsMywiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XSxbMSwzLCIiLDEseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFswLDIsImciLDJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}
				{Y_2} & X \\
				{Y_1} & X
				\arrow[hook, from=1-1, to=1-2]
				\arrow[hook, from=2-1, to=2-2]
				\arrow[Rightarrow, no head, from=1-2, to=2-2]
				\arrow["g"', from=1-1, to=2-1]
			\end{tikzcd}\]
			to commute. Well, on topological spaces, we're saying that the containment $Y_2\subseteq X$ can be factored as the containment $Y_2\subseteq Y_1\subseteq X$. On sheaves, we see that the left square of
			% https://q.uiver.app/?q=WzAsMTIsWzAsMCwiXFxPT19YIl0sWzEsMCwiKGZfMSlfKlxcT09fe1lfMX0iXSxbMCwxLCJcXE9PX1giXSxbMSwxLCIoZl8yKV8qXFxPT197WV8yfSJdLFsyLDAsIlxcT09fWChVKSJdLFszLDAsIlxcT09fe1lfMX0oWV8xXFxjYXAgVSkiXSxbMiwxLCJcXE9PX1goVSkiXSxbMywxLCJcXE9PX3tZXzJ9KFlfMlxcY2FwIFUpIl0sWzQsMCwiXFxPT19YKFUpIl0sWzUsMCwiKFxcY29rZXJcXGlvdGFfMSkoVSkiXSxbNSwxLCIoXFxjb2tlclxcaW90YV8yKShVKSJdLFs0LDEsIlxcT09fWChVKSJdLFsxLDMsIihmXzEpXypnXlxcc2hhcnAiXSxbMCwxLCJmXzFeXFxzaGFycCJdLFsyLDMsImZfMl5cXHNoYXJwIl0sWzAsMiwiIiwxLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNCw2LCIiLDEseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs0LDUsIihmXzFeXFxzaGFycClfVSJdLFs2LDcsIihmXzJeXFxzaGFycClfVSJdLFs1LDcsImdeXFxzaGFycF97WV8xXFxjYXAgVX0iXSxbOCwxMSwiIiwwLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbOCw5XSxbMTEsMTBdLFs5LDEwLCJcXG92ZXJsaW5lXFx2YXJwaGlfVSJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}
				{\OO_X} & {(f_1)_*\OO_{Y_1}} & {\OO_X(U)} & {\OO_{Y_1}(Y_1\cap U)} & {\OO_X(U)} & {(\coker\iota_1)(U)} \\
				{\OO_X} & {(f_2)_*\OO_{Y_2}} & {\OO_X(U)} & {\OO_{Y_2}(Y_2\cap U)} & {\OO_X(U)} & {(\coker\iota_2)(U)}
				\arrow["{(f_1)_*g^\sharp}", from=1-2, to=2-2]
				\arrow["{f_1^\sharp}", from=1-1, to=1-2]
				\arrow["{f_2^\sharp}", from=2-1, to=2-2]
				\arrow[Rightarrow, no head, from=1-1, to=2-1]
				\arrow[Rightarrow, no head, from=1-3, to=2-3]
				\arrow["{(f_1^\sharp)_U}", from=1-3, to=1-4]
				\arrow["{(f_2^\sharp)_U}", from=2-3, to=2-4]
				\arrow["{g^\sharp_{Y_1\cap U}}", from=1-4, to=2-4]
				\arrow[Rightarrow, no head, from=1-5, to=2-5]
				\arrow[from=1-5, to=1-6]
				\arrow[from=2-5, to=2-6]
				\arrow["{\overline\varphi_U}", from=1-6, to=2-6]
			\end{tikzcd}\]
			commutes because on open sets it is the middle square, which expands by definition into the right square, and the right square commutes by construction.
		\end{itemize}
		It remains to check functoriality.
		\begin{itemize}
			\item For the identity check, consider the identity map $\id_{\mc I}\colon\mc I\to\mc I$ of some quasicoherent ideal sheaf $\iota\colon\mc I\into\OO_X$. On topological spaces, the map $S({\id_{\mc I}})\colon S(\mc I)\to S(\mc I)$ is the containment $S(\mc I)\subseteq S(\mc I)$, which is in fact the identity.
			
			Then on sheaves, the map $\OO_{S(\mc I)}\to\OO_{S(\mc I)}$ is the one induced by the right arrow of the diagram
			% https://q.uiver.app/?q=WzAsMTAsWzAsMCwiMCJdLFsxLDAsIlxcbWMgSSJdLFsyLDAsIlxcT09fWCJdLFszLDAsIlxcY29rZXJcXGlvdGEiXSxbNCwwLCIwIl0sWzAsMSwiMCJdLFsxLDEsIlxcbWMgSSJdLFsyLDEsIlxcT09fWCJdLFszLDEsIlxcY29rZXJcXGlvdGEiXSxbNCwxLCIwIl0sWzAsMV0sWzEsMl0sWzIsM10sWzMsNF0sWzUsNl0sWzYsN10sWzcsOF0sWzgsOV0sWzIsNywiIiwxLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMyw4LCIiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMSw2LCJcXGlkX3tcXG1jIEl9IiwyXV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}
				0 & {\mc I} & {\OO_X} & \coker\iota & 0 \\
				0 & {\mc I} & {\OO_X} & \coker\iota & 0
				\arrow[from=1-1, to=1-2]
				\arrow[from=1-2, to=1-3]
				\arrow[from=1-3, to=1-4]
				\arrow[from=1-4, to=1-5]
				\arrow[from=2-1, to=2-2]
				\arrow[from=2-2, to=2-3]
				\arrow[from=2-3, to=2-4]
				\arrow[from=2-4, to=2-5]
				\arrow[Rightarrow, no head, from=1-3, to=2-3]
				\arrow[dashed, from=1-4, to=2-4]
				\arrow["{\id_{\mc I}}"', from=1-2, to=2-2]
			\end{tikzcd}\]
			which we can see should just be the identity map (for example, by uniqueness of this arrow). As such, $S({\id_\mc I})$ is in fact the identity $\id_{S(\mc I)}$.

			\item For the functoriality check, fix two morphisms $\varphi_1\colon\mc I_1\to\mc I_2$ and $\varphi_2\colon\mc I_2\to\mc I_3$ of quasicoherent ideal sheaves $\iota_1\colon\mc I_1\to\mc \OO_X$ and $\iota_2\colon\mc I_2\to\OO_X$ and $\iota_3\colon\mc I_3\to\OO_X$. For brevity, set let our closed embeddings by $S$ be $f_1\colon Y_1\into X$ and $f_2\colon Y_2\into X$ and $f_3\colon Y_3\into X$, respectively, and set $g_1\coloneqq S(\varphi_1)$ and $g_2\coloneqq S(\varphi_2)$ and $g\coloneqq S(\varphi_2\circ\varphi_1)$.

			On topological spaces, $S(\varphi_2\circ\varphi_1)$ is the containment $Y_3\subseteq Y_1$, which we can see is equal to the containment $Y_3\subseteq Y_2\subseteq Y_1$, which is exactly $S(\varphi_1)\circ S(\varphi_2)$.

			On sheaves, we draw the large diagram
			% https://q.uiver.app/?q=WzAsMTUsWzAsMCwiMCJdLFsxLDAsIlxcbWMgSV8xIl0sWzIsMCwiXFxPT19YIl0sWzMsMCwiXFxjb2tlclxcaW90YV8xIl0sWzQsMCwiMCJdLFswLDEsIjAiXSxbMSwxLCJcXG1jIElfMiJdLFsyLDEsIlxcT09fWCJdLFszLDEsIlxcY29rZXJcXGlvdGFfMiJdLFs0LDEsIjAiXSxbMCwyLCIwIl0sWzEsMiwiXFxtYyBJXzMiXSxbMiwyLCJcXE9PX1giXSxbMywyLCJcXGNva2VyXFxpb3RhXzMiXSxbNCwyLCIwIl0sWzAsMV0sWzEsMiwiXFxpb3RhXzEiXSxbMiwzXSxbMyw0XSxbNSw2XSxbNiw3LCJcXGlvdGFfMiJdLFs3LDhdLFs4LDldLFsyLDcsIiIsMSx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzMsOCwiXFxvdmVybGluZXtcXHZhcnBoaV8xfSIsMl0sWzEsNiwiXFx2YXJwaGlfMSIsMl0sWzYsMTEsIlxcdmFycGhpXzIiLDJdLFsxMSwxMiwiXFxpb3RhXzMiXSxbMTIsMTNdLFsxMywxNF0sWzEwLDExXSxbOCwxMywiXFxvdmVybGluZXtcXHZhcnBoaV8yfSIsMl0sWzMsMTMsIlxcb3ZlcmxpbmV7XFx2YXJwaGlfMlxcdmFycGhpXzF9IiwwLHsibGFiZWxfcG9zaXRpb24iOjEwLCJvZmZzZXQiOi0yLCJjdXJ2ZSI6LTJ9XSxbNywxMiwiIiwwLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
			\[\begin{tikzcd}
				0 & {\mc I_1} & {\OO_X} & {\coker\iota_1} & 0 \\
				0 & {\mc I_2} & {\OO_X} & {\coker\iota_2} & 0 \\
				0 & {\mc I_3} & {\OO_X} & {\coker\iota_3} & 0
				\arrow[from=1-1, to=1-2]
				\arrow["{\iota_1}", from=1-2, to=1-3]
				\arrow[from=1-3, to=1-4]
				\arrow[from=1-4, to=1-5]
				\arrow[from=2-1, to=2-2]
				\arrow["{\iota_2}", from=2-2, to=2-3]
				\arrow[from=2-3, to=2-4]
				\arrow[from=2-4, to=2-5]
				\arrow[Rightarrow, no head, from=1-3, to=2-3]
				\arrow["{\overline{\varphi_1}}"', from=1-4, to=2-4]
				\arrow["{\varphi_1}"', from=1-2, to=2-2]
				\arrow["{\varphi_2}"', from=2-2, to=3-2]
				\arrow["{\iota_3}", from=3-2, to=3-3]
				\arrow[from=3-3, to=3-4]
				\arrow[from=3-4, to=3-5]
				\arrow[from=3-1, to=3-2]
				\arrow["{\overline{\varphi_2}}"', from=2-4, to=3-4]
				\arrow["{\overline{\varphi_2\varphi_1}}"{pos=0.2}, shift left=2, curve={height=-12pt}, from=1-4, to=3-4]
				\arrow[Rightarrow, no head, from=2-3, to=3-3]
			\end{tikzcd}\]
			and note that $\overline{\varphi_2\circ\varphi_1}=\overline{\varphi_2}\circ\overline{\varphi_1}$ by the uniqueness of the induced arrows. However, the sheaf maps $\OO_{Y_1}\to (g_1)_*\OO_{Y_2}$ and $\OO_{Y_2}\to(g_3)_*\OO_{Y_3}$ and $\OO_{Y_1}\to g_*\OO_{Y_3}$ are just the maps $\overline{\varphi_1}$ and $\overline{\varphi_2}$ and $\overline{\varphi_2\circ\varphi_1}$ restricted appropriately, so the composites match correctly.
			\qedhere
		\end{itemize}
	\end{itemize}
\end{proof}
It remains to give natural isomorphisms for the above functors.
\begin{lemma}
	Fix a scheme $X$. We construct a natural isomorphism $\Phi\colon{\id}\Rightarrow KS$.
\end{lemma}
\begin{proof}
	Here is our data.
	\begin{itemize}
		\item We construct $\Phi$ on components. For some quasicoherent ideal sheaf $\iota\colon\mc I\to\OO_X$, let $f\colon Y\into X$ be $S(\mc I)$. Then $K(Y)$ is $\ker f^\sharp$, but for each open $U\subseteq X$, we recall that $f^\sharp_U\colon\OO_X(U)\to(f_*\OO_Y)(U)$ is just the projection map $\OO_X(U)\to(\coker\iota)(U)$. Thus, the commutative diagram
		% https://q.uiver.app/?q=WzAsMTAsWzAsMCwiMCJdLFsxLDAsIlxcbWMgSSJdLFsyLDAsIlxcT09fWCJdLFszLDAsIlxcY29rZXJcXGlvdGEiXSxbNCwwLCIwIl0sWzMsMSwiXFxjb2tlclxcaW90YSJdLFsyLDEsIlxcT09fWCJdLFs0LDEsIjAiXSxbMSwxLCJcXGtlciBmXlxcc2hhcnAiXSxbMCwxLCIwIl0sWzEsMiwiXFxpb3RhIl0sWzIsM10sWzYsNSwiZl5cXHNoYXJwIl0sWzMsNSwiIiwxLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMiw2LCIiLDEseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs5LDhdLFs4LDZdLFswLDFdLFsxLDgsIlxcUGhpX3tcXG1jIEl9IiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzMsNF0sWzUsN11d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			0 & {\mc I} & {\OO_X} & \coker\iota & 0 \\
			0 & {\ker f^\sharp} & {\OO_X} & \coker\iota & 0
			\arrow["\iota", from=1-2, to=1-3]
			\arrow[from=1-3, to=1-4]
			\arrow["{f^\sharp}", from=2-3, to=2-4]
			\arrow[Rightarrow, no head, from=1-4, to=2-4]
			\arrow[Rightarrow, no head, from=1-3, to=2-3]
			\arrow[from=2-1, to=2-2]
			\arrow[from=2-2, to=2-3]
			\arrow[from=1-1, to=1-2]
			\arrow["{\Phi_{\mc I}}"', dashed, from=1-2, to=2-2]
			\arrow[from=1-4, to=1-5]
			\arrow[from=2-4, to=2-5]
		\end{tikzcd}\]
		induces an isomorphism $\Phi_\mc I$ as drawn. (Note this is an isomorphism of quasicoherent ideal sheaves by the commutativity of the left square.)

		\item Naturality is somewhat annoying to say out loud. Fix a morphism $\varphi\colon\mc I_1\to\mc I_2$ of the quasicoherent ideal sheaves $\iota_1\colon\mc I_1\to\OO_X$ and $\iota_2\colon\mc I_2\to\OO_X$. Let $f_1\colon Y_1\into X$ and $f_2\colon Y_2\into X$ be the closed embeddings through $S$, where $g\colon Y_1\to Y_2$ is the morphism of closed embeddings.
		
		The key to the proof is to draw the very large diagram
		% https://q.uiver.app/?q=WzAsMjAsWzAsMCwiMCJdLFsyLDAsIlxcbWMgSV8xIl0sWzQsMCwiXFxPT19YIl0sWzYsMCwiXFxjb2tlclxcaW90YV8xIl0sWzgsMCwiMCJdLFsxLDEsIjAiXSxbMywxLCJcXGtlciBmXzFeXFxzaGFycCJdLFs1LDEsIlxcT09fWCJdLFs3LDEsIlxcY29rZXJcXGlvdGFfMSJdLFs5LDEsIjAiXSxbMCwyLCIwIl0sWzEsMywiMCJdLFsyLDIsIlxcbWMgSV8yIl0sWzMsMywiXFxrZXIgZl8yXlxcc2hhcnAiXSxbNCwyLCJcXE9PX1giXSxbNSwzLCJcXE9PX1giXSxbNiwyLCJcXGNva2VyXFxpb3RhXzEiXSxbNywzLCJcXGNva2VyXFxpb3RhXzIiXSxbOCwyLCIwIl0sWzksMywiMCJdLFswLDFdLFs1LDZdLFsxMCwxMl0sWzExLDEzXSxbMSwyXSxbMiwzXSxbMyw0XSxbNiw3XSxbNyw4XSxbOCw5XSxbMTIsMTRdLFsxNCwxNl0sWzE2LDE4XSxbMTMsMTVdLFsxNSwxN10sWzE3LDE5XSxbMiwxNCwiIiwxLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNywxNSwiIiwxLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMywxNiwiXFxvdmVybGluZVxcdmFycGhpIiwyLHsibGFiZWxfcG9zaXRpb24iOjIwfV0sWzgsMTcsIlxcb3ZlcmxpbmVcXHZhcnBoaSIsMix7ImxhYmVsX3Bvc2l0aW9uIjoyMH1dLFsyLDcsIiIsMSx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzE0LDE1LCIiLDEseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsxNiwxNywiIiwxLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMyw4LCIiLDEseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs2LDEzLCJLKFMoXFx2YXJwaGkpKSIsMCx7ImxhYmVsX3Bvc2l0aW9uIjoyMH1dLFsxLDEyLCJcXHZhcnBoaSIsMix7ImxhYmVsX3Bvc2l0aW9uIjoyMH1dLFsxLDYsIiIsMix7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFsxMiwxMywiIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}[column sep=scriptsize]
			0 && {\mc I_1} && {\OO_X} && {\coker\iota_1} && 0 \\
			& 0 && {\ker f_1^\sharp} && {\OO_X} && {\coker\iota_1} && 0 \\
			0 && {\mc I_2} && {\OO_X} && {\coker\iota_1} && 0 \\
			& 0 && {\ker f_2^\sharp} && {\OO_X} && {\coker\iota_2} && 0
			\arrow[from=1-1, to=1-3]
			\arrow[from=2-2, to=2-4]
			\arrow[from=3-1, to=3-3]
			\arrow[from=4-2, to=4-4]
			\arrow[from=1-3, to=1-5]
			\arrow[from=1-5, to=1-7]
			\arrow[from=1-7, to=1-9]
			\arrow[from=2-6, to=2-8]
			\arrow[from=2-8, to=2-10]
			\arrow[from=3-3, to=3-5]
			\arrow[from=3-5, to=3-7]
			\arrow[from=3-7, to=3-9]
			\arrow[from=4-4, to=4-6]
			\arrow[from=4-6, to=4-8]
			\arrow[from=4-8, to=4-10]
			\arrow[Rightarrow, no head, from=1-5, to=3-5]
			\arrow[Rightarrow, no head, from=2-6, to=4-6]
			\arrow["\overline\varphi"'{pos=0.2}, from=1-7, to=3-7]
			\arrow["\overline\varphi"'{pos=0.2}, from=2-8, to=4-8]
			\arrow[Rightarrow, no head, from=1-5, to=2-6]
			\arrow[Rightarrow, no head, from=3-5, to=4-6]
			\arrow[Rightarrow, no head, from=3-7, to=4-8]
			\arrow[Rightarrow, no head, from=1-7, to=2-8]
			\arrow["{K(S(\varphi))}"{pos=0.2}, from=2-4, to=4-4]
			\arrow["\varphi"'{pos=0.2}, from=1-3, to=3-3]
			\arrow[dashed, from=1-3, to=2-4]
			\arrow[dashed, from=3-3, to=4-4]
			\arrow[from=2-4, to=2-6]
		\end{tikzcd}\]
		where the rows are exact (as shown above), and the dashed arrow are the isomorphisms constructed above. We would like to show that square with the dashed arrows commutes. Note that the top and bottom $1\times2$ rectangles commute by construction of the dashed arrows. The back $1\times2$ rectangle commutes by definition of $\overline\varphi$, and the front $1\times2$ rectangle commutes by definition of $K(S(\varphi))$. Thus, the desired square commutes by uniqueness of the arrow $\mc I_1\to\ker f_2^\sharp$ making
		% https://q.uiver.app/?q=WzAsMTAsWzEsMCwiXFxtYyBJXzEiXSxbMSwxLCJcXGtlciBmXzJeXFxzaGFycCJdLFsyLDAsIlxcT09fWCJdLFsyLDEsIlxcT09fWCJdLFszLDAsIlxcY29rZXJcXGlvdGFfMSJdLFszLDEsIlxcY29rZXJcXGlvdGFfMiJdLFs0LDAsIjAiXSxbNCwxLCIwIl0sWzAsMSwiMCJdLFswLDAsIjAiXSxbOSwwXSxbMCwyLCJcXGlvdGFfMSJdLFsyLDRdLFszLDVdLFs0LDUsIlxcb3ZlcmxpbmVcXHZhcnBoaSJdLFsxLDNdLFs1LDddLFs0LDZdLFsyLDMsIiIsMSx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzgsMV0sWzAsMSwiIiwxLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			0 & {\mc I_1} & {\OO_X} & {\coker\iota_1} & 0 \\
			0 & {\ker f_2^\sharp} & {\OO_X} & {\coker\iota_2} & 0
			\arrow[from=1-1, to=1-2]
			\arrow["{\iota_1}", from=1-2, to=1-3]
			\arrow[from=1-3, to=1-4]
			\arrow[from=2-3, to=2-4]
			\arrow["\overline\varphi", from=1-4, to=2-4]
			\arrow[from=2-2, to=2-3]
			\arrow[from=2-4, to=2-5]
			\arrow[from=1-4, to=1-5]
			\arrow[Rightarrow, no head, from=1-3, to=2-3]
			\arrow[from=2-1, to=2-2]
			\arrow[dashed, from=1-2, to=2-2]
		\end{tikzcd}\]
		commute.
		\qedhere
	\end{itemize}
\end{proof}
\begin{lemma} \label{lem:improve-closed-embed}
	Fix a scheme $X$. We exhibit our natural isomorphism $\Psi\colon{\id}\Rightarrow SK$.
\end{lemma}
\begin{proof}
	Here is our data.
	\begin{itemize}
		\item We exhibit $\Psi$ on components. Well, for some closed embedding $f\colon Y\into X$, let $\iota\colon\mc I\into\OO_X$ denote $K(Y)=\ker f^\sharp$, and let $f'\colon Y'\into X$ denote $S(\mc I)$. Roughly speaking, the idea is to draw the short exact sequences
		% https://q.uiver.app/?q=WzAsMTAsWzAsMCwiMCJdLFsxLDAsIlxcbWMgSSJdLFsyLDAsIlxcT09fWCJdLFswLDEsIjAiXSxbMSwxLCJcXG1jIEkiXSxbMywwLCJcXGNva2VyXFxpb3RhIl0sWzIsMSwiXFxPT19YIl0sWzMsMSwiZl8qXFxPT19ZIl0sWzQsMSwiMCJdLFs0LDAsIjAiXSxbMiw1XSxbMSwyLCJcXGlvdGEiXSxbNCw2LCJcXGlvdGEiXSxbMCwxXSxbMyw0XSxbNiw3LCJmXlxcc2hhcnAiXSxbNyw4XSxbNSw5XSxbMSw0LCIiLDEseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsyLDYsIiIsMSx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzUsNywiXFxwc2kiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			0 & {\mc I} & {\OO_X} & \coker\iota & 0 \\
			0 & {\mc I} & {\OO_X} & {f_*\OO_Y} & 0
			\arrow[from=1-3, to=1-4]
			\arrow["\iota", from=1-2, to=1-3]
			\arrow["\iota", from=2-2, to=2-3]
			\arrow[from=1-1, to=1-2]
			\arrow[from=2-1, to=2-2]
			\arrow["{f^\sharp}", from=2-3, to=2-4]
			\arrow[from=2-4, to=2-5]
			\arrow[from=1-4, to=1-5]
			\arrow[Rightarrow, no head, from=1-2, to=2-2]
			\arrow[Rightarrow, no head, from=1-3, to=2-3]
			\arrow["\psi", dashed, from=1-4, to=2-4]
		\end{tikzcd}\]
		which induces an isomorphism $\psi$. 

		On topological spaces, we claim that $y\in Y'$ if and only if $y\in\im f$, which we note makes sense because $Y'\subseteq X$. Well, $y\in Y'$ if and only if $(\coker\iota)_y\ne0$, which we see is equivalent to $\left(f_*\OO_Y\right)_y\ne0$. We now show our directions independently.
		\begin{itemize}
			\item If $y\notin\im f$, then we see that any germ $[(U,s)]\in\left(f_*\OO_Y\right)_y$ can be restricted from $U$ to $U\setminus\im f$, where we see $\left(f_*\OO_Y\right)(U\setminus\im f)=\OO_Y(\emp)=0,$ so $[(U,s)]=0$. Thus, $y\notin Y$ implies $\left(f_*\OO_Y\right)_y=0$.
			\item Conversely, if $y\in\im f$, then write $y=f(y_0)$, and we note
			\[\OO_{X,y}\to(f_*\OO_Y)_y\to\OO_{Y,y_0}\]
			is a map of local rings. Namely, this cannot be the zero map (which isn't a ring map at all), so we must have $(f_*\OO_Y)_y=0$.
		\end{itemize}
		Thus, we see that $\im f=Y'$, so because $Y'\subseteq X$ has been given the subspace topology, we see that $f\colon Y\to X$ being a homeomorphism onto its image grants us the restricted homeomorphism $\Psi_Y\colon Y\to Y'$.

		By \autoref{lem:betterlocaliso}, providing an isomorphism of schemes now just requites us to provide an isomorphism of sheaves $\Psi_Y^\sharp\colon\OO_{Y'}\to (\Psi_Y)_*\OO_Y$. Well, for each open $U\subseteq X$, we recall $\OO_{Y'}(Y'\cap U)\simeq(\coker\iota)(U)$ and $(\Psi_Y)_*\OO_Y(Y'\cap U)=(f_*\OO_Y)(U)$, so we set
		\[(\Psi_Y^\sharp)_{U\cap Y'}\coloneqq\psi_U,\]
		which we do know is an isomorphism. To see that this assembles into an isomorphism of sheaves, we note that a containment $U'\subseteq U\subseteq X$ of open sets makes the left square in
		% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXE9PX3tZJ30oVVxcY2FwIFknKSJdLFswLDEsIlxcT09fe1knfShVJ1xcY2FwIFknKSJdLFsxLDAsIihcXFBoaV9ZKV8qXFxPT19ZKFVcXGNhcCBZJykiXSxbMSwxLCIoXFxQaGlfWSlfKlxcT09fWShVJ1xcY2FwIFknKSJdLFsyLDAsIihcXGNva2VyXFxpb3RhKShVKSJdLFszLDAsImZfKlxcT09fWShVKSJdLFsyLDEsIihcXGNva2VyXFxpb3RhKShVJykiXSxbMywxLCIoXFxjb2tlclxcaW90YSkoVScpIl0sWzAsMiwiKFxcUGhpX1leXFxzaGFycClfe1VcXGNhcCBZJ30iXSxbMiwzLCJcXG9we3Jlc30iXSxbMSwzLCIoXFxQaGlfWV5cXHNoYXJwKV97VSdcXGNhcCBZJ30iLDJdLFswLDEsIlxcb3B7cmVzfSIsMl0sWzQsNSwiXFxvdmVybGluZVxccHNpX1UiXSxbNCw2LCJcXG9we3Jlc30iLDJdLFs1LDcsIlxcb3B7cmVzfSJdLFs2LDcsIlxcb3ZlcmxpbmVcXHBzaV97VSd9IiwyXV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\OO_{Y'}(U\cap Y')} & {(\Phi_Y)_*\OO_Y(U\cap Y')} & {(\coker\iota)(U)} & {f_*\OO_Y(U)} \\
			{\OO_{Y'}(U'\cap Y')} & {(\Phi_Y)_*\OO_Y(U'\cap Y')} & {(\coker\iota)(U')} & {(\coker\iota)(U')}
			\arrow["{(\Phi_Y^\sharp)_{U\cap Y'}}", from=1-1, to=1-2]
			\arrow["{\op{res}}", from=1-2, to=2-2]
			\arrow["{(\Phi_Y^\sharp)_{U'\cap Y'}}"', from=2-1, to=2-2]
			\arrow["{\op{res}}"', from=1-1, to=2-1]
			\arrow["{\psi_U}", from=1-3, to=1-4]
			\arrow["{\op{res}}"', from=1-3, to=2-3]
			\arrow["{\op{res}}", from=1-4, to=2-4]
			\arrow["{\psi_{U'}}"', from=2-3, to=2-4]
		\end{tikzcd}\]
		commute because it is the same as the right square.

		Thus, we have provided an isomorphism of schemes $\Psi_Y\colon Y\to Y'$. To check that it is an isomorphism of closed embeddings, we note that on topological spaces
		% https://q.uiver.app/?q=WzAsNCxbMCwwLCJZIl0sWzEsMCwiWCJdLFswLDEsIlknIl0sWzEsMSwiWCJdLFswLDIsIlxcUHNpX1kiLDJdLFswLDEsImYiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFsyLDMsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzEsMywiIiwwLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			Y & X \\
			{Y'} & X
			\arrow["{\Psi_Y}"', from=1-1, to=2-1]
			\arrow["f", hook, from=1-1, to=1-2]
			\arrow[hook, from=2-1, to=2-2]
			\arrow[Rightarrow, no head, from=1-2, to=2-2]
		\end{tikzcd}\]
		commutes because $\Psi_Y$ equals $f$ pointwise by definition. On sheaves, we note that any open $U\subseteq X$ makes the left square of
		% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXE9PX1goVSkiXSxbMSwwLCIoZl8qXFxPT19ZKShVKSJdLFswLDEsIlxcT09fWChVKSJdLFsxLDEsIihmJ18qXFxPT19ZKShVKSJdLFsyLDAsIlxcT09fWChVKSJdLFszLDAsIihmXypcXE9PX1kpKFUpIl0sWzIsMSwiXFxPT19YKFUpIl0sWzMsMSwiKFxcY29rZXJcXGlvdGEpKFUpIl0sWzAsMSwiZl5cXHNoYXJwX1UiXSxbMiwzLCIoZicpXlxcc2hhcnBfVSJdLFsxLDMsImZfKihcXFBzaV9ZXlxcc2hhcnApKFUpIl0sWzAsMiwiIiwxLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNCw2LCIiLDAseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs0LDUsImZeXFxzaGFycF9VIl0sWzUsNywiXFxvdmVybGluZVxccHNpX1UiXSxbNiw3XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\OO_X(U)} & {(f_*\OO_Y)(U)} & {\OO_X(U)} & {(f_*\OO_Y)(U)} \\
			{\OO_X(U)} & {(f'_*\OO_Y)(U)} & {\OO_X(U)} & {(\coker\iota)(U)}
			\arrow["{f^\sharp_U}", from=1-1, to=1-2]
			\arrow["{(f')^\sharp_U}", from=2-1, to=2-2]
			\arrow["{f_*(\Psi_Y^\sharp)(U)}", from=1-2, to=2-2]
			\arrow[Rightarrow, no head, from=1-1, to=2-1]
			\arrow[Rightarrow, no head, from=1-3, to=2-3]
			\arrow["{f^\sharp_U}", from=1-3, to=1-4]
			\arrow["{\psi_U}", from=1-4, to=2-4]
			\arrow[from=2-3, to=2-4]
		\end{tikzcd}\]
		commutes because it's the same as the right square.

		\item We now show that $\Psi$ is natural. Fix a morphism $g\colon Y_1\to Y_2$ of the closed embeddings $f_1\colon Y_1\into X$ and $f_2\colon Y_2\into X$. As last time, we let $\iota_\bullet\colon\mc I_\bullet\into\OO_X$ denote $K(Y_\bullet)$, and we set $f'_\bullet\colon Y'_\bullet\into X$ denote $S(\mc I_\bullet)$. We need to show that
		% https://q.uiver.app/?q=WzAsNCxbMCwwLCJZXzEiXSxbMSwwLCJZXzEnIl0sWzAsMSwiWV8yIl0sWzEsMSwiWV8yJyJdLFswLDEsIlxcUHNpX3tZXzF9Il0sWzIsMywiXFxQc2lfe1lfMn0iXSxbMCwyLCJnIiwyXSxbMSwzLCJTKEsoZykpIl1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{Y_1} & {Y_1'} \\
			{Y_2} & {Y_2'}
			\arrow["{\Psi_{Y_1}}", from=1-1, to=1-2]
			\arrow["{\Psi_{Y_2}}", from=2-1, to=2-2]
			\arrow["g"', from=1-1, to=2-1]
			\arrow["{S(K(g))}", from=1-2, to=2-2]
		\end{tikzcd}\]
		commutes. On topological spaces, we note the commutativity of
		% https://q.uiver.app/?q=WzAsNCxbMCwwLCJZXzEiXSxbMSwwLCJYIl0sWzAsMSwiWV8yIl0sWzEsMSwiWCJdLFsxLDMsIiIsMCx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzAsMiwiZyIsMl0sWzAsMSwiZl8xIl0sWzIsMywiZl8yIl1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{Y_1} & X \\
			{Y_2} & X
			\arrow[Rightarrow, no head, from=1-2, to=2-2]
			\arrow["g"', from=1-1, to=2-1]
			\arrow["{f_1}", from=1-1, to=1-2]
			\arrow["{f_2}", from=2-1, to=2-2]
		\end{tikzcd}\]
		tells us that $f_2\circ g=f_1$ on topological spaces. But this implies that we commute on topological spaces because $\Psi_\bullet$ is just the restriction of $f_\bullet$, and $S(K(g))$ is just the containment $Y_1'\subseteq Y_2'$.

		To discuss commutativity on sheaves, we want
		% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXE9PX3tZXzInfSJdLFsxLDAsIihcXFBzaV97WV8yfSlfKlxcT09fe1lfMn0iXSxbMCwxLCJcXE9PX3tZXzEnfSJdLFsxLDEsIihcXFBzaV97WV8xfSlfKlxcT09fe1lfMX0iXSxbMCwxLCJcXFBzaV97WV8yfV5cXHNoYXJwIl0sWzIsMywiXFxQc2lfe1lfMX1eXFxzaGFycCJdLFswLDIsIlMoSyhnKSleXFxzaGFycCIsMl0sWzEsMywiKFxcUHNpX3tZXzJ9KV8qZ15cXHNoYXJwIl1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\OO_{Y_2'}} & {(\Psi_{Y_2})_*\OO_{Y_2}} \\
			{\OO_{Y_1'}} & {(\Psi_{Y_1})_*\OO_{Y_1}}
			\arrow["{\Psi_{Y_2}^\sharp}", from=1-1, to=1-2]
			\arrow["{\Psi_{Y_1}^\sharp}", from=2-1, to=2-2]
			\arrow["{S(K(g))^\sharp}"', from=1-1, to=2-1]
			\arrow["{(\Psi_{Y_2})_*g^\sharp}", from=1-2, to=2-2]
		\end{tikzcd}\]
		to commute. We will check this on the level of open sets, so define ${\psi_\bullet}$ to be the isomorphism induced by the short exact sequences
		% https://q.uiver.app/?q=WzAsMTAsWzAsMCwiMCJdLFsxLDAsIlxcbWMgSV9cXGJ1bGxldCJdLFsyLDAsIlxcT09fWCJdLFswLDEsIjAiXSxbMSwxLCJcXG1jIElfXFxidWxsZXQiXSxbMywwLCJcXGNva2VyXFxpb3RhX1xcYnVsbGV0Il0sWzIsMSwiXFxPT19YIl0sWzMsMSwiKGZfXFxidWxsZXQpXypcXE9PX3tZX1xcYnVsbGV0fSJdLFs0LDEsIjAiXSxbNCwwLCIwIl0sWzIsNV0sWzEsMiwiXFxpb3RhX1xcYnVsbGV0Il0sWzQsNiwiXFxpb3RhX1xcYnVsbGV0Il0sWzAsMV0sWzMsNF0sWzYsNywiZl5cXHNoYXJwX1xcYnVsbGV0Il0sWzcsOF0sWzUsOV0sWzEsNCwiIiwxLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMiw2LCIiLDEseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs1LDcsIlxccHNpX1xcYnVsbGV0IiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			0 & {\mc I_\bullet} & {\OO_X} & {\coker\iota_\bullet} & 0 \\
			0 & {\mc I_\bullet} & {\OO_X} & {(f_\bullet)_*\OO_{Y_\bullet}} & 0
			\arrow[from=1-3, to=1-4]
			\arrow["{\iota_\bullet}", from=1-2, to=1-3]
			\arrow["{\iota_\bullet}", from=2-2, to=2-3]
			\arrow[from=1-1, to=1-2]
			\arrow[from=2-1, to=2-2]
			\arrow["{f^\sharp_\bullet}", from=2-3, to=2-4]
			\arrow[from=2-4, to=2-5]
			\arrow[from=1-4, to=1-5]
			\arrow[Rightarrow, no head, from=1-2, to=2-2]
			\arrow[Rightarrow, no head, from=1-3, to=2-3]
			\arrow["{\psi_\bullet}", dashed, from=1-4, to=2-4]
		\end{tikzcd}\]
		because we're in an abelian category. As such, for any open $U\subseteq X$, we see that the definition of $\Psi_\bullet^\sharp$ implies we want
		% https://q.uiver.app/?q=WzAsNCxbMCwwLCIoXFxjb2tlclxcaW90YV8yKShVKSJdLFsxLDAsIihmXzIpXypcXE9PX3tZXzJ9KFUpIl0sWzAsMSwiKFxcY29rZXJcXGlvdGFfMSkoVSkiXSxbMSwxLCIoZl8xKV8qXFxPT197WV8xfShVKSJdLFswLDEsIihcXHBzaV8yKV9VIl0sWzIsMywiKFxccHNpXzIpX1UiXSxbMCwyLCJTKEsoZykpXlxcc2hhcnBfVSIsMl0sWzEsMywiKGZfMilfKmdeXFxzaGFycCJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{(\coker\iota_2)(U)} & {(f_2)_*\OO_{Y_2}(U)} \\
			{(\coker\iota_1)(U)} & {(f_1)_*\OO_{Y_1}(U)}
			\arrow["{(\psi_2)_U}", from=1-1, to=1-2]
			\arrow["{(\psi_2)_U}", from=2-1, to=2-2]
			\arrow["{S(K(g))^\sharp_U}"', from=1-1, to=2-1]
			\arrow["{(f_2)_*g^\sharp}", from=1-2, to=2-2]
		\end{tikzcd}\]
		to commute, which on sheaves is asking for
		% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXGNva2VyXFxpb3RhXzIiXSxbMSwwLCIoZl8yKV8qXFxPT197WV8yfShVKSJdLFswLDEsIlxcY29rZXJcXGlvdGFfMSJdLFsxLDEsIihmXzEpXypcXE9PX3tZXzF9KFUpIl0sWzAsMSwiXFxwc2lfMiJdLFsyLDMsIlxccHNpXzEiXSxbMCwyLCJTKEsoZykpXlxcc2hhcnAiLDJdLFsxLDMsIihmXzIpXypnXlxcc2hhcnAiXV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\coker\iota_2} & {(f_2)_*\OO_{Y_2}} \\
			{\coker\iota_1} & {(f_1)_*\OO_{Y_1}}
			\arrow["{\psi_2}", from=1-1, to=1-2]
			\arrow["{\psi_1}", from=2-1, to=2-2]
			\arrow["{S(K(g))^\sharp}"', from=1-1, to=2-1]
			\arrow["{(f_2)_*g^\sharp}", from=1-2, to=2-2]
		\end{tikzcd}\]
		to commute. As before, the key to the proof is to draw the very large diagram
		% https://q.uiver.app/?q=WzAsMjAsWzAsMCwiMCJdLFsyLDAsIlxcbWMgSV8yIl0sWzQsMCwiXFxPT19YIl0sWzEsMSwiMCJdLFszLDEsIlxcbWMgSV8yIl0sWzUsMSwiXFxPT19YIl0sWzYsMCwiXFxjb2tlclxcaW90YV8yIl0sWzcsMSwiKGZfMilfKlxcT09fe1lfMn0iXSxbOCwwLCIwIl0sWzksMSwiMCJdLFswLDIsIjAiXSxbMSwzLCIwIl0sWzIsMiwiXFxtYyBJXzEiXSxbMywzLCJcXG1jIElfMSJdLFs0LDIsIlxcT09fWCJdLFs1LDMsIlxcT09fWCJdLFs2LDIsIlxcY29rZXJcXGlvdGFfMSJdLFs3LDMsIihmXzEpXypcXE9PX3tZXzF9Il0sWzgsMiwiMCJdLFs5LDMsIjAiXSxbMCwxXSxbMSwyXSxbMiw2XSxbNiw4XSxbMyw0XSxbNyw5XSxbMTIsMTRdLFsxNiwxOF0sWzExLDEzXSxbMTMsMTVdLFsxNSwxN10sWzE3LDE5XSxbMiwxNCwiIiwxLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNCw1XSxbMiw1LCIiLDEseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsxNCwxNl0sWzUsMTUsIiIsMSx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzE0LDE1LCIiLDEseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs2LDE2LCJTKEsoZykpXlxcc2hhcnAiLDIseyJsYWJlbF9wb3NpdGlvbiI6MjB9XSxbNSw3XSxbNywxNywiKGZfMilfKmdeXFxzaGFycCIsMCx7ImxhYmVsX3Bvc2l0aW9uIjoyMH1dLFs2LDcsIlxccHNpXzIiXSxbMTYsMTcsIlxccHNpXzEiLDJdLFsxMCwxMl0sWzEsNCwiIiwxLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMTIsMTMsIiIsMSx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzQsMTMsIksoZykiLDAseyJsYWJlbF9wb3NpdGlvbiI6MjB9XSxbMSwxMiwiSyhnKSIsMix7ImxhYmVsX3Bvc2l0aW9uIjoyMH1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}[column sep=scriptsize]
			0 && {\mc I_2} && {\OO_X} && {\coker\iota_2} && 0 \\
			& 0 && {\mc I_2} && {\OO_X} && {(f_2)_*\OO_{Y_2}} && 0 \\
			0 && {\mc I_1} && {\OO_X} && {\coker\iota_1} && 0 \\
			& 0 && {\mc I_1} && {\OO_X} && {(f_1)_*\OO_{Y_1}} && 0
			\arrow[from=1-1, to=1-3]
			\arrow[from=1-3, to=1-5]
			\arrow[from=1-5, to=1-7]
			\arrow[from=1-7, to=1-9]
			\arrow[from=2-2, to=2-4]
			\arrow[from=2-8, to=2-10]
			\arrow[from=3-3, to=3-5]
			\arrow[from=3-7, to=3-9]
			\arrow[from=4-2, to=4-4]
			\arrow[from=4-4, to=4-6]
			\arrow[from=4-6, to=4-8]
			\arrow[from=4-8, to=4-10]
			\arrow[Rightarrow, no head, from=1-5, to=3-5]
			\arrow[from=2-4, to=2-6]
			\arrow[Rightarrow, no head, from=1-5, to=2-6]
			\arrow[from=3-5, to=3-7]
			\arrow[Rightarrow, no head, from=2-6, to=4-6]
			\arrow[Rightarrow, no head, from=3-5, to=4-6]
			\arrow["{S(K(g))^\sharp}"'{pos=0.2}, from=1-7, to=3-7]
			\arrow[from=2-6, to=2-8]
			\arrow["{(f_2)_*g^\sharp}"{pos=0.2}, from=2-8, to=4-8]
			\arrow["{\psi_2}", from=1-7, to=2-8]
			\arrow["{\psi_1}"', from=3-7, to=4-8]
			\arrow[from=3-1, to=3-3]
			\arrow[Rightarrow, no head, from=1-3, to=2-4]
			\arrow[Rightarrow, no head, from=3-3, to=4-4]
			\arrow["{K(g)}"{pos=0.2}, from=2-4, to=4-4]
			\arrow["{K(g)}"'{pos=0.2}, from=1-3, to=3-3]
		\end{tikzcd}\]
		where the rows are exact as shown above. We want to show that the rightmost square commutes. Note that the top and bottom $1\times2$ rectangles commute by construction of the $\psi_\bullet$; the front $1\times2$ rectangle commutes by construction of $K(g)$; the back $1\times2$ rectangle commutes by construction of $S(K(g))^\sharp$. Thus, the desired square commutes because the dashed arrow in the diagram
		% https://q.uiver.app/?q=WzAsMTAsWzAsMCwiMCJdLFsxLDAsIlxcbWMgSV8yIl0sWzAsMSwiMCJdLFsxLDEsIlxcbWMgSV8xIl0sWzIsMCwiXFxPT19YIl0sWzIsMSwiXFxPT19YIl0sWzMsMCwiXFxjb2tlclxcaW90YV8yIl0sWzMsMSwiKGZfMSlfKlxcT09fe1lfMX0iXSxbNCwwLCIwIl0sWzQsMSwiMCJdLFsxLDMsIksoZykiLDJdLFsxLDRdLFs0LDZdLFs2LDhdLFszLDVdLFs0LDUsIiIsMix7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzUsN10sWzcsOV0sWzIsM10sWzAsMV0sWzYsNywiIiwxLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			0 & {\mc I_2} & {\OO_X} & {\coker\iota_2} & 0 \\
			0 & {\mc I_1} & {\OO_X} & {(f_1)_*\OO_{Y_1}} & 0
			\arrow["{K(g)}"', from=1-2, to=2-2]
			\arrow[from=1-2, to=1-3]
			\arrow[from=1-3, to=1-4]
			\arrow[from=1-4, to=1-5]
			\arrow[from=2-2, to=2-3]
			\arrow[Rightarrow, no head, from=1-3, to=2-3]
			\arrow[from=2-3, to=2-4]
			\arrow[from=2-4, to=2-5]
			\arrow[from=2-1, to=2-2]
			\arrow[from=1-1, to=1-2]
			\arrow[dashed, from=1-4, to=2-4]
		\end{tikzcd}\]
		is unique.
		\qedhere
	\end{itemize}
\end{proof}
The above lemmas complete the proof of \autoref{prop:closed-embedding-from-qc-ideal}.

We now prove \autoref{prop:affineclosedsubschemes}, which follows quickly from the machinery we've established.
\begin{corollary}
	Fix an affine scheme $X$, and set $A\coloneqq\OO_X(X)$. Given a closed embedding $f\colon Y\into X$, then $Y$ is an affine scheme. In particular, there exists an ideal $I\subseteq A$ and commutative diagram
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJZIl0sWzAsMSwiWCJdLFsxLDAsIlxcU3BlYyBBL0kiXSxbMSwxLCJcXFNwZWMgQSJdLFswLDEsImYiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFsyLDMsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzEsM10sWzAsMl1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		Y & {\Spec A/I} \\
		X & {\Spec A}
		\arrow["f"', hook, from=1-1, to=2-1]
		\arrow[hook, from=1-2, to=2-2]
		\arrow[from=2-1, to=2-2]
		\arrow[from=1-1, to=1-2]
	\end{tikzcd}\]
	where the horizontal morphisms are isomorphisms.
\end{corollary}
\begin{proof}
	We start by showing $Y$ is affine. Let $K(Y)$ be the quasicoherent ideal sheaf $\iota\colon\mc I\into\OO_X$ and let $S(\mc I)$ be the closed embedding $f'\colon Y'\into X$. By \autoref{lem:improve-closed-embed}, we see that $Y\simeq Y'$, so it suffices to show that $Y'$ is affine. Well, in \autoref{lem:ideal-to-subscheme}, we showed that $Y'\cap U$ is an affine open subscheme of $Y'$ whenever $U\subseteq X$ is affine open, so it follows that $Y'$ is affine.

	In fact, we note that the map $(f')^\sharp\colon\OO_X\to(f')_*\OO_Y$ on global sections looks like $(f')^\sharp_X\colon \OO_X(X)\to(\coker\iota)(X)$ as discussed in \autoref{lem:ideal-to-subscheme}, so in particular this map is surjective on global sections. Because $f\colon Y\into X$ and $f'\colon Y'\into X$ are isomorphic closed embeddings, the commuting square
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXE9PX1goWCkiXSxbMSwwLCJcXE9PX1koWSkiXSxbMSwxLCJcXE9PX3tZJ30oWScpIl0sWzAsMSwiXFxPT19YKFgpIl0sWzEsMiwiKFxcUHNpX1leXFxzaGFycClfWSJdLFswLDEsImZeXFxzaGFycF9YIl0sWzMsMiwiKGYnKV5cXHNoYXJwX1giXSxbMCwzLCIiLDEseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\OO_X(X)} & {\OO_Y(Y)} \\
		{\OO_X(X)} & {\OO_{Y'}(Y')}
		\arrow["{(\Psi_Y^\sharp)_Y}", from=1-2, to=2-2]
		\arrow["{f^\sharp_X}", from=1-1, to=1-2]
		\arrow["{(f')^\sharp_X}", from=2-1, to=2-2]
		\arrow[Rightarrow, no head, from=1-1, to=2-1]
	\end{tikzcd}\]
	tells us that $f^\sharp_X$ is also surjective on global sections.
	
	Now, we set $B\coloneqq\OO_Y(Y)$, and we see that the naturality from \autoref{lem:specgamma} grants us a diagram
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJZIl0sWzAsMSwiWCJdLFsxLDAsIlxcU3BlYyBCIl0sWzEsMSwiXFxTcGVjIEEiXSxbMCwxLCJmIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XSxbMSwzLCJcXHZhcmVwc2lsb25fWCJdLFswLDIsIlxcdmFyZXBzaWxvbl9ZIl0sWzIsMywiXFxTcGVjIGZeXFxzaGFycF9YIl1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		Y & {\Spec B} \\
		X & {\Spec A}
		\arrow["f"', hook, from=1-1, to=2-1]
		\arrow["{\varepsilon_X}", from=2-1, to=2-2]
		\arrow["{\varepsilon_Y}", from=1-1, to=1-2]
		\arrow["{\Spec f^\sharp_X}", from=1-2, to=2-2]
	\end{tikzcd}\]
	where the horizontal morphisms are isomorphisms by \autoref{cor:the-affine-iso}. At this point, we recall that $f^\sharp_X\colon A\to B$ is surjective, so defining $I\coloneqq\ker f^\sharp_X$, we get an isomorphism $\Spec B\cong\Spec A/I$. Adjusting our morphisms appropriately recovers the desired square in the statement.
\end{proof}

\subsection{Scheme Images}
We would like to talk about images of schemes. For example, given a quasicompact and quasiseparated morphism $f\colon X\to Y$, then we see $f_*\OO_X$ is quasicoherent on $Y$, so $I=\ker(\OO_Y\to f_*\OO_X)$ is going to be a quasicoherent sheaf on $Y$, and this will define a closed subscheme of $Y$ as above.

In general, $\ker(\OO_Y\to f_*\OO_X)$ need not be quasicoherent, but we can still set $\mc I$ to be the largest quasicoherent subsheaf, and our image is the largest closed subscheme defined by $\mc I$. Of course, we should probably talk about what the ``largest quasicoherent subsheaf'' is, but we can simply define it as the sum of all the quasicoherent subsheaves $\mc I_Z$ where $Z\into Y$ varies over all the closed embeddings through which $X\to Y$ factors.

We close class with the following definition.
\begin{definition}[Coherent sheaf]
	Fix a locally Noetherian scheme $X$. Then an $\mathcal O_X$-module $\mc F$ is \textit{coherent} if and only if $X$ can be covered by affine open subschemes $U_i\subseteq X$ such that $\mc F|_{U_\alpha}$ is isomorphic to $\widetilde M_\alpha$ where each $M_\alpha$ is a finitely generated $\OO_X(U_\alpha)$-module.
\end{definition}
\begin{remark}
	If we remove the locally Noetherian scheme $X$, then we're going to want our modules $M_i$ to be finitely presented. In the Noetherian case, these are equivalent.
	% 6.4
\end{remark}

\end{document}