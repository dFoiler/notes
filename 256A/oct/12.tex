% !TEX root = ../notes.tex

\documentclass[../notes.tex]{subfiles}

\begin{document}

\section{October 12}

We continue our discussion of quasicoherent sheaves.

\subsection{Quasicoherent Sheaves via Modules}
It will turn out that many of our sheaf-theoretic constructions will not actually need to think about sheaves very much to define. To get a taste for how this will work, we start with the kernel.
\begin{lemma} \label{lem:affine-kernel-is-quasicoherent}
	Fix an affine scheme $X$ and a morphism $\varphi\colon\mc F\to\mc G$ of quasicoherent sheaves. Then $\ker\varphi\simeq\widetilde{\ker\varphi_X}$.
\end{lemma}
\begin{proof}
	As usual, by \autoref{lem:sheafonabasefunctor}, it suffices to exhibit an isomorphism of sheaves on the distinguished base. From \autoref{cor:the-quasicoherent-iso}, let $\varepsilon_\mc F\colon\widetilde{\mc F(X)}\to\mc F$ and $\varepsilon_\mc G\colon\widetilde{\mc G(X)}\to\mc G$ be the canonical isomorphisms.
	
	Now, for any $f\in\OO_X(X_f)$, we note that we have the exact sequences
	% https://q.uiver.app/?q=WzAsOCxbMiwwLCJcXG1jIEYoWF9mKSJdLFszLDAsIlxcbWMgRyhYX2YpIl0sWzEsMCwiXFxrZXJcXHZhcnBoaV97WF9mfSJdLFswLDAsIjAiXSxbMiwxLCJcXG1jIEYoWClfZiJdLFszLDEsIlxcbWMgRyhYKV9mIl0sWzAsMSwiMCJdLFsxLDEsIihcXGtlclxcdmFycGhpX1gpX2YiXSxbMCwxLCJcXHZhcnBoaV97WF9mfSJdLFsyLDBdLFszLDJdLFswLDQsIlxcdmFyZXBzaWxvbl97WF9mfV5cXG1jIEYiXSxbMSw1LCJcXHZhcmVwc2lsb25eXFxtYyBHX3tYX2Z9Il0sWzQsNSwiKFxcdmFycGhpX1gpX2YiLDJdLFs2LDddLFs3LDRdLFsyLDcsIiIsMSx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		0 & {\ker\varphi_{X_f}} & {\mc F(X_f)} & {\mc G(X_f)} \\
		0 & {(\ker\varphi_X)_f} & {\mc F(X)_f} & {\mc G(X)_f}
		\arrow["{\varphi_{X_f}}", from=1-3, to=1-4]
		\arrow[from=1-2, to=1-3]
		\arrow[from=1-1, to=1-2]
		\arrow["{(\varepsilon_\mc F)_{X_f}}", from=1-3, to=2-3]
		\arrow["{(\varepsilon_\mc G)_{X_f}}", from=1-4, to=2-4]
		\arrow["{(\varphi_X)_f}"', from=2-3, to=2-4]
		\arrow[from=2-1, to=2-2]
		\arrow[from=2-2, to=2-3]
		\arrow[dashed, from=1-2, to=2-2]
	\end{tikzcd}\]
	where the bottom row is exact because localization is an exact functor. Note that the right square commutes by \autoref{lem:geo-opp-alg-2-map}, and the two vertical maps are isomorphisms by construction of the $\varepsilon$s.
	
	Thus, we see from abstract nonsense that $(\varepsilon_\mc F)_{X_f}$ restricts to an isomorphism $\varepsilon_{X_f}\colon\ker\varphi_{X_f}\to(\ker\varphi_X)_f$. To check functoriality on these isomorphisms, just suppose that $X_g\subseteq X_f$ and note that
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXGtlclxcdmFycGhpX3tYX2Z9Il0sWzAsMSwiXFxrZXJcXHZhcnBoaV97WF9nfSJdLFsxLDAsIihcXGtlclxcdmFycGhpX1gpX2YiXSxbMSwxLCIoXFxrZXJcXHZhcnBoaV9YKV9nIl0sWzIsMCwiXFxmcmFjIG1oIl0sWzIsMSwiXFxmcmFje219aCJdLFszLDAsIlxcZnJhYyAxaChtfF97WF9mfSkiXSxbMywxLCJcXGZyYWMgMWgobXxfe1hfZ30pIl0sWzAsMiwiXFx2YXJlcHNpbG9uX3tYX2Z9Il0sWzEsMywiXFx2YXJlcHNpbG9uX3tYX2d9Il0sWzAsMSwiXFxvcHtyZXN9IiwyXSxbMiwzLCJcXG9we3Jlc30iXSxbNCw1LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzUsNywiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs0LDYsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNiw3LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\ker\varphi_{X_f}} & {(\ker\varphi_X)_f} & {\frac mh} & {\frac 1h(m|_{X_f})} \\
		{\ker\varphi_{X_g}} & {(\ker\varphi_X)_g} & {\frac{m}h} & {\frac 1h(m|_{X_g})}
		\arrow["{\varepsilon_{X_f}}", from=1-1, to=1-2]
		\arrow["{\varepsilon_{X_g}}", from=2-1, to=2-2]
		\arrow["{\op{res}}"', from=1-1, to=2-1]
		\arrow["{\op{res}}", from=1-2, to=2-2]
		\arrow[maps to, from=1-3, to=2-3]
		\arrow[maps to, from=2-3, to=2-4]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
	\end{tikzcd}\]
	commutes, identical as in \autoref{lem:geo-opp-alg-2-map}. So this isomorphism follows.
\end{proof}
\begin{corollary} \label{cor:ker-is-quasicoherent}
	Fix a scheme $X$ and a morphism $\varphi\colon\mc F\to\mc G$ of quasicoherent sheaves on $X$. Then $\ker\varphi$ is a quasicoherent sheaf.
\end{corollary}
\begin{proof}
	Fix some affine open cover $\mc U$ of $X$, and let $U$ be any affine open subscheme in $\mc U$. Using \autoref{lem:affine-kernel-is-quasicoherent}, we note that the morphism $\varphi|_U\colon\mc F|_U\to\mc G|_U$ of quasicoherent sheaves (note $\mc F|_U$ and $\mc G|_U$ are quasicoherent by \autoref{cor:restriction-is-quasicoherent}) tells us that $\ker(\varphi|_U)\cong\widetilde K$ for some $\OO_X(U)$-module $K$. However, for any open $V\subseteq U$ has
	\[(\ker\varphi|_U)(V)=\ker(\varphi|_U)_V=\ker\varphi_V=(\ker\varphi)(V)=(\ker\varphi)|_U(V).\]
	The restriction maps also match up by construction, so we have actually shown that $(\ker\varphi)|_U\cong\widetilde K$.
\end{proof}
While we're here, we might as well address products.
\begin{lemma} \label{lem:affine-product-is-quasicoherent}
	Fix an affine scheme $X$ and quasicoherent sheaves $\mc F$ and $\mc G$ on $X$. Set $M\coloneqq\mc F(X)$ and $N\coloneqq\mc G(X)$. Then $\mc F\times\mc G\simeq\widetilde{M\times N}$.
\end{lemma}
\begin{proof}
	We begin with the standard set-up. By \autoref{lem:sheafonabasefunctor}, it suffices to exhibit an isomorphism of sheaves on the distinguished base. From \autoref{cor:the-quasicoherent-iso}, let $\varepsilon_\mc F\colon\widetilde{M}\to\mc F$ and $\varepsilon_\mc G\colon\widetilde{N}\to\mc G$ be the canonical isomorphisms.

	Now, for each $f\in\OO_X(X)$, we see that we have isomorphisms $(\varepsilon_\mc F)_{X_f}\colon M_f\to\mc F(X_f)$ and $(\varepsilon_\mc G)_{X_f}\colon N_f\to\mc G(X_f)$. As such, we note that $(M\times N)_f\simeq M_f\times N_f$ by $\frac{(m,n)}g\mapsto\left(\frac mg,\frac ng\right)$.\footnote{The inverse map is $\left(\frac mg,\frac nh\right)\mapsto\frac{(hm,gn)}{gh}$. We won't say more because this is ``just'' commutative algebra.} Thus, we have an isomorphism
	\[\arraycolsep=1.4pt\begin{array}{cccccccccc}
		\widetilde{M\times N}(X_f) &=& (M\times N)_f &\simeq&  M_f\times N_f &\simeq& \mc F(X_f)\times\mc G(X_f) &=& (\mc F\times\mc G)(X_f) \\
		&& \frac 1g(m,n) &\mapsto& (\frac mg,\frac ng) &\mapsto& \left(\frac1g(m|_{X_f}),\frac1g(n|_{X_f})\right)
	\end{array}\]
	which we name $\varepsilon_{X_f}$. To see that $\varepsilon_{X_f}$ assembles into an isomorphism of sheaves on the distinguished base, we note that $X_g\subseteq X_f$ makes
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXHdpZGV0aWxkZXtNXFx0aW1lcyBOfShYX2YpIl0sWzEsMCwiKFxcbWMgRlxcdGltZXNcXG1jIEcpKFhfZikiXSxbMCwxLCJcXHdpZGV0aWxkZXtNXFx0aW1lcyBOfShYX2cpIl0sWzEsMSwiKFxcbWMgRlxcdGltZXNcXG1jIEcpKFhfZykiXSxbMiwwLCJcXGZyYWMxaChtLG4pIl0sWzIsMSwiXFxmcmFjMWgobSxuKSJdLFszLDAsIihcXGZyYWMgbWgsXFxmcmFjIG5oKSJdLFszLDEsIihcXGZyYWMgbWgsXFxmcmFjIG5oKSJdLFswLDIsIlxcb3B7cmVzfSIsMl0sWzEsMywiXFxvcHtyZXN9Il0sWzAsMSwiXFx2YXJlcHNpbG9uX3tYX2Z9Il0sWzIsMywiXFx2YXJlcHNpbG9uX3tYX2d9Il0sWzQsNiwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs2LDcsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw1LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzUsNywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\widetilde{M\times N}(X_f)} & {(\mc F\times\mc G)(X_f)} & {\frac1h(m,n)} & {\left(\frac mh,\frac nh\right)} \\
		{\widetilde{M\times N}(X_g)} & {(\mc F\times\mc G)(X_g)} & {\frac1h(m,n)} & {\left(\frac mh,\frac nh\right)}
		\arrow["{\op{res}}"', from=1-1, to=2-1]
		\arrow["{\op{res}}", from=1-2, to=2-2]
		\arrow["{\varepsilon_{X_f}}", from=1-1, to=1-2]
		\arrow["{\varepsilon_{X_g}}", from=2-1, to=2-2]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
		\arrow[maps to, from=1-3, to=2-3]
		\arrow[maps to, from=2-3, to=2-4]
	\end{tikzcd}\]
	commute. This finishes.
\end{proof}
\begin{cor} \label{cor:prod-is-quasicoherent}
	Fix a scheme $X$ and quasicoherent sheaves $\mc F$ and $\mc G$ on $X$. Then $\mc F\times\mc G$ is quasicoherent.
\end{cor}
\begin{proof}
	As before, fix some affine open cover $\mc U$ of $X$, and let $U$ be any affine open subscheme in $\mc U$. We show $(\mc F\times\mc G)|_U\simeq\widetilde P$ for some $\OO_X(U)$-module $P$. Well, we note that any open $V\subseteq U$ gives
	\[(\mc F\times\mc G)|_U(V)=\mc F(V)\times\mc G(V)=(\mc F|_U\times\mc G|_U)(V),\]
	so upon noting that restriction maps also match, we have $(\mc F\times\mc G)|_U=\mc F|_U\times\mc G|_U$. However, $\mc F|_U\times\mc G|_U$ is a product of quasicoherent sheaves (by \autoref{cor:restriction-is-quasicoherent}) on the affine scheme $U$, which is quasicoherent by \autoref{lem:affine-product-is-quasicoherent}.
\end{proof}

\subsection{Quasicoherent Sheaves Without Sheafification}
Now that we've seen some quasicoherent sheaves with no sheafification, let's add a little sheafification to the mix. We start with a technical lemma.
\begin{lemma} \label{lem:sheafify-from-presheaf-on-base}
	Fix a topological space $X$ and a sheaf $\mc F$ and a presheaf $\mc G$. Given a morphism $\varphi\colon\mc F\to\mc G$ which is an isomorphism on a base $\mc B$ for the topology on $X$, we have $\mc F\cong\mc G\sh$.
\end{lemma}
\begin{proof}
	Let $\op{sh}\colon\mc G\to\mc G\sh$. Unsurprisingly, we claim that ${\op{sh}}\circ\varphi$ is the desired isomorphism. By \autoref{prop:isoonstalks}, it suffices to check that this is an isomorphism on stalks. Well, for any $p\in X$, we see that $\op{sh}_p$ is already an isomorphism by \autoref{prop:sheafificationstalk}, so we need to show that $\varphi_p$ is an isomorphism on stalks.

	Well, using \autoref{lem:stalkbybase}, we note that the diagram
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXG1jIEZfcCJdLFsxLDAsIlxcY29saW1pdFxcbWMgRihCKSJdLFsxLDEsIlxcY29saW1pdFxcbWMgRyhCKSJdLFswLDEsIlxcbWMgR19wIl0sWzIsMCwiWyhWLGYpXSJdLFsyLDEsIlsoVixcXHZhcnBoaV9WZildIl0sWzMsMCwiWyhCLGZ8X0IpXSJdLFszLDEsIlsoQixcXHZhcnBoaV9CKGZ8X0IpKV0iXSxbMCwxLCJcXHNpbWVxIiwzLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzEsMiwiXFxjb2xpbWl0XFx2YXJwaGlfQiJdLFswLDMsIlxcdmFycGhpX3AiLDJdLFszLDIsIlxcc2ltZXEiLDMseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNCw2LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzYsNywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs0LDUsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNSw3LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc F_p} & {\colimit\mc F(B)} & {[(V,f)]} & {[(B,f|_B)]} \\
		{\mc G_p} & {\colimit\mc G(B)} & {[(V,\varphi_Vf)]} & {[(B,\varphi_B(f|_B))]}
		\arrow["\simeq"{marking}, draw=none, from=1-1, to=1-2]
		\arrow["{\colimit\varphi_B}", from=1-2, to=2-2]
		\arrow["{\varphi_p}"', from=1-1, to=2-1]
		\arrow["\simeq"{marking}, draw=none, from=2-1, to=2-2]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
		\arrow[maps to, from=1-3, to=2-3]
		\arrow[maps to, from=2-3, to=2-4]
	\end{tikzcd}\]
	commutes, where $B\in\mc B$ is some basis element in $V$ containing $p$. Thus, we note that the horizontal arrows are isomorphisms by \autoref{lem:stalkbybase}, and the right arrow is an isomorphism because each $\varphi_B$ is an isomorphism by hypothesis. Thus, the left arrow is an isomorphism, which is what we wanted.
\end{proof}
And here is the cokernel.
\begin{lemma} \label{lem:affine-cokernel-is-quasicoherent}
	Fix an affine scheme $X$ and a morphism $\varphi\colon\mc F\to\mc G$ of quasicoherent sheaves. Then $\widetilde{\coker\varphi_X}\simeq\coker\varphi$.
\end{lemma}
\begin{proof}
	By \autoref{lem:sheafify-from-presheaf-on-base}, it suffices to show that an exhibit a natural isomorphism $\widetilde{\coker\varphi_X}\simeq\coker\pre\varphi$ of (pre)sheaves on the distinguished base. From \autoref{cor:the-quasicoherent-iso}, let $\varepsilon_\mc F\colon\widetilde{\mc F(X)}\to\mc F$ and $\varepsilon_\mc G\colon\widetilde{\mc G(X)}\to\mc G$ be the canonical isomorphisms.

	Now, for any $f\in\OO_X(X_f)$, we note that we have the exact sequences
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXG1jIEYoWF9mKSJdLFsxLDAsIlxcbWMgRyhYX2YpIl0sWzAsMSwiXFxtYyBGKFgpX2YiXSxbMSwxLCJcXG1jIEcoWClfZiJdLFsyLDAsIlxcY29rZXJcXHZhcnBoaV9Ye19mfSJdLFsyLDEsIihcXGNva2VyXFx2YXJwaGlfWClfZiJdLFszLDEsIjAiXSxbMywwLCIwIl0sWzAsMSwiXFx2YXJwaGlfe1hfZn0iXSxbMiwzLCIoXFx2YXJwaGlfWClfZiIsMl0sWzAsMiwiKFxcdmFyZXBzaWxvbl9cXG1jIEYpX3tYX2Z9IiwyXSxbMSwzLCIoXFx2YXJlcHNpbG9uX1xcbWMgRilfe1hfZn0iLDJdLFsxLDRdLFs0LDddLFszLDVdLFs1LDZdLFs0LDUsIiIsMSx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc F(X_f)} & {\mc G(X_f)} & {\coker\varphi_X{_f}} & 0 \\
		{\mc F(X)_f} & {\mc G(X)_f} & {(\coker\varphi_X)_f} & 0
		\arrow["{\varphi_{X_f}}", from=1-1, to=1-2]
		\arrow["{(\varphi_X)_f}"', from=2-1, to=2-2]
		\arrow["{(\varepsilon_\mc F)_{X_f}}"', from=1-1, to=2-1]
		\arrow["{(\varepsilon_\mc F)_{X_f}}"', from=1-2, to=2-2]
		\arrow[from=1-2, to=1-3]
		\arrow[from=1-3, to=1-4]
		\arrow[from=2-2, to=2-3]
		\arrow[from=2-3, to=2-4]
		\arrow[dashed, from=1-3, to=2-3]
	\end{tikzcd}\]
	where the bottom row is exact because localization is an exact functor. In particular, the left square commutes by \autoref{lem:geo-opp-alg-2-map}, and the two vertical maps are isomorphisms by construction of the $\varepsilon$s.

	Thus, abstract nonsense tells us $(\varepsilon_\mc G)_{X_f}$ can take quotients to yield an isomorphism $\varepsilon_{X_f}\colon\coker\varphi_{X_f}\to(\coker\varphi_X)_f$. For functoriality, we suppose $X_g\subseteq X_f$ and note that
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXGNva2VyXFx2YXJwaGlfe1hfZn0iXSxbMCwxLCJcXGNva2VyXFx2YXJwaGlfe1hfZ30iXSxbMSwwLCIoXFxjb2tlclxcdmFycGhpX1gpX2YiXSxbMSwxLCIoXFxjb2tlclxcdmFycGhpX1gpX2ciXSxbMiwwLCJcXGxlZnRbXFxmcmFjIG1oXFxyaWdodF0iXSxbMywwLCJcXGZyYWMxaFttfF97WF9mfV0iXSxbMywxLCJcXGZyYWMxaFttfF97WF9nfV0iXSxbMiwxLCJcXGxlZnRbXFxmcmFjIG1oXFxyaWdodF0iXSxbMCwxLCJcXG9we3Jlc30iLDJdLFsyLDMsIlxcb3B7cmVzfSJdLFswLDIsIlxcdmFyZXBzaWxvbl97WF9mfSJdLFsxLDMsIlxcdmFyZXBzaWxvbl97WF9nfSJdLFs0LDUsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNSw2LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzQsNywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs3LDYsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\coker\varphi_{X_f}} & {(\coker\varphi_X)_f} & {\left[\frac mh\right]} & {\frac1h[m|_{X_f}]} \\
		{\coker\varphi_{X_g}} & {(\coker\varphi_X)_g} & {\left[\frac mh\right]} & {\frac1h[m|_{X_g}]}
		\arrow["{\op{res}}"', from=1-1, to=2-1]
		\arrow["{\op{res}}", from=1-2, to=2-2]
		\arrow["{\varepsilon_{X_f}}", from=1-1, to=1-2]
		\arrow["{\varepsilon_{X_g}}", from=2-1, to=2-2]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
		\arrow[maps to, from=1-3, to=2-3]
		\arrow[maps to, from=2-3, to=2-4]
	\end{tikzcd}\]
	commutes, exactly as in \autoref{lem:geo-opp-alg-2-map}. Thus, we have exhibited a natural isomorphism $\coker\pre\varphi\simeq\widetilde{\coker\varphi_X}$ of presheaves on the distinguished base. Inverting and noting that being isomorphic to a sheaf on a base forces both of these to be a sheaf on the base finishes by \autoref{lem:sheafify-from-presheaf-on-base}.
\end{proof}
\begin{cor} \label{cor:coker-is-quasicoherent}
	Fix a scheme $X$ and a morphism $\varphi\colon\mc F\to\mc G$ of quasicoherent sheaves on $X$. Then $\coker\varphi$ is a quasicoherent sheaf.
\end{cor}
\begin{proof}
	As before, fix some affine open cover $\mc U$ of $X$, and let $U$ be any affine open subscheme in $\mc U$. Restricting preserves being quasicoherent by \autoref{cor:restriction-is-quasicoherent}, so we note that $\varphi|_U\colon\mc F|_U\to\mc G|_U$ is a morphism of quasicoherent sheaves on the affine scheme $U$, so \autoref{lem:affine-cokernel-is-quasicoherent} tells us that $\coker(\varphi|_U)\simeq\widetilde C$ for some $\OO_U(U)$-module $C$.

	But now we note \autoref{lem:restrict-sheafify} tells us
	\[(\coker\varphi)|_U=(\coker\pre\varphi)\sh|_U\simeq((\coker\pre\varphi)|_U)\sh.\]
	Now, for each open $V\subseteq U$, we note $(\coker\pre\varphi)|_U(V)=\coker\varphi_V$, so $(\coker\pre\varphi)|_U=\coker\pre(\varphi|_U)$ upon noting that the restriction maps also align. So we see that
	\[(\coker\varphi)|_U\simeq(\coker\pre(\varphi|_U))\sh=\coker(\varphi|_U)\simeq\widetilde C.\]
	This finishes.
\end{proof}
We will also want access to direct sums and tensor products.
\begin{lemma} \label{lem:affine-sum-is-quasicoherent}
	Fix an affine scheme $X$ and quasicoherent sheaves $\{\mc F_\alpha\}_{\alpha\in\lambda}$. Setting $M_\alpha\coloneqq\mc F_\alpha(X)$ and $M\coloneqq\bigoplus_{\alpha\in\lambda}M_\alpha$, we have
	\[\bigoplus_{\alpha\in\lambda}\mc F_\alpha\simeq\widetilde M.\]
\end{lemma}
\begin{proof}
	Define $\mc F$ to be the direct sum ``presheaf'' so that
	\[\mc F(U)=\bigoplus_{\alpha\in\lambda}\mc F_\alpha(U)\]
	for each open $U\subseteq X$. We would like to show that $\widetilde M\simeq\mc F\sh$, for which we use \autoref{lem:sheafify-from-presheaf-on-base} to note that it suffices to exhibit an isomorphism of (pre)sheaves on the distinguished base. From \autoref{cor:the-quasicoherent-iso}, let $\varepsilon_\alpha\colon\widetilde{M_\alpha}\to\mc F_\alpha$ denote the canonical isomorphisms. Additionally, set $A\coloneqq\OO_X(X)$.

	Now, for any $f\in\OO_X(X_f)$, we have the isomorphisms
	\[\arraycolsep=1.4pt\begin{array}{cccccccccc}
		\widetilde M(X_f) &=& M_f &\simeq& \left(\bigoplus_{\alpha\in\lambda}M_\alpha\right)\otimes_AA_f &\stackrel*\simeq& \bigoplus_{\alpha\in\lambda}(M_\alpha\otimes_AA_f) &\simeq& \bigoplus_{\alpha\in\lambda}(M_\alpha)_f \\
		&& \frac1g(m_\alpha)_\alpha &\mapsto& (m_\alpha)_\alpha\otimes\frac1g &\mapsto& \left(m_\alpha\otimes\frac1g\right)_\alpha &\mapsto& \left(\frac{m_\alpha}g\right)_\alpha
	\end{array}\]
	where $\stackrel*\simeq$ is by noting that direct sums commute with localization. Explicitly, the inverse is by $(m_\alpha\otimes\frac{a_\alpha}{f^{n_\alpha}})\mapsto(f^{\max\{n_\alpha\}-n_\alpha}m_\alpha)_\alpha\otimes\frac1{f^{\max\{n_\alpha\}}}$, where $\max\{n_\alpha\}$ is a legal thing to write down because only finitely many of the $m_\alpha\otimes\frac{a_\alpha}{f^{n_\alpha}}$ are nonzero, so we may set $n_\alpha=0$ whenever the term is zero.

	We now call the above isomorphism $\varepsilon_{X_f}$. It remains to check funtoriality: suppose $X_g\subseteq X_f$, and we check that
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXHdpZGV0aWxkZSBNKFhfZikiXSxbMCwxLCJcXHdpZGV0aWxkZSBNKFhfZykiXSxbMSwwLCJcXG1jIEYoWF9mKSJdLFsxLDEsIlxcbWMgRihYX2cpIl0sWzIsMCwiXFxmcmFjMWgobV9cXGFscGhhKV9cXGFscGhhIl0sWzIsMSwiXFxmcmFjMWgobV9cXGFscGhhKV9cXGFscGhhIl0sWzMsMCwiXFxsZWZ0KFxcZnJhY3ttX1xcYWxwaGF9aFxccmlnaHQpX1xcYWxwaGEiXSxbMywxLCJcXGxlZnQoXFxmcmFje21fXFxhbHBoYX1oXFxyaWdodClfXFxhbHBoYSJdLFswLDEsIlxcb3B7cmVzfSIsMl0sWzIsMywiXFxvcHtyZXN9Il0sWzAsMiwiXFx2YXJlcHNpbG9uX3tYX2Z9Il0sWzEsMywiXFx2YXJlcHNpbG9uX3tYX2d9Il0sWzQsNSwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs1LDcsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw2LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzYsNywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\widetilde M(X_f)} & {\mc F(X_f)} & {\frac1h(m_\alpha)_\alpha} & {\left(\frac{m_\alpha}h\right)_\alpha} \\
		{\widetilde M(X_g)} & {\mc F(X_g)} & {\frac1h(m_\alpha)_\alpha} & {\left(\frac{m_\alpha}h\right)_\alpha}
		\arrow["{\op{res}}"', from=1-1, to=2-1]
		\arrow["{\op{res}}", from=1-2, to=2-2]
		\arrow["{\varepsilon_{X_f}}", from=1-1, to=1-2]
		\arrow["{\varepsilon_{X_g}}", from=2-1, to=2-2]
		\arrow[maps to, from=1-3, to=2-3]
		\arrow[maps to, from=2-3, to=2-4]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
	\end{tikzcd}\]
	commutes, which finishes by \autoref{lem:sheafify-from-presheaf-on-base}.
\end{proof}
\begin{cor}
	Fix a scheme $X$ and quasicoherent sheaves $\{\mc F_\alpha\}_{\alpha\in\lambda}$. Then $\bigoplus_{\alpha\in\lambda}\mc F_\alpha$ is a quasicoherent sheaf.
\end{cor}
\begin{proof}
	Let $\mc F$ be the direct sum ``presheaf'' so that
	\[\mc F(V)\coloneqq\bigoplus_{\alpha\in\lambda}\mc F_\alpha(V)\]
	for any open $V\subseteq U$ so that we want to show $\mc F\sh$ is quasicoherent. As usual, fix some affine open cover $\mc U$ of $X$, and let $U$ be any affine open subscheme in $\mc U$.

	As is typical, the main point is to show that restriction commutes with direct sums. Indeed, we note that any open $V\subseteq U$ gives
	\[\mc F|_U(V)=\mc F(V)=\bigoplus_{\alpha\in\lambda}\mc F_\alpha(V)=\bigoplus_{\alpha\in\lambda}\mc F_\alpha|_U(V),\]
	so $\mc F|_U$ matches the direct sum presheaf of the $\mc F_\alpha|_U$ on open sets, and of course the restriction maps match up because they are just term-wise restrictions. Taking sheafification, we see
	\[(\mc F|_U)\sh\simeq\bigoplus_{\alpha\in\lambda}\mc F_\alpha|_U.\]
	The sheaves $\mc F_\alpha|_U$ are quasicoherent sheaves (by \autoref{cor:restriction-is-quasicoherent}) on the affine scheme $U$, so \autoref{lem:affine-sum-is-quasicoherent} promises us an $\mathcal O_X(U)$-module $M$ such that
	\[(\mc F|_U)\sh\simeq\bigoplus_{\alpha\in\lambda}\mc F_\alpha|_U\simeq\widetilde M,\]
	which finishes because then $\mc F\sh|_U\simeq(\mc F|_U)\sh$ by \autoref{lem:restrict-sheafify}.
\end{proof}
\begin{lemma} \label{lem:affine-tensor-is-quasicoherent}
	Fix an affine scheme $X$ and quasicoherent sheaves $\mc F$ and $\mc G$. Setting $M\coloneqq\mc F(X)$ and $N\coloneqq\mc G(X)$ and $A\coloneqq\OO_X(X)$, we have $\mc F\otimes\mc G\simeq\widetilde{M\otimes_AN}$.
\end{lemma}
\begin{proof}
	As should be expected by now, we define $\mc H$ to be the tensor product ``presheaf'' by
	\[\mc H(U)\coloneqq\mc F(U)\otimes_{\OO_X(U)}\mc G(U)\]
	for each open $U\subseteq X$. We would like to show $\widetilde{M\otimes N}\simeq\mc H\sh$, for which we use \autoref{lem:sheafify-from-presheaf-on-base} to note that it suffices to exhibit this isomorphism on the distinguished base. Let $\varepsilon_\mc F\colon\widetilde M\to\mc F$ and $\varepsilon_\mc G\colon\widetilde N\to\mc G$ be the isomorphisms of \autoref{cor:the-quasicoherent-iso}.

	Now, for $f\in\OO_X(X)$, note that we have isomorphisms
	\[\arraycolsep=1.4pt\begin{array}{ccccccccc}
		\widetilde{M\otimes_AN}(X_f) &=& (M\otimes_AN)_f &\simeq& (M\otimes_AN)\otimes_AA_f &\stackrel*\simeq& (M\otimes_AA_f)\otimes_{A_f}(N\otimes_AA_f) &\simeq& M_f\otimes_{A_f}N_f \\
		&& \frac{m\otimes n}g &\mapsto& (m\otimes n)\otimes\frac1g &\mapsto& (m\otimes\frac11)\otimes(n\otimes\frac1g) &\mapsto& \frac m1\otimes\frac ng
	\end{array}\]
	where $\stackrel*\simeq$ is just a property of the tensor product.\footnote{Namely, if $M$ and $N$ are $R$-modules, and $S$ is an $R$-algebra, then $(M\otimes_RS)\otimes_S(N\otimes_RS)\simeq M\otimes_R(S\otimes_S(S\otimes_RN))\simeq M\otimes_R(S\otimes_SS)\otimes_RN\simeq M\otimes_RS\otimes_RN$.} Label the above isomorphism $\varepsilon_{X_f}$. To finish, we check functoriality: if $X_g\subseteq X_f$, then we check that
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXHdpZGV0aWxkZXtNXFxvdGltZXNfQU59KFhfZikiXSxbMCwxLCJcXHdpZGV0aWxkZXtNXFxvdGltZXNfQU59KFhfZykiXSxbMSwwLCJcXG1jIEgoWF9mKSJdLFsxLDEsIlxcbWMgSChYX2cpIl0sWzIsMCwiXFxmcmFje21cXG90aW1lcyBufWgiXSxbMiwxLCJcXGZyYWN7bVxcb3RpbWVzIG59aCJdLFszLDAsIlxcZnJhYyBtMVxcb3RpbWVzXFxmcmFjIG5oIl0sWzMsMSwiXFxmcmFjIG0xXFxvdGltZXNcXGZyYWMgbmgiXSxbMCwxLCJcXG9we3Jlc30iLDJdLFsyLDMsIlxcb3B7cmVzfSJdLFswLDIsIlxcdmFyZXBzaWxvbl97WF9mfSJdLFsxLDMsIlxcdmFyZXBzaWxvbl97WF9nfSJdLFs0LDYsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw1LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzUsNywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs2LDcsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\widetilde{M\otimes_AN}(X_f)} & {\mc H(X_f)} & {\frac{m\otimes n}h} & {\frac m1\otimes\frac nh} \\
		{\widetilde{M\otimes_AN}(X_g)} & {\mc H(X_g)} & {\frac{m\otimes n}h} & {\frac m1\otimes\frac nh}
		\arrow["{\op{res}}"', from=1-1, to=2-1]
		\arrow["{\op{res}}", from=1-2, to=2-2]
		\arrow["{\varepsilon_{X_f}}", from=1-1, to=1-2]
		\arrow["{\varepsilon_{X_g}}", from=2-1, to=2-2]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-3, to=2-3]
		\arrow[maps to, from=2-3, to=2-4]
		\arrow[maps to, from=1-4, to=2-4]
	\end{tikzcd}\]
	commutes, which finishes by \autoref{lem:sheafify-from-presheaf-on-base}.
\end{proof}
\begin{cor}
	Fix a scheme $X$ and quasicoherent sheaves $\mc F$ and $\mc G$ on $X$. Then $\mc F\otimes\mc G$ is a quasicoherent sheaf on $X$.
\end{cor}
\begin{proof}
	Let $\mc H$ be the tensor product ``presheaf'' defined by
	\[\mc H(U)\coloneqq\mc F(U)\otimes_{\OO_X(U)}\mc G(U)\]
	for any open $U\subseteq X$ so that we want to show $\mc H\sh$ is quasicoherent. As usual, fix some affine open cover $\mc U$ of $X$, and let $U$ be any affine open subscheme in $\mc U$.

	As is typical, the main point is to show that restriction commutes with tensor products. Indeed, we note that any open $V\subseteq U$ gives
	\[\mc H|_U(V)=\mc H(V)=\mc F(V)\otimes_{\OO_X(V)}\mc G(V)=\mc F|_U\otimes_{\OO_X|_U(V)}\mc G|_U(V),\]
	so $\mc H|_U$ matches the tensor product presheaf of $\mc F|_U$ and $\mc G|_U$ on open sets, and of course the restriction maps match up because they are just term-wise restrictions. Taking sheafification, we see
	\[(\mc H|_U)\sh\simeq(\mc F|_U)\otimes(\mc G|_U).\]
	We are now in the home stretch. The sheaves $\mc F|_U$ and $\mc G|_U$ are quasicoherent sheaves (by \autoref{cor:restriction-is-quasicoherent}) on the affine scheme $U$, so \autoref{lem:affine-tensor-is-quasicoherent} promises us an $\mathcal O_X(U)$-module $M$ such that
	\[(\mc H|_U)\sh\simeq(\mc F|_U)\otimes(\mc G|_U)\simeq\widetilde M,\]
	which finishes because now $\mc H\sh|_U\simeq(\mc H|_U)\sh$ by \autoref{lem:restrict-sheafify}.
\end{proof}

\subsection{The Category of Quasicoherent Sheaves}
It turns out that, by breaking down a quasicoherent sheaf to a sheaf on a base, one can fully determine a quasicoherent sheaf based off of the data of what it does on affine open subschemes and the restriction maps coming from distinguished open subschemes. Thus, we have the following.
\begin{lemma} \label{lem:localize-is-good}
	Fix a scheme $X$. An $\mathcal O_X$-module $\mc F$ is quasicoherent if and only if any distinguished open subscheme $U_f$ of an affine open subscheme $U\subseteq X$ has the induced map
	\[\mc F(U)_f\to\mc F(U_f)\]
	coming from restriction an isomorphism.
\end{lemma}
\begin{proof}
	Fix any affine open subscheme $U\subseteq X$. We show that $\mc F|_U\cong\widetilde M$ for $M=\mc F(U)$ if and only if the morphisms
	\[\arraycolsep=1.4pt\begin{array}{cccc}
		\op{res}_f\colon& \mc F(U)_f &\to& \mc F(U_f) \\
		& s/f^n &\mapsto& f|_{U_f}^{-n}\cdot s|_{U_f}
	\end{array}\]
	are isomorphisms for any $f\in\OO_X(U)$. To see that this morphism is a well-defined morphism of $\OO_X(U_f)$-modules (here, $\mc F(U)_f$ has the action of $\OO_X(U_f)$ through the isomorphism $\OO_X(U)_f\simeq\OO_X(U_f)$ by \autoref{cor:the-affine-iso}), we note that this is the morphism
	\[\varepsilon_{U_f}\colon\underbrace{\widetilde{\mc F(U)}(U_f)}_{\simeq\mc F(U)_f}\to\mc F(U_f),\]
	from \autoref{lem:geo-opp-alg-2-map}; here, $\widetilde{\mc F(U)}(U_f)\simeq\mc F(U)_f$ by \autoref{rem:concrete-associated-module}. Indeed, tracking $\varepsilon$ through, we see that it sends $s/g$ to $g^{-1}\cdot s|_{U_f}$, which is precisely $\op{res}_f$.
	
	We now proceed with the proof. We have two directions.
	\begin{itemize}
		\item Suppose that $\mc F|_U\cong\widetilde M$ for some $\OO_X(U)$-module $M$. Then \autoref{cor:the-quasicoherent-iso} promises the canonical morphism $\varepsilon\colon\widetilde{\mc F(U)}\to\mc F|_U$ is an isomorphism because $U$ is an affine scheme.
		
		Thus, by \autoref{prop:isoonstalks} each $\varepsilon_{U_f}$ is an isomorphism of abelian groups, and it is already a morphism of $\OO_X(U_f)$-morphisms, so in fact $\varepsilon_{U_f}$ is an isomorphism of $\OO_{U_f}$-modules. This finishes.

		\item Conversely, suppose that each $\varepsilon_{U_f}$ is an isomorphism for each $f\in\OO_X(U)$; we show that $\varepsilon$ is an isomorphism of $\OO_X|_U$-modules. Certainly it is a morphism of $\OO_X|_U$-modules by construction of $\varepsilon$, so it remains to show that $\varepsilon$ is an isomorphism of sheaves by \autoref{lem:better-ox-mod-iso}.

		Well, each $\varepsilon_{U_f}$ is an isomorphism of sheaves for each $f\in\OO_X(U)$, so we assemble into an isomorphism on the distinguished base. Thus, by functoriality of extending a sheaf on the base from \autoref{lem:sheafonabasefunctor}, we conclude that $\varepsilon$ is in total a sheaf isomorphism. This finishes.
		\qedhere
	\end{itemize}
\end{proof}
% Thus, we note the following.
% \begin{lemma} \label{lem:localize-is-good}
% 	Fix a quasicompact and quasiseparated scheme $X$. Then the natural maps $\mc F(X)_f\to\mc F(X_f)$ are isomorphisms.
% \end{lemma}
% \begin{proof}
% 	Similar to the case for schemes.
% \end{proof}
% Anyway, let's see an example.
% \begin{ex}
% 	We see that the sheaf of nilpotents $\mc N$ of a scheme $X$ is quasicoherent. Run the above checks.
% \end{ex}
% More generally, we have the following.
This test for quasicoherent sheaves is useful, but ultimately have done most of our work with them already. We now pick up some solitary results.
\begin{theorem} \label{thm:qcoh-is-abelian}
	Fix a scheme $X$. The category of quasicoherent sheaves on $X$ is abelian.
\end{theorem}
\begin{proof}
	Most of this inherited directly from \autoref{thm:ox-mod-is-abelian}. Here are the additivity checks.
	\begin{itemize}
		\item Because our category is a full subcategory of the category of $\OO_X$-modules, we see that $\op{Mor}(\mc F,\mc G)$ is already an abelian group with the necessary composition distributions for free.
		\item We show that we have products; this essentially follows directly from \autoref{cor:prod-is-quasicoherent} and nothing that we live in a full subcategory. We will show this proof in detail once because it's just a matter of saying all the words out loud.
		
		Fix quasicoherent sheaves $\mc F$ and $\mc G$, and we claim that the quasicoherent sheaf $\mc F\times\mc G$ (quasicoherent by \autoref{cor:prod-is-quasicoherent}) with the $\OO_X$-module projections $\pi_\mc F\colon\mc F\times\mc G\to\mc F$ and $\pi_\mc G\colon\mc F\times\mc G\to\mc G$. To check that this data gives the universal property, pick up a quasicoherent sheaf $\mc H$ with maps $\psi_\mc F\colon\mc H\to\mc F$ and $\psi_\mc G\colon\mc H\to\mc G$, and we need a unique morphism $\psi\colon\mc H\to\mc F\times\mc G$ making the diagram
		% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXG1jIEgiXSxbMSwxLCJcXG1jIEZcXHRpbWVzXFxtYyBHIl0sWzIsMSwiXFxtYyBGIl0sWzEsMiwiXFxtYyBHIl0sWzAsMSwiXFxwc2kiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMCwyLCJcXHBzaV9cXG1jIEYiLDAseyJjdXJ2ZSI6LTJ9XSxbMCwzLCJcXHBzaV9cXG1jIEciLDIseyJjdXJ2ZSI6Mn1dLFsxLDIsIlxccGlfXFxtYyBGIiwyXSxbMSwzLCJcXHBpX1xcbWMgRyJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			{\mc H} \\
			& {\mc F\times\mc G} & {\mc F} \\
			& {\mc G}
			\arrow["\psi"{description}, dashed, from=1-1, to=2-2]
			\arrow["{\psi_\mc F}", curve={height=-12pt}, from=1-1, to=2-3]
			\arrow["{\psi_\mc G}"', curve={height=12pt}, from=1-1, to=3-2]
			\arrow["{\pi_\mc F}"', from=2-2, to=2-3]
			\arrow["{\pi_\mc G}", from=2-2, to=3-2]
		\end{tikzcd}\]
		commute. Well such a morphism exists uniquely in the category of $\OO_X$-modules, so because we're in a full subcategory, this morphism still exists uniquely in the category of quasicoherent sheaves.
		\item The zero $\OO_X$-module $\mc Z$ is quasicoherent: for any affine open subscheme $U\subseteq X$, we see that $\mc Z|_U\simeq\widetilde0$ because any $f\in\OO_X(U)$ has
		\[\mc Z(X_f)=0=0_f=\widetilde0(X_f),\]
		where we are using \autoref{lem:sheafonabasefunctor} to check this isomorphism on the distinguished base. Of course, our restriction maps match up because everything is $0$, where there is only one morphism to $0$ anyway.

		To show the universal property is essentially the same as we just did for products. Namely, for any quasicoherent sheaf $\mc F$, there are unique $\OO_X$-module morphisms $\mc F\to\mc Z$ and $\mc Z\to\mc F$, and these morphisms will still exist and stay unique in the category of quasicoherent sheaves.
	\end{itemize}
	Here are our abelian checks.
	\begin{itemize}
		\item We show kernels and cokernels exist. Now, given a morphism $\varphi\colon\mc F\to\mc G$, we note that the kernel map $\ker\varphi\to\mc F$ and cokernel map $\mc G\to\coker\varphi$ in the category of $\OO_X$-modules remains the kernel and cokernel maps in the category of quasicoherent sheaves because these are quasicoherent sheaves by \autoref{cor:ker-is-quasicoherent} and \autoref{cor:coker-is-quasicoherent} and because we are a full subcategory with the same zero object.
		
		Checking this in detail is a matter of saying the universal property out loud to immediately reduce to the category of $\OO_X$-modules, as we showed for products.
		\item Fix an epic morphism $\varphi\colon\mc F\to\mc G$. Then the map $\varphi\colon\mc F\to\mc G$ is the cokernel of the kernel map $\iota\colon\ker\varphi\to\mc F$ in the category of $\OO_X$-modules by \autoref{lem:ox-mod-kercoker}.
		
		However, as usual, saying the universal property out loud tells us that (because $\ker\varphi$ is quasicoherent by \autoref{cor:ker-is-quasicoherent}), $\varphi\colon\mc F\to\mc G$ remains the cokernel of the kernel map $\iota\colon\ker\varphi\to\mc F$ in the category of quasicoherent sheaves.

		\item Fix a monic morphism $\varphi\colon\mc F\to\mc G$. Then the map $\varphi\colon\mc F\to\mc G$ is the kernel of the cokernel map $\pi\colon\mc G\to\coker\varphi$ in the category of $\OO_X$-modules by \autoref{lem:ox-mod-cokerker}.
		
		However, as usual, saying the universal property out loud tells us that (because $\coker\varphi$ is quasicoherent by \autoref{cor:coker-is-quasicoherent}), $\varphi\colon\mc F\to\mc G$ remains the kernel of the cokernel map $\pi\colon\mc G\to\coker\varphi$ in the category of quasicoherent sheaves.
	\end{itemize}
	The above checks complete the proof.
\end{proof}
As usual, we now discuss exactness.
\begin{cor} \label{cor:exactness-for-quasicoherent}
	Fix a scheme $X$. Then a sequence of quasicoherent sheaves
	\[\mc F\stackrel\alpha\to\mc G\stackrel\beta\to\mc H\]
	is exact at $\mc G$ in the category of quasicoherent if and only if it is exact at $\mc G$ in the category of sheaves of $\OO_X$-modules.
\end{cor}
\begin{proof}
	The complex is exact at $\mc G$ if and only if the image map $\mc F\to\coker\ker\alpha$ serves as a kernel of the map $\mc G\to\mc H$. However, cokernels and kernels are the exact same in the category of quasicoherent sheaves as in the category of $\OO_X$-modules, as discussed in the proof of \autoref{thm:qcoh-is-abelian} (due to \autoref{cor:ker-is-quasicoherent} and \autoref{cor:coker-is-quasicoherent}), so these two exactness are equivalent.
\end{proof}

\subsection{Short Exact Sequences for Quasicoherent Sheaves}
Let's just start with the main attraction.
\begin{proposition} \label{prop:quasicoherent-is-acyclic}
	Fix an affine scheme $X$ with an exact sequence of $\OO_X$-modules
	\[0\to\mc F'\to\mc F\to\mc F''\to0.\]
	If $\mc F'$ is quasicoherent, then
	\[0\to\mc F'(X)\to\mc F(X)\to\mc F''(X)\to0\]
	is also exact.
\end{proposition}
\begin{proof}
	Label our short exact sequence as
	\[0\to\mc F'\stackrel\iota\to\mc F\stackrel\pi\to\mc F''\to0.\]
	\autoref{prop:section-is-left-exact} tells us that any $U\subseteq X$ has
	\begin{equation}
		0\to\mc F'(U)\stackrel{\iota_U}\to\mc F(U)\stackrel{\pi_U}\to\mc F''(U) \label{eq:sectionles}
	\end{equation}
	exact, so we merely have to show that $\pi_X$ is surjective. As such, pick up some $f''\in\mc F''(X)$ which we want to exhibit as being in the image of $\pi_X$.

	By \autoref{lem:localize-is-good}, we note that the map $\mc F_1(U)\to\mc F_1(U_f)$ need not be surjective, but it is almost surjective: for any $a\in\mc F_1(U_f)$, there's going to be some $n$ such that $af^n$ does come from $\mc F_1(U)$. Now we can repeat the proof from homework that showed exactness from when $\mc F_1$ is flasque.
\end{proof}
\begin{cor} \label{cor:quasicoherent-is-acyclic}
	Fix a scheme $X$ with an exact sequence of $\OO_X$-modules
	\[0\to\mc F'\to\mc F\to\mc F''\to0.\]
	If $\mc F'$ is quasicoherent, then
	\[0\to\mc F'(U)\to\mc F(U)\to\mc F''(U)\to0\]
	is also exact for any affine open subscheme $U\subseteq X$.
\end{cor}
\begin{proof}
	Label our short exact sequence as
	\[0\to\mc F'\stackrel\alpha\to\mc F\stackrel\beta\to\mc F''\to0.\]
	By \autoref{cor:exactness-for-ox-mod}, it is also exact in the category of sheaves of abelian groups on $X$. Using \autoref{lem:restriction-is-exact}, we see that
	\[0\to\mc F'|_U\stackrel{\alpha|_U}\to\mc F|_U\stackrel{\beta|_U}\to\mc F''|_U\to0\]
	is also exact in the category of sheaves of abelian groups on $U$, so unwinding with \autoref{cor:exactness-for-ox-mod}, this is also exact in the category of $\OO_X$-modules.

	We are now ready to apply \autoref{prop:quasicoherent-is-acyclic}. Note $\mc F'|_U$ is still quasicoherent by \autoref{cor:restriction-is-quasicoherent}, so \autoref{prop:quasicoherent-is-acyclic} tells us that
	\[0\to\mc F'(U)\to\mc F(U)\to\mc F''(U)\to0\]
	is exact, which is what we wanted.
\end{proof}
\begin{remark}
	\autoref{cor:quasicoherent-is-acyclic} tells us that (later in life) quasicoherent sheaves are going to have trivial cohomology on affine open subschemes.
\end{remark}
As another consequence of our understanding of exactness, we have the following.
\begin{cor}
	Fix a scheme $X$. Given an exact sequence
	\[0\to\mc F'\to\mc F\to\mc F''\to0\]
	of $\OO_X$-modules, if any two of the terms are quasicoherent, then the third is also quasicoherent.
\end{cor}
\begin{proof}
	As usual, let $\mc U$ be any affine open cover of $X$. For any $U\in\mc U$, we find an $\mathcal O_X(U)$-module $M$ such that $\mc F|_U\simeq\widetilde M$.

	Label our short exact sequence by
	\[0\to\mc F'\stackrel{\alpha}\to\mc F\stackrel\beta\to\mc F''\to0.\]
	As in \autoref{cor:quasicoherent-is-acyclic}, we note that \autoref{cor:exactness-for-ox-mod} tells us that the above is also exact in the category of sheaves of abelian groups on $X$. Thus, \autoref{lem:restriction-is-exact} tells us that
	\[0\to\mc F'|_U\stackrel{\alpha|_U}\to\mc F|_U\stackrel{\beta|_U}\to\mc F''|_U\to0\]
	is also exact in the category of sheaves of abelian groups on $U$ and thus in the category of $\OO_U$-modules by \autoref{cor:exactness-for-ox-mod}.

	Now, set $M'\coloneqq\mc F'(U)$ and $M\coloneqq\mc F(U)$ and $M''\coloneqq\mc F''(U)$ so that \autoref{cor:the-quasicoherent-iso} grants us canonical morphisms $\varepsilon'\colon\widetilde{M'}\to\mc F'$ and $\varepsilon\colon\widetilde M\to\mc F$ and $\varepsilon''\colon\widetilde{M''}\to\mc F''$. Quickly, note that
	\[0\to M'\stackrel{\alpha_U}\to M\stackrel{\beta_U}\to M''\to0\]
	is exact by \autoref{prop:quasicoherent-is-acyclic} because $\mc F'$ is quasicoherent. As such, \autoref{prop:tilde-is-exact} tells us that
	\[0\to\widetilde{M'}\stackrel{\widetilde{\alpha_U}}\to\widetilde M\stackrel{\widetilde{\beta_U}}\to\widetilde{M''}\to0\]
	is exact.
	
	Combining, \autoref{lem:geo-opp-alg-2-map} gives us the commutative diagram
	% https://q.uiver.app/?q=WzAsMTAsWzAsMSwiMCJdLFsxLDEsIlxcbWMgRid8X1UiXSxbMiwxLCJcXG1jIEZ8X1UiXSxbMywxLCJcXG1jIEYnJ3xfVSJdLFs0LDEsIjAiXSxbMCwwLCIwIl0sWzEsMCwiXFx3aWRldGlsZGV7TSd9Il0sWzIsMCwiXFx3aWRldGlsZGUgTSJdLFszLDAsIlxcd2lkZXRpbGRle00nJ30iXSxbNCwwLCIwIl0sWzAsMV0sWzEsMiwiXFxhbHBoYXxfVSJdLFsyLDMsIlxcYmV0YXxfVSJdLFszLDRdLFs1LDZdLFs2LDcsIlxcd2lkZXRpbGRle1xcYWxwaGFfVX0iXSxbNyw4LCJcXHdpZGV0aWxkZXtcXGJldGFfVX0iXSxbOCw5XSxbNiwxLCJcXHZhcmVwc2lsb24nIiwyXSxbNywyLCJcXHZhcmVwc2lsb24iLDJdLFs4LDMsIlxcdmFyZXBzaWxvbicnIl1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		0 & {\widetilde{M'}} & {\widetilde M} & {\widetilde{M''}} & 0 \\
		0 & {\mc F'|_U} & {\mc F|_U} & {\mc F''|_U} & 0
		\arrow[from=2-1, to=2-2]
		\arrow["{\alpha|_U}", from=2-2, to=2-3]
		\arrow["{\beta|_U}", from=2-3, to=2-4]
		\arrow[from=2-4, to=2-5]
		\arrow[from=1-1, to=1-2]
		\arrow["{\widetilde{\alpha_U}}", from=1-2, to=1-3]
		\arrow["{\widetilde{\beta_U}}", from=1-3, to=1-4]
		\arrow[from=1-4, to=1-5]
		\arrow["{\varepsilon'}"', from=1-2, to=2-2]
		\arrow["\varepsilon"', from=1-3, to=2-3]
		\arrow["{\varepsilon''}", from=1-4, to=2-4]
	\end{tikzcd}\]
	with exact rows, as shown above. But $\varepsilon'$ and $\varepsilon''$ are isomorphisms because $\mc F'$ and $\mc F''$ are quasicoherent, so the Snake lemma (or alternatively, the Five lemma) tells us that $\varepsilon$ must be an isomorphism as well. This finishes.
\end{proof}
% \begin{lemma}
% 	Here are some remarks about the category of quasicoherent sheaves $\mathrm{Qcoh}_X$.
% 	\begin{listalph}
% 		\item The category $\mathrm{Qcoh}_X$ is an abelian category.
% 		\item Given an exact sequence
% 		\[0\to\mc F'\to\mc F\to\mc F''\to0\]
% 		then $\mc F'$ and $\mc F''$ being quasicoherent implies that $\mc F$ is quasicoherent.
% 	\end{listalph}
% \end{lemma}
% \begin{proof}
% 	Here we go.
% 	\begin{listalph}
% 		\item The point is to check everything on affine open subschemes. Namely, everything is local, so take $X=\Spec A$. To check that we're abelian, given a morphism $\pi\colon\mc F\to\mc G$ of quasicoherent sheaves, which will correspond to a map of modules $\pi^\sharp\colon M\to N$. We define the kernel as $\widetilde{\ker\pi^\sharp}$ and the kernel as $\widetilde{\coker\pi^\sharp}$. Lastly, we define $\mc F\otimes\mc G\coloneqq\widetilde{M\otimes N}$.
% 	\end{listalph}
% 	To prove (b), we have the following lemma.
% 	\begin{lemma} \label{lem:quasicoh-is-acyclic}
% 		Fix an affine scheme $X$ with $\OO_X$-modules $\mc F_1,\mc F_2,\mc F_3$. Then if $\mc F_1$ is quasicoherent, and
% 		\[0\to\mc F_1\to\mc F_2\to\mc F_3\to0\]
% 		is exact, then
% 		\[0\to\mc F_1(X)\to\mc F_2(X)\to\mc F_3(X)\to0\]
% 		is exact.
% 	\end{lemma}
% 	Setting $M_i\coloneqq\mc F_i(X)$, note that the lemma will finish by pure category theory because it forces the middle arrow of
% 	% https://q.uiver.app/?q=WzAsMTAsWzAsMCwiMCJdLFsxLDAsIlxcd2lkZXRpbGRle01fMX0iXSxbMiwwLCJcXHdpZGV0aWxkZSBNXzIiXSxbMywwLCJcXHdpZGV0aWxkZSBNXzMiXSxbNCwwLCIwIl0sWzAsMSwiMCJdLFsxLDEsIlxcbWMgRl8xIl0sWzIsMSwiXFxtYyBGXzIiXSxbMywxLCJcXG1jIEZfMyJdLFs0LDEsIjAiXSxbMCwxXSxbMSwyXSxbMiwzXSxbMyw0XSxbNSw2XSxbNiw3XSxbNyw4XSxbOCw5XSxbMSw2XSxbMyw4XSxbMiw3LCIiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
% 	\[\begin{tikzcd}
% 		0 & {\widetilde{M_1}} & {\widetilde M_2} & {\widetilde M_3} & 0 \\
% 		0 & {\mc F_1} & {\mc F_2} & {\mc F_3} & 0
% 		\arrow[from=1-1, to=1-2]
% 		\arrow[from=1-2, to=1-3]
% 		\arrow[from=1-3, to=1-4]
% 		\arrow[from=1-4, to=1-5]
% 		\arrow[from=2-1, to=2-2]
% 		\arrow[from=2-2, to=2-3]
% 		\arrow[from=2-3, to=2-4]
% 		\arrow[from=2-4, to=2-5]
% 		\arrow[from=1-2, to=2-2]
% 		\arrow[from=1-4, to=2-4]
% 		\arrow[dashed, from=1-3, to=2-3]
% 	\end{tikzcd}\]
% 	is still an isomorphism.
% \end{proof}

\subsection{Sheaf Theory for Quasicoherent Sheaves}
Here are some quick ways to build quasicoherent sheaves.
\begin{proposition}
	Fix a scheme morphism $f\colon X\to Y$.
	\begin{listalph}
		\item If $\mc G$ is a quasicoherent sheaf on $Y$, then $f^*\mc G$ is a quasicoherent sheaf on $X$.
		\item If $f$ is quasicompact and quasiseparated, then any quasicoherent sheaf $\mc F$ on $X$ gives a quasicoherent sheaf $f_*\mc F$ on $Y$.
	\end{listalph}
\end{proposition}
\begin{proof}
	Here we go.
	\begin{listalph}
		\item Reduce to the affine case, as usual. Namely, the result is local on $X$, so we may show this on an affine open cover of $X$. For this, we give $Y$ an affine open cover, pull this back to $X$, and the affine open cover on $X$ we want is going to come from the affine open covers of the pre-images. Now everything is an affine problem.
		\item As usual, the question is local on $Y$, so we may assume that $Y$ is affine. Thus, $f$ being quasicompact and quasiseparated forces $X$ to be quasicompact and quasiseparated. In particular, it follows that we can give $X$ a finite affine open cover $\{U_i\}_{i=1}^n$ where each of the intersections $U_i\cap U_j$ have finite affine open covers $\{U_{ijk}\}_{k=1}^{n_{ij}}$.

		Now, all the maps $f|_{U_i}$ and $f|_{U_{ij}}$ are morphisms of affine schemes, so $(f|_{U_i})_*(\mc F|_{U_i})$ will all be quasicoherent sheaves on $Y$ because morphisms between affine schemes are all affine. Thus, we think that we can build $f_*\mc F$ by hand! Namely, we see that $f_*\mc F=\mc F(f^{-1}V)$ fits into the exact sequence
		\[0\to\prod_i\mc F(f^{-1}V\cap U_i)\to\prod_{i,j,k}\mc F(f^{-1}V\cap V_{ijk})\]
		by using the sheaf condition. Lifting this to the level of sheaves, we see
		\[0\to f_*\mc F\to\prod_i(f|_{U_i})_*(\mc F|_{U_i})\to\prod_{i,j,k}\]
		is exact, so the morphism on the left is a kernel of morphisms of quasicoherent sheaves and is therefore a quasicoherent sheaf.
		\qedhere
	\end{listalph}
\end{proof}

\subsection{Closed Embeddings}
Given a sheaf $\mc F$ on $x$, recall from long ago that we defined $\op{Supp}\mc F\coloneqq\{x\in X:\mc F_x\ne0\}$. Now, here is our result.
\begin{definition}[Ideal sheaf]
	Fix a scheme $X$. An \textit{ideal sheaf} $\mc I$ is an $\mathcal O_X$-module which is a subsheaf of $\OO_X$.
\end{definition}
\begin{proposition}
	Fix a scheme $X$. Then there is an equivalence of categories between closed subschemes of $X$ and quasicoherent ideal sheaves.
\end{proposition}
\begin{proof}
	Beginning with a closed embedding $\iota\colon Y\to X$, we get a quasicoherent sheaf by taking $\ker\iota^\sharp$. In the other direction, we take a quasicoherent ideal sheaf $\mc I\subseteq\OO_X$, and we set $Y\coloneqq\op{Supp}\OO_X/\mc I$ on the level of topological spaces and $f^{-1}(\OO_X/\mc I)$ on the level of sheaves.

	Here are our checks.
	\begin{itemize}
		\item Recall that closed embeddings are quasicompact and quasiseparated\footnote{The fact that closed embeddings are quasicompact is because closed subsets of affine schemes are quasicompact. The fact that closed embeddings are quasiseparated comes because all monomorphisms are quasiseparated.}, so $f_*\OO_Y$ is quasicoherent, so the kernel of $\iota^\sharp$ will also be quasicoherent.
		\item We check that $Y$ is actually a closed subscheme. Note $\op{Supp}(\OO_X/\mc I)$ is equal to $\{x\in X:\overline1_x\ne0\}$ and is therefore closed; here $\overline1$ refers to the global section coming from $1\in\OO_X(X)$. To check that $Y$ is actually a scheme, we check on the level of affine open subschemes. One can check that this gives a closed embedding by hand.
	\end{itemize}
	We omit the checks that this is actually an equivalence of categories.
\end{proof}
\begin{remark}
	The forward direction of the above proposition shows that all closed subschemes look like $\Spec A/I\into\Spec A$. Namely, one has to show that quasicoherent ideal sheaves $\mc I$ of an affine scheme all look like $\widetilde I$ where $I\subseteq A$ is an ideal, and the above proof has shown that $\op{Supp}(\widetilde A/\widetilde I)=V(I)$ and $f^{-1}(\OO_{\Spec A}/\mc I)$ has the correct structure sheaf.
\end{remark}

\subsection{Scheme Images}
We would like to talk about images of schemes. For example, given a quasicompact and quasiseparated morphism $f\colon X\to Y$, then we see $f_*\OO_X$ is quasicoherent on $Y$, so $I=\ker(\OO_Y\to f_*\OO_X)$ is going to be a quasicoherent sheaf on $Y$, and this will define a closed subscheme of $Y$ as above.

In general, $\ker(\OO_Y\to f_*\OO_X)$ need not be quasicoherent, but we can still set $\mc I$ to be the largest quasicoherent subsheaf, and our image is the largest closed subscheme defined by $\mc I$. Of course, we should probably talk about what the ``largest quasicoherent subsheaf'' is, but we can simply define it as the sum of all the quasicoherent subsheaves $\mc I_Z$ where $Z\into Y$ varies over all the closed embeddings through which $X\to Y$ factors.

We close class with the following definition.
\begin{definition}[Coherent sheaf]
	Fix a locally Noetherian scheme $X$. Then an $\mathcal O_X$-module $\mc F$ is \textit{coherent} if and only if $X$ can be covered by affine open subschemes $U_i\subseteq X$ such that $\mc F|_{U_\alpha}$ is isomorphic to $\widetilde M_\alpha$ where each $M_\alpha$ is a finitely generated $\OO_X(U_\alpha)$-module.
\end{definition}
\begin{remark}
	If we remove the locally Noetherian scheme $X$, then we're going to want our modules $M_i$ to be finitely presented. In the Noetherian case, these are equivalent.
	% 6.4
\end{remark}

\end{document}