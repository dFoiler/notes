% !TEX root = ../notes.tex

\documentclass[../notes.tex]{subfiles}

\begin{document}

Let's finish up talking varieties, and then we'll move on to affine schemes.

\subsection{Projective Varieties}
We're going to briefly talk about projective varieties. Let's start with projective space.
\begin{definition}[Projective space]
	Given a field $k$, we define \textit{projective $n$-space over $k$}, denoted $\PP^n(k)$ as
	\[\frac{k^{n+1}\setminus\{(0,\ldots,0\}}{\sim},\]
	where $\sim$ assigns two points being equivalent if and only if they span the same $1$-dimensional subspace of $k^{n+1}$. We will denote the equivalence class of a point $(a_0,\ldots,a_n)$ by $[a_0:\ldots:a_n]$.
\end{definition}
To work with varieties, we don't quite cut out by general polynomials but rather by homogeneous polynomials.
\begin{definition}[Projective variety]
	Given a field $k$ and a set of some homogeneous polynomials $T\subseteq k[x_1,\ldots,x_n]$, we define the \textit{projective variety} cut out by $T$ as
	\[V(T)\coloneqq\left\{p\in\PP^n(k):f(p)=0\text{ for all }f\in T\right\}.\]
\end{definition}
\begin{example} \label{ex:projec}
	The elliptic curve corresponding to the affine algebraic variety in $\AA^2(k)$ cut out by $y^2-x^3-1$ becomes the projective variety in $\PP^2(k)$ cut out by
	\[Y^2Z-X^3-Z^3=0.\]
\end{example}
\begin{remark}
	One can give projective varieties some Zariski topology as well, which we will define later in the class.
\end{remark}
What to remember about projective varieties is that we can cover $\PP^2(k)$ (say) by affine spaces as
\begin{align*}
	\PP^2(k) ={}& \{[X:Y:Z]:X,Y,Z\in k\text{ not all }0\} \\
	={}& \{[X:Y:Z]:X,Y,Z\in k\text{ and }X\ne0\} \\
	{}&\cup \{[X:Y:Z]:X,Y,Z\in k\text{ and }Y\ne0\} \\
	={}& \{[1:y:z]:y,z\in k\} \\
	{}&\cup \{[x:1:z]:x,z\in k\} \\
	\simeq{}&\AA^2(k)\cup\AA^2(k).
\end{align*}
The point is that we can decompose $\PP^2(k)$ into an affine cover.
\begin{example}
	Continuing from \autoref{ex:projec}, we can decompose $Z\left(Y^2Z-X^3-Z^3\right)$ into having an affine open cover by
	\[\underbrace{\left\{(x,y):y^2-x^3-1=0\right\}}_{z\ne0}\cup\underbrace{\left\{(x,z):z-x^3-z^3=0\right\}}_{y\ne0}\cup\underbrace{\left\{(y,z):y^2z-1-z^3=0\right\}}_{x\ne0}.\]
	Notably, we get almost everything from just one of the affine chunks, and we get the point at infinity by taking one of the other chunks.
\end{example}
\begin{remark}
	It is a general fact that we only need two affine chunks to cover our projective curve.
\end{remark}

\subsection{The Spectrum}
The definition of a(n affine) scheme requires a topological space and its ring of functions. We will postpone talking about the ring of functions until we discuss sheaves, so for now we will focus on the space.
\begin{definition}[Spectrum]
	Given a ring $A$, we define the \textit{spectrum}
	\[\op{Spec}A\coloneqq\{\mf p\subseteq A:\mf p\text{ is a prime ideal}\}.\]
\end{definition}
\begin{example}
	Fix a field $k$. Then $\op{Spec}k=\{(0)\}$. Namely, non-isomorphic rings can have homeomorphic spectra.
\end{example}
\begin{exe} \label{exe:speckx}
	Fix a field $k$. We show that
	\[\op{Spec}k[x]=\{(0)\}\cup\{(\pi):\pi\text{ is monic, irred.},\deg\pi>0\}.\]
\end{exe}
\begin{proof}
	To begin, note that $(0)$ is prime, and $(\pi)$ is prime for irreducible non-constant polynomials $\pi$ because irreducible elements are prime in principal ideal domains. Additionally, we note that all the given primes are distinct: of course $(0)$ is distinct from any prime of the form $(\pi)$, but further, given monic non-constant irreducible polynomials $\alpha$ and $\beta$, having
	\[(\alpha)=(\beta)\]
	forces $\alpha=c\beta$ for some $c\in k[x]^\times$. But $k[x]^\times=k^\times$, so $c\in k^\times$, so $c=1$ is forced by comparing the leading coefficients of $\alpha$ and $\beta$.

	It remains to show that all prime ideals $\mf p\subseteq k[x]$ take the desired form. Well, $k[x]$ is a principal ideal domain, so we may write $\mf p=(\pi)$ for some $\pi\in k[x]$. If $\pi=0$, then we are done. Otherwise, $\deg\pi\ge0$, but $\deg\pi>0$ because $\deg\pi=0$ implies $\pi\in k[x]^\times$. By adjusting by a unit, we may also assume that $\pi$ is monic. And lastly, note that $(\pi)$ is prime means that $\pi$ is prime, so $\pi$ is irreducible.
\end{proof}
\begin{example} \label{ex:a1k}
	If $k$ is an algebraically closed field, then the only nonconstant irreducible polynomials are linear (because all nonconstant polynomials have a root and hence a linear factor), and of course any linear polynomial is irreducible. Thus,
	\[\op{Spec}k[x]=\{(0)\}\cup\{(x-\alpha):\alpha\in k\}.\]
	Set $\mf m_\alpha\coloneqq(x-\alpha)$ so that $\alpha\mapsto\mf m_\alpha$ provides a natural map from $\AA^1_k$ to $\op{Spec}k[x]$. In this way we can think of $\op{Spec}k[x]$ as $\AA^1_k$ with an extra point $(0)$.
\end{example}
\begin{remark} \label{rem:evaluation}
	Continuing from \autoref{ex:a1k}, observe that we can also recover function evaluation at a point $\alpha\in\AA^1_k$: given $f\in k[x]$, the value of $f(\alpha)$ is the image of $f$ under the canonical map
	\[k[x]\onto\frac{k[x]}{\mf m_\alpha}\cong k,\]
	where the last map is the forced $x\mapsto\alpha$. Observe running this construction at the point $(0)\in\op{Spec}k[x]$ makes the ``evaluation'' map just the identity.
\end{remark}
% \begin{example}
% 	With an algebraically closed field $k$, the spectrum of $k[x]$ consists of our prime ideals; using that $k[x]$ is a principal ideal domain, these all look like $(\pi(x))$ for either $\pi=0$ or $\pi$ an irreducible polynomial, but because $k[x]$ is algebraically closed, we find that
% 	\[\op{Spec}A=\{(0)\}\cup\{(x-a):a\in k\}.\]
% 	Notably, that each maximal ideal $\mf m=(x-a)$ has a corresponding modulo map
% 	\[k[x]\onto\frac{k[x]}{\mf m}\simeq k,\]
% 	which really means ``evaluation at $a$.'' The ideal $(0)$ doesn't do anything interesting in its ``evaluation'' map.
% \end{example}
% This notion of having modulo being an evaluation will continue to be important.
\begin{ex}
	Similar to $k[x]$, we can classify $\op{Spec}\ZZ$: all ideals are principal, so our primes look like $(p)$ where $p=0$ or is a rational prime. Namely, essentially the same proof gives
	\[\op{Spec}\ZZ=\{(0)\}\cup\{(p):p\text{ prime},p>0\}.\]
	The condition $p>0$ is to ensure that all the points on the right-hand side are distinct; certainly we can write all nonzero primes $(p)\subseteq\ZZ$ for some nonzero $(p)$, and we can adjust $p$ by a unit to ensure $p>0$. Conversely, $(p)=(q)$ with $p,q>0$ forces $p\mid q$ and $q\mid p$ and so $p=q$.
\end{ex}
% \begin{example}
% 	With $k$ not algebraically closed, we can still classify $\op{Spec}k[x]$ as
% 	\begin{equation}
% 		\op{Spec}k[x]=\{(0)\}\cup\{(\pi):\pi\text{ is irreducible},\deg\pi>0\}. \label{eq:speckx}
% 	\end{equation}
% 	As always, one can spend the time to check this; the main point is that prime (for elements) is equivalent to irreducible in a principal ideal domain.
% \end{example}
% \begin{remark}
% 	One can make the correspondence of \autoref{eq:speckx} into a bijection by forcing $\pi$ to be monic. Namely, $(\pi)=(\pi')$ if and only if they differ by a constant in $k^\times$ because $k[x]^\times=k^\times$.
% \end{remark}
We might hope to have a way to view $\op{Spec}k[x]$ as points even when $k$ is not algebraically closed.
\begin{example}
	Set $k=\QQ$. There is a map sending a nonconstant monic irreducible polynomial $\pi\in\QQ[x]$ to its roots in $\overline\QQ$, and note that this map is injective because one can recover a polynomial from its roots. Further, all the roots of $\pi$ are Galois conjugate because $\pi$ is irreducible, and a Galois orbit $S_\alpha$ of a root $\alpha$ corresponds to the polynomial
	\[\pi(x)=\prod_{\beta\in S_\alpha}(x-\beta),\]
	where $\pi(x)\in\QQ[x]$ because its coefficients are preserved the Galois action. Thus, there is a bijection between the nonconstant monic irreducible polynomials $\pi\in\QQ[x]$ and Galois orbits of elements in $\overline\QQ$.
\end{example}
So far, all of our examples have been ``dimension $0$'' (namely, a field $k$) or ``dimension $1$'' (namely, $\ZZ$ and $k[x]$). Here is an example in dimension $2$.
\begin{exe} \label{exe:speckxy}
	Let $k$ be algebraically closed. Any $\mf p\in\op{Spec}k[x,y]$ is one of the following types of prime.
	\begin{itemize}
		\item Dimension $2$: $\mf p=(0)$.
		\item Dimension $1$: $\mf p=(f(x,y))$ where $f$ is nonconstant and irreducible.
		\item Dimension $0$: $\mf p=(x-\alpha,y-\beta)$, where $\alpha,\beta\in k$.
	\end{itemize}
\end{exe}
\begin{proof}
	We follow \cite[Exercise~3.2.E]{rising-sea}. If $\mf p=(0)$, then we are done. If $\mf p$ is principal, then we can write $\mf p=(f)$ where $f\in k[x,y]$ is a prime element and hence irreducible. Observe that if $f$ is irreducible, then $f$ is also a prime element because $k[x,y]$ is a unique factorization domain.

	Lastly, we suppose that $\mf p$ is not principal. We start by finding $f,g\in\mf p$ with no nonconstant common factors. Because $\mf p\ne0$, we can find $f_0\in\mf p\setminus\{0\}$, and assume that $(f_0)$ is maximal with respect to this (namely, $f_0\notin(f_0')$ for any $f_0'\in\mf p$). Because $\mf p$ is not principal, we can find $g_0\in\mf p\setminus(f_0)$. Now, we can use unique prime factorization of $f_0$ and $g_0$ to find some $d\in k[x,y]$ such that
	\[f_0=fd\qquad\text{and}\qquad g_0=gd\]
	where $f$ and $g$ share no common factors. (Namely, $\nu_\pi(d)=\min\{\nu_\pi(f_0),\nu_\pi(g_0)\}$ for all irreducible factors $\pi\in k[x,y]$.) Note $d\notin\mf p$ by the maximality of $f_0$, so $f,g\in\mf p$ is forced.

	Continuing, embedding $f$ and $g$ into $k(x)[y]$ and using the Euclidean algorithm there, we can write
	\[af+bg=1\]
	where $a,b\in k(x)[y]$, because $f$ and $g$ have no common factors in $k(x)[y]$. (Any common factor would lift to a common factor in $k[x,y]$.\footnote{If $d(x,y)/e(x)$ divides both $f$ and $g$ in $k(x)[y]$, where $d$ and $e$ share no common factors, then $d\mid fe,ge$ in $k[x,y]$. Unique prime factorization now forces $d\mid f,g$ in $k[x,y]$.}) Clearing denominators, we see that we can find $h(x)\in k[x]\cap\mf p$, but by factoring $h(x)$ using the fact that $k$ is algebraically closed, we see that we can actually enforce $(x-\alpha)\in\mf p$ for some $\alpha\in k$.

	By symmetry, we can force $(y-\beta)\in\mf p$ for some $\beta\in\mf p$ as well, so $(x-\alpha,y-\beta)\subseteq\mf p$. However, we see that $(x-\alpha,y-\beta)$ is maximal because of the isomorphism
	\[\frac{k[x,y]}{(x-\alpha,y-\beta)}\to k\]
	by $x\mapsto\alpha$ and $y\mapsto\beta$. Thus, $\mf p=(x-\alpha,y-\beta)$ follows.
\end{proof}
% Here is a harder example, which we won't really spend the time to elaborate on.
% \begin{example}
% 	Let $k$ be algebraically closed. Then $\op{Spec}k[x,y]$ consists of $\{(0)\}$ and $\{(x-a,y-b):a,b\in k\}$ as usual, but we also get
% 	\[\{(\pi):\pi\in k[x,y]\text{ irreducible polynomials},\deg\pi>0\}.\]
% 	The main point is that $k[x,y]$ should have Krull dimension $2$; now, $(0)$ has dimension $2$ (it's the full plane), $(x-a,y-b)$ has dimension $0$ (they're points), and $(\pi)$ have dimension $1$ (they're curves). Proving that these are all the prime ideals requires some effort, and it is a special feature of our setting.
% \end{example}
\begin{remark}
	The intuition behind \autoref{exe:speckxy} is that the prime ideal $(x-\alpha,y-\beta)$ ``cuts out'' the zero-dimensional point $(\alpha,\beta)\in\AA^2_k$. Then the prime ideal $(f)$ cuts out some one-dimensional curve in $\AA^2_k$, and the prime ideal $(0)$ cuts out the entire two-dimensional plane. We have not defined dimension rigorously, but hopefully the idea is clear.
\end{remark}
\begin{remark}
	It is remarkable that the number of equations we need to cut out a variety of dimension $d$ is $2-d$. This is not always true.
\end{remark}
The point is that we seem to have recovered $\AA^1_k$ by looking at $\op{Spec}k[x]$ and $\AA^2_k$ by looking at $\op{Spec}k[x,y]$, so we can generalize this to arbitrary rings cleanly, realizing some part of \autoref{rem:wantmorealggeo}.
\begin{definition}[Affine space]
	Given a ring $R$, we define \textit{affine $n$-space over $R$} as
	\[\AA^n_R\coloneqq\op{Spec}R[x_1,\ldots,x_n].\]
\end{definition}
So far all the rings we've looked at so far have been integral domains, but it's worth pointing out that working with general rings allows more interesting information.
\begin{example}
	We classify $\op{Spec}k[\varepsilon]/\left(\varepsilon^2\right)$. Notably, all prime ideals here must correspond to prime ideals of $k[\varepsilon]$ containing $\left(\varepsilon^2\right)$ and hence contain $\rad\left(\varepsilon^2\right)=(\varepsilon)$, which allows only the prime $(\varepsilon)$. (We will make this correspondence precise later.) So $\op{Spec}k[\varepsilon]/\left(\varepsilon^2\right)$ has a single point.
\end{example}
\begin{remark}
	In some sense, $\op{Spec}k[\varepsilon]/\left(\varepsilon^2\right)$ will be able to let us talk about differential information algebraically: $\varepsilon$ is some very small nonzero element such that $\varepsilon^2=0$. So we can study a ``function'' $f\in k[x]$ locally at a point $p$ by studying $f(p+\varepsilon)$. Rigorously, $f(x)=\sum_{i=0}^da_ix^i$ has
	\[f(x+\varepsilon)=\sum_{i=0}^da_i(x+\varepsilon)^i=\sum_{i=0}^da_ix^i+\sum_{i=1}^dia_ix^{i-1}\varepsilon=f(x)+f'(x)\varepsilon.\]
	One can recover more differential information by looking at $k[\varepsilon]/\left(\varepsilon^n\right)$ for larger $n$.
\end{remark}

\subsection{The Zariski Topology}
Thus far we've defined our space. Here's our topology.
\begin{definition}[Zariski topology] \label{defi:zariski}
	Fix a ring $A$. Then, for $S\subseteq A$, we define the \textit{vanishing set}
	\[V(S)\coloneqq\{\mf p\in\op{Spec}A:S\subseteq\mf p\}\]
	Then the \textit{Zariski topology} on $\op{Spec}A$ is the topology whose closed sets are the $V(S)$.
\end{definition}
Intuitively, we are declaring $A$ as the (continuous) functions on $\op{Spec}A$, and the evaluation of the function $f\in A$ at the point $\mf p\in\op{Spec}A$ is $f\pmod{\mf p}$ (using the ideas of \autoref{rem:evaluation}). Then the vanishing sets of a continuous function must be closed, and without easy access to any other functions on $\op{Spec}A$, we will simply declare that these are all of our closed sets.

In the affine case, we can be a little more rigorous.
\begin{example}
	Set $A\coloneqq k[x_1,\ldots,x_n]$, where $k$ is algebraically closed. Then, given $f\in k[x_1,\ldots,x_n]$, we want to be convinced that $V(\{f\})$ matches up with the affine $k$-points $(a_1,\ldots,a_n)$ which vanish on $f$. Well, $(a_1,\ldots,a_n)$ corresponds to the prime ideal $(x_1-a_1,\ldots,x_n-a_n)\in\op{Spec}A$, and
	\[\{f\}\subseteq(x_1-a_1,\ldots,x_n-a_n)\]
	is equivalent to $f$ vanishing in the evaluation map
	\[k[x_1,\ldots,x_n]\onto\frac{k[x_1,\ldots,x_n]}{(x_1-a_1,\ldots,x_n-a_n)}\to k,\]
	which is equivalent to $f(a_1,\ldots,a_n)=0$. So indeed, $f$ vanishes on $(a_1,\ldots,a_n)$ if and only if the corresponding maximal ideal is in $V(\{f\})$.
\end{example}
With intuition out of the way, we should probably check that the sets $V(S)$ make a legitimate topology. To begin, here are some basic properties.
\begin{lemma}
	Fix a ring $A$.
	\begin{listalph}
		\item If subsets $S,T\subseteq A$ have $S\subseteq T$, then $V(T)\subseteq V(S)$.
		\item A subset $S\subseteq A$ has $V(S)=V((S))$.
		\item An ideal $I\subseteq A$ has $V(I)=V(\rad I)$.
	\end{listalph}
\end{lemma}
\begin{proof}
	We go in sequence.
	\begin{listalph}
		\item Note $\mf p\in V(T)$ implies that $T\subseteq\mf p$, which implies $S\subseteq\mf p$, so $\mf p\in V(S)$.
		\item Surely $S\subseteq(S)$, so $V((S))\subseteq V(S)$. Conversely, if $\mf p\in V(S)$, then $S\subseteq\mf p$, but then the generated ideal $(S)$ must also be contained in $\mf p$, so $\mf p\in V((S))$.
		\item Surely $I\subseteq\rad I$, so $V(\rad I)\subseteq V(I)$. Conversely, if $\mf p\in V(I)$, then $\mf p\subseteq I$, so
		\[\mf p\subseteq\bigcap_{\mf q\supseteq I}\mf q=\rad I,\]
		so $\mf p\in V(\rad I)$.
		\qedhere
	\end{listalph}
\end{proof}
And here are our checks.
\begin{lemma}
	Fix a ring $A$.
	\begin{listalph}
		\item $V(A)=\emp$ and $V((0))=\op{Spec}A$.
		\item Given ideals $I,J\subseteq A$, then $V(I)\cup V(J)=V(IJ)$.
		\item Given a collection of ideals $\mathcal I\subseteq\mathcal P(A)$, we have
		\[\bigcap_{I\in\mathcal I}V(I)=V\left(\sum_{I\in\mathcal I}I\right).\]
	\end{listalph}
\end{lemma}
\begin{proof}
	We go in sequence.
	\begin{listalph}
		\item All primes are proper, so no prime $\mf p$ has $A\subseteq\mf p$, so $V(A)=\emp$. Also, $0$ is an element of all ideals, so all $\mf p\in\op{Spec}A$ have $(0)\subseteq\mf p$, so $V((0))=\op{Spec}A$.
		\item Note $IJ\subseteq I,J$, so $V(I)\cup V(J)\subseteq V(IJ)$ follows. Conversely, take $\mf p\in V(IJ)$, and suppose $\mf p\notin V(I)$ so that we need $\mf p\in V(J)$. Well, $\mf p\notin V(I)$ implies $I\not\subseteq\mf p$, so we can find $a\in I\setminus\mf p$. Now, for any $b\in J$, we see
		\[ab\in IJ\subseteq\mf p,\]
		so $a\notin\mf p$ forces $b\in\mf p$. Thus, $J\subseteq\mf p$, so $\mf p\in V(J)$.
		\item Certainly any $J\in\mathcal I$ has $J\subseteq\sum_{I\in\mathcal I}I$, so $V\left(\sum_{I\in\mathcal I}I\right)\subseteq\bigcap_{I\in\mathcal I}V(I)$ follows.
		
		Conversely, suppose $\mf p\in\bigcap_{I\in\mathcal I}V(I)$. Then $I\subseteq\mf p$ for all $I\in\mathcal I$, so $\sum_{I\in\mathcal I}I\subseteq\mf p$ follows. Thus, $\mf p\in V\left(\sum_{I\in\mathcal I}I\right)$.
		\qedhere
	\end{listalph}
\end{proof}
It follows that the collection of vanishing sets is closed under finite union and arbitrary intersection, so they do indeed specify the closed sets of a topology.

\subsection{Easy Nullstellensatz}
While we're here, let's also generalize \autoref{defi:vansihingideal}.
\begin{definition}
	Fix a ring $A$. Then, given a subset $Y\subseteq\op{Spec}A$, we define
	\[I(Y)\coloneqq\bigcap_{\mf p\in Y}\mf p.\]
\end{definition}
And here is our nice version of \autoref{thm:nullstellensatz}.
\begin{proposition}
	Fix a ring $A$ and an ideal $\mf a\subseteq A$ and a subset $Y\subseteq\op{Spec}A$.
	\begin{listalph}
		\item The ideal $I(Y)$ is radical.
		\item We have that
		\[I(V(\mf a))=\rad\mf a\qquad\text{and}\qquad V(I(Y))=\overline Y,\]
		where $\overline Y$ means the closure in the Zariski topology (i.e., the ``Zariski closure'').
		\item There is a one-to-one inclusion-reversing bijection between radical ideals of $A$ and closed subsets of $\op{Spec}A$.
	\end{listalph}
\end{proposition}
\begin{proof}
	Omitted.
\end{proof}
Here are some more quick remarks.
\begin{remark}
	A ring homomorphism $\varphi\colon A\to B$ will induce a continuous map
	\[\varphi^{-1}\colon\op{Spec}B\to\op{Spec}A.\]
	We will state this more concretely later.
\end{remark}
\begin{example}
	Fix a ring $A$ and ideal $\mf a\subseteq A$. Then the surjection $A\onto A/\mf a$ induces a natural homeomorphism
	\[\op{Spec}A/\mf a\cong V(\mf a)=\{\mf p:\mf p\supseteq\mf a\}\]
	because primes of $A/\mf a$ are approximately primes of $A$ containing $\mf a$. This gives a description of the closed sets of $\op{Spec}A$ as coming from other spectra.
\end{example}
\begin{example}
	A ring homomorphism $A\to k$, where $k$ is a field, induces a map from the single closed point of $\op{Spec}k$ to $\op{Spec}A$. We call the images of these maps the ``$k$-points.''
\end{example}
\begin{example}
	Given a ring $A$ and $f\in A$, the sets
	\[D(f)\coloneqq(\op{Spec}A)\setminus V(f)=\{\mf p:f\notin\mf p\}\]
	form a base of the open sets in $\op{Spec}A$. To see this, we can see directly that
	\[(\op{Spec}A)\setminus V(T)=\bigcup_{f\in T}D(f).\]
	To turn $D(f)$ into a spectrum, we have $D(f)\cong\op{Spec}A_f$, where $A_f$ refers to the localization of $A$ at $f^\NN$. Notably, the prime ideals of $\op{Spec}A_f$ are the primes of $A$ which are disjoint from $\{f\}$. Notably, the homeomorphism
	\[\op{Spec}A_f\cong D(f)\]
	is given by the localization map $A\to A_f$.
\end{example}
\begin{remark}
	Not every open set is of the form $D(f)$ or even $D(S)$ where $S$ is a multiplicative set. For example,
	\[\AA^2_k\setminus\{(0,0)\}\subseteq\AA^2_k\]
	is an open set.
\end{remark}


\end{document}