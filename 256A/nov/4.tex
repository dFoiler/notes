% !TEX root = ../notes.tex

\documentclass[../notes.tex]{subfiles}

\begin{document}

\section{November 4}

We now leave line bundles for some time to talk about line bundles.

\subsection{Building Projective Morphisms}
Let's start with a theorem.
\begin{theorem} \label{thm:mor-to-proj-scheme}
	Fix an $S$-scheme $X$. Then there is a bijection
	\[\op{Mor}_S\left(X,\PP^n_S\right)\simeq\{(\mc L,s_0,\ldots,s_n):\mc L/X\text{ is a line bundle},s_\bullet\in\Gamma(X,\mc L)\text{ generating }\mc L\}/{\sim},\]
	where the $\sim$ is up to isomorphism.
\end{theorem}
Wait, what does generating mean?
\begin{definition}[Generating line bundle]
	Fix a scheme $X$ and a line bundle $\mc L$ on $X$. Then some global sections $S\subseteq\Gamma(X,\mc L)$ \textit{generate $\mc L$} if and only if $\{s_x:s\in S\}$ generates $\mc L_x$ as an $\mathcal O_{X,x}$-module for each $x\in X$.
\end{definition}
We will want a way to relate morphisms to projective space with line bundles, so we pick up an adjective.
\begin{definition}[Very ample]
	Fix an affine scheme $S$ and some morphism $f\colon X\to S$. Then a line bundle $\mc L$ on $X$ is \textit{very amble relative to $f$} if there is a locally closed embedding $\iota\colon X\to\PP^n_S$ such that $\mc L\cong i_*\OO_{\PP^n_S}(1)$.
	
	For a general scheme $S$ where $f$ is quasicompact, the line bundle $\mc L$ on $X$ is \textit{very amble relative to $f$} if and only if $S$ has an affine open cover $\{U_\alpha\}_{\alpha\in\lambda}$ with locally closed embeddings $\iota_\alpha\colon f^{-1}U_\alpha\into\PP^{n_\alpha}_{U_\alpha}$ such that $\mc L|_{f^{-1}U_\alpha}\cong\iota_\alpha\OO_{\PP^n_{U_\alpha}}(1)$.
\end{definition}
\begin{remark}
	We can drop the assumption that $f$ is quasicompact; see \href{https://stacks.math.columbia.edu/tag/01VR}{\texttt{01VR}}.
\end{remark}
Let's start moving towards a proof of \autoref{thm:mor-to-proj-scheme}.
\begin{ex} \label{ex:get-line-bundle-generators}
	Fix a morphism $\iota\colon X\to\PP^n_S$ with $\mc L=\iota_*\OO_{\PP^n_S}(1)$. Covering $S$ by an affine open cover, we see that $\PP^n_S$ is covered by affine pieces $\PP^n_A=\Proj A[x_0,\ldots,x_n]$, so we can pull back the various $x_i$ along $\iota_*$ and glue them together to global sections $s_i$ generating $\mc L$. In particular, if we make sure that we are always gluing the same letter $x_\bullet$ together, they will assemble properly; more precisely, we can use distinguished open subschemes common to the intersection of any two affine open subschemes of $S$ to do this gluing ``correctly.''
\end{ex}
So here is our proof.
\begin{proof}[{Proof of \autoref{thm:mor-to-proj-scheme}}]
	In one direction, given a morphism $i\colon X\to\PP^n_S$, then the arguments of \autoref{ex:get-line-bundle-generators} still carry through.

	In the other direction, we are given a line bundle $\mc L$ on $X$ generated by some global sections $s_0,\ldots,s_n$ of $\mc L$. We now define $X_j\coloneqq X_{s_j}$ to be some open subschemes of $X$, and because the $s_\bullet$ generate $\mc L$, we must have the $X_j$ covering $X$; indeed, otherwise all the $(s_\bullet)_x$ vanish simultaneously at a point $x\in X$ and thus do not generate $\mc L_x$.

	We are now ready to build our morphism to $\PP^n_S$. Define a morphism $X_j\to\AA^n_S$ given by $(s_i/s_j)_{i=0}^n$, which is legal as a tuple in $\OO_{X_j}^n$. More precisely, if $S$ is affine, then we are looking at
	\[\AA^n_{\Spec A}=\Spec\frac{A[X_0,\ldots,X_n]}{(X_j-1)}\]
	where $X_i$ will go to $s_i/s_j$, and these maps will glue. We can now glue these morphisms to $\AA^n_S\subseteq\PP^n_S$ together. This can be checked by hand, but we can explain it more deeply. Namely, for some open $U\subseteq X$ with an isomorphism $\varphi\colon\mc L|_U\simeq\OO_U$, the global sections $s_\bullet$ are inducing a map from $U$ to the lines in $\AA^{n+1}_S\setminus\{0\}$, which is exactly what $\PP^n_S$ is; now these morphisms are more canonical and will glue as such.
\end{proof}
\begin{remark}
	If the $s_\bullet$ do not generate $\mc L$, then we still get a map from an open subscheme $U\subseteq X$ to $\PP^n_S$. Namely, the problem is that the $X_\bullet$ will not fully cover $X$, but on
	\[U\coloneqq\bigcup_{j=1}^nX_j\]
	we will be just fine.
\end{remark}
\begin{exe}
	Fix $E\coloneqq V_+\left(ZY^2=X^3+aXZ^2+XZ^2+bZ^3\right)$ over an affine base $\Spec A$. We build some line bundles.
\end{exe}
\begin{proof}
	There is a canonical embedding $\iota\colon E\into\PP^2_A$. Then we note that the global sections $X$ and $Y$ and $Z$ manage to generate $\iota^*\OO(1)$. On the other hand, there is a map $g\colon E\to\PP^1_A$ by $[X:Y:Z]\mapsto[Y:Z]$, which builds the line bundle $g^*\OO(1)$ generated by the global sections $Y$ and $Z$.

	One can see that these two line bundles are the same because they both come from the same divisor $3[0:1:0]$ either by hand or by measuring the divisor on the $Z=0$ hyperplane and then pulling back using our theorem for pulling back divisors. The point here is that we are allowed to choose more global sections than we need to generate our line bundle.

	As yet another example, consider the line bundle corresponding to the divisor $2[0:1:0]$, whose global sections are the rational functions on $E$ regular on $E\setminus[0:1:0]$ and with a pole of order at most $2$ at the point $[0:1:0]$. We can generate this line bundle by the constant function $1$ and the global section $s_1=X/Z$. (Notably, outside $[0:1:0]$, we see that $Z$ vanishes.) The point is that we have extended the map given by
	\[[X:Y:Z]\mapsto[X:Z],\]
	which doesn't technically make sense as written, but we may extend them as rational maps.
\end{proof}
\begin{remark}
	We said at the start of the class that an elliptic curve is a smooth projective curve with a marked $k$-point. The reason why we want such a point is so that we can discuss divisors, which then give us line bundles, and then they will give us global sections, which will be the coordinates $X,Y,Z$ that grant us the equation for the elliptic curve!
\end{remark}
\begin{example}
	Take $X\coloneqq\PP^n_k=\Proj k[x_0,\ldots,x_n]$ with $\mc L\coloneqq\OO(d)$ for some positive integer $d$. Now, we define the $s_\bullet$ to be the monomials of degree $d$ in the $x_\bullet$. Then there is a Veronese embedding $\PP^n_k\into\PP^m_k$.
\end{example}
\begin{example}
	Again, take $X\coloneqq\PP^n_k=\Proj k[x_0,\ldots,x_n]$ with $\mc L\coloneqq\OO(d)$ for some positive integer $d$. As before, we define the $s_\bullet$ to be the monomials of degree $d$ in the $x_\bullet$. Then there is a Serge embedding $\PP^m_k\times\PP^n_k\to\PP^{mn+m+n}_k$. The global sections here look like $x_iy_j$ for our various letters.
\end{example}

\end{document}