% !TEX root = ../notes.tex

\documentclass[../notes.tex]{subfiles}

\begin{document}

\section{April 3}
Today we continue talking about weights of Weil sheaves.

\subsection{More on Semicontinuity of Weights}
There is more we can say about semicontinuity.
\begin{theorem}[Semicontinuity of weights, II]
	Fix a smooth Weil sheaf $\mc G_0$ on a scheme $X$, and let $j\colon U\subseteq X$ be an open dense subscheme.
	\begin{listalph}
		\item If $X$ is irreducible and normal, and $\mc G_0$ is irreducible, then $j^*\mc G_0$ being $\iota$-mixed implies that $\mc G_0$ is $\iota$-pure.
		\item If $X$ is connected and $j^*\mc G_0$ is $\iota$-mixed, then if $\mc G_0$ is $\iota$-pure of weight $\beta$ at any $\FF_q$-rational point of $X$, then $\mc G_0$ is $\iota$-pure of weight $\beta$.
	\end{listalph}
\end{theorem}
\begin{proof}
	We continue from \Cref{thm:semicont-weight-i}.
	\begin{listalph}
		\item Because $j^*\mc G_0$ is $\iota$-mixed, there is an open nonempty subscheme $V\subseteq X$ so that $j^*\mc G_0$ has a finite filtration by smooth sheaves with $\iota$-pure quotients. We go ahead and shrink $U$ to match $V$; by normality (using \Cref{lem:shrinking-stays-irred}), this shrinking does not affect the irreducibility of $j^*\mc G_0$. We now see that $j^*\mc G_0$ must be $\iota$-pure by irreducibility, so the result follows from \Cref{thm:semicont-weight-i}.
		\item By connectivity and a little induction, it is enough to check the result for $X$ irreducible. By passing to the reduction, we may assume that $X$ is integral, and we may pass to a cover to assume that $X$ is normal. By using a filtration of $\mc G_0$ as usual, we may assume further that $\mc G_0$ is irreducible. We now know that $\mc G_0$ is $\iota$-pure of a given weight at a single point, which by (a) above spreads purity and thus the weight everywhere.
		\qedhere
	\end{listalph}
\end{proof}
% \subsection{Real Sheaves}
We take a moment to discuss real sheaves.
\begin{definition}[real]
	Fix an embedding $\iota\colon\ov\QQ_\ell\to\CC$. A Weil sheaf $\mc G_0$ on $X$ is \textit{$\iota$-real} if $\iota\det\left(1-F_xt;\mc G_{0,\ov x}\right)$ is in $\RR[t]$ for all $\ov x\into X$.
\end{definition}
The moral of the story is that our Frobenius eigenvalues are now required to come in complex conjugate pairs. The following lemma explains how to produce real sheaves.
\begin{lemma}
	Choose an embedding $\iota\colon\ov\QQ_\ell\to\CC$. Fix a smooth Weil sheaf $\mc G_0$ which is $\iota$-pure of weight $\beta$. Then there is an $\iota$-real and $\iota$-pure sheaf $\mc F_0$ of weight $\beta$ such that $\mc G_0$ is a direct summand of $\mc F_0$.
\end{lemma}
\begin{proof}
	Define
	\[\mc F_0\coloneqq\left(\mc G_0^\lor\otimes\mc L_b\right)\oplus\mc G_0,\]
	where we choose some $b\in\ov\QQ_\ell^\times$ appropriately so that $\iota(b)=q^\beta$. A straightforward computation verifies that $\mc F_0$ is $\iota$-real and $\iota$-pure of weight $\beta$.
\end{proof}
\begin{remark}
	This is our second application of the ``twisting Weil sheaves'' $\mc L_b$, further motivating the place of Weil sheaves (over merely \'etale sheaves) in our theory.
\end{remark}

\subsection{The Sheaf-Function Correspondence}
We now say a little about the sheaf-function correspondence.
\begin{definition}
	Choose an embedding $\iota\colon\ov\QQ_\ell\to\CC$. Fix a Weil sheaf $\mc G_0$ on a scheme $X$ of finite type over $\FF_q$. Given a positive integer $m$, we define the function $f^{\mc G_0}\colon X(\FF_{q^m})\to\CC$ by
	\[f^{\mc G_0}\colon\ov x\mapsto\iota\tr\left(F_x^{m/\deg x};\mc G_{0,\ov x}\right)\]
\end{definition}
These functions allow us to do some analysis. For example, one can define an inner product
\[(f,g)_m\coloneqq\sum_{y\in X(\FF_{q^m})}f(y)\ov{g(y)},\]
yielding a square norm $\norm f_m^2\coloneqq(f,f)_m$.
\begin{remark}
	With this definition, we find
	\[\left(f^{\mc G_0},1\right)_m=\sum_{y\in X(\FF_{q^m})}\iota\tr\left(F_x^{m/\deg y};\mc G_{0,\ov y}\right)=\sum_{\substack{\text{closed }x\in X(\ov\FF_q)\\\deg (x)\mid m}}\deg(x)\iota\tr\left(F_x^{m/\deg x};\mc G_{0,\ov x}\right),\]
	so we find
	\[\frac{\iota L'(t)}{\iota L(t)}=\sum_{m=1}^\infty\left(f^{\mc G_0},1\right)_mt^{m-1}.\]
	We note that the proof of \Cref{lem:l-func-converge-by-weight} now produces a bound $\left(f^{\mc G_0},1\right)_m=O\left(q^{n(w(\mc G_0)/2+\dim X)}\right)$. Using similar techniques, one can show that $\norm {f^{\mc G_0}}_m^2$ is bounded above by
	\[\left(\max_{\text{closed }x\in X}\op{rank}\mc G_{0,\ov x}\right)^2\cdot\#X(\FF_{q^m})\cdot q^{mw(\mc G_0)}=O\left(q^{m(w(\mc G_0)+\dim X)}\right).\]
\end{remark}
The above remark motivates the following definition.
\begin{definition}
	Fix a Weil sheaf $\mc G_0$ on a scheme $X$ of finite type over $\FF_q$. Then
	\[\norm{\mc G_0}\coloneqq\sup\left\{\rho\in\RR:\limsup_{m\to\infty}\frac{\norm{f^{\mc G_0}}_m^2}{q^{m(\rho+\dim X)}}>0\right\}.\]
\end{definition}
The point of this definition is to read off the value of $w(\mc G_0)$ without an assumption that the Frobenius eigenvalues of $\mc G_0$ are actually controlled. Namely, we have recovered weights on the ``function'' side of the sheaf-function correspondence.
\begin{remark}
	Alternatively, one can check that $q^{-\norm{G_0}-\dim X}$ is the radius of convergence of the power series
	\[\varphi^{\mc G_0}(t)\coloneqq\sum_{m=1}^\infty\norm{f^{\mc G_0}}_m^2t^{m-1}.\]
	In particular, one now sees that $\norm{\mc G_0}\le w(\mc G_0)$ from (the proof of) \Cref{lem:l-func-converge-by-weight}.
\end{remark}

\end{document}