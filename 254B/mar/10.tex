% !TEX root = ../notes.tex

\documentclass[../notes.tex]{subfiles}

\begin{document}

\section{March 10}

Today we talk about morphisms of elliptic curves.

\subsection{Morphisms Are Homomorphisms}
Fix an elliptic $k$-curve $(E,e)$. Last class we showed that we can extend the group law on $E(k)$ to produce an abelian group scheme $E(k)$. As such, we might be interested in homomorphisms between elliptic curves.
\begin{theorem}
	Fix elliptic $k$-curves $(E,e)$ and $(E',e')$. Given a morphism of curves $f\colon E\to E'$, actually $f$ is a homomorphism. In particular, $f(S)\colon E(S)\to E(S')$ is a homomorphism for any $k$-scheme $S$.
\end{theorem}
\begin{remark}
	Equivalently, if we give $E$ the multiplication map $m$ and $E'$ the multiplication map $m'$, then $f$ being a homomorphism is requiring the following diagram to commute.
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJFXFx0aW1lcyBFIl0sWzAsMSwiRSdcXHRpbWVzIEUnIl0sWzEsMCwiRSJdLFsxLDEsIkUnIl0sWzAsMiwibSJdLFsxLDMsIm0nIl0sWzAsMSwiZlxcdGltZXMgZiIsMl0sWzIsMywiZiJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{E\times E} & E \\
		{E'\times E'} & {E'}
		\arrow["m", from=1-1, to=1-2]
		\arrow["{m'}", from=2-1, to=2-2]
		\arrow["{f\times f}"', from=1-1, to=2-1]
		\arrow["f", from=1-2, to=2-2]
	\end{tikzcd}\]
\end{remark}
\begin{proof}
	If $f$ is constant (sending everything to $e'$), there is nothing to say. Otherwise, $f$ is some finite morphism of curves.
	
	Roughly speaking, this will fall out of some rigidity. We build the following diagram. Build the fiber product $Z$ in the following diagram.
	% https://q.uiver.app/?q=WzAsNCxbMCwxLCJFXFx0aW1lcyBFIl0sWzEsMSwiRSdcXHRpbWVzIEUnIl0sWzEsMCwiRSciXSxbMCwwLCJaIl0sWzAsMV0sWzMsMF0sWzMsMl0sWzIsMV0sWzMsMSwiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		Z & {E'} \\
		{E\times E} & {E'\times E'}
		\arrow[from=2-1, to=2-2]
		\arrow[from=1-1, to=2-1]
		\arrow[from=1-1, to=1-2]
		\arrow[from=1-2, to=2-2]
		\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
	\end{tikzcd}\]
	Here, the bottom map sends $(x,y)\in E\times E\to(f(x+y),f(x)+f(y))$. Notably, $f$ being a homomorphism is equivalent to having $Z\to E\times E$ to be an isomorphism.
	
	However, everything is a variety, so it suffices to show that $Z(\overline k)\to E(\overline k)\times E(\overline k)$ is surjective: this will tell us that the closed embedding $Z\to E\times E$ is surjective on closed points.\footnote{In particular, we note that closed points $p$ of a $k$-scheme $X$ of finite type have residue field $k(p)$ which is finite over $k$, meaning that $p$ is a $\overline k$-point. Indeed, $k(p)$ has residue field of the form $k[x_1,\ldots,x_m]/\mf m$ for some maximal ideal $\mf m$, which must be finite over $k$ by Hilbert's Nullstellensatz.} However, $E$ is a variety, so closed points are dense, so this implies that $Z$ is topologically the same as $E\times E$. But $E\times E$ is also reduced, so it has only one closed subvariety with the same topological space, so we get to conclude that $Z=E\times E$.

	Now, a closed point of $Z$ is a pair $(x,y,z)\in E\times E\times E'$ such that $f(x+y)=z=f(x)+f(y)$, so we see that it suffices to just show that $f\colon E(\overline k)\to E'(\overline k)$ is a homomorphism. Base-changing to an algebraic closure, we just want to show that $f\colon E(k)\to E'(k)$ is a homomorphism when $k$ is algebraically closed. Namely, we have reduced to checking the result on closed points.

	We now have to examine our group law. Set $\lambda_E\colon E(k)\to\Pic^0(E)$ to be our bijection giving the group law on $E$. As such, we want the induced bottom arrow of the following diagram to be a homomorphism.
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJFKGspIl0sWzAsMSwiXFxQaWNeMEUiXSxbMSwwLCJFJyhrKSJdLFsxLDEsIlxcUGljXjBFJyJdLFswLDEsIlxcbGFtYmRhX0UiXSxbMiwzLCJcXGxhbWJkYV97RSd9Il0sWzEsMywiIiwxLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzAsMiwiZiJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{E(k)} & {E'(k)} \\
		{\Pic^0E} & {\Pic^0E'}
		\arrow["{\lambda_E}", from=1-1, to=2-1]
		\arrow["{\lambda_{E'}}", from=1-2, to=2-2]
		\arrow[dashed, from=2-1, to=2-2]
		\arrow["f", from=1-1, to=1-2]
	\end{tikzcd}\]
	Roughly speaking, this is the norm map on ideals. We define $f_*\colon\op{Div}^0E\to\op{Div}^0E'$ by sending
	\[f_*\colon x\to f(x).\]
	Now, one can show that the following diagram commutes.
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJrKEUpXlxcdGltZXMiXSxbMSwwLCJcXG9we0Rpdn1eMEUiXSxbMCwxLCJrKEUnKV5cXHRpbWVzIl0sWzEsMSwiXFxvcHtEaXZ9XjBFJyJdLFswLDEsIlxcb3B7ZGl2fSJdLFsxLDMsImZfKiJdLFswLDJdLFsyLDMsIlxcb3B7ZGl2fSJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{k(E)^\times} & {\op{Div}^0E} \\
		{k(E')^\times} & {\op{Div}^0E'}
		\arrow["{\op{div}}", from=1-1, to=1-2]
		\arrow["{f_*}", from=1-2, to=2-2]
		\arrow[from=1-1, to=2-1]
		\arrow["{\op{div}}", from=2-1, to=2-2]
	\end{tikzcd}\]
	This is a standard result in algebraic geometry about divisors, but we can also see it from number theory: it suffices to check this for a set of finite points on its multiplicity around the diagram, for which we may reduce to affine subschemes. Namely, fix an affine open subscheme $\Spec A\subseteq E$. Because $f$ is proper and quasifinite (it has finite fibers because the fibers must have dimension $0$ for nonconstant maps $f$), so $f$ is finite and in particular affine. Thus, the pre-image of $\Spec A$ is $\Spec B\subseteq E'$, so we are looking at a ring map $B\to A$. In fact, this is an embedding of rings (because $f$ is dominant), and these are Dedekind domains because $A$ and $B$ are regular (and hence normal) integral domains of dimension $1$. Then the above map can be purely checked on prime ideals, for which we refer to \cite[Proposition~14, p.~17]{serre-local-fields}.

	Anyway, the point is that we can check the commutativity of the diagram as follows.
	% https://q.uiver.app/?q=WzAsOCxbMCwwLCJFKGspIl0sWzEsMCwiRScoaykiXSxbMCwxLCJcXG9we1BpY31eMEUiXSxbMSwxLCJcXG9we1BpY31eMEUnIl0sWzIsMCwieCJdLFsyLDEsIlxcT09fRSgoeCktKGUpKSJdLFszLDAsImYoeCkiXSxbMywxLCJcXE9PX0UoKGYoeCkpLShlKSkiXSxbMCwyLCJcXGxhbWJkYV9FIiwyXSxbMSwzLCJcXGxhbWJkYV97RSd9Il0sWzAsMSwiZiJdLFsyLDMsImZfKiJdLFs0LDYsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNiw3LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzUsNywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs0LDUsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{E(k)} & {E'(k)} & x & {f(x)} \\
		{\op{Pic}^0E} & {\op{Pic}^0E'} & {\OO_E((x)-(e))} & {\OO_E((f(x))-(e))}
		\arrow["{\lambda_E}"', from=1-1, to=2-1]
		\arrow["{\lambda_{E'}}", from=1-2, to=2-2]
		\arrow["f", from=1-1, to=1-2]
		\arrow["{f_*}", from=2-1, to=2-2]
		\arrow[maps to, from=1-3, to=1-4]
		\arrow[maps to, from=1-4, to=2-4]
		\arrow[maps to, from=2-3, to=2-4]
		\arrow[maps to, from=1-3, to=2-3]
	\end{tikzcd}\]
	Now, $f_*$ is a homomorphism, so we are done.
\end{proof}
\begin{remark}
	The complex analytic situation roughly convinced us that this result ought to be true at the outset.
\end{remark}

\subsection{The Dual Isogeny}
Given a morphism of elliptic $k$-curves $f\colon (E,e)\to (E',e')$, we note that we actually have a pullback map $f^*\colon\Pic^0E\to\Pic^0E'$, so we expect to have a scheme map $f^t\colon E'\to E$ in the other direction. Notably, if we look on the level of rigidified line bundles, there is actually a natural transformation $f^*\colon\Pic^0_{E'}\Rightarrow\Pic^0_E$: explicitly, for a test $k$-scheme $S$, we send the rigidified line bundle $(\mc L',\sigma)$ to $f^*\mc L'$ with the canonical isomorphism
\[e^*f^*\mc L'\cong(e')^*\mc L'\stackrel\sigma\cong\OO_S.\]
One can check naturality and so on, but we won't bother. The point is that $E$ represents the functor $\Pic^0_E$, so we have induced a morphism $f^t\colon E'\to E$ following the above natural transformation.

\subsection{Translations}
Fix a morphism $f\colon(E,e)\to(E',e')$ of elliptic $k$-curves. As an aside, we note that not all morphisms are homomorphisms because of the condition $f(e)=e'$. For example, given a section $x\colon S\to E_S$, we can induce a translation map $t_x\colon S\to E_S$ by moving around the following diagram.
% https://q.uiver.app/?q=WzAsNCxbMCwwLCJFX1MiXSxbMSwwLCJFX1MiXSxbMCwxLCJcXHt4XFx9XFx0aW1lc19TRV9TIl0sWzEsMSwiRV9TXFx0aW1lc19TRV9TIl0sWzAsMiwiIiwwLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMCwxLCJ0X3giXSxbMywxLCJtIiwyXSxbMiwzXV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
\[\begin{tikzcd}
	{E_S} & {E_S} \\
	{\{x\}\times_SE_S} & {E_S\times_SE_S}
	\arrow[Rightarrow, no head, from=1-1, to=2-1]
	\arrow["{t_x}", from=1-1, to=1-2]
	\arrow["m"', from=2-2, to=1-2]
	\arrow[from=2-1, to=2-2]
\end{tikzcd}\]
In particular, if we imagine everything on closed points, we are basically mapping $y\mapsto x+y$. Translations give rise to the following result.
\begin{theorem}
	Fix an elliptic $k$-curve $(E,e)$ and a $k$-scheme $S$ with projection $\pi\colon E_S\to S$. For any line bundle $\mc L$ of degree $0$ on $E_S$. Then for any section $x\colon S\to E_S$ of $\pi$, we have
	\[t_x^*\mc L\otimes_{\OO_{E_S}}\pi^*x^*\mc L^{-1}\cong\mc L\otimes_{\OO_{E_S}}\pi^*e^*\mc L.\]
\end{theorem}
We will show this next class. In our key example, we will want to set $S=E$. Let $p_1,p_2\colon E\times E\to E$ be our projections, and let $p_1\colon E_E\to E$ be the projection of our base-change. The point is that $\Delta\colon E\times E\to E$ provides a section for $p_1$, which gives $t_x\colon E\times E\to E\times E$ can be tracked around to give the closed point $(x,y)\mapsto(x,x+y)$. Now, for any line bundle $\mc M$ of degree $0$, we see that
\[m^*\mc M\otimes p_1^*\mc M^{-1}\cong p_2^*\mc M\]
by tracking everything around and plugging into the previous theorem. This is called the theorem of the square.

\end{document}