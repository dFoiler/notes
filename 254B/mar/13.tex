% !TEX root = ../notes.tex

\documentclass[../notes.tex]{subfiles}

\begin{document}

Office hours are from 3PM to 5PM today.

\subsection{More on Riemann--Roch}
Here is our statement.
\begin{proposition}
	Fix a line bundle $\mc L$ on an abelian $k$-variety $A$. Then if $\#K(\mc L)$ is finite, then $\deg\varphi_\mc L=c\chi(\mc L)^2$ for some absolute constant $c$ depending only on $A$.
\end{proposition}
\begin{proof}
	Note that $\mc M\coloneqq m^*\mc L\otimes\op{pr}_1^*\mc L\otimes\op{pr}_2^*\mc L$ is just $({\id}\times\varphi_\mc L)^*\mc P$, where $\mc P$ is the Poincar\'e line bundle. We now use \Cref{lem:deg-by-euler-char} so that
	\[\chi(\mc M)=(\deg\varphi_\mc L)\chi(\mc P).\]
	Recall from the proof of \Cref{prop:ample-gives-surjective} that $R^\bullet\op{pr}_{1*}\mc M$ is supported on $K(\mc L)$, which is still finite, so the Leray spectral sequence continues to yield
	\[H^i(A\times A,\mc M)=\Gamma\left(A,R^i\op{pr}_{1*}\mc M\right).\]
	Now, the projection formula tells us that
	\[R^\bullet\op{pr}_{1*}\left(m^*\mc L\otimes\op{pr}_1^*\mc L^{-1}\otimes\op{pr}_2^*\mc L^{-1}\right)=R^i\op{pr}_{1*}\left(m^*\mc L\otimes\op{pr}_2^*\mc L\right)\otimes\mc L^{-1},\]
	but because this is supposed to be supported on the finite scheme $K(\mc L)$, the line bundle $\mc L^{-1}$ will trivialize. So
	\[H^i(A\times A,\mc M)=\Gamma\left(A,R^i\op{pr}_{1*}(m^*\mc L\otimes\op{pr}_{2}^*\mc L^{-1})\right)=H^i\left(A\times A,m^*\mc L\otimes\op{pr}_2^*\mc L^{-1}\right).\]
	This right-hand side is basically a line bundle on $A\times A$ because $(m,{\op{pr}_2})\colon A\times A\to A\times A$, so the K\"unneth formula tells us
	\[\chi(\mc M)=\chi\left(m^*\mc L\otimes\op{pr}_2^*\mc L^{-1}\right)=\chi(\mc L)\chi\left(\mc L^{-1}\right).\]
	However, (a) of \Cref{prop:riemann-roch-av} lets us write $\chi\left(\mc L^{-1}\right)=(-1)^g\chi(\mc L)$, so we conclude.
\end{proof}
\begin{remark}
	One can actually show that the degree of the map $\varphi_\mc L\colon A\to A^\lor$ is $\chi(\mc L)^2$, but we will not need this. To show this, one needs to compute $\chi(\mc P)=(-1)^g$, which is done in \cite[Part~III]{mumford}.
\end{remark}

\subsection{The Tate Functor Is Faithful}
We now shift gears to talk about homomorphisms.
\begin{theorem} \label{thm:tate-mod-faithful}
	Fix abelian $k$-varieties $A$ and $B$. Then $\op{Hom}_k(A,B)$ is a finitely generated abelian group. In fact, for primes $\ell$ not divisible by $\op{char}k$, the functor $T_\ell$ is fully faithful: explicitly, we have an injection
	\[T_\ell\colon\op{Hom}_k(A,B)\otimes_\ZZ\ZZ_\ell\to\op{Hom}_{\op{Gal}(k^\mathrm{sep}/k)}(T_\ell A,T_\ell B)\]
\end{theorem}
This result is essentially due to Weil; our exposition will follow \cite[Theorem~IV.19.3]{mumford}.
\begin{remark}
	It is an easy mistake to make to claim that $\op{Hom}_k(A,B)$ is finitely generated because the $T_\ell$ are injective, and the target is a finitely generated $\ZZ_\ell$-module. However, one can have infinitely generated abelian groups which become finitely generated upon tensoring with $\ZZ_\ell$; for example, $\ZZ_\ell$ itself will do.
\end{remark}
\begin{remark}
	\Cref{thm:tate-mod-faithful} produces a bound of the form
	\[\op{rank}_\ZZ\op{Hom}_k(A,B)\le4(\dim A)(\dim B)\]
	by bounding the $\ZZ_\ell$-rank when passing to Tate modules. This bound is not sharp in characteristic zero, but supersingular abelian varieties of positive characteristic are able to show that this bound is sharp.
\end{remark}
\begin{remark}
	It is a conjecture of Tate that, if $k$ is finitely generated over its prime field, then $T_\ell$ is actually full. (The hypothesis on $k$ is necessary: if $k=\QQ_p$, then the Galois action is unramified, so one basically only has Frobenius action, which is not enough to cut down morphisms on the Tate modules.) If $k$ is finite, the result is due to Tate; if $k$ has positive characteristic, the result is known to Zarhin. Lastly, $\op{char}k=0$ was shown by Faltings.
\end{remark}
Anyway, let's prove \Cref{thm:tate-mod-faithful}.
\begin{proof}
	By working through the isogeny class, we may assume that $A$ and $B$ are simple. Explicitly, given isogenies $\prod_iA_i\to A$ and $B\to\prod_jB_j$, we get an injection
	\[\op{Hom}_k(A,B)\otimes\ZZ_\ell\to\prod_{i,j}\op{Hom}_k(A_i,B_j)\otimes\ZZ_\ell,\]
	and a symmetric argument produces a map in the reverse direction. Notably, if $A$ and $B$ are simple, then there are no homomorphisms; otherwise, $\op{Hom}_k(A,B)$ embeds in $\op{End}(A)$. Thus, we may even assume that $A$ and $B$ are isogenous and hence equal.

	Now, \Cref{thm:deg-is-poly} kicks in to tell us that $\deg\colon\op{End}(A)\to\ZZ$ is a homogeneous polynomial of degree $2\dim A$, so $\op{End}(A)$ is torsion-free because isogenies are always going to have nonzero degree.

	To continue, we want the following geometric claim. Suppose that $M\subseteq\op{End}(A)$ is a finitely generated subgroup. Then we claim that
	\[\QQ M\cap\op{End}(A)\coloneqq\{f\in\op{End}(A):nf\in M\text{ for nonzero }n\in\ZZ\}\]
	is a finitely generated abelian group. Indeed, $\QQ M$ is a finite-dimensional $\QQ$-vector space by assumption, so $\deg|_{\QQ M}$ is a homogeneous polynomial of degree $2g$, so it is going to extend continuously to a map $\RR M\to\RR$. As such,
	\[U\coloneqq\{x\in\RR M:\left|\deg x\right|<1\}\]
	is an open neighborhood of $0$ in $\RR M$, but $U\cap\op{End}(A)=\{0\}$ because all isogenies have positive integer degree. Thus, $\QQ M\cap\op{End}(A)$ is a discrete subgroup of $\RR M$, meaning that $\QQ M\cap\op{End}(A)$ is a lattice and in particular free of finite rank.

	We now complete the proof.
	\begin{itemize}
		\item We show the injectivity. Because elements of $\op{End}_k(A)\otimes_\ZZ\ZZ_\ell$ is made of finite sums of the form $f\otimes\alpha$, it is enough to show that $T_\ell$ is injective when restricted to arbitrary finitely generated submodules $M\subseteq\op{End}A$. Now, $M$ is finitely generated and torsion-free, so it is free of finite rank, so give it a $\ZZ$-basis $f_1,\ldots,f_r$; note that this continues to be a $\ZZ_\ell$-basis of $M\otimes_\ZZ\ZZ_\ell$. We now go ahead and enlarge $M$ to $\QQ M\cap\op{End}(A)$, which we know continues to be finitely generated by the above claim. For our proof, we now suppose that
		\[T_\ell\Bigg(\sum_{i=1}^ra_if_i\Bigg)=0\]
		where $a_i\in\ZZ_\ell$ for each $i$, and we want to show that the sum vanishes.

		This is done by an approximation argument. For example, we can find an $r$-tuple of integers $(a_1',\ldots,a'_r)$ equivalent to $(a_1,\ldots,a_r)$ to arbitrary precision $\ell^N$, meaning
		\[T_\ell\Bigg(\sum_{i=1}^ra_i'f_i\Bigg)\equiv0\pmod{\ell^N},\]
		so this endomorphism $\varphi\coloneqq\sum_ia_i'f_i$ will take $T_\ell A$ to $\ell^NT_\ell A$, so its kernel contains $A\left[\ell^N\right]$. But then the nature of our isogenies means that we have some $f'$ such that $\varphi=f'\circ\left[\ell^N\right]$, meaning $\ell^N$ divides each of the $a_i'$ (by using that the $f_\bullet$ forms a basis!). Sending $N\to\infty$ forces the $a_\bullet'$ to vanish.

		\item We show that $\op{End}(A)$ is finitely generated. Because $T_\ell$ is injective for infinitely many primes $\ell$, we see that $\op{End}^0(A)$ must be a finite-dimensional $\QQ$-vector space. Thus, we get some finitely generated subgroup $M\subseteq\op{End}(A)$ such that $\QQ M=\op{End}^0(A)$, so $\op{End}(A)=\QQ M\cap\op{End}^0(A)$ is finitely generated by the claim.
		\qedhere
	\end{itemize}
\end{proof}
\begin{remark}
	As another application, we note that the N\'eron--Severi group $\op{NS}(A)$ is contained in $\op{Hom}_k(A,A^\lor)$, which is finitely generated, so $\op{NS}(A)$ is still finitely generated.
\end{remark}
\begin{remark}
	It will turn out that the degree of an isogeny $f\colon A\to B$ can be computed on the level of Tate modules.
\end{remark}
\begin{corollary}
	Fix an abelian $k$-variety $A$. Then $\op{End}^0(A)$ is a finite-dimensional semisimple algebra.
\end{corollary}
\begin{proof}
	Indeed, $\op{End}^0(A)$ for simple abelian varieties $A$ is a field of finite dimension over $\QQ$ by \Cref{thm:tate-mod-faithful}, so it is a number field. So we are just looking at some summation of number fields, which is semisimple.
\end{proof}
We close class by stating a lemma from linear algebra.
\begin{definition}
	Fix a finite-dimensional simple $\QQ$-algebra $B$. Then a \textit{trace form} is a $\QQ$-linear map $T\colon B\to\QQ$ such that $T(ab)=T(b)T(a)$. Similarly, a \textit{norm form} is a polynomial map $N\colon B\to\QQ$ such that $N(ab)=N(a)N(b)$.
\end{definition}
\begin{proposition} \label{prop:classify-norm-trace-form}
	Fix a finite-dimensional simple $\QQ$-algebra $B$ with center $K$. Then there is a trace form $\op{Tr}_{B/k}^\circ$ with $\op{Tr}^\circ(1)=1$ such that any trace form $T$ on $B$ has the form $T=\varphi\circ\op{Tr}^\circ$. Similarly, there is a norm form $\op{Nm}_{B/k}$ with $\op{Nm}^\circ(1)=1$ such that any trace form $T$ on $B$ has the form $\left({\op{Nm}_{K/\QQ}}\circ\op{Nm}^\circ\right)^i$ for positive integer $i$.
\end{proposition}
\begin{proof}
	Omitted.
\end{proof}
We remark that a similar statement works for $\QQ_\ell$.

\end{document}