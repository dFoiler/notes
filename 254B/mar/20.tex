% !TEX root = ../notes.tex

\documentclass[../notes.tex]{subfiles}

\begin{document}

\section{March 20}

Today we discuss the weak Mordell--Weil theorem.

\subsection{The Weak Mordell--Weil Theorem}
In order to avoid algebraic geometry for a little, we give intuition via the following argument.
\begin{proposition}
	Fix a number field $K$ containing the $r$th roots of unity. Then $\OO_K[1/N]^\times/\OO_K[1/n]^{\times r}$ has finite image in $H^1(\op{Gal}(\overline K/K),\mu_r)$ for any $N$ divisible by $r$.
\end{proposition}
\begin{proof}
	Note that this is roughly automatic by Dirichlet's unit theorem, which tells us that $\OO_K[1/N]$ is a finitely generated abelian group already. However, let's give a more geometric argument.

	The group scheme $\mathbb G_m\coloneqq\Spec\ZZ[x,1/x]$ represents the functor $\mathrm{Sch}\opp\to\mathrm{Ab}$ given by $S\mapsto\Gamma(S,\OO_S)^\times$. One can see this by gluing together the story on affine pieces; alternatively, we directly note that a morphism $\Spec\ZZ[x,1/x]$ amounts to choosing a global section $x\in\Gamma(S,\OO_S)$ which is a unit, which gives what we wanted.

	We now claim that $\OO_K[1/N]^\times/\OO_K[1/N]^{r\times}$ has finite image in $H^1(\op{Gal}(\overline K/K),\mu_r)$. To understand this, consider the short exact sequence
	\[0\to\mu_r\to\overline K^\times\stackrel{(-)^r}\to\overline K^\times\to0\]
	of modules over $G\coloneqq\op{Gal}(\overline K/K)$. Then the long exact sequence yields
	\[K^\times\stackrel{(-)^r}\to K^\times\stackrel\del\to H^1(G,\mu_r)\to0,\]
	where the rightmost zero is by Hilbert's theorem 90. As such, we see that there is a map
	\[\frac{\OO_K[1/N]^\times}{\OO_K[1/N]^{\times r}}\to\frac{K^\times}{K^{\times r}}\stackrel\del\cong H^1(G,\mu_r).\]
	Now, for the statement, we note there is a morphism $[r]\colon\mathbb G_m\to\mathbb G_m$ given by the ring map $\ZZ[x,1/x]\to\ZZ[x,1/x]$ by $x\mapsto x^r$. We now bound ramification. The point is that some $a\in\OO_K[1/N]^\times$ induces a morphism $\Spec\OO_K[1/N]\to\mathbb G_{m,\OO_K[1/N]}$, where we have implicitly base-changed $\mathbb G_m$ here. As such, providing an $r$th root of $a$ is equivalent to looking at the following fiber product.
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXGRpc3BsYXlzdHlsZVxcU3BlY1xcZnJhY3tcXE9PX0tbMS9OXVt4XX17XFxsZWZ0KHheci1hXFxyaWdodCl9Il0sWzEsMCwiXFxTcGVjXFxPT19LWzEvTl0iXSxbMSwxLCJcXG1hdGhiYiBHX3ttLFxcT09fS1sxL05dfSJdLFswLDEsIlxcbWF0aGJiIEdfe20sXFxPT19LWzEvTl19Il0sWzMsMiwiW3JdIl0sWzAsMV0sWzEsMiwiYSJdLFswLDNdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\displaystyle\Spec\frac{\OO_K[1/N][x]}{\left(x^r-a\right)}} & {\Spec\OO_K[1/N]} \\
		{\mathbb G_{m,\OO_K[1/N]}} & {\mathbb G_{m,\OO_K[1/N]}}
		\arrow["{[r]}", from=2-1, to=2-2]
		\arrow[from=1-1, to=1-2]
		\arrow["a", from=1-2, to=2-2]
		\arrow[from=1-1, to=2-1]
	\end{tikzcd}\]
	Namely, an $r$th root asserts asking for an $\mathcal OO_K[1/N]$-point of this fiber product; for brevity, set $A_a\coloneqq\OO_K[1/N][x]/\left(x^r-a\right)$. Now, we can factor $x^r-a$ into a product of irreducibles $F_i$ and set $L_i\coloneqq K[x]/(F_i(x))$, and we see that
	\[A_a\otimes K=\prod_iL_i.\]
	Note that there is a $\mu_r$-action on $\Spec A_a$ by permuting the $r$th roots of $A$ (here we use $\mu_r\subseteq K$), and this action permutes the factors $L_i$ in the above product decomposition because $x^r-a$ is simply going to decompose itself into linear factors over the algebraic closure, and the $\mu_r$-action permutes the factors of this decomposition.

	Now, to see our finite image, we claim that $\del(a)\in H^1(G,\mu_r)$ actually comes from $H^1(\op{Gal}(L_i/K),\mu_r)$ for any fixed $i$. Indeed, to track our boundary map, we begin by choosing some $b\in\overline K^\times$ with $b^r=a$. However, by adjusting our $b$ (by our transitive $\mu_r$-action!), we may assume that the chosen $b$ comes from $L_i$. Now, the corresponding cocycle in $H^1(G,\mu_r)$ when passed through boundary is
	\[\del a\colon\sigma\mapsto\frac{\sigma b}b,\]
	which we see will actually be defined in $L_i$. Passing this ``restricted'' cocycle through inflation provides what we want.

	We now claim that
	\[A=\prod_i\OO_{L_i}[1/N],\]
	and each $L_i$ is unramified (over $K$) outside $(N)$. We leave this claim as an exercise.
	
	This will provide the desired finiteness: $H^1(\op{Gal}(L_i/K),\mu_r)$ is finite (it's a finite group and a finite module), and there are only finitely many extensions over $K$ of bounded degree and unramified outside some constant set. (To see this second claim, we note that being unramified outside some fix set of primes enforces some boundedness of the discriminant, and we can use the Minkowski bound to finish.) Now to finish the argument, we note that even as we vary $a\in\OO_K[1/N]^\times$, there are only finitely many possibilities of the $L_i$, so we only have to check the image of finitely many maps
	\[\op{Inf}\colon H^1(\op{Gal}(L/K),\mu_r)\to H^1(\op{Gal}(\overline K/K),\mu_r),\]
	so the image remains finite.
\end{proof}
Let's now do the same thing but for elliptic curves.
\weakmwthm*
\begin{proof}
	To be concrete, we write $E$ as $y^2=x^3+ax+b$. (Namely, our number field $K$ has characteristic zero, so this factoring is safe.) Smoothness, then, amounts to requiring $4a^3-27b^2\ne0$. We now choose $N$ both divisible by $6$ and by $r$, where $a,b\in\OO_K[1/N]$ (after clearing denominators!), and $4a^3-27b^2$ is actually a unit in $\OO_K[1/N]$.

	We now define $\mc E$ to be defined by $y^2=x^3+ax+b$ (lying in projective space) to be a scheme over $S\coloneqq\Spec\OO_K[1/N]$. In fact, $\mc E$ remains a group scheme, isomorphic to $\Pic^0_{\mc E/S}$ by running the exact same argument through. (In particular, the key ingredient to defining our rigidified line bundles is having a field-valued point for any field, but this is clear because we have the point $[0:1:0]\in E(\Spec A)$ for any ring $A$.) Notably, $\mc E$ is proper over $S$ (because it's projective), and $\mc E$ is also smooth by computing the Jacobian (namely, $4a^3-27b^2$ is still a unit!).

	We now apply the valuative criterion for properness. This tells us that a map $\Spec K\to E\to\mc E$ will extend to a map $\Spec\OO_K[1/N]\to\mc E$ factoring in the following diagram.
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXFNwZWMgSyJdLFsxLDAsIlxcbWMgRSJdLFswLDEsIlxcU3BlY1xcT09fS1sxL05dIl0sWzEsMSwiXFxTcGVjXFxPT19LWzEvTl0iXSxbMiwzLCIiLDAseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFswLDJdLFsyLDEsIiEiLDEseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMCwxXSxbMSwzXV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\Spec K} & {\mc E} \\
		{\Spec\OO_K[1/N]} & {\Spec\OO_K[1/N]}
		\arrow[Rightarrow, no head, from=2-1, to=2-2]
		\arrow[from=1-1, to=2-1]
		\arrow["{!}"{description}, dashed, from=2-1, to=1-2]
		\arrow[from=1-1, to=1-2]
		\arrow[from=1-2, to=2-2]
	\end{tikzcd}\]
	Now, for our result, we fix some $a\in E(K)$ and study the same fiber product $\mc P_a\coloneqq S\times_{\mc E}\mc E$ arising in the following pullback square.
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXG1jIFBfYSJdLFsxLDAsIlMiXSxbMCwxLCJcXG1jIEUiXSxbMSwxLCJcXG1jIEUiXSxbMiwzLCJbcl0iXSxbMSwzLCJhIiwyXSxbMCwyXSxbMCwxXV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\mc P_a} & S \\
		{\mc E} & {\mc E}
		\arrow["{[r]}", from=2-1, to=2-2]
		\arrow["a"', from=1-2, to=2-2]
		\arrow[from=1-1, to=2-1]
		\arrow[from=1-1, to=1-2]
	\end{tikzcd}\]
	Let's now start the proof. We have a short exact sequence as follows.
	\[0\to E[r](\overline K)\to E(\overline K)\stackrel r\to E(\overline K)\to0.\]
	As before, the long exact sequence here induces an inclusion
	\[\del\colon\frac{E(K)}{rE(K)}\into H^1(G,E[r](K)),\]
	where $G\coloneqq\op{Gal}(\overline K/K)$. We will show that the image of this inclusion is finite, which will finish the proof. For psychological reasons, we would like to assume that $E[r](\overline K)=E[r](K)$. Well, find some field $L$ such that $E[r](\overline K)=E[r](L)$, and suppose we have the claim for $L$. Then we can draw the following diagram.
	% https://q.uiver.app/?q=WzAsNSxbMCwyLCJFKEwpL3JFKEwpIl0sWzAsMSwiRShLKS9yRShLKSJdLFsxLDIsIkheMShcXG9we0dhbH0oXFxvdmVybGluZSBML0wpLEVbcl0oXFxvdmVybGluZSBLKSkiXSxbMSwxLCJIXjEoXFxvcHtHYWx9KFxcb3ZlcmxpbmUgTC9MKSxFW3JdKFxcb3ZlcmxpbmUgSykpIl0sWzEsMCwiSF4xKFxcb3B7R2FsfShML0spLEVbcl0oXFxvdmVybGluZSBLKSkiXSxbMSwzLCJcXGRlbF9LIl0sWzAsMiwiXFxkZWxfTCJdLFsxLDBdLFszLDJdLFs0LDNdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		& {H^1(\op{Gal}(L/K),E[r](\overline K))} \\
		{E(K)/rE(K)} & {H^1(\op{Gal}(\overline L/L),E[r](\overline K))} \\
		{E(L)/rE(L)} & {H^1(\op{Gal}(\overline L/L),E[r](\overline K))}
		\arrow["{\del_K}", from=2-1, to=2-2]
		\arrow["{\del_L}", from=3-1, to=3-2]
		\arrow[from=2-1, to=3-1]
		\arrow[from=2-2, to=3-2]
		\arrow[from=1-2, to=2-2]
	\end{tikzcd}\]
	One can check by hand that the vertical right sequence is exact, so if the bottom image is finite, then exactness says that the image of the middle map has size bounded by the product of the size of $H^1(\op{Gal}(L/K),E[r](\overline K))$ and the image of $\del_L$.

	Now, similar to before, this will come down to bounding ramification and degree. Namely, for all $a\in E(K)$, we claim that there is an extension $L_a/K$ unramified outside the support of $(N)$ and of degree bounded by $r^2$ such that $\del(a)$ lies in the image of the map
	\[\op{Inf}\colon H^1(\op{Gal}(L/K),E[r](K))\to H^1(G,E[r](K)).\]
	This will complete the proof of our finiteness because there are only finitely many extensions $L$ of bounded degree and unramified outside $(N)$, so we are really only checking the image of finitely many inflation maps from the finite groups $H^1(\op{Gal}(L/K),E[r](K))$, so the total image of $\del$ will be contained in this finite union of finite sets and hence be finite.

	In fact, we can see what $L$ is explicitly: set $L$ to be the residue field of a point in $\mc P_{a,K}$.
\end{proof}

\end{document}