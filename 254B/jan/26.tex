% !TEX root = ../notes.tex

\documentclass[../notes.tex]{subfiles}

\begin{document}

Homework will be posted later today.
\begin{remark}
	There are two notions of isogeny and isomorphism of CM abelian varieties $(A,i)$ and $(A',i')$ with complex multiplication by $E$, only one of which we used last class.
	\begin{itemize}
		\item Namely, we might want isomorphism/isogeny $f\colon A\to A'$ together with an isomorphism $\alpha\colon E\to E'$ making the following diagram commute.
		% https://q.uiver.app/#q=WzAsNCxbMCwwLCJFIl0sWzAsMSwiRSJdLFsxLDAsIlxcb3B7RW5kfV4wKEEpIl0sWzEsMSwiXFxvcHtFbmR9XjAoQScpIl0sWzAsMSwiXFxhbHBoYSIsMl0sWzIsMywiZiJdLFswLDIsImkiXSxbMSwzLCJpJyJdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}
			E & {\op{End}^0(A)} \\
			E & {\op{End}^0(A')}
			\arrow["\alpha"', from=1-1, to=2-1]
			\arrow["f", from=1-2, to=2-2]
			\arrow["i", from=1-1, to=1-2]
			\arrow["{i'}", from=2-1, to=2-2]
		\end{tikzcd}\]
		\item Alternatively, we can fix $\alpha=\id_E$ in the above definition.
	\end{itemize}
	Last class we used the second notion, despite my typos. This is needed to make isomorphisms $(E,\Phi)\cong(E',\Phi')$ make sense. Anyway, to recover the needed statements for the first notion, we need to mod out by some more isomorphisms.
\end{remark}

\subsection{Finishing Classification of Simple CM Abelian Varieties}
Last class we were trying to show the following statement.
\simplecmclassification*
\begin{proof}
	The point is to restrict \Cref{cor:factor-ab-var} to simple abelian varieties. In one direction, if $(E,\Phi)$ is an extension of $(E_0,\Phi_0)$, then
	\[\CC^\Phi/\OO_E\sim\left(\CC^{\Phi_0}/\OO_{E_0}\right)^{[E:E_0]}.\]
	To see this, note that the right-hand side is isogenous to
	\[\left(\CC^{\Phi_0}/\OO_{E_0}\right)\otimes_{\OO_{E_0}}\OO_E\]
	by some sort of extension of scalars argument, and now the above abelian variety is just $\CC^\Phi/\OO_E$ by tracking through what it means to extend. The point is that the produced abelian variety is not simple.

	In the other direction, suppose $(E,\Phi)$ is primitive, and we need to check that $\CC^\Phi/\OO_E$ is simple. We will sketch the idea and refer to \cite[Proposition~3.6]{milne-cm} for the full argument.
	\begin{enumerate}
		\item Suppose $A$ has two pieces $A_1^{r_1}$ and $A_2^{r_2}$ in its decomposition into simple abelian varieties. Then we cannot find a CM field $E$ embedding into $\op{End}^0(A)$ of the required degree, due to some degree arguments.
		\item Suppose $A$ has the single piece $A^r$ in its decomposition into simple abelian varieties. But then $(E,\Phi)$ would fail to be primitive by the above discussion unless $r=1$, so we fall back to $r=1$.
		\qedhere
	\end{enumerate}
\end{proof}

\subsection{A Jacobian Example}
Let's do an example; see \cite[Section~1.7]{lang-cm} for more.

Fix a prime $p$, and define the curve $C\subseteq\PP^2_\CC$ as cut out by the equation $X^p+Y^p=Z^p$. One can check that $C$ is smooth, which tells us $g(C)=\frac12(p-1)(p-2)$; alternatively, one can project this to $\PP^1_\CC$ and use the Riemann--Hurwitz formula directly. We will want to work with the Jacobian $\op{Jac}(C)$, which is the group variety parameterized by the degree-$0$ divisor classes of $C$; one can check that $\op{Jac}(C)$ is in fact an abelian variety, which we will do later in the course.
\begin{remark}
	By some duality arguments, one finds that
	\[J(C)(\CC)=\frac{H^0(C,\Omega_1)^\lor}{H_1(C,\ZZ)},\]
	where the inclusion $H_1(C,\ZZ)\to H^0(C,\Omega_1)^\lor$ is given by integration of loops in $C$. Explicitly, one can take a degree-$0$ divisor class $\sum_{i=1}^n[P_i]-[Q_i]$ and produce an integration map
	\[\omega\mapsto\sum_{i=1}^n\int_{P_i}^{Q_i}\omega,\]
	which is well-defined up to the elements of $H_1(C,\ZZ)$. Namely, the integral $\int_{P_i}^{Q_i}$ is not a well-defined complex number because there may be multiple paths, but this path is well-defined up to an element of $H_1(C,\ZZ)$, so we are okay.
\end{remark}
\begin{remark}
	One might want to understand arithmetic objects attached to the geometric function $J(C)$, such as Galois representations or $L$-functions or periods. Having some CM structure grants us more information to answer these questions.
\end{remark}
Let's see why $J(C)$ has complex multiplication.
\begin{theorem}
	Fix everything as above. Then $J(C)$ has complex multiplication.
\end{theorem}
\begin{proof}
	For brevity, define $\mu_p$ to be the multiplicative group of $p$th roots of unity. One can give $\mu_p$ a group scheme structure by viewing it as the kernel of the $n$th power map $(-)^n\colon\mathbb G_m\to\mathbb G_m$. Anyway, the point is that $\mu_p$ has an action on $C$ by
	\[\zeta_p\colon[X:Y:Z]\mapsto[\zeta_pX:Y:Z].\]
	For example, when $p=3$, we see that $C$ itself will have complex multiplication by $\QQ(\zeta_3)$, where the action by $\zeta_3$ is given as above.

	In general, we note $\mu_p\times\mu_p$ also has an action on $C$ by
	\[(\zeta_p^i,\zeta_p^j)\colon[\zeta_p^iX:\zeta_p^jY:Z]\mapsto[\zeta_pX:Y:Z].\]
	Now, the action on $C$ provides an action on the Jacobian $J(C)$ by the degree-$0$ divisors viewpoint. (One can also see this by functoriality of the Jacobian construction, for example.)
	
	To continue, we remark that one can check that our elements of $H^0(C,\Omega^1)$ have basis given by the $1$-forms
	\[\omega_{r,s}\coloneqq x^ry^s\cdot\frac1p\cdot\frac{dx^p}{x^py^p},\]
	where $1\le r,s\le p-1$ when $r+s\le p-1$; here $x\coloneqq X/Z$ and $y\coloneqq Y/Z$ are coordinates on one of the standard affine charts of $\PP^2_\CC$. (We will not show this in detail.)
	
	So we may note that $\mu_p\times\mu_p$ acts on $\omega_{r,s}$ by $(\zeta_p^i,\zeta_p^j)\colon\omega_{r,s}\mapsto\zeta_p^{ir+js}\omega_{r,s}$. For this action, we see there are $(p-2)$ orbits, each of size $\frac12(p-1)$, where $(r,s)\sim(r',s')$ if and only if there is $m\in\ZZ/p\ZZ^\times$ such that $m(r,s)\equiv(r',s')\pmod p$.
	\begin{example}
		For example, at $p=5$, we have orbits given by
		\[\{(1,1),(2,2)\},\quad\{(1,2),(3,1)\},\quad\{1,3),(2,1)\}.\]
	\end{example}
	Each of these classes will produce a simple abelian variety with complex multiplication by $\QQ(\zeta_p)$. The point is that we can construct a curve $C_{r,s}$ with a map $C\to C_{r,s}$ via $(r,s)\mapsto\left(x^p,x^ry^s\right)$, and the holomorphic differentials of $C_{r,s}$ are the ones in the needed orbit of $(r,s)$. So we get simple factors $J(C_{r,s})\to J(C)$, each of which have complex multiplication by $\QQ(\zeta_p)$, so we are done.
\end{proof}
\begin{remark}
	This is not true for general curves $C$.
\end{remark}
\begin{remark}
	We will follow this recipe on the homework.
\end{remark}

\end{document}