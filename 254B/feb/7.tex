% !TEX root = ../notes.tex

\documentclass[../notes.tex]{subfiles}

\begin{document}

We continue.

\subsection{Preparing The Theorem of the Cube}
Let's give another application of \Cref{thm:cube}.
\begin{corollary}
	Fix an abelian $k$-variety $A$ and two points $x,y\in A$. Given a line bundle $\mc L$, we have
	\[t_{x+y}^*\mc L\cong t_x^*\mc L\otimes t_y^*\mc L.\]
\end{corollary}
\begin{proof}
	Apply \Cref{cor:cube-av} to the maps $f\equiv x$ and $g\equiv y$ and $h\coloneqq\id_A$.
\end{proof}
\begin{remark}
	Fix a finite field extension $k'/k$. Then given a line bundle $\mc L$, we produce a group homomorphism $A(k')\to\op{Pic}A_{k'}$ given by $x\mapsto t_x^*\mc L\otimes\mc L^{-1}$.
\end{remark}
We will now prove \Cref{thm:cube}. We will prove under the hypothesis where $k$ is algebraically closed. The following lemma tells us that this is fine most of the time.
\begin{lemma}
	Fix a proper geometrically integral $k$-scheme $V$. Then $\Gamma(V,\OO_V)=k$.
\end{lemma}
\begin{proof}
	This is \cite[Lemma~0BUG]{stacks}.
\end{proof}
\begin{lemma}
	Fix a proper geometrically integral $k$-scheme $V$. Given a line bundle $\mc L$ on $V$, if $\mc L_{\ov k}$ over $V_{\ov k}$ is trivial, then $\mc L\cong\OO_V$ over $k$.
\end{lemma}
\begin{proof}
	Quickly, we claim that $\mc L$ is trivial if and only if $\Gamma(V,\mc L)\ne0$ and $\Gamma\left(V,\mc L^{-1}\right)\ne0$. Certainly if $\mc L$ is trivial, then those are $\OO_V(V)\ne0$. Conversely, suppose we have nonzero elements $s\in\Gamma(V,\mc L)$ and $t\in\Gamma(V,\mc L^{-1})$, which correspond to maps $s\colon\OO_V\to\mc L$ and $t\in\mc L\to\OO_V$. But now the composite
	\[\OO_V\stackrel s\to\mc L\stackrel t\to\OO_V\]
	is given by a global section $ts\in\OO_V(V)$, which is a field and hence invertible, so we see that the above composite is invertible, so both $s$ and $t$ must be isomorphisms (e.g., by looking at stalks).

	Thus, to complete the proof, we note that
	\[\Gamma(V_{\ov k},\mc L'_{\ov k})=\Gamma(V,\mc L)\otimes_k\ov k\]
	because cohomology commutes with faithfully flat base-change, so the left-hand is nonzero if and only if $\Gamma(V,\mc L)$ is nonzero.
\end{proof}
In particular, \Cref{thm:cube} follows from the algebraically closed case.

\subsection{Review of Cohomology}
We quickly review some cohomology; we refer to \cite[Chapter~III]{hartshorne} for proofs.

Fix a morphism $f\colon X\to Y$ of Noetherian schemes. Sheaf cohomology is usually given by taking the right-derived functors $H^\bullet(X,-)\coloneqq R^\bullet\Gamma(X,-)$. We also a pushforward of $f$, which becomes a left-exact functor $f_*\colon\mathrm{QCoh}(X)\to\mathrm{QCoh}(Y)$, so we can consider its right-derived functors $R^\bullet f_*$. Further, if $f$ is proper, then $R^\bullet f_*$ sends coherent sheaves to coherent. Being right-derived functors, we have the following properties.
\begin{itemize}
	\item $R^0f_*=f_*$.
	\item Given an exact sequence $0\to\mc F'\to\mc F\to\mc F''\to0$ of quasicoherent sheaves on $X$, we have a long exact sequence
	\[0\to R^0f_*\mc F'\to R^0f_*\mc F\to R^0f_*\mc F''\stackrel{\delta^1}\to R^1f_*\mc F'\to\cdots.\]
	\item If $Y$ is affine, then $R^\bullet f_*\mc F=\widetilde{H^\bullet(X,\mc F)}$. Indeed, the point is that $\widetilde\cdot$ is exact, so we can just check that we have an isomorphism of $\delta$-functors by hand.
	\item If $Y=\Spec R$ is affine, and $X$ is separated, we can compute $H^\bullet(X,\mc F)$ via \v Cech cohomology as follows: let $\mc U$ be an open cover of $X$ by affine open subschemes, and we define the \v Cech complex $C^\bullet(\mc U,\mc F)$ of $R$-modules as follows: define
	\[C^n(\mc U,\mc F)\coloneqq\prod_{i_0<\cdots<i_n}\Gamma(U_{i_0}\cap\cdots\cap U_{i_n},\mc F)\]
	and $d^n\colon C^n(\mc U,\mc F)\to C^{n+1}(\mc U,\mc F)$ by
	\[\left(d^n\sigma\right)_{i_0<\cdots<i_{n+1}}\coloneqq\sum_{j=0}^{n+1}(-1)^j(\sigma_{i_0<\cdots<\widehat j<\ldots<i_{n+1}})|_{U_{i_0}\cap\cdots\cap U_{i_{n+1}}}.\]
	Then $H^n(X,\mc F)$ agrees with the cohomology of the \v Cech complex.
\end{itemize}
We will also want the following two big results.
\begin{theorem}[Semicontinuity] \label{thm:semicont}
	Fix a proper morphism $f\colon X\to Y$ of Noetherian schemes. Suppose that a coherent sheaf $\mc F$ is flat over $Y$; i.e., $\mc F_x$ is flat over $\OO_{Y,f(x)}$ for each $x\in X$. Then for each $n\ge0$, the function $Y\to\ZZ$ given by
	\[y\mapsto\dim_{k(y)}H^n(X_y,\mc F|_{X_y})\]
	is upper semi-continuous. In particular,
	\[\left\{y\in Y:\dim_{k(y)}H^n(X_y,\mc F|_{X_y})\le a\right\}\subseteq Y\]
	is closed for all $a\in\ZZ$.
\end{theorem}
We may be interested in equality.
\begin{theorem}[Grauert] \label{thm:grauert}
	Fix a proper morphism $f\colon X\to Y$ of Noetherian schemes. Suppose that a coherent sheaf $\mc F$ is flat over $Y$; i.e., $\mc F_x$ is flat over $\OO_{Y,f(x)}$ for each $x\in X$. The following are equivalent for some $n\ge0$.
	\begin{listroman}
		\item The function $y\mapsto\dim_{k(y)}H^n(X_y,\mc F|_{X_y})$ is constant.
		\item $R^nf_*\mc F$ is locally free of finite rank, and
		\[R^nf_*\mc F\otimes k(y)\simeq H^n(X_y,\mc F|_{X_y}).\]
	\end{listroman}
\end{theorem}

\subsection{The Seesaw Principle}
Anyway, our proof of \Cref{thm:cube} will come from the following result.
\begin{proposition}[Seesaw principle] \label{prop:seesaw}
	Fix a proper geometrically integral $k$-scheme $X$ and a $k$-variety $T$. Fix a line bundle $\mc L$ on $X\times T$.
	\begin{listalph}
		\item The set $T_1\coloneqq\left\{\text{closed }t\in T:\mc L|_{X\times\{t\}}\text{ is trivial}\right\}$ is closed.
		\item There is a line bundle $\mc M$ on $T_1$ such that $\mc L|_{X\times T_1}\cong\op{pr}_{T_1}^*(\mc M)$.
	\end{listalph}
\end{proposition}
Intuitively, what's going on here is that we are trying to bring a line bundle on the product to come from a subscheme of our test scheme $T$.
\begin{proof}[Proof of \Cref{prop:seesaw}]
	We use our cohomology results. Note that $\mc L|_{X\times\{t\}}$ trivializing is equivalent to having $\Gamma(X\times\{t\},\mc L^{\pm1}|_{X\times\{t\}})$ failing to be trivial. But applying this to $n=0$ in \Cref{thm:semicont}, we see that these are closed subsets of $T$, so (a) follows.

	For (b), we note that we are achieving equality with
	\[\dim_{k(t)}H^0\left(X\times\{t\},\mc L|_{X\times\{t\}}\right)=1\]
	always, so \Cref{thm:grauert} tells us that $\mc M\coloneqq\op{pr}_{T_1*}\mc L$ is a locally free sheaf of finite rank of rank $1$. Now, we have an adjunction map
	\[\op{pr}_{T_1}^*\mc M=\op{pr}^*_{T_1}\op{pr}_{T_1*}\mc L\to\mc L,\]
	which we can check is an isomorphism on stalks over $T_1$. By Nakayama, we may check that this is an isomorphism actually on fibers, so we may check that the result is merely nonzero on fibers (because these are just fields on the fibers), but then it's nonzero on the other side of the adjunction, so the above map must continue to be an adjunction.
\end{proof}
\begin{remark}
	Take $k=\CC$, and we will argue for \Cref{thm:cube}. For $W\coloneqq X\times Y\times Z$, we note that we have the exact sequence
	\[0\to\underline{\ZZ}\to\OO_W\stackrel{\exp}\to\OO_W^\times\to1,\]
	which produces the long exact sequence
	\[H^1(W,\OO_W)\to H^1(W,\OO_W^\times)\to H^2(W,\underline{\ZZ}).\]
	We have a line bundle $\mc L$ on $W$ which we would like to check is trivial, so with $H^1(W,\OO_W^\times)=\op{Pic}W$, we may as well check triviality through the sequence. Note the K\"unneth formula allows us to decompose $H^2(W,\underline{\ZZ})$ into smaller factors, and we see $\mc L$ trivializes in all those factors by the hypothesis on $\mc L$. So we see that our line bundle must come from $H^1(W,\OO_W)$, but it must come from something trivial there by doing a similar K\"unneth formula computation. So $\mc L$ will trivialize; note that this argument actually works on arbitrary products bigger than $3$.
\end{remark}
We will prove \Cref{thm:cube} next class. The point is to reduce to curves, where cohomology is understood.

\end{document}