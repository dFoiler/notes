\documentclass[notes.tex]{subfiles}

\begin{document}

% !TEX root = notes.tex

\subsection{Projectivity via Adjoints}
In this one-off addendum, we will prove the following amusing result.
\begin{theorem}
	Fix a ring $R$ and an $R$-module $M$. Then the following are equivalent.
	\begin{listalph}
		\item $M$ is finitely generated and projective.
		\item The functor $\op{Hom}_R(M,-)$ admits a right adjoint.
		\item The canonical natural transformation $-\otimes\op{Hom}_R(M,R)\Rightarrow\op{Hom}_R(M,-)$ (given by $x\otimes f\mapsto f(-)x$) is a natural isomorphism.
	\end{listalph}
\end{theorem}
\begin{proof}
	For brevity, set $M^\lor\coloneqq\op{Hom}_R(M,R)$. Let's start with the easy implications. Note (c) implies (b) because the functor $-\otimes M^\lor$ admits a right adjoint by the tensor--hom adjunction.
	
	Continuing, note (a) implies (c): fixing some $R$-module $X$, we would like to check that the canonical map
	\[X\otimes_RM^\lor\to\op{Hom}_R(M,X)\]
	is an isomorphism of $R$-modules. This will be done in two steps.
	\begin{enumerate}
		\item We reduce to the case where $R$ is local. By \Cref{cor:liftinglocal}, it is enough to check that the localization of this map at all maximal ideals $\mf m$ is an isomorphism. Because $M$ is finitely generated and projective, it is a direct summand of a finitely generated free $R$-module and hence finitely presented, so \Cref{prop:basechange} grants the commutative diagram
		% https://q.uiver.app/#q=WzAsOCxbMCwxLCJYX3tcXG1mIG19XFxvdGltZXNfe1Jfe1xcbWYgbX19XFxvcHtIb219X3tSX3tcXG1mIG19fShNX3tcXG1mIG19LFJfe1xcbWYgbX0pIl0sWzAsMCwiKFhcXG90aW1lc1xcb3B7SG9tfV9SKE0sUikpX3tcXG1mIG19Il0sWzEsMCwiXFxvcHtIb219X1IoTSxYKV97XFxtZiBtfSJdLFsxLDEsIlxcb3B7SG9tfV97Ul97XFxtZiBtfX0oTV97XFxtZiBtfSxYX3tcXG1mIG19KSJdLFsyLDAsIlxcZnJhYyByc1xcbGVmdCh4XFxvdGltZXMgZlxccmlnaHQpIl0sWzIsMSwiXFxmcmFje3J4fXNcXG90aW1lc1xcZnJhYyBmMSJdLFszLDAsIlxcZnJhYyByc1xcY2RvdCBmKC0peCJdLFszLDEsIlxcZnJhYyByc1xcY2RvdFxcZnJhY3tmKC0peH0xIl0sWzEsMCwiIiwwLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMSwyXSxbMiwzLCIiLDIseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFswLDNdLFs0LDYsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNiw3LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzUsNywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs0LDUsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}[cramped]
			{(X\otimes\op{Hom}_R(M,R))_{\mf m}} & {\op{Hom}_R(M,X)_{\mf m}} & {\frac rs\left(x\otimes f\right)} & {\frac rs\cdot f(-)x} \\
			{X_{\mf m}\otimes_{R_{\mf m}}\op{Hom}_{R_{\mf m}}(M_{\mf m},R_{\mf m})} & {\op{Hom}_{R_{\mf m}}(M_{\mf m},X_{\mf m})} & {\frac{rx}s\otimes\frac f1} & {\frac rs\cdot\frac{f(-)x}1}
			\arrow[from=1-1, to=1-2]
			\arrow[equals, from=1-1, to=2-1]
			\arrow[equals, from=1-2, to=2-2]
			\arrow[maps to, from=1-3, to=1-4]
			\arrow[maps to, from=1-3, to=2-3]
			\arrow[maps to, from=1-4, to=2-4]
			\arrow[from=2-1, to=2-2]
			\arrow[maps to, from=2-3, to=2-4]
		\end{tikzcd}\]
		where the vertical arrows are isomorphisms. Thus, it is now enough to show that the bottom arrow is an isomorphism, where now $R$ is local.
		
		\item We complete the proof when $R$ is local. Namely, $M$ is finitely generated and projective over a local ring and hence free by \Cref{prop:projislocallyfree}. Thus, say $M$ has basis $\{e_1,\ldots,e_n\}$, and we give $M^\lor$ the dual basis $\{e_1^\lor,\ldots,e_n^\lor\}$. Well, note then that there are isomorphisms $X\otimes M^\lor\to X^{\oplus n}$ by $\sum_i(x_i\otimes e_i^\lor)\mapsto(x_1,\ldots,x_n)$ and $\op{Hom}_R(M,X)\to X^{\oplus n}$ by $f\mapsto(f(e_1),\ldots,f(e_n))$, and the composite of these isomorphisms is given by
		\[\arraycolsep=1.4pt\begin{array}{ccccccc}
			X\otimes M^\lor &\to& X^{\oplus n} &\from& \op{Hom}_R(M,X) \\
			\sum_i(x_i\otimes e_i^\lor) &\mapsto& (x_1,\ldots,x_n) &\mapsfrom& \sum_i(x_ie_i^\lor)
		\end{array}\]
		which is exactly the canonical map.
	\end{enumerate}
	
	It remains to show that (b) implies (a). Let $G\colon\mathrm{Mod}_R\to\mathrm{Mod}_R$ denote the right adjoint. We proceed in steps.
	\begin{enumerate}
		\item To begin, we claim that $G=\op{Hom}_R(M^\lor,-)$. Indeed, we are granted natural isomorphisms
		\[\op{Hom}_R(\op{Hom}_R(M,X),Y)\cong\op{Hom}_R(X,GY)\]
		for any $X,Y\in\mathrm{Mod}_R$, so the claim follows upon plugging in $X=R$.

		\item We now prove a weak version of (c): we claim that there is a natural isomorphism $\op{Hom}_R(M,-)\cong-\otimes M^\lor$. (We are now claiming that this natural isomorphism is given by the canonical map!) Well, for brevity, define the functors $F_1\coloneqq\op{Hom}_R(M,-)$ and $F_2\coloneqq-\otimes M^\lor$. Then the tensor--hom adjunction provides an isomorphism
		\[\op{Hom}_R(F_1X,Y)\cong\op{Hom}_R(F_2X,Y)\]
		which is natural in both $X$ and $Y$. The claim now follows by applying the Yoneda lemma twice.

		Let's write this out, for completeness. For each fixed $X$, plugging in $Y=F_2X$ will send $\id_{F_2X}$ to some morphism $\alpha_X\colon F_1X\to F_2X$, so any $f\colon F_2X\to Y$ produces a commutative diagram as follows.
		% https://q.uiver.app/#q=WzAsOCxbMCwxLCJcXG9we0hvbX1fUihGXzFYLFkpIl0sWzAsMCwiXFxvcHtIb219X1IoRl8xWCxGXzJYKSJdLFsxLDAsIlxcb3B7SG9tfV9SKEZfMlgsRl8yWCkiXSxbMSwxLCJcXG9we0hvbX1fUihGXzJYLFkpIl0sWzIsMCwiXFxhbHBoYV9YIl0sWzIsMSwiZlxcY2lyY1xcYWxwaGFfWCJdLFszLDAsIlxcaWRfe0ZfMlh9Il0sWzMsMSwiZiJdLFsyLDFdLFszLDBdLFsxLDAsImZcXGNpcmMtIiwyXSxbMiwzLCJmXFxjaXJjLSJdLFs2LDQsIiIsMSx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNiw3LCIiLDEseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzQsNSwiIiwxLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs3LDUsIiIsMSx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifSwiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}[cramped]
			{\op{Hom}_R(F_1X,F_2X)} & {\op{Hom}_R(F_2X,F_2X)} & {\alpha_X} & {\id_{F_2X}} \\
			{\op{Hom}_R(F_1X,Y)} & {\op{Hom}_R(F_2X,Y)} & {f\circ\alpha_X} & f
			\arrow["{f\circ-}"', from=1-1, to=2-1]
			\arrow[from=1-2, to=1-1]
			\arrow["{f\circ-}", from=1-2, to=2-2]
			\arrow[maps to, from=1-3, to=2-3]
			\arrow[maps to, from=1-4, to=1-3]
			\arrow[maps to, from=1-4, to=2-4]
			\arrow[from=2-2, to=2-1]
			\arrow[dashed, maps to, from=2-4, to=2-3]
		\end{tikzcd}\]
		Similarly, plugging in $Y=F_1X$ will send $\id_{F_1X}$ to some morphism $\beta_X\colon F_2X\to F_1X$, so any $f\colon F_1X\to Y$ produces the commutative diagram as follows.
		% https://q.uiver.app/#q=WzAsOCxbMCwxLCJcXG9we0hvbX1fUihGXzFYLFkpIl0sWzAsMCwiXFxvcHtIb219X1IoRl8xWCxGXzFYKSJdLFsxLDAsIlxcb3B7SG9tfV9SKEZfMlgsRl8xWCkiXSxbMSwxLCJcXG9we0hvbX1fUihGXzJYLFkpIl0sWzIsMCwiXFxpZF97Rl8xWH0iXSxbMiwxLCJmIl0sWzMsMCwiXFxiZXRhX1giXSxbMywxLCJmXFxjaXJjXFxiZXRhX1giXSxbMSwyXSxbMCwzXSxbMSwwLCJmXFxjaXJjLSIsMl0sWzIsM10sWzQsNiwiIiwxLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs2LDcsIiIsMSx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw1LCIiLDEseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzUsNywiIiwxLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9LCJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}[cramped]
			{\op{Hom}_R(F_1X,F_1X)} & {\op{Hom}_R(F_2X,F_1X)} & {\id_{F_1X}} & {\beta_X} \\
			{\op{Hom}_R(F_1X,Y)} & {\op{Hom}_R(F_2X,Y)} & f & {f\circ\beta_X}
			\arrow[from=1-1, to=1-2]
			\arrow["{f\circ-}"', from=1-1, to=2-1]
			\arrow["{f\circ-}", from=1-2, to=2-2]
			\arrow[maps to, from=1-3, to=1-4]
			\arrow[maps to, from=1-3, to=2-3]
			\arrow[maps to, from=1-4, to=2-4]
			\arrow[from=2-1, to=2-2]
			\arrow[dashed, maps to, from=2-3, to=2-4]
		\end{tikzcd}\]
		In particular, it follows by tracking the diagrams around that $\alpha_X\circ\beta_X=\id_{F_2X}$ and $\beta_X\circ\alpha_X=\id_{F_1X}$.
		
		It remains to show that $\alpha_X$ and $\beta_X$ are natural in $X$. By symmetry, it's enough to show this for $\alpha$. Well, fix a map $f\colon X\to X'$, and we want to show that $\alpha_{X'}\circ F_1f=F_2f\circ\alpha_X$. This follows by tracking around the following diagram.
		% https://q.uiver.app/#q=WzAsOCxbMCwwLCJcXG9we0hvbX1fUihGXzFYJyxGXzJYJykiXSxbMCwxLCJcXG9we0hvbX1fUihGXzFYLEZfMlgnKSJdLFsxLDAsIlxcb3B7SG9tfV9SKEZfMlgnLEZfMlgnKSJdLFsxLDEsIlxcb3B7SG9tfV9SKEZfMlgsRl8yWCcpIl0sWzMsMCwiXFxpZF97Rl8yWCd9Il0sWzMsMSwiRl8yZiJdLFsyLDAsIlxcYWxwaGFfe1gnfSJdLFsyLDEsIkZfMmZcXGNpcmNcXGFscGhhX3tYfSJdLFswLDEsIi1cXGNpcmMgRl8xZiIsMl0sWzMsMV0sWzIsMF0sWzIsMywiLVxcY2lyYyBGXzJmIl0sWzQsNiwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs1LDcsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNCw1LCIiLDEseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzYsNywiIiwxLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9LCJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}[cramped]
			{\op{Hom}_R(F_1X',F_2X')} & {\op{Hom}_R(F_2X',F_2X')} & {\alpha_{X'}} & {\id_{F_2X'}} \\
			{\op{Hom}_R(F_1X,F_2X')} & {\op{Hom}_R(F_2X,F_2X')} & {F_2f\circ\alpha_{X}} & {F_2f}
			\arrow["{-\circ F_1f}"', from=1-1, to=2-1]
			\arrow[from=1-2, to=1-1]
			\arrow["{-\circ F_2f}", from=1-2, to=2-2]
			\arrow[dashed, maps to, from=1-3, to=2-3]
			\arrow[maps to, from=1-4, to=1-3]
			\arrow[maps to, from=1-4, to=2-4]
			\arrow[from=2-2, to=2-1]
			\arrow[maps to, from=2-4, to=2-3]
		\end{tikzcd}\]

		\item We describe the natural isomorphism $\op{Hom}_R(M,-)\to-\otimes M^\lor$. Let $\sum_im_i\otimes f_i$ be the image of ${\id_M}\in\op{Hom}_R(M,M)$. Then, for any $\varphi\in\op{Hom}_R(M,X)$, naturality produces a commutative diagram
		% https://q.uiver.app/#q=WzAsOCxbMCwwLCJcXG9we0hvbX1fUihNLE0pIl0sWzAsMSwiXFxvcHtIb219X1IoTSxYKSJdLFsxLDAsIk1cXG90aW1lcyBNXlxcbG9yIl0sWzEsMSwiWFxcb3RpbWVzIE1eXFxsb3IiXSxbMiwwLCJcXGlkX00iXSxbMiwxLCJcXHZhcnBoaSJdLFszLDAsIlxcc3VtX2kobV9pXFxvdGltZXMgZl9pKSJdLFszLDEsIlxcc3VtX2koXFx2YXJwaGkobV9pKVxcb3RpbWVzIGZfaSkiXSxbMCwxLCJcXHZhcnBoaVxcY2lyYy0iLDJdLFswLDJdLFsxLDNdLFsyLDMsIlxcdmFycGhpXFxvdGltZXNcXGlkX3tNXlxcbG9yfSJdLFs0LDYsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNiw3LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzUsNywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs0LDUsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
		\[\begin{tikzcd}[cramped]
			{\op{Hom}_R(M,M)} & {M\otimes M^\lor} & {\id_M} & {\sum_i(m_i\otimes f_i)} \\
			{\op{Hom}_R(M,X)} & {X\otimes M^\lor} & \varphi & {\sum_i(\varphi(m_i)\otimes f_i)}
			\arrow[from=1-1, to=1-2]
			\arrow["{\varphi\circ-}"', from=1-1, to=2-1]
			\arrow["{\varphi\otimes\id_{M^\lor}}", from=1-2, to=2-2]
			\arrow[maps to, from=1-3, to=1-4]
			\arrow[maps to, from=1-3, to=2-3]
			\arrow[maps to, from=1-4, to=2-4]
			\arrow[from=2-1, to=2-2]
			\arrow[maps to, from=2-3, to=2-4]
		\end{tikzcd}\]
		where the bottom arrow now describes the image of $\varphi$. We remark that the finiteness to generate $M$ will arise from the finite nature of the sum $\sum_i(m_i\otimes f_i)$.

		\item We show that $M^\lor$ is finitely generated in a strong way. Indeed, using the previous step, we know that the map $\op{Hom}_R(M,R)\to M^\lor$ given by
		\[f\mapsto\sum_if(m_i)f_i\]
		is an isomorphism. In particular, it does follow that the elements $\{f_i\}$ generate $M^\lor$.

		\item Because $M$ is projective, \Cref{lem:projgrabbag} tells us that there is an embedding $\iota\colon M\to R^{\oplus\alpha}$ with a splitting $\pi\colon R^{\oplus\alpha}\to M$. We claim that there is a finite subset $\beta\subseteq\alpha$ such that $\im\iota$ is contained in $R^{\oplus\beta}$. Indeed, simply define $\beta$ to be the union of the indices which are in the support of any $\iota(m_\bullet)$.

		To check that this $\beta$ works, select any index $x\in\alpha\setminus\beta$, and we would like to show that $\op{pr}_x\iota(m)=0$ for any $m\in M$. In other words, we would like to show that $({\op{pr}_x}\circ\iota)\colon M\to R$ is the zero map. But the previous step shows that this element is zero if and only if
		\[\sum_i({\op{pr}_x}\circ\iota)(m_i)f_i\]
		vanishes, which is true because $\iota(m_i)_x$ for each $m_i$.

		\item We complete the proof. We may restrict $\iota\colon M\to R^{\oplus\alpha}$ to just $\iota\colon M\to R^{\oplus\beta}$, and we restrict the splitting map $\pi\colon R^{\oplus\alpha}\to M$ down to $\pi\colon R^{\oplus\beta}\to M$. To see that $\pi$ continues to be surjective, we see that any $m\in M$ still has $\pi(\iota(m))=m$. It follows that $M$ is finitely generated.
		\qedhere
	\end{enumerate}
\end{proof}

\end{document}