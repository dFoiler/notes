% !TEX root = ../notes.tex

We localize more.

\subsection{Flat Modules}
Last time we left off with the right-exactness of the tensor product: a right-exact sequence of $R$-modules
\[A\to B\to C\to 0\]
becomes a right-exact sequence
\[M\otimes_RA\to M\otimes_RB\to M\otimes_RC\to 0\]
for any other $R$-module $M$. More formally, we have the following statement.
\begin{proposition}
	Fix $R$ a ring and $M$ an $R$-module. Then the functor $M\otimes_R-:\mathrm{Mod}_R\to\mathrm{Mod}_R$ is right-exact.
\end{proposition}
\begin{proof}
	This is a restatement of the discussion above.
\end{proof}
However, it is not true that a short exact sequence
\[0\to A\to B\to C\to 0\]
will always become a short exact sequence
\[0\to M\otimes_RA\to M\otimes_RB\to M\otimes_RC\to 0.\]
In fact, this is rather rare! Explicitly, the problem is that $M\otimes_RA\to M\otimes_RB$ might not be injectivem ruining exactness at the front, and this is the only obstruction by right-exactness.
\begin{example}
	We work in $\mathrm{Mod}_\ZZ$, and let $n$ be a positive integer. Then tensoring the short exact sequence
	\[0\to\ZZ\stackrel{\times n}\to\ZZ\to\ZZ/n\ZZ\to0\]
	with $\ZZ/n\ZZ$ will give the commutative diagram
	% https://q.uiver.app/?q=WzAsMTAsWzAsMCwiMCJdLFsxLDAsIlxcWlpcXG90aW1lc19cXFpaXFxaWi9uXFxaWiJdLFsyLDAsIlxcWlpcXG90aW1lc19cXFpaXFxaWi9uXFxaWiJdLFszLDAsIlxcWlovblxcWlpcXG90aW1lc19cXFpaXFxaWi9uXFxaWiJdLFs0LDAsIjAiXSxbMSwxLCJcXFpaL25cXFpaIl0sWzIsMSwiXFxaWi9uXFxaWiJdLFswLDEsIjAiXSxbMywxLCJcXFpaL25cXFpaXFxvdGltZXNfXFxaWlxcWlovblxcWloiXSxbNCwxLCIwIl0sWzAsMV0sWzEsMiwiXFx0aW1lcyBuIl0sWzIsM10sWzMsNF0sWzUsNiwiZiJdLFsxLDVdLFs3LDVdLFsyLDZdLFs2LDhdLFszLDhdLFs4LDldXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		0 & {\ZZ\otimes_\ZZ\ZZ/n\ZZ} & {\ZZ\otimes_\ZZ\ZZ/n\ZZ} & {\ZZ/n\ZZ\otimes_\ZZ\ZZ/n\ZZ} & 0 \\
		0 & {\ZZ/n\ZZ} & {\ZZ/n\ZZ} & {\ZZ/n\ZZ\otimes_\ZZ\ZZ/n\ZZ} & 0
		\arrow[from=1-1, to=1-2]
		\arrow["{\times n}", from=1-2, to=1-3]
		\arrow[from=1-3, to=1-4]
		\arrow[from=1-4, to=1-5]
		\arrow["f", from=2-2, to=2-3]
		\arrow[from=1-2, to=2-2]
		\arrow[from=2-1, to=2-2]
		\arrow[from=1-3, to=2-3]
		\arrow[from=2-3, to=2-4]
		\arrow[from=1-4, to=2-4]
		\arrow[from=2-4, to=2-5]
	\end{tikzcd}\]
	after tracking through the canonical isomorphisms $\ZZ\otimes_\ZZ M\cong M$. But we can see that $f$ here sends $[k]_n$ lifts to $1\otimes[k]_n$, which goes to $n\otimes[k]_n=1\otimes[0]_n$ and therefore is $[0]_n$ downstairs. So $f$ is the zero map and not injective for any $n>1$.
\end{example}
But sometimes left-exactness will be preserved, and this is a property worthy of a name.
\begin{definition}[Flat]
	Fix $R$ a ring. Then an $R$-module $M$ is \textit{flat} if and only if the functor $M\otimes_R-$ is exact.
\end{definition}
\begin{remark}
	As above, we note that $M\otimes_R-$ will always be right-exact, so $M$ will be flat if and only if it preserves the injectivity at the end of a short exact sequence. In other words, $A\into B$ induces $M\otimes_RA\into M\otimes_RB$.
\end{remark}
\begin{example}
	The ring $R$ is a flat module because $R\otimes_RM\cong M$ (canonically). Explicitly, the following diagram commutes because the map $M\cong R\otimes_RM$ is $m\mapsto1\otimes m$.
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJBIl0sWzEsMCwiQiJdLFswLDEsIlJcXG90aW1lc19SQSJdLFsxLDEsIlJcXG90aW1lc19SQiJdLFswLDEsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzIsMywiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XSxbMCwyXSxbMSwzXV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		A & B \\
		{R\otimes_RA} & {R\otimes_RB}
		\arrow[from=1-1, to=1-2]
		\arrow[from=2-1, to=2-2]
		\arrow[from=1-1, to=2-1]
		\arrow[from=1-2, to=2-2]
	\end{tikzcd}\]
	It follows $R\otimes_RA\to R\otimes_RB$ is injective when $A\into B$ is injective because this map is the composite $R\otimes_RA\cong A\into B\cong R\otimes_RB$, which is injective as the composite of injective maps.
\end{example}
\begin{example}
	Any free $R$-module $R^n$ is also flat by using direct sums. In particular, if we have $A\to B$, then the following diagram commutes.
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJSXm5cXG90aW1lc19SQSJdLFsxLDAsIlJeblxcb3RpbWVzX1JCIl0sWzAsMSwiKFJcXG90aW1lcyBBKV5uIl0sWzEsMSwiKFJcXG90aW1lcyBCKV5uIl0sWzAsMV0sWzIsM10sWzAsMl0sWzEsM11d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{R^n\otimes_RA} & {R^n\otimes_RB} \\
		{(R\otimes_R A)^n} & {(R\otimes_R B)^n}
		\arrow[from=1-1, to=1-2]
		\arrow[from=2-1, to=2-2]
		\arrow[from=1-1, to=2-1]
		\arrow[from=1-2, to=2-2]
	\end{tikzcd}\]
	Indeed, the map $R^n\otimes_R A\to(R\otimes_R A)^n$ is by $(r_k)_{k=1}^n\otimes a\mapsto(r_k\otimes a)_{k=1}^n$, so the commutativity follows. But we see that $A\into B$ means the individual maps $R\otimes_RA\to R\otimes_RB$ are injective, so the bottom row is injective. Tracking the isomorphisms through, we see the top row is also forced to be injective.
\end{example}

\subsection{Localization via Flatness}
Now let's return to discussing localization, which plays nicely with the tensor product and flatness.
\begin{proposition}
	Fix $R$ a ring and $U\subseteq R$ a multiplicatively closed subset. Then, for any $R$-module $M$, we have a canonical $R\left[U^{-1}\right]$-module isomorphism
	\[R\left[U^{-1}\right]\otimes_RM\cong M\left[U^{-1}\right]\]
	by $r/u\otimes m\mapsto r/u\cdot m$. (Here, $R\left[U^{-1}\right]\otimes_RM$ is given $R\left[U^{-1}\right]$ by multiplication on the left coordinate.)
\end{proposition}
\begin{proof}
	We define our maps in both directions explcitly. To go $\varphi:M\left[U^{-1}\right]\to R\left[U^{-1}\right]\otimes_RM$, we define
	\[\boxed{\varphi:m/u\mapsto1/u\otimes m}.\]
	For now, we have to check that this is well-defined and an $R\left[U^{-1}\right]$-module homomorphism.
	\begin{itemize}
		\item Well-defined: suppose that $\frac{m_1}{u_1}=\frac{m_2}{u_2}$. Then there is $u\in U$ so that $uu_2m_1=uu_1m_2$. It follows that
		\[\frac1{u_1}\otimes m_1=\left(\frac1{uu_1u_2}\cdot uu_2\right)\otimes m_1=\frac1{uu_1u_2}\otimes uu_2m_1=\frac1{uu_1u_2}\otimes uu_1m_2,\]
		and now running this in reverse shows $\frac1{u_1}\otimes m_1=\frac1{u_2}\otimes m_2$.
		\item Homomorphic: fix $\frac{m_1}{u_1},\frac{m_2}{u_2}\in M\left[U^{-1}\right]\otimes_RM$ and $\frac{s_1}{v_1},\frac{s_2}{v_2}\in R\left[U^{-1}\right]$. Then we compute
		\begin{align*}
			\varphi\left(\frac{s_1}{v_1}\cdot\frac{m_1}{u_1}+\frac{s_2}{v_2}\cdot\frac{m_2}{u_2}\right) &= \varphi\left(\frac{s_1m_1}{v_1u_1}+\frac{s_2m_2}{v_2u_2}\right) \\
			&= \varphi\left(\frac{v_2u_2s_1m_1+v_1u_1s_2m_2}{v_1u_1v_2u_2}\right) \\
			&= \frac1{v_1u_1v_2u_2}\otimes(v_2u_2s_1m_1+v_1u_1s_2m_2) \\
			&= \frac1{v_1u_1v_2u_2}\otimes v_2u_2s_1m_1+\frac1{v_1u_1v_2u_2}\otimes v_1u_1s_2m_2 \\
			&= \frac{s_1}{v_1u_1}\otimes m_1+\frac{s_2}{v_2u_2}\otimes m_2 \\
			&= \frac{s_1}{v_1}\left(\frac1{u_1}\otimes m_1\right)+\frac{s_2}{v_2}\left(\frac1{u_2}\otimes m_2\right) \\
			&= \frac{s_1}{v_1}\varphi\left(\frac{m_1}{u_1}\right)+\frac{s_2}{v_2}\varphi\left(\frac{m_2}{u_2}\right),
		\end{align*}
		which is what we wanted.
	\end{itemize}
	In the other direction, we note that we have a $R$-bilinear map $\psi:R\left[U^{-1}\right]\times M\to M\left[U^{-1}\right]$ by
	\[(r/u,m)\mapsto rm/u.\]
	Quickly, this is well-defined because $\frac{r_1}{u_1}=\frac{r_2}{u_2}$ promises $u$ such that $uu_2r_1=uu_1r_2$, so $uu_2r_1m=uu_1r_2m$, so $\frac{r_1m}{u_1}=\frac{r_2m}{u_2}$. Now, to check $R$-bilinaerity, it suffices to check that
	\[\psi(r/u,r_1m_1+r_2m_2)=\frac{r(r_1m_1+r_2m_2)}u=r_1\cdot\frac{rm_1}u+r_2\cdot\frac{rm_2}{u_2}=r_1\psi(r/u,m_1)+\psi(r/u,m_2),\]
	and
	\[\psi\left(s_1\cdot\frac{r_1}{u_1}+s_2\cdot\frac{r_2}{u_2},m\right)=\psi\left(\frac{u_2s_1r_1+u_1s_2r_2}{u_1u_2},m\right)=s_1\cdot\frac{r_1}{u_1}\cdot m+\frac{r_2}{u_2}\cdot m\]
	after some moving around, which is what we needed.

	The point is that we are promised an $R$-module homomorphism $\psi:R\left[U^{-1}\right]\otimes_RM\to M\left[U^{-1}\right]$ by
	\[\boxed{\psi:r/u\otimes m\mapsto rm/u}\]
	and extending linearly to the full tensor product. It suffices to show $\psi$ is inverse to to $\varphi$, which will show $\varphi$ is an $R\left[U^{-1}\right]$-module isomorphism, and the same will hold for $\psi$, finishing
	\begin{itemize}
		\item Given $m/u\in M\left[U^{-1}\right]$, we note that $(\psi\circ\varphi)(m/u)=\psi(1/u\otimes m)=1m/u=m/u$, so $\psi\circ\varphi=\id_{M\left[U^{-1}\right]}$.
		\item Given $\sum_{k=1}^n(r_k/u_k\otimes m_k)\in R\left[U^{-1}\right]\otimes_RM$, we see that
		\[(\varphi\circ\psi)\left(\sum_{k=1}^n\frac{r_k}{u_k}\otimes m_k\right)=\varphi\left(\sum_{k=1}^n\frac{r_km_k}{u_k}\right)=\sum_{k=1}^n\frac1{u_k}\otimes r_km_k=\sum_{k=1}^n\frac{r_k}{u_k}\otimes m_k,\]
		so $\varphi\circ\psi=\id_{R\left[U^{-1}\right]\otimes_RM}$.
		\qedhere
	\end{itemize}
\end{proof}
\begin{remark} \label{lem:functorialiso}
	The above canonical isomorphism is functorial in the following sense. If we have a map $\varphi:A\to B$, then the following diagram commutes, where all arrows are the induced maps.
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJSXFxsZWZ0W1Veey0xfVxccmlnaHRdXFxvdGltZXNfUkEiXSxbMSwwLCJSXFxsZWZ0W1Veey0xfVxccmlnaHRdXFxvdGltZXNfUkIiXSxbMCwxLCJBXFxsZWZ0W1Veey0xfVxccmlnaHRdIl0sWzEsMSwiQlxcbGVmdFtVXnstMX1cXHJpZ2h0XSJdLFswLDFdLFsyLDNdLFswLDJdLFsxLDNdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{R\left[U^{-1}\right]\otimes_RA} & {R\left[U^{-1}\right]\otimes_RB} \\
		{A\left[U^{-1}\right]} & {B\left[U^{-1}\right]}
		\arrow[from=1-1, to=1-2]
		\arrow[from=2-1, to=2-2]
		\arrow[from=1-1, to=2-1]
		\arrow[from=1-2, to=2-2]
	\end{tikzcd}\]
	Indeed, we take $\frac ru\otimes a\mapsto\frac ru\otimes\varphi(a)\mapsto\frac{r\varphi(a)}u$ along the top, and we take $\frac ru\otimes a\mapsto\frac{ra}u\mapsto\frac{\varphi(ra)}u=\frac{r\varphi(a)}u$ along the bottom.
\end{remark}
The above is nice because it means we technically would only need to check that $R\left[U^{-1}\right]$ exists in order to define localization of general modules. In other words, we have a somewhat unified paradigm to think about localization by merely focusing on tensor products.

For example, we have the following result, which looks like it's about localization but is actually about flatness.
\begin{proposition} \label{prop:localexact}
	Fix $R$ a ring and $U\subseteq R$ a multiplicatively closed subset. Then localization is an exact functor: given a short exact sequence of $R$-modules
	\[0\to A\to B\to C\to 0,\]
	then we have a short exact sequence of $R\left[U^{-1}\right]$-modules
	\[0\to A\left[U^{-1}\right]\to B\left[U^{-1}\right]\to C\left[U^{-1}\right]\to 0.\]
\end{proposition}
\begin{proof}
	For visual reasons, note that we have the following commutative diagram where the vertical arrows are $R\left[U^{-1}\right]$-module isomorphisms. (The diagram commutes by \autoref{lem:functorialiso}.)
	% https://q.uiver.app/?q=WzAsMTAsWzEsMSwiUlxcbGVmdFtVXnstMX1cXHJpZ2h0XVxcb3RpbWVzX1JBIl0sWzIsMSwiUlxcbGVmdFtVXnstMX1cXHJpZ2h0XVxcb3RpbWVzX1JCIl0sWzMsMSwiUlxcbGVmdFtVXnstMX1cXHJpZ2h0XVxcb3RpbWVzX1JDIl0sWzEsMCwiQVxcbGVmdFtVXnstMX1cXHJpZ2h0XSJdLFswLDAsIjAiXSxbMCwxLCIwIl0sWzIsMCwiQlxcbGVmdFtVXnstMX1cXHJpZ2h0XSJdLFszLDAsIkNcXGxlZnRbVV57LTF9XFxyaWdodF0iXSxbNCwxLCIwIl0sWzQsMCwiMCJdLFswLDFdLFs0LDNdLFs1LDBdLFszLDBdLFszLDZdLFs2LDFdLFs2LDddLFs3LDJdLFs3LDldLFsxLDJdLFsyLDhdXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		0 & {A\left[U^{-1}\right]} & {B\left[U^{-1}\right]} & {C\left[U^{-1}\right]} & 0 \\
		0 & {R\left[U^{-1}\right]\otimes_RA} & {R\left[U^{-1}\right]\otimes_RB} & {R\left[U^{-1}\right]\otimes_RC} & 0
		\arrow[from=2-2, to=2-3]
		\arrow[from=1-1, to=1-2]
		\arrow[from=2-1, to=2-2]
		\arrow[from=1-2, to=2-2]
		\arrow[from=1-2, to=1-3]
		\arrow[from=1-3, to=2-3]
		\arrow[from=1-3, to=1-4]
		\arrow[from=1-4, to=2-4]
		\arrow[from=1-4, to=1-5]
		\arrow[from=2-3, to=2-4]
		\arrow[from=2-4, to=2-5]
	\end{tikzcd}\]
	This is to say that it suffices to show that the bottom row is exact. The right-exactness of the bottom row follows from the fact that it is induced by the tensoring functor $R\left[U^{-1}\right]\otimes_R-$.

	Thus, we only need to show that localization preserves embeddings. Letting $\varphi:A\into B$ be the original map and $\overline\varphi:A\left[U^{-1}\right]\to B\left[U^{-1}\right]$ be the induced map, then we need to check that $\ker\overline\varphi$ is trivial. Well, if $\overline\varphi\left(\frac au\right)=0$ for some $\frac au\in A\left[U^{-1}\right]$, then
	\[\varphi(a)=\overline\varphi(a)=\overline\varphi\left(u\cdot\frac au\right)=u\cdot\overline\varphi\left(\frac au\right)=0.\]
	Because $\ker\varphi$ is trivial, we are forced to $a=0$, so $\frac au=0$, so indeed $\ker\overline\varphi$ is trivial.
\end{proof}
\begin{corollary}
	Fix $R$ a ring and $U\subseteq R$ a multiplicatively subset. Then $R\left[U^{-1}\right]$ is flat as an $R$-module.
\end{corollary}
\begin{proof}
	The commutative diagram in the proof of \autoref{prop:localexact} has been shown to have exact rows (over the course of the entire proof). The exactness of the bottom row shows $R\left[U^{-1}\right]$ is flat.
\end{proof}
Flatness also gives us the following result, which again looks like it's about localization but is really about flatness.
\begin{corollary}
	Fix $R$ a ring and $U\subseteq R$ a multiplicatively closed subset. Then, taking $M_1,\ldots,M_n\subseteq M$ finitely many $R$-modules of some $R$-module $M$, we get
	\[\bigcap_{i=1}^nM_i\left[U^{-1}\right]=\left(\bigcap_{i=1}^nM_i\right)\left[U^{-1}\right].\]
	Note these intersections make sense because the $M_i$ all live inside of $M$.
\end{corollary}
\begin{proof}
	The main point is that intersecitons can be realized as a kernel. Namely, consider the left-exact sequence
	\[0\to\bigcap_{i=1}^nM_i\to M\to\prod_{i=1}^nM/M_i.\tag{$*$}\label{eq:lesintersect}\]
	It is not too hard to check manually that this sequence is in fact left-exact: the map $\bigcap M_i\to M$ is an embedding and hence injective, and $x\in\ker\left(M\to\prod M/M_i\right)$ if and only if $x\in M_i$ for each $M_i$ if and only if $x\in\bigcap M_i$.
	
	Now, we would like to localize \autoref{eq:lesintersect}. Before doing so, we note that we have (canonical) isomorphisms
	\[\left(\prod_{i=1}^nM/M_i\right)[U^{-1}]\cong\left(\prod_{i=1}^nM/M_i\right)\otimes_RR[U^{-1}]\stackrel*\cong\prod_{i=1}^n\left(M/M_i\otimes_RR[U^{-1}]\right)\cong\prod_{i=1}^n(M/M_i)\left[U^{-1}\right],\]
	where $\stackrel*\cong$ is because tensor products commute with finite products (because tensor products commute with coproducts). (Here is where we use the finiteness condition!) We can actually track through these isomorphisms as sending $\frac1u([x_k]_{M_i})_{i=1}^n$ to $\left(\frac1u[x_k]_{M_i}\right)_{i=1}^n$.
	
	Continuing, we note that we can compute $(M/M_i)\left[U^{-1}\right]$ by localizing the short exact sequence
	\[0\to M_i\to M\to M/M_i\to 0,\]
	which will tell us that $\frac M{M_i}\left[U^{-1}\right]\cong\frac{M\left[U^{-1}\right]}{M_i\left[U^{-1}\right]}$ by $\frac1u[x]_{M_i}\mapsto\left[\frac xu\right]_{M_i\left[U^{-1}\right]}$. Stitching these isomoprhisms together gives us an isomorphism
	\[\left(\prod_{i=1}^nM/M_i\right)[U^{-1}]\cong\prod_{i=1}^n\frac{M\left[U^{-1}\right]}{M_i\left[U^{-1}\right]}\]
	by taking $\frac1u\left([x_k]_{M_i}\right)_{i=1}^n$ to $\left([\frac{x_k}u]_{M_i\left[U^{-1}\right]}\right)_{i=1}^n$.

	Only now we do localize \autoref{eq:lesintersect}. Upon localization, we get the left-exact sequence\footnote{Being exact implies being left-exact. If this causes discomfort, replace the left-exact sequence $0\to A\to B\to C$ with the short exact sequence $0\to A\to B\to\im(B\to C)\to0$.}
	\[0\to\left(\bigcap_{i=1}^nM_i\right)\left[U^{-1}\right]\to M\left[U^{-1}\right]\to\left(\prod_{i=1}^nM/M_i\right)\left[U^{-1}\right]\cong\prod_{i=1}^n\frac{M\left[U^{-1}\right]}{M_i\left[U^{-1}\right]},\]
	By exactness, we see that to prove the result it remains to compute the kernel of the composite
	\[M\left[U^{-1}\right]\to\left(\prod_{i=1}^nM/M_i\right)\left[U^{-1}\right]\cong\prod_{i=1}^n\frac{M\left[U^{-1}\right]}{M_i\left[U^{-1}\right]}.\]
	Well, this map sends $\frac xu$ to $\frac1u([x]_{M_i})_{i=1}^n$ to $\left([\frac xu]\right)_{i=1}^n$, so the only way for to be in the kernel is for $\frac xu\in M_i\left[U^{-1}\right]$ for each $M_i$. It follows that the kernel is
	\[\bigcap_{i=1}^nM_i\left[U^{-1}\right],\]
	which is what we wanted.
\end{proof}
We need to be careful because localization need not commute with infinite interseciotns.
\begin{example}
	Set $R:=k[x]$ and $U=R\setminus\{0\}$. The main issue is that
	\[\bigcap_{a\in k}(x-a)=(0).\]
	Now, on one hand, $(x-a)\left[U^{-1}\right]=k(x)$ because $U$ is allowed to divide by $(x-a)$. On the other hand, $(0)\left[U^{-1}\right]=(0)$ because no amount of division can make $0$ nonzero. Thus,
	\[\left(\bigcap_{a\in k}(x-a)\right)\left[U^{-1}\right]=(0)\left[U^{-1}\right]=(0)\ne k(x)=\bigcap_{a\in k}(x-a)\left[U^{-1}\right].\]
\end{example}

\subsection{Some Homological Algebra}
We start by discussing a particular adjuction. For the discussion here, fix a ring homomorphism $\psi:R\to S$. Now, if $M$ is an $S$-module, we can give $M$ an $R$-action by
\[r\cdot m:=\psi(r)m,\]
making the $R$-module $\op{Res}_RM$. In the other direction, if $N$ is an $R$-module, we can create an $S$-module $\op{Ind}_R^SN:=S\otimes_RN$, where we get an $S$-action by multiplying on the left coordinate.

Here is our claim.
\begin{proposition}
	Let $R$ and $S$ be rings with a map $\varphi:R\to S$. Then, given an $R$-module $M$ and an $S$-module $N$, we have a canonical isomorphism
	\[\op{Hom}_R(M,\op{Res}_RN)\cong\op{Hom}_S(S\otimes_RM,N).\]
	In other words, tensoring is left-adjoint to restriction.
\end{proposition}
\begin{proof}
	We simply construt the two maps manually.
	\begin{itemize}
		\item Fix $\varphi\in\op{Hom}_R(M,\op{Res}_RN)$. Then we define $\widetilde\varphi\in\op{Hom}_S(S\otimes_RM,S)$ by defining
		\[\widetilde(s\otimes m)=s\varphi(m).\]
		Again, one has to check that this is well-defined, but we will not do so here.

		\item In the other direction, we notice that we havve a map $M\to S\otimes_RM$ by $m\mapsto 1\otimes m$. But composing this map with $\widetilde\varphi$ will give a map $M\to N$ which should provide us with an inverse.\todo{excuse me}
		\qedhere
	\end{itemize}
\end{proof}

Next let's discuss base change. Again, fix a ring homomorphism $\varphi:R\to S$ to make $S$ into an $R$-algebra. Given two $R$-modules named $M$ and $N$, we can form $S$-modules
\[S\otimes_R\op{Hom}_R(M,N)\qquad\text{and}\qquad\op{Hom}_S(S\otimes_RM,S\otimes_RN).\]
In general, there need not be an isomorphism between these $S$-modules, but there is a canonical map from the left to the right.
\begin{lemma} \label{lem:basechange}
	Fix everything as above. Then there is a canonical map
	\[\alpha:S\otimes_R\op{Hom}_R(M,N)\to\op{Hom}_S(S\otimes_RM,S\otimes_RN).\]
\end{lemma}
\begin{proof}
	We start by considering the restriction $\op{Res}_R\op{Hom}_S(S\otimes_RM,S\otimes_RN)$, for which we notice that we have a canonical map
	\[\gamma:\op{Hom}_R(M,N)\to\op{Res}_R\op{Hom}_S(S\otimes_RM,S\otimes_RN),\]
	where the point to check is that $\op{Res}_R$ is a safe move. But then the adjunction above provides a canonical map
	\[\widetilde\gamma:S\otimes_R\op{Hom}_R(M,N)\to\op{Hom}_S(S\otimes_RM,S\otimes_RN),\]
	which finishes. \todo{excuse me}
\end{proof}
We would like this to be an isomorphism. One condition will be that $S$ is flat over $R$; for the other condition we have the following definition.
\begin{definition}[Finitely presented]
	An $R$-module $M$ is \textit{finitely presented} if and only if there are $M$ is finitely generated, and we can find $R^m$ an $R^n$ making the following right-exact sequence
	\[R^m\to R^n\to M\to 0.\]
	In other words, the kernel of $R^n\onto M$ is finitely generated.
\end{definition}
\begin{example}
	For example, if $R$ is Noetherian, then the kernel in $R^n$ will be a submodule and hence finitely generated.\todo{find a counterexanple}
\end{example}
Now, here is the culmination of base change.
\begin{proposition}
	Work in the set-up of \autoref{lem:basechange}. Then if $S$ is flat and $M$ is finitely presented, then the $\alpha$ from \autoref{lem:basechange} is an isomorphism.
\end{proposition}
\begin{proof}
	We begin by writing down the finite presentation
	\[R^m\to R^n\to M\to 0\]
	of $M$. Now, this gives us a left-exact sequence\todo{}
	\[0\to\op{Hom}_R(M,N)\to\op{Hom}_R(R^n,N)\to\op{Hom}_R(R^m,N),\]
	and by flatness of $S$, we get another left-exact sequence
	\[0\to S\otimes_R\op{Hom}_R(M,N)\to S\otimes_R\op{Hom}_R(R^n,N)\to\op{Hom}_R(R^m,N).\]
	Taking $\op{Hom}_S$s now, we can use the tensor-hom adjunction to give us
	\[0\to\op{Hom}_S(S\otimes_RM,S\otimes_RN)\to\op{Hom}_S(S^n\otimes_RN)\to\op{Hom}_S(S^m,S\otimes_RN).\]
	But now we have vertical isomorphisms with the previous short exact sequence in the last two entries, which induces an isomorphism $S\otimes_R\op{Hom}_R(M,N)\cong\op{Hom}_S(S\otimes_RM,S\otimes_N)$, which ends up being $\alpha$.
\end{proof}

\subsection{Support of a Module}
We have the following definition.
\begin{definition}[Support]
	Fix $R$ a ring and $M$ an $R$-module. Then we define the \textit{support} of $M$ to be
	\[\op{Supp}M:=\{\mf p\in\op{Spec}R:M_\mf p\ne0\}.\]
\end{definition}
There is an analogous notion of maximal support using $\op{mSpec}$ instead of $\op{Spec}$.

We can provide a more concrete condition for $M_\mf p=0$. Recall that we have a canonical map $\varphi:M\to M_\mf p$ by $m\mapsto m/1$. Now, $M_\mf p=0$ if and only if the kernel $\varphi$ is all of $M$. But $m\in M$ has $\frac m1=0$ if and only if there is $u\notin\mf p$ such that
\[um=0.\]
In other words, we are interested in when $\op{Ann}(m)\not\subseteq\mf p$.

Continuing, if $M$ is finitely generated, we can get a covnverse: it suffices to check $\op{Ann}(m)\not\subseteq\mf p$ merely on the generators, which we will call $m_1,\ldots,m_n$. So we are promised $u_1,\ldots,u_n\notin\mf p$ such that $u_\bullet m_\bullet=0$. However, this implies that the product
\[u:=\prod_{k=1}^nu_k\notin\mf p\]
will kill all of $M$ anyways. Thus, $M_\mf p=0$ if and only if $\op{Ann}(m)\not\subseteq\mf p$. So we get the following statement.
\begin{proposition}
	Fix $R$ a ring. If $M$ is a finitely generated $R$-module, then
	\[\op{Supp}M=\{\mf p\in\op{Spec}M:\op{Ann}M\subseteq\mf p\}.\]
\end{proposition}
In particular, this is a Zariski-closed subset of $\op{Spec}R$!\todo{can all ideals appear as Ann M?}
\begin{example}
	Let $M$ be a simple module, which means that it has no proper nonzero submodules. Then, by considering the map $r\mapsto re_M$, we get a short exact sequence
	\[0\to\op{Ann}M\to R\to M\to 0,\]
	where the right-exactness is by simplicity. Thus, we can write $M=R/I$, where $I$ is some maximal ideal (maximal by simplicity), so it follows $\op{Supp}M=\{I\}$.
\end{example}
\begin{example}
	Consider a ring $R$, in which case $\op{Ann}R=(0)$, so $\op{Supp}M=\op{Spec}R$.
\end{example}
\begin{example}
	If we set $M=(0)$, then everyone in $R$ will support $(0)$, so $\op{Ann}M=R$. It follows that $\op{Supp}(0)=\emp$.
\end{example}
The support also behaves well in short exact sequences.
\begin{proposition}
	Suppose we have a short exact sequence
	\[0\to A\to B\to C\to 0\]
	of $R$-modules. Then $\op{Supp}B=\op{Supp}A\cup\op{Supp}C$.
\end{proposition}
\begin{proof}
	The main point is that localization is an exact functor. Namely, if $\mf p$ is any prime of $R$, then we get a short exact sequence
	\[0\to A_\mf p\to B_\mf p\to C_\mf p\to0.\]
	In particular, $B_\mf p\ne0$ if and only if $A_\mf p\ne0$ or $C_\mf p\ne0$, from which the statement follows.
\end{proof}
Additinally, we can learn something from the module itself by studying the support.
\begin{proposition}
	Fix an $R$-module $M$. Then $M=0$ if and only if $M_\mf m=0$ for all maximal ideals $\mf m\subseteq R$. In particular, $M=0$ if and only if $\op{Supp}M=\op{Spec}R$.
\end{proposition}
\begin{proof}
	We have already discussed the forwards direction. In the other direction, supose that the $R$-module $M$ has $R_\mf m$ for every maximal ideal $\mf m\subseteq R$.

	Suppose for the sake of contradiction we can find $m\in M\setminus\{0\}$. Then $\op{Ann}(m)$ is an $R$-ideal, and it must have $1\notin\op{Ann}(m)$ because $m\ne0$. Thus, we can place $\op{Ann}(m)\subseteq\mf m$ inside of some maximal ideal, but then $\frac m1\in M_\mf m$ is nonzero by our dicussion before. This finishes.
\end{proof}
\begin{corollary}
	Fix $\varphi:M\to N$ an $R$-module homomorphism and $\mf m\subseteq R$ a maximal ideal. Then we are promised a localized map $\varphi_\mf m:M_\mf m\to N_\mf p$. Then $\varphi_\mf m$ is injective/surjective/isomorphic for all maximal ideals $\mf m$ if and only if $\varphi$ is as well.
\end{corollary}
\begin{proof}
	Being injective is equivalent to saying that $\ker\varphi_\mf m=(\ker\varphi)_\mf m$ is zero, and being surjective is equivalent to saying that $\coker\varphi_\mf m=(\coker\varphi)_\mf m$ is zero. So we are done by the previous proposition.
\end{proof}
We continue our fact-collection.
\begin{proposition}
	Fix $M$ and $N$ finitely generated $R$-modules. Then
	\[\op{Supp}(M\otimes_RN)=\op{Supp}M\cap\op{Supp}N.\]
\end{proposition}
\begin{proof}
	We leave this as an exercise.\todo{please why}
\end{proof}

\subsection{Tensoring Algebras}
For the next construction, we note that if $S$ and $T$ are $R$-algebras, then $S\otimes_RT$ is an $R$-algebra, where our multiplication is defined by
\[(s_1\otimes t_1)(s_2\otimes t_2)=(s_1s_2)\otimes(t_1t_2).\]
One can run through the checks that this will be an $R$-algebra.

Concretely, we have the following.
\begin{exe}
	If we have two free $k$-algebras $k[x_1,\ldots,x_n]$ and $k[y_1,\ldots,y_m]$, then we claim that
	\[[x_1,\ldots,x_n]\otimes_kk[y_1,\ldots,y_m]\]
	is freely generated by the elements of the form $x_\bullet\otimes1$ and $1\otimes y_\bullet$.
\end{exe}
\begin{remark}
	Geometrically, we can write this as $A\left(\AA^n(k)\right)\otimes_kA\left(\AA^m(k)\right)\cong A\left(\AA^n(k)\times\AA^m(k)\right)$, which makes more immediate sense.
\end{remark}
More generally, the following is true.
\begin{proposition}
	Fix affine algebraic sets $X$ and $Y$. Then $A(X\times Y)=A(X)\otimes_kA(Y)$.
\end{proposition}
\begin{proof}
	Omitted.
\end{proof}
\begin{remark}
	One can generalize this construction to fiber products.
\end{remark}
Next class we will finish up localization by discussing modules of finite length.