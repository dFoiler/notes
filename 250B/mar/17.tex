% !TEX root = ../notes.tex

We're back, y'all.

\subsection{A Quick Exercise}
Let's start with an exercise, to review for the midterm. Recall the following result.
\begin{lem}[Eisenbud 6.4]
	Fix $R$ a ring and $S:=R[x_1,\ldots,x_n]/(f)$, where $f$ is some polynomial. Then $S$ is a flat $R$-algebra if and only if $\op{cont}f=R$.
\end{lem}
\begin{proof}
	This was on the homework.
\end{proof}
And here is our exercise.
\begin{exe}
	Fix $R:=k[x,y]$ with maximal ideal $\mf m:=(x,y)$, and we consider the blow-up ring
	\[S:=\op B_\mf mR:=R\oplus\mf m\oplus\mf m^2\oplus\cdots.\]
	Now, we ask if $S$ is a flat $R$-module.
\end{exe}
\begin{proof}
	Heuristically, the fiber at any point except for $(0,0)$ is a point, but the fiber over $(0,0)$ is the full projective line. So these fibers are pretty poorly behaved, so we expect this to not be a flat module.

	Well, by staring hard at our grading, we see that
	\[S\cong k[x,y,tx,ty]\cong\frac{k[x,y,z,w]}{(yz-xw)},\]
	where the point is that we induce the right-hand isomorphism by $tx\mapsto z$ and $ty\mapsto w$. As such, we see that this module is not flat because the polynomial $f(z,w)=yz-xw$ has coefficients which generate $\op{cont}(f)=(x,y)\ne R$. In particular, we have ``detected'' the fiber over the origin.
\end{proof}

\subsection{The Krull Dimension}
\begin{warn}
	For effectively the rest of the course, all of our rings will be Noetherian. This hypothesis will only occasionally be stated.
\end{warn}
Recall the following definition.
\krulldimdef*
\noindent This gives rise to the following definitions.
\begin{definition}[Krull dimension, ideals]
	Fix a ring $R$ and an ideal $I\subseteq R$. Then we define the \textit{dimension} of an ideal $I$ to be $\dim I:=\dim R/I$.
\end{definition}
\begin{definition}[Codimension]
	Fix $I$ a proper ideal of a ring $R$.
	\begin{itemize}
		\item If $I=\mf p$ is a prime ideal of $R$, then we define the \textit{codimension} as $\codim\mf p:=\dim R_\mf p$.
		\item More generally, we define the \textit{codimension} as
		\[\codim I:=\min_{\mf p\subseteq I}\codim\mf p,\]
		where the minimum is over all prime ideals $\mf p$ containing $I$.
	\end{itemize}
\end{definition}
We quickly check the well-definedness of these definitions. To start, we give more hands-on characterizations of these definitions.
\begin{lemma} \label{lem:dimisascend}
	Fix an ideal $I$ of a ring $R$. Then $\dim I$ is equal to the length of the longest chain of primes
	\[I\subseteq\mf p_0\subsetneq\mf p_1\subsetneq\cdots\subsetneq\mf p_d\]
	in $R$.
\end{lemma}
\begin{proof}
	Let $\pi:R\onto R/I$ be the natural projection. In one direction, suppose that
	\[I\subseteq\mf p_0\subsetneq\mf p_1\subsetneq\cdots\subsetneq\mf p_d\]
	is the longest possible such chain of primes in $R$. Then, projecting down via $\pi$, we get a chain
	\[\pi\mf p_0\subseteq\pi\mf p_1\subseteq\cdots\subseteq\pi\mf p_d.\tag{1}\label{eq:chaininquotient}\]
	We have two checks.
	\begin{itemize}
		\item If $\mf p$ is a prime ideal containing $I$, then we claim $\pi\mf p$ is also a prime ideal. Indeed, if $(a+I)(b+I)\in\pi\mf p$ implies $ab+I\in\pi\mf p$ implies $ab+x\in\mf p$ for some $x\in I$ implies $ab\in\mf p$ because $I\subseteq\mf p$.
		
		Thus, because $\mf p$ is prime, $a\in\mf p$ or $b\in\mf p$, so $a+I\in\pi\mf p$ or $b+I\in\pi\mf p$.

		\item If $I_1\subsetneq I_2$ are distinct ideals containing $I$, then we claim $\pi(I_1)\subsetneq\pi(I_2)$. Indeed, we claim that $\pi(I_1)=\pi(I_2)$ would imply $I_1=I_2$; by symmetry, it suffices to show that $\pi(I_1)\subset\pi(I_2)$ implies $I_1\subseteq I_2$.

		Well, fix any $a\in I_1$. Then $\pi(a)\in\pi(I_1)\subseteq\pi(I_2)$, so $a+I\in\pi(I_2)$, so there exists $b\in I_2$ such that
		\[a+I=b+I.\]
		Then $a-b\in I\subseteq I_2$, so $a\in b+I_2=I_2+I_2=I_2$. Thus, $I_1\subseteq I_2$.

		By symmetry, we see that $\pi(I_2)\subseteq\pi(I_1)$ implies $I_2\subseteq I_1$ as well. Thus, $\pi(I_1)=\pi(I_2)$ implies both $\pi(I_1)\subseteq\pi(I_2)$ and $\pi(I_2)\subseteq\pi(I_1)$ and so $I_1\subseteq I_2$ and $I_2\subseteq I_1$, giving $I_1=I_2$.
	\end{itemize}
	Thus, \autoref{eq:chaininquotient} provides a chain of distinct primes in $R/I$, so $d\le\dim R/I$.

	In the other direction, suppose that we have chosen our largest possible chain of distinct primes
	\[\mf p_0\subsetneq\mf p_1\subsetneq\cdots\subsetneq\mf p_{\dim R/I}\]
	in $R/I$. Pulling backwards, we get a chain of primes
	\[\pi^{-1}\mf p_0\subseteq\pi^{-1}\mf p_1\subseteq\cdots\subseteq\pi^{-1}\mf p_{\dim R/I}.\tag{2}\label{eq:chainabovei}\]
	Notably, $(0)\subseteq\mf p_k$ for each prime $\mf p_k\subseteq R/I$ above, so $I=\pi^{-1}(0)\subseteq\pi^{-1}\mf p_k$ for each prime $\pi^{-1}\mf p_k$, so all these primes contain $I$.

	Additionally, we check that distinct $R/I$-ideals $I_1\ne I_2$ will have $\pi^{-1}(I_1)\ne\pi^{-1}(I_2)$. Indeed, we claim that $\pi^{-1}(I_1)=\pi^{-1}(I_2)$ implies $I_1=I_2$. To see this, we show $\pi^{-1}(I_1)\subseteq\pi^{-1}(I_2)$ implies $I_1\subseteq I_2$. Well, pick up $a+I\in I_1$ so that $\pi(a)\in I_1$, implying
	\[a\in\pi^{-1}(I_1)\subseteq\pi^{-1}(I_2)\]
	and hence $a+I=\pi(a)\in I_2$ as well.
	
	Now, by symmetry, we see that $\pi^{-1}(I_2)\subseteq\pi^{-1}(I_1)$ will also imply $I_2\subseteq I_1$, so when we have both in the equality $\pi^{-1}(I_1)=\pi^{-1}(I_2)$, we will have both $I_1\subseteq I_2$ and $I_2\subseteq I_1$. Thus, $I_2=I_2$.

	In total, \autoref{eq:chainabovei} now provides us with a chain of $\dim R/I$ distinct primes above $I$ in $R$, showing that $\dim R/I\le d$. This finishes the proof, for we now have $d=\dim R/I$.
\end{proof}
\begin{lemma} \label{lem:codimisdescend}
	Fix a prime ideal $\mf p$ of a ring $R$. Then $\codim\mf p$ is equal to the length of the longest chain of primes
	\[\mf p_0\subsetneq\mf p_1\subsetneq\cdots\subsetneq\mf p_d\subsetneq\mf p,\]
	where $\mf p$ is included in the chain; I.e., $\codim\mf p=d+1$ here.
\end{lemma}
\begin{proof}
	Let $\iota:R\to R_\mf p$ denote the natural inclusion. In one direction, suppose that
	\[\mf p_0\subsetneq\mf p_1\subsetneq\cdots\subsetneq\mf p_d\subsetneq\mf p\]
	is the longest possible chain of distinct prime ideals below $\mf p$. Notably, none of these primes have intersection with $R\setminus\mf p$ because they are contained in $\mf p$, so \autoref{thm:localizedprimes} (combined with \autoref{lem:localidealsa} to give the inverse map) tells us that we have a chain of primes
	\[\mf p_0R_\mf p\subsetneq\mf p_1R_\mf p\subsetneq\cdots\subsetneq\mf p_dR_\mf p\subsetneq\mf pR_\mf p.\]
	By the bijection of \autoref{thm:localizedprimes}, we are getting an ascending chain of distinct primes, so we see $\dim R_\mf p\ge d+1$.

	In the other direction, suppose that we have chain of distinct primes
	\[\mf q_0\subsetneq\mf q_1\subsetneq\cdots\subsetneq\mf q_{\codim\mf p}.\]
	Notably, $R_\mf p$ is a local ring with maximal ideal $\mf pR_\mf p$, so  if the prime $\mf q_{\codim\mf p}$ is not equal to $\mf pR_\mf p$, then $\mf q_{\codim\mf p}\subsetneq\mf pR_\mf p$, allowing us to add an extra prime to the list and violating the definition of $\codim\mf p=\dim R_\mf p$. So we must have $\mf q_{\codim\mf p}=\mf pR_\mf p$.

	Now, applying \autoref{thm:localizedprimes} once more, we get a chain of primes
	\[\iota^{-1}\mf q_0\subsetneq\iota^{-1}\mf q_1\subsetneq\cdots\subsetneq\iota^{-1}\mf q_{\codim\mf p},\]
	which remain distinct by our bijection. In particular, $\iota^{-1}\mf q_{\codim\mf p}=\iota^{-1}\left(\mf pR_\mf p\right)=\mf p$ because $\iota^{-1}:I\mapsto\iota^{-1}I$ is inverse to $I\mapsto IR_\mf p$ by \autoref{lem:localidealsa}.

	Thus, we see that we have exhibited a chain of $\codim\mf p$ primes (strictly) below $\mf p$, so we see that $\dim R_\mf p\le d+1$ as well. Combining with our previous inequality, we are done.
\end{proof}
\begin{lemma}
	Fix an ideal $I$ of a ring $R$. The two definitions of codimension of an ideal coincide when $I$ is a prime ideal.
\end{lemma}
\begin{proof}
	For this proof, we will ignore the second definition when discussing codimension of a prime ideal. We need to show that
	\[\codim I=\min_{\mf p\supseteq I}\codim\mf p\]
	and in particular that one is finite when the other is finite.

	In one direction, note that $I\supseteq I$ implies that
	\[\codim I\ge\min_{\mf p\supseteq I}\codim\mf p\]
	because the ideal $I$ is contained in the ideal. In the other direction, we note that we can find a chain of primes
	\[\mf p_0\subsetneq\mf p_1\subsetneq\cdots\subseteq\mf p_{\codim I-1}\subsetneq I\]
	by \autoref{lem:codimisdescend}. As such, by tacking on the prime $\mf p\supseteq I$ to the end, we get a chain of length at least $\codim I$ distinct primes descending from $\mf p$, so \autoref{lem:codimisdescend} again tells us that
	\[\codim\mf p\ge\codim I.\]
	It follows that $\min_{\mf p\supseteq I}\mf p\ge\codim I$, and this inequality finishes the proof.
\end{proof}

\subsection{Bounds on Dimension}
These results give us the following proposition, which finishes our well-definedness checks.
\begin{prop}
	Fix a ring $R$ such that $\dim R$ is finite. Then, for any proper ideal $I$, both $\dim I$ and $\codim I$ are finite.
\end{prop}
\begin{proof}
	We prove the statements in steps.
	\begin{itemize}
		\item We show that $\dim I$ is finite. Well, by \autoref{lem:dimisascend}, we note that $\dim I$ is equal to the length of the longest possible chain of distinct primes
		\[I\subseteq\mf p_0\subsetneq\mf p_1\subsetneq\cdots\subsetneq\mf p_d.\]
		However, ignoring the $I$ and viewing this as a chain of distinct primes in $R$, we see that $d\le\dim R$ is forced, and in particular, $\dim I$ must be finite.
		\item We show that $\codim\mf p$ is finite when $\mf p$ is a prime ideal. By \autoref{lem:codimisdescend}, we note that $\codim\mf p$ is equal to the length of the longest possible chain of distinct primes
		\[\mf p_0\subsetneq\mf p_1\subsetneq\cdots\subsetneq\mf p_d=\mf p.\]
		Again ignoring the $\mf p$ at the end and viewing this as a chain of distinct primes in $R$, we see that $d\le\dim R$ is forced, and in particular, $\codim\mf p$ must be finite.
		\item We show that $\codim I$ is finite when $I$ is any ideal. Well, we note that $I$ is contained in some maximal and hence prime ideal because $I$ is proper, so
		\[\{\codim\mf p:\mf p\supseteq I\}\]
		is nonempty and only contains natural numbers by our previous checks. So the well-ordering of $\NN$ promises us that we have a minimum, finishing.
		\qedhere
	\end{itemize}
\end{proof}
With that out of the way, here are some examples.
\begin{example}
	Fix $R:=\ZZ$, which has $\dim\ZZ=1$. Then $\codim(0)=\dim\ZZ_{(0)}=\dim\QQ=0$; in fact, $\dim(0)=1$.
\end{example}
\begin{example}
	Similarly, if $p$ is a positive prime, one can show that
	\[\codim(p)=\dim\ZZ_p=1\]
	by showing that $\ZZ_p$ is a principal ideal domain whose principal ideals take the form $\left(p^\bullet\right)$. On the other hand, $\dim(p)=\dim\ZZ/p\ZZ=0$ because $\ZZ/p\ZZ$ is a field.
\end{example}
In all these examples, we see that
\[\dim\mf p+\codim\mf p\stackrel?=\dim R.\]
This equality need not hold in general, as we will show in a second, but we do have the following.
\begin{proposition} \label{prop:upperbounddimension}
	Fix $\mf p$ a prime ideal of a ring $R$. Then
	\[\dim\mf p+\codim\mf p\le\dim R.\]
\end{proposition}
\begin{proof}
	By \autoref{lem:codimisdescend}, we have a chain of distinct primes
	\[\mf p_0\subsetneq\mf p_1\subsetneq\cdots\subsetneq\mf p_{\codim\mf p}=\mf p.\]
	Similarly, by \autoref{lem:dimisascend}, we have a chain of distinct primes
	\[\mf p\subseteq\mf q_0\subsetneq\mf q_1\subsetneq\cdots\subseteq\mf q_{\dim\mf p}.\]
	By maximality, we note that we need $\mf p=\mf q_0$, lest we be able to make this chain longer by taking on $\mf p\subsetneq\mf q_0$ at the front. As such, we can zipper our two chains together into a long chain
	\[\mf p_0\subsetneq\mf p_1\subsetneq\cdots\subsetneq\mf p_{\codim\mf p}=\mf p=\mf q_0\subsetneq\mf q_1\subsetneq\mf q_2\subsetneq\cdots\subsetneq\mf q_{\dim\mf p}.\]
	This chain has length $\codim\mf p+\dim\mf p$, which must be less than or equal to $\dim R$ because we have constructed a chain of distinct primes in $R$. This finishes.
\end{proof}
\begin{remark}
	Equality in \autoref{prop:upperbounddimension} holds for affine domains (i.e., the ring of functions over a reduced variety).
\end{remark}
For the sake of examples, we pick up the following computation.
\begin{lemma} \label{lem:primesinprods}
	Fix rings $R_1$ and $R_2$, and let $\pi_1:R_1\times R_2\to R_1$ and $\pi_1:R_1\times R_2\to R_2$ be the natural projections. If $\mf p\subseteq R_1\times R_2$ is a prime ideal, then one of the following is true.
	\begin{itemize}
		\item $\mf p=\pi_1\mf p\times R_2$, and $\pi_1\mf p$ is prime.
		\item $\mf p=R_1\times\pi_2\mf p$, and $\pi_2\mf p$ is prime.
	\end{itemize}
	Conversely, if $\mf p_1\subseteq R_1$ is prime, then $\mf p_1\times R_2\subseteq R_1\times R_2$ is a prime. Similarly, if $\mf p_2\subseteq R_2$ is prime, then $R_1\times\mf p_2\subseteq R_1\times R_2$ is prime.
\end{lemma}
\begin{proof}
	We start with the first statement; let $\mf p\subseteq R_1\times R_2$ be prime. Note that $(0,1)\cdot(1,0)=(0,0)\in\mf p$, so primality forces $(0,1)\in\mf p$ or $(1,0)\in\mf p$. By swapping $R_1$ and $R_2$, we may say (without loss of generality) that $(0,1)\in\mf p$ and show that $\mf p=\pi_1\mf p\times R_2$. We will show the inclusions separately.
	\begin{itemize}
		\item We show $\mf p\subseteq\pi_1\mf p\times R_2$. Indeed, pick up $(a,b)\in\mf p$. Then $a=\pi_1(a,b)\in\pi_1\mf p$, so $(a,b)\in\pi_1\mf p\times R_2$.
		\item We show $\pi_1\mf p\times R_2\subseteq\mf p$. Indeed, pick up any $(a,b)\in\pi_1\mf p\times R_2$. Because $a\in\pi_1\mf p$, pulling back along $\pi_1$ promises some $b'\in R_2$ such that $(a,b')\in\mf p$. But then we note that $(0,1)\in\mf p$ implies that
		\[(a,b')+(b-b')\cdot(0,1)=(a,b)\in\mf p\]
		as well, finishing.
	\end{itemize}
	Thus, $\mf p=\pi_1\mf p\times R_2$. It remains to show that $\pi_1\mf p$ is prime. Well, if $a_1a_2\in\pi_1\mf p$, then $(a_1a_2,0)\in\mf p_1\times R_2=\mf p$, so
	\[(a_1,0)\cdot(a_2,0)\in\mf p.\]
	Thus, $(a_1,0)\in\mf p$ or $(a_2,0)\in\mf p$, so $a_1\in\pi_1\mf p$ or $a_2\in\pi_1\mf p$.

	We now show the second part of the statement. On one hand, if $\mf p_1\subseteq R_1$ is prime, then we see immediately that $\pi_1^{-1}\mf p_1=\mf p_1\times R_2$ is prime. Similarly, if $\mf p_2\subseteq R_2$ is prime, then again we have that $\pi_2^{-1}\mf p_2=R_1\times\mf p_2$ is prime.
\end{proof}
\begin{corollary} \label{cor:dimofprods}
	Fix rings $R_1$ and $R_2$ with finite dimension. Then
	\[\dim(R_1\times R_2)=\max\{\dim R_1,\dim R_2\}.\]
\end{corollary}
\begin{proof}
	We show the inequalities separately.
	\begin{itemize}
		\item We show $\dim(R_1\times R_2)\ge\max\{\dim R_1,\dim R_2\}$. Indeed, we will show that $\dim(R_1\times R_2)\ge\dim R_1$, and then swapping the roles of $R_1$ and $R_2$ will show that $\dim(R_1\times R_2)\ge\dim R_2$ as well, finishing.

		Well, set $d:=\dim R_1$, and suppose that we have a chain of primes
		\[\mf p_0\subsetneq\mf p_1\subsetneq\cdots\subsetneq\mf p_d\]
		in $R_1$. Then \autoref{lem:primesinprods} gives us the chain of primes
		\[(\mf p_0\times R_2)\subseteq(\mf p_1\times R_2)\subseteq\cdots\subseteq(\mf p_d\times R_2).\]
		Notably, these primes are still distinct because $a\in\mf p_{k+1}\setminus\mf p_k$ has $(a,0)\in(\mf p_{k+1}\times R_2)\setminus(\mf p_k\times R_2)$. Thus, we have a chain of $\dim R_1$ distinct primes in $\dim(R_1\times R_2)$, so $\dim(R_1\times R_2)\ge\dim R_1$ follows.
		
		\item We show $\dim(R_1\times R_2)\le\max\{\dim R_1,\dim R_2\}$. Suppose that we have a chain of distinct primes
		\[\mf p_0\subsetneq\mf p_1\subsetneq\cdots\subsetneq\mf p_d\]
		in $R_1\times R_2$. Our goal is to show that $d\le\max\{\dim R_1,\dim R_2\}$. Now, \autoref{lem:primesinprods} $\mf p_0\in\{\pi_1\mf p_0\times R_2,R_1\times\pi_2\mf p_0\}$, so without loss of generality, we will assume that $\mf p_0=\pi_1\mf p_0\times R_2$; otherwise, we can swap the roles of $R_1$ and $R_2$ everywhere. Notably, the quantity $\max\{\dim R_1,\dim R_2\}$ is symmetric in $R_1$ and $R_2$.

		However, this implies that $(0,1)\in\pi_1\mf p_0\times R_2=\mf p_0$, so
		\[(0,1)\in\pi_1\mf p_k\]
		for each $\mf p_k$. So, using the proof of \autoref{lem:primesinprods}, we see that this implies $\mf p_k=\pi_1\mf p_k\times R_2$ for all $k$. Thus, our chain of primes now looks like
		\[(\pi_1\mf p_0\times R_2)\subsetneq(\pi_1\mf p_1\times R_2)\subsetneq\cdots\subsetneq(\pi_1\mf p_d\times R_2).\]
		In particular, applying $\pi_1$ gives us a chain of primes (by \autoref{lem:primesinprods})
		\[\mf p_0\subseteq\mf p_1\subseteq\cdots\subseteq\mf p_d\]
		in $R_1$. Now, we note distinctness: for any $k$, we see $(a,0)\in(\pi_1\mf p_{k+1}\times R_2)\setminus(\pi_2\mf p_k\times R_2)$ implies that $a\in\pi_1\mf p_{k+1}$. However, $a\in\pi_1\mf p_k$ would imply that $(a,0)\in\pi_1\mf p_k\times R_2$, which is false, so instead we must have $a\in\mf p_{k+1}\setminus\mf p_k$, so the above chain is indeed made of distinct primes.

		Thus, $d\le\dim R_1\le\max\{\dim R_1,\dim R_2\}$. This finishes.
	\end{itemize}
	Having shown both inequalities, we conclude $\dim(R_1\times R_2)=\max\{\dim R_1,\dim R_2\}$. So we are done.
\end{proof}
\begin{remark}
	By induction, we see that any $n\in\NN$ and rings $\{R_k\}_{k=1}^n$ will have
	\[\dim\prod_{k=1}^nR_k=\max\{\dim R_k:1\le k\le n\}.\]
	We won't talk about infinite products because they should mostly be infinite-dimensional. I don't think we have the machinery to talk about this here, but we refer to \href{https://mathoverflow.net/q/90980/473811}{mo90980}.
\end{remark}
And here is an example computation.
\begin{example}
	Let $R_1:=k[x]$ and $R_2:=k[x,y]$ and consider $R:=k[x]\times k[y,z]$, which is the coordinate ring of the disjoint union of a line and a plane.
	\begin{itemize}
		\item Note $\dim R=\max\{1,2\}=2$ by \autoref{cor:dimofprods}.
		\item Any prime below $(x)\times R_2$ needs to have the form $\mf p\times R_2$ (essentially by the argument above), but the only prime $\mf p$ below $(x)$ is $(0)$ because $k[x]$ is a principal ideal domain, so all nonzero primes are maximal. Thus, $\codim((x)\times R_2)=1$.
		\item Again, any prime above $(x)\times R_2$ needs to have the form $\mf p\times R_2$, but $(x)$ is a maximal ideal, so there is no such prime, so $\dim((x)\times R_2)=0$.
	\end{itemize}
	Computing, we see that $\dim R=2>1+0=\codim((x)\times R_2)+\dim((x)\times R_2)$, manifesting the lack of equality in \autoref{prop:upperbounddimension}.
\end{example}

\subsection{Dimension in Families}
Here is a basic example of an affine variety.
\begin{proposition}
	Fix $R$ a ring.
	\begin{listalph}
		\item We have $\dim R=0$ if and only if $R$ is Artinian. In this case, $R$ is the product of finitely many Artinian local rings.
		\item If $X$ is an algebraic set, then $\dim A(X)=0$ if and only if $X$ is finite.
	\end{listalph}
\end{proposition}
In algebraic geometry, we are interested in families of varieties, which in our algebraic context means morphisms of algebras. A helpful case to consider will be when we take an integral extension; this corresponds to the notion of a finite morphism of algebraic sets.
\begin{restatable}{proposition}{intextensiondimension}
	Fix a ring homomorphism $\varphi:R\to S$ which makes $S$ into an integral $R$-algebra. Then, for any $\mf p\in\op{Spec}R$ such that $\ker\varphi\subseteq\mf p$, there exists $\mf q\in\op{Spec}S$ such that
	\[\mf p=\varphi^{-1}(\mf q).\]
	In fact, for any ideal $I\subseteq S$, we have $\dim S/I=\dim R/\varphi^{-1}(I)$.
\end{restatable}
\begin{proof}
	By replacing $R$ with $R/\ker\varphi$, we may assume that $\varphi$ is an embedding. Now the point is to lift our prime $\mf p$ upwards, which we know will give us our prime $\mf q$ such that $\mf p=\mf q\cap R=\varphi^{-1}(\mf q)$.

	For the latter statement, we first mod out by $I$ to not have to worry about quotients, and we note that any chain
	\[\mf p_0\subseteq\mf p_1\subseteq\cdots\subseteq\mf p_n\subseteq R\]
	can be lifted to a chain
	\[\mf q_0\subseteq\mf q_1\subseteq\cdots\subseteq\mf q_n.\]
	In fact, we know that the lifts $\mf q_\bullet$ of a particular prime $\mf p$ are incomparable, so we cannot make a chain like the one above longer, lest we be able to pull it back to $R$ for a longer chain. This finishes proving the dimension statement.
\end{proof}
\begin{corollary}
	Fix $\varphi:X\to Y$ a morphism of algebraic varieties giving rise to a map $\varphi^*:A(Y)\to A(X)$. Further, suppose $A(X)$ is a finitely generated $A(Y)$-module. Then the following are true.
	\begin{listalph}
		\item The fibers of $\varphi$ are finite.
		\item If $Z\subseteq X$ is Zariski closed, then $\varphi(Z)\subseteq Y$ is also Zariski closed.
		\item If $\varphi^*$ is an injection, then $\varphi$ is surjective.
	\end{listalph}
\end{corollary}
\begin{proof}
	We go one at a time.
	\begin{listalph}
		\item Fix a maximal ideal $\mf m\subseteq R$. We want to compute the coordinate ring $S/\mf mS$; in particular, we note
		\[\dim S/\mf mS=\dim R/\varphi^{-1}(\mf mS)=\dim R/\mf m=0,\]
		so the corresponding algebraic set is finite.
		\item We will show (c) first.
		\item Again, pick up a maximal ideal $\mf m\subseteq R$, which is prime. Lifting to $S$, we can find some prime ideal $\mf q\in\op{Spec}S$ such that $\mf q\cap R=\mf m$, so because of the aforementioned incomparability, we conclude that $\mf q$ must be maximal now. This gives our surjectivity. % \todo{wat}
		\setcounter{enumii}{1}
		\item The point is to look at $R/\ker\varphi$ so that $Z(\ker\varphi)=\overline{\varphi(X)}$. At this point, we can apply (c) to see that $\varphi$ is surjecting onto a Zariski closed set.
		\qedhere
	\end{listalph}
\end{proof}
\begin{example}
	Fix $S:=k[x,y]/\left(x-y^2\right)$ and $R:=k[x]$ so that we have a mapping $R\into S$. The mapping between the algebraic curves is in fact surjective, though this is not apparent from the image in $\RR$.
\end{example}
We close this discussion with the following lemma.
\begin{lem}
	Fix a multiplicatively closed subset $U\subseteq R$, and set $S:=R\left[U^{-1}\right]$, which gives the natural map $\varphi:R\to S$. Then, for any prime $\mf p\subseteq R\left[U^{-1}\right]$, we have
	\[\codim\varphi^{-1}(\mf p)=\codim\mf p.\]
\end{lem}
\begin{proof}
	Proceed directly from the definition and how our primes behave in localization.
\end{proof}

\subsection{The Principal Ideal Theorem}
Here is our statement.
\begin{restatable}[Principal ideal]{theorem}{pidtheorem}
	Fix a Noetherian ring $R$. Given $x\in R$, set $\mf p$ to be a minimal prime over $(x)$. Then
	\[\codim\mf p\le1.\]
\end{restatable}
\begin{proof}
	By moving from $R$ to $R_\mf p$, we may assume that $R$ is local with maximal ideal $\mf p$. We will show that, if we can find a prime $\mf q\subsetneq\mf p$ is strictly smaller than $\mf p$, then $\codim\mf q=0$, which will be enough. As such, we look at $R_\mf q$ and show that the ideal $\mf q_\mf q$ is nilpotent so that it has codimension $0$. With this in mind, we set
	\[\mf q^{(n)}:=\mf q_\mf q^n\cap R=\{r\in R:rs\in\mf q^n\text{ for some }s\notin\mf q\}.\]
	We now return to our hypotheses. The fact that $\mf p$ is minimal over $(x)$ implies that $\mf p/(x)$ is a maximal (by being local) and minimal ideal of $R/(x)$, % \todo{is p actually a minimal ideal}
	so $R/(x)$ is an Artinian ring! As such, the descending chain
	\[\mf q^{(1)}+(x)\supseteq\mf q^{(n)}+(x)\subseteq\cdots\]
	must stabilize eventually. So we find our $n$ for which $\mf q^{(n)}+(x)=\mf q^{(n+1)}+(x)$. In particular, $\mf q^{(n)}\subseteq\mf q^{(n+1)}+(x)$, so
	\[\mf q^{(n)}=x\mf q^{(n)}+\mf q^{(n+1)}.\]
	Thus, Nakayama's lemma (note that $x$ lives in the Jacobson radical) tells us that $\mf q^{(n)}=\mf q^{(n+1)}$. But now, looking in $R_\mf q$, which is again a local ring, we see that $\mf q^{(n)}=\mf q^{(n+1)}$ forces $\mf q^{(n)}=0$, which is what we wanted.
\end{proof}
\begin{remark}
	The analogous statement in linear algebra is that the codimension of a line in a space is $1$ if the equation has a nonzero solution and $0$ otherwise. More rigorously, by the implicit function theorem in differential geometry, having one equation in a tangent space will have a solution set with either the same dimension or one fewer dimension.
\end{remark}
We can extend this result to any finitely generated ideal by an induction.
\begin{theorem}
	Fix a Noetherian ring $R$ and a minimal prime $\mf p$ over the (finitely generated) ideal $I=(x_1,\ldots,x_s)\subseteq R$. Then $\codim\mf p\le s$.
\end{theorem}
\begin{proof}
	We proceed by induction. We have already done the case of $s=1$. For the inductive step, we would like some prime $\mf p_1$ containing $\mf p$ which is minimal over an ideal generated by $s-1$ elements.

	Well, if $x_s\in\mf p_1$, then $\mf p=\mf p_1$ will do, so we assume henceforth that $x_s\notin\mf p_1$. As before, we may pass to $R_\mf p$ to assume that $R$ is local with maximal ideal $\mf p$. The idea, now, is to note that
	\[\mf p/(x_1,\ldots,x_s)\]
	is nilpotent, using the same argument as in the previous theorem. Thus, there exists $m$ such that
	\[x_i^n\equiv0\pmod{\mf p_1,x_s}\]
	for any $i$. As such, we can write
	\[x_i^n=a_ix_s+y_i,\]
	where $y_i\in\mf p_1$. So now we claim that $\mf p_1$ is minimal over $(y_1,\ldots,y_{s-1})$, which holds by more or less looking at it, I guess. So we are done by induction.
\end{proof}
\begin{remark}
	The analogous statement in linear algebra is that we now have $s$ equations, which will give rise to codimension $s$.
\end{remark}
We close with some applications.
\begin{example}
	Fix $R:=k[x_1,\ldots,x_n]$. Then the codimension of $\mf p:=(x_1,\ldots,x_r)$ is upper-bounded by $r$ by the above theorem, but we also have a chain
	\[(0)\subseteq(x_1)\subseteq(x_1,x_2)\subseteq\cdots(x_1,\ldots,x_r)=\mf p,\]
	so $\codim\mf p=r$ follows.
\end{example}
\begin{restatable}{cor}{pidthmconverse}
	Fix $\mf p$ a prime ideal of a ring $R$ with codimension $r$. Then there are elements $x_1,\ldots,x_r$ such that $\mf p$ is minimal over $(x_1,\ldots,x_r)$.
\end{restatable} % \todo{sharpness?} Z[sqrt{-5}] with (2,1+sqrt(-5)) I guess
\begin{proof}
	The point is to do an induction. Starting with $r=1$, we choose a minimal prime. Then we can choose an element $x_2$ which does not live in any of these finitely many minimal primes and finish by induction.
\end{proof}